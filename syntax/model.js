var qE=Object.create;var Fs=Object.defineProperty;var FE=Object.getOwnPropertyDescriptor;var _E=Object.getOwnPropertyNames;var jE=Object.getPrototypeOf,HE=Object.prototype.hasOwnProperty;var WE=(t,e,r)=>e in t?Fs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Yt=(t,e)=>()=>(t&&(e=t(t=0)),e);var ee=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ce=(t,e)=>{for(var r in e)Fs(t,r,{get:e[r],enumerable:!0})},Vy=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of _E(e))!HE.call(t,s)&&s!==r&&Fs(t,s,{get:()=>e[s],enumerable:!(i=FE(e,s))||i.enumerable});return t};var zn=(t,e,r)=>(r=t!=null?qE(jE(t)):{},Vy(e||!t||!t.__esModule?Fs(r,"default",{value:t,enumerable:!0}):r,t)),Qt=t=>Vy(Fs({},"__esModule",{value:!0}),t);var Ky=(t,e,r)=>(WE(t,typeof e!="symbol"?e+"":e,r),r);var Me=ee(pt=>{"use strict";pt.AtKeyword=3;pt.BadString=6;pt.BadUrl=8;pt.CDC=15;pt.CDO=14;pt.Colon=16;pt.Comma=18;pt.Comment=25;pt.Delim=9;pt.Dimension=12;pt.EOF=0;pt.Function=2;pt.Hash=4;pt.Ident=1;pt.LeftCurlyBracket=23;pt.LeftParenthesis=21;pt.LeftSquareBracket=19;pt.Number=10;pt.Percentage=11;pt.RightCurlyBracket=24;pt.RightParenthesis=22;pt.RightSquareBracket=20;pt.Semicolon=17;pt.String=5;pt.Url=7;pt.WhiteSpace=13});var Bn=ee(Dt=>{"use strict";function hi(t){return t>=48&&t<=57}function UE(t){return hi(t)||t>=65&&t<=70||t>=97&&t<=102}function Yy(t){return t>=65&&t<=90}function Qy(t){return t>=97&&t<=122}function Jy(t){return Yy(t)||Qy(t)}function Xy(t){return t>=128}function _s(t){return Jy(t)||Xy(t)||t===95}function $E(t){return _s(t)||hi(t)||t===45}function Zy(t){return t>=0&&t<=8||t===11||t>=14&&t<=31||t===127}function Sf(t){return t===10||t===13||t===12}function ev(t){return Sf(t)||t===32||t===9}function kf(t,e){return!(t!==92||Sf(e)||e===0)}function GE(t,e,r){return t===45?_s(e)||e===45||kf(e,r):_s(t)?!0:t===92?kf(t,e):!1}function VE(t,e,r){return t===43||t===45?hi(e)?2:e===46&&hi(r)?3:0:t===46?hi(e)?2:0:hi(t)?1:0}function KE(t){return t===65279||t===65534?1:0}var Cf=new Array(128),tv=128,nv=130,rv=131,Af=132,iv=133;for(let t=0;t<Cf.length;t++)Cf[t]=ev(t)&&nv||hi(t)&&rv||_s(t)&&Af||Zy(t)&&iv||t||tv;function YE(t){return t<128?Cf[t]:Af}Dt.DigitCategory=rv;Dt.EofCategory=tv;Dt.NameStartCategory=Af;Dt.NonPrintableCategory=iv;Dt.WhiteSpaceCategory=nv;Dt.charCodeCategory=YE;Dt.isBOM=KE;Dt.isDigit=hi;Dt.isHexDigit=UE;Dt.isIdentifierStart=GE;Dt.isLetter=Jy;Dt.isLowercaseLetter=Qy;Dt.isName=$E;Dt.isNameStart=_s;Dt.isNewline=Sf;Dt.isNonAscii=Xy;Dt.isNonPrintable=Zy;Dt.isNumberStart=VE;Dt.isUppercaseLetter=Yy;Dt.isValidEscape=kf;Dt.isWhiteSpace=ev});var Sr=ee(Gn=>{"use strict";var mn=Bn();function wo(t,e){return e<t.length?t.charCodeAt(e):0}function ov(t,e,r){return r===13&&wo(t,e+1)===10?2:1}function sv(t,e,r){let i=t.charCodeAt(e);return mn.isUppercaseLetter(i)&&(i=i|32),i===r}function QE(t,e,r,i){if(r-e!==i.length||e<0||r>t.length)return!1;for(let s=e;s<r;s++){let a=i.charCodeAt(s-e),f=t.charCodeAt(s);if(mn.isUppercaseLetter(f)&&(f=f|32),f!==a)return!1}return!0}function JE(t,e){for(;e>=0&&mn.isWhiteSpace(t.charCodeAt(e));e--);return e+1}function XE(t,e){for(;e<t.length&&mn.isWhiteSpace(t.charCodeAt(e));e++);return e}function ec(t,e){for(;e<t.length&&mn.isDigit(t.charCodeAt(e));e++);return e}function Tf(t,e){if(e+=2,mn.isHexDigit(wo(t,e-1))){for(let i=Math.min(t.length,e+5);e<i&&mn.isHexDigit(wo(t,e));e++);let r=wo(t,e);mn.isWhiteSpace(r)&&(e+=ov(t,e,r))}return e}function ZE(t,e){for(;e<t.length;e++){let r=t.charCodeAt(e);if(!mn.isName(r)){if(mn.isValidEscape(r,wo(t,e+1))){e=Tf(t,e)-1;continue}break}}return e}function eD(t,e){let r=t.charCodeAt(e);if((r===43||r===45)&&(r=t.charCodeAt(e+=1)),mn.isDigit(r)&&(e=ec(t,e+1),r=t.charCodeAt(e)),r===46&&mn.isDigit(t.charCodeAt(e+1))&&(e+=2,e=ec(t,e)),sv(t,e,101)){let i=0;r=t.charCodeAt(e+1),(r===45||r===43)&&(i=1,r=t.charCodeAt(e+2)),mn.isDigit(r)&&(e=ec(t,e+1+i+1))}return e}function tD(t,e){for(;e<t.length;e++){let r=t.charCodeAt(e);if(r===41){e++;break}mn.isValidEscape(r,wo(t,e+1))&&(e=Tf(t,e))}return e}function nD(t){if(t.length===1&&!mn.isHexDigit(t.charCodeAt(0)))return t[0];let e=parseInt(t,16);return(e===0||e>=55296&&e<=57343||e>1114111)&&(e=65533),String.fromCodePoint(e)}Gn.cmpChar=sv;Gn.cmpStr=QE;Gn.consumeBadUrlRemnants=tD;Gn.consumeEscaped=Tf;Gn.consumeName=ZE;Gn.consumeNumber=eD;Gn.decodeEscaped=nD;Gn.findDecimalNumberEnd=ec;Gn.findWhiteSpaceEnd=XE;Gn.findWhiteSpaceStart=JE;Gn.getNewlineLength=ov});var js=ee((ZW,av)=>{"use strict";var rD=["EOF-token","ident-token","function-token","at-keyword-token","hash-token","string-token","bad-string-token","url-token","bad-url-token","delim-token","number-token","percentage-token","dimension-token","whitespace-token","CDO-token","CDC-token","colon-token","semicolon-token","comma-token","[-token","]-token","(-token",")-token","{-token","}-token"];av.exports=rD});var Lf=ee(lv=>{"use strict";function iD(t=null,e){return t===null||t.length<e?new Uint32Array(Math.max(e+1024,16384)):t}lv.adoptBuffer=iD});var Df=ee(hv=>{"use strict";var cv=Lf(),oD=Bn(),uv=10,sD=12,fv=13;function dv(t){let e=t.source,r=e.length,i=e.length>0?oD.isBOM(e.charCodeAt(0)):0,s=cv.adoptBuffer(t.lines,r),a=cv.adoptBuffer(t.columns,r),f=t.startLine,d=t.startColumn;for(let g=i;g<r;g++){let p=e.charCodeAt(g);s[g]=f,a[g]=d++,(p===uv||p===fv||p===sD)&&(p===fv&&g+1<r&&e.charCodeAt(g+1)===uv&&(g++,s[g]=f,a[g]=d),f++,d=1)}s[r]=f,a[r]=d,t.lines=s,t.columns=a,t.computed=!0}var Ef=class{constructor(){this.lines=null,this.columns=null,this.computed=!1}setSource(e,r=0,i=1,s=1){this.source=e,this.startOffset=r,this.startLine=i,this.startColumn=s,this.computed=!1}getLocation(e,r){return this.computed||dv(this),{source:r,offset:this.startOffset+e,line:this.lines[e],column:this.columns[e]}}getLocationRange(e,r,i){return this.computed||dv(this),{source:i,start:{offset:this.startOffset+e,line:this.lines[e],column:this.columns[e]},end:{offset:this.startOffset+r,line:this.lines[r],column:this.columns[r]}}}};hv.OffsetToLocation=Ef});var tc=ee(gv=>{"use strict";var pv=Lf(),aD=Sr(),lD=js(),Wt=Me(),Vn=16777215,pi=24,cD=new Map([[Wt.Function,Wt.RightParenthesis],[Wt.LeftParenthesis,Wt.RightParenthesis],[Wt.LeftSquareBracket,Wt.RightSquareBracket],[Wt.LeftCurlyBracket,Wt.RightCurlyBracket]]),Nf=class{constructor(e,r){this.setSource(e,r)}reset(){this.eof=!1,this.tokenIndex=-1,this.tokenType=0,this.tokenStart=this.firstCharOffset,this.tokenEnd=this.firstCharOffset}setSource(e="",r=()=>{}){e=String(e||"");let i=e.length,s=pv.adoptBuffer(this.offsetAndType,e.length+1),a=pv.adoptBuffer(this.balance,e.length+1),f=0,d=0,g=0,p=-1;for(this.offsetAndType=null,this.balance=null,r(e,(y,v,w)=>{switch(y){default:a[f]=i;break;case d:{let k=g&Vn;for(g=a[k],d=g>>pi,a[f]=k,a[k++]=f;k<f;k++)a[k]===i&&(a[k]=f);break}case Wt.LeftParenthesis:case Wt.Function:case Wt.LeftSquareBracket:case Wt.LeftCurlyBracket:a[f]=g,d=cD.get(y),g=d<<pi|f;break}s[f++]=y<<pi|w,p===-1&&(p=v)}),s[f]=Wt.EOF<<pi|i,a[f]=i,a[i]=i;g!==0;){let y=g&Vn;g=a[y],a[y]=i}this.source=e,this.firstCharOffset=p===-1?0:p,this.tokenCount=f,this.offsetAndType=s,this.balance=a,this.reset(),this.next()}lookupType(e){return e+=this.tokenIndex,e<this.tokenCount?this.offsetAndType[e]>>pi:Wt.EOF}lookupOffset(e){return e+=this.tokenIndex,e<this.tokenCount?this.offsetAndType[e-1]&Vn:this.source.length}lookupValue(e,r){return e+=this.tokenIndex,e<this.tokenCount?aD.cmpStr(this.source,this.offsetAndType[e-1]&Vn,this.offsetAndType[e]&Vn,r):!1}getTokenStart(e){return e===this.tokenIndex?this.tokenStart:e>0?e<this.tokenCount?this.offsetAndType[e-1]&Vn:this.offsetAndType[this.tokenCount]&Vn:this.firstCharOffset}substrToCursor(e){return this.source.substring(e,this.tokenStart)}isBalanceEdge(e){return this.balance[this.tokenIndex]<e}isDelim(e,r){return r?this.lookupType(r)===Wt.Delim&&this.source.charCodeAt(this.lookupOffset(r))===e:this.tokenType===Wt.Delim&&this.source.charCodeAt(this.tokenStart)===e}skip(e){let r=this.tokenIndex+e;r<this.tokenCount?(this.tokenIndex=r,this.tokenStart=this.offsetAndType[r-1]&Vn,r=this.offsetAndType[r],this.tokenType=r>>pi,this.tokenEnd=r&Vn):(this.tokenIndex=this.tokenCount,this.next())}next(){let e=this.tokenIndex+1;e<this.tokenCount?(this.tokenIndex=e,this.tokenStart=this.tokenEnd,e=this.offsetAndType[e],this.tokenType=e>>pi,this.tokenEnd=e&Vn):(this.eof=!0,this.tokenIndex=this.tokenCount,this.tokenType=Wt.EOF,this.tokenStart=this.tokenEnd=this.source.length)}skipSC(){for(;this.tokenType===Wt.WhiteSpace||this.tokenType===Wt.Comment;)this.next()}skipUntilBalanced(e,r){let i=e,s,a;e:for(;i<this.tokenCount;i++){if(s=this.balance[i],s<e)break e;switch(a=i>0?this.offsetAndType[i-1]&Vn:this.firstCharOffset,r(this.source.charCodeAt(a))){case 1:break e;case 2:i++;break e;default:this.balance[s]===i&&(i=s)}}this.skip(i-this.tokenIndex)}forEachToken(e){for(let r=0,i=this.firstCharOffset;r<this.tokenCount;r++){let s=i,a=this.offsetAndType[r],f=a&Vn,d=a>>pi;i=f,e(d,s,f,r)}}dump(){let e=new Array(this.tokenCount);return this.forEachToken((r,i,s,a)=>{e[a]={idx:a,type:lD[r],chunk:this.source.substring(i,s),balance:this.balance[a]}}),e}};gv.TokenStream=Nf});var Hs=ee(Ae=>{"use strict";var Le=Me(),We=Bn(),dt=Sr(),uD=js(),fD=Df(),dD=tc();function hD(t,e){function r(v){return v<d?t.charCodeAt(v):0}function i(){if(p=dt.consumeNumber(t,p),We.isIdentifierStart(r(p),r(p+1),r(p+2))){y=Le.Dimension,p=dt.consumeName(t,p);return}if(r(p)===37){y=Le.Percentage,p++;return}y=Le.Number}function s(){let v=p;if(p=dt.consumeName(t,p),dt.cmpStr(t,v,p,"url")&&r(p)===40){if(p=dt.findWhiteSpaceEnd(t,p+1),r(p)===34||r(p)===39){y=Le.Function,p=v+4;return}f();return}if(r(p)===40){y=Le.Function,p++;return}y=Le.Ident}function a(v){for(v||(v=r(p++)),y=Le.String;p<t.length;p++){let w=t.charCodeAt(p);switch(We.charCodeCategory(w)){case v:p++;return;case We.WhiteSpaceCategory:if(We.isNewline(w)){p+=dt.getNewlineLength(t,p,w),y=Le.BadString;return}break;case 92:if(p===t.length-1)break;let k=r(p+1);We.isNewline(k)?p+=dt.getNewlineLength(t,p+1,k):We.isValidEscape(w,k)&&(p=dt.consumeEscaped(t,p)-1);break}}}function f(){for(y=Le.Url,p=dt.findWhiteSpaceEnd(t,p);p<t.length;p++){let v=t.charCodeAt(p);switch(We.charCodeCategory(v)){case 41:p++;return;case We.WhiteSpaceCategory:if(p=dt.findWhiteSpaceEnd(t,p),r(p)===41||p>=t.length){p<t.length&&p++;return}p=dt.consumeBadUrlRemnants(t,p),y=Le.BadUrl;return;case 34:case 39:case 40:case We.NonPrintableCategory:p=dt.consumeBadUrlRemnants(t,p),y=Le.BadUrl;return;case 92:if(We.isValidEscape(v,r(p+1))){p=dt.consumeEscaped(t,p)-1;break}p=dt.consumeBadUrlRemnants(t,p),y=Le.BadUrl;return}}}t=String(t||"");let d=t.length,g=We.isBOM(r(0)),p=g,y;for(;p<d;){let v=t.charCodeAt(p);switch(We.charCodeCategory(v)){case We.WhiteSpaceCategory:y=Le.WhiteSpace,p=dt.findWhiteSpaceEnd(t,p+1);break;case 34:a();break;case 35:We.isName(r(p+1))||We.isValidEscape(r(p+1),r(p+2))?(y=Le.Hash,p=dt.consumeName(t,p+1)):(y=Le.Delim,p++);break;case 39:a();break;case 40:y=Le.LeftParenthesis,p++;break;case 41:y=Le.RightParenthesis,p++;break;case 43:We.isNumberStart(v,r(p+1),r(p+2))?i():(y=Le.Delim,p++);break;case 44:y=Le.Comma,p++;break;case 45:We.isNumberStart(v,r(p+1),r(p+2))?i():r(p+1)===45&&r(p+2)===62?(y=Le.CDC,p=p+3):We.isIdentifierStart(v,r(p+1),r(p+2))?s():(y=Le.Delim,p++);break;case 46:We.isNumberStart(v,r(p+1),r(p+2))?i():(y=Le.Delim,p++);break;case 47:r(p+1)===42?(y=Le.Comment,p=t.indexOf("*/",p+2),p=p===-1?t.length:p+2):(y=Le.Delim,p++);break;case 58:y=Le.Colon,p++;break;case 59:y=Le.Semicolon,p++;break;case 60:r(p+1)===33&&r(p+2)===45&&r(p+3)===45?(y=Le.CDO,p=p+4):(y=Le.Delim,p++);break;case 64:We.isIdentifierStart(r(p+1),r(p+2),r(p+3))?(y=Le.AtKeyword,p=dt.consumeName(t,p+1)):(y=Le.Delim,p++);break;case 91:y=Le.LeftSquareBracket,p++;break;case 92:We.isValidEscape(v,r(p+1))?s():(y=Le.Delim,p++);break;case 93:y=Le.RightSquareBracket,p++;break;case 123:y=Le.LeftCurlyBracket,p++;break;case 125:y=Le.RightCurlyBracket,p++;break;case We.DigitCategory:i();break;case We.NameStartCategory:s();break;default:y=Le.Delim,p++}e(y,g,g=p)}}Ae.AtKeyword=Le.AtKeyword;Ae.BadString=Le.BadString;Ae.BadUrl=Le.BadUrl;Ae.CDC=Le.CDC;Ae.CDO=Le.CDO;Ae.Colon=Le.Colon;Ae.Comma=Le.Comma;Ae.Comment=Le.Comment;Ae.Delim=Le.Delim;Ae.Dimension=Le.Dimension;Ae.EOF=Le.EOF;Ae.Function=Le.Function;Ae.Hash=Le.Hash;Ae.Ident=Le.Ident;Ae.LeftCurlyBracket=Le.LeftCurlyBracket;Ae.LeftParenthesis=Le.LeftParenthesis;Ae.LeftSquareBracket=Le.LeftSquareBracket;Ae.Number=Le.Number;Ae.Percentage=Le.Percentage;Ae.RightCurlyBracket=Le.RightCurlyBracket;Ae.RightParenthesis=Le.RightParenthesis;Ae.RightSquareBracket=Le.RightSquareBracket;Ae.Semicolon=Le.Semicolon;Ae.String=Le.String;Ae.Url=Le.Url;Ae.WhiteSpace=Le.WhiteSpace;Ae.tokenTypes=Le;Ae.DigitCategory=We.DigitCategory;Ae.EofCategory=We.EofCategory;Ae.NameStartCategory=We.NameStartCategory;Ae.NonPrintableCategory=We.NonPrintableCategory;Ae.WhiteSpaceCategory=We.WhiteSpaceCategory;Ae.charCodeCategory=We.charCodeCategory;Ae.isBOM=We.isBOM;Ae.isDigit=We.isDigit;Ae.isHexDigit=We.isHexDigit;Ae.isIdentifierStart=We.isIdentifierStart;Ae.isLetter=We.isLetter;Ae.isLowercaseLetter=We.isLowercaseLetter;Ae.isName=We.isName;Ae.isNameStart=We.isNameStart;Ae.isNewline=We.isNewline;Ae.isNonAscii=We.isNonAscii;Ae.isNonPrintable=We.isNonPrintable;Ae.isNumberStart=We.isNumberStart;Ae.isUppercaseLetter=We.isUppercaseLetter;Ae.isValidEscape=We.isValidEscape;Ae.isWhiteSpace=We.isWhiteSpace;Ae.cmpChar=dt.cmpChar;Ae.cmpStr=dt.cmpStr;Ae.consumeBadUrlRemnants=dt.consumeBadUrlRemnants;Ae.consumeEscaped=dt.consumeEscaped;Ae.consumeName=dt.consumeName;Ae.consumeNumber=dt.consumeNumber;Ae.decodeEscaped=dt.decodeEscaped;Ae.findDecimalNumberEnd=dt.findDecimalNumberEnd;Ae.findWhiteSpaceEnd=dt.findWhiteSpaceEnd;Ae.findWhiteSpaceStart=dt.findWhiteSpaceStart;Ae.getNewlineLength=dt.getNewlineLength;Ae.tokenNames=uD;Ae.OffsetToLocation=fD.OffsetToLocation;Ae.TokenStream=dD.TokenStream;Ae.tokenize=hD});var zi=ee(mv=>{"use strict";var xo=null,Tn=class{static createItem(e){return{prev:null,next:null,data:e}}constructor(){this.head=null,this.tail=null,this.cursor=null}createItem(e){return Tn.createItem(e)}allocateCursor(e,r){let i;return xo!==null?(i=xo,xo=xo.cursor,i.prev=e,i.next=r,i.cursor=this.cursor):i={prev:e,next:r,cursor:this.cursor},this.cursor=i,i}releaseCursor(){let{cursor:e}=this;this.cursor=e.cursor,e.prev=null,e.next=null,e.cursor=xo,xo=e}updateCursors(e,r,i,s){let{cursor:a}=this;for(;a!==null;)a.prev===e&&(a.prev=r),a.next===i&&(a.next=s),a=a.cursor}*[Symbol.iterator](){for(let e=this.head;e!==null;e=e.next)yield e.data}get size(){let e=0;for(let r=this.head;r!==null;r=r.next)e++;return e}get isEmpty(){return this.head===null}get first(){return this.head&&this.head.data}get last(){return this.tail&&this.tail.data}fromArray(e){let r=null;this.head=null;for(let i of e){let s=Tn.createItem(i);r!==null?r.next=s:this.head=s,s.prev=r,r=s}return this.tail=r,this}toArray(){return[...this]}toJSON(){return[...this]}forEach(e,r=this){let i=this.allocateCursor(null,this.head);for(;i.next!==null;){let s=i.next;i.next=s.next,e.call(r,s.data,s,this)}this.releaseCursor()}forEachRight(e,r=this){let i=this.allocateCursor(this.tail,null);for(;i.prev!==null;){let s=i.prev;i.prev=s.prev,e.call(r,s.data,s,this)}this.releaseCursor()}reduce(e,r,i=this){let s=this.allocateCursor(null,this.head),a=r,f;for(;s.next!==null;)f=s.next,s.next=f.next,a=e.call(i,a,f.data,f,this);return this.releaseCursor(),a}reduceRight(e,r,i=this){let s=this.allocateCursor(this.tail,null),a=r,f;for(;s.prev!==null;)f=s.prev,s.prev=f.prev,a=e.call(i,a,f.data,f,this);return this.releaseCursor(),a}some(e,r=this){for(let i=this.head;i!==null;i=i.next)if(e.call(r,i.data,i,this))return!0;return!1}map(e,r=this){let i=new Tn;for(let s=this.head;s!==null;s=s.next)i.appendData(e.call(r,s.data,s,this));return i}filter(e,r=this){let i=new Tn;for(let s=this.head;s!==null;s=s.next)e.call(r,s.data,s,this)&&i.appendData(s.data);return i}nextUntil(e,r,i=this){if(e===null)return;let s=this.allocateCursor(null,e);for(;s.next!==null;){let a=s.next;if(s.next=a.next,r.call(i,a.data,a,this))break}this.releaseCursor()}prevUntil(e,r,i=this){if(e===null)return;let s=this.allocateCursor(e,null);for(;s.prev!==null;){let a=s.prev;if(s.prev=a.prev,r.call(i,a.data,a,this))break}this.releaseCursor()}clear(){this.head=null,this.tail=null}copy(){let e=new Tn;for(let r of this)e.appendData(r);return e}prepend(e){return this.updateCursors(null,e,this.head,e),this.head!==null?(this.head.prev=e,e.next=this.head):this.tail=e,this.head=e,this}prependData(e){return this.prepend(Tn.createItem(e))}append(e){return this.insert(e)}appendData(e){return this.insert(Tn.createItem(e))}insert(e,r=null){if(r!==null)if(this.updateCursors(r.prev,e,r,e),r.prev===null){if(this.head!==r)throw new Error("before doesn't belong to list");this.head=e,r.prev=e,e.next=r,this.updateCursors(null,e)}else r.prev.next=e,e.prev=r.prev,r.prev=e,e.next=r;else this.updateCursors(this.tail,e,null,e),this.tail!==null?(this.tail.next=e,e.prev=this.tail):this.head=e,this.tail=e;return this}insertData(e,r){return this.insert(Tn.createItem(e),r)}remove(e){if(this.updateCursors(e,e.prev,e,e.next),e.prev!==null)e.prev.next=e.next;else{if(this.head!==e)throw new Error("item doesn't belong to list");this.head=e.next}if(e.next!==null)e.next.prev=e.prev;else{if(this.tail!==e)throw new Error("item doesn't belong to list");this.tail=e.prev}return e.prev=null,e.next=null,e}push(e){this.insert(Tn.createItem(e))}pop(){return this.tail!==null?this.remove(this.tail):null}unshift(e){this.prepend(Tn.createItem(e))}shift(){return this.head!==null?this.remove(this.head):null}prependList(e){return this.insertList(e,this.head)}appendList(e){return this.insertList(e)}insertList(e,r){return e.head===null?this:(r!=null?(this.updateCursors(r.prev,e.tail,r,e.head),r.prev!==null?(r.prev.next=e.head,e.head.prev=r.prev):this.head=e.head,r.prev=e.tail,e.tail.next=r):(this.updateCursors(this.tail,e.tail,null,e.head),this.tail!==null?(this.tail.next=e.head,e.head.prev=this.tail):this.head=e.head,this.tail=e.tail),e.head=null,e.tail=null,this)}replace(e,r){"head"in r?this.insertList(r,e):this.insert(r,e),this.remove(e)}};mv.List=Tn});var nc=ee(yv=>{"use strict";function pD(t,e){let r=Object.create(SyntaxError.prototype),i=new Error;return Object.assign(r,{name:t,message:e,get stack(){return(i.stack||"").replace(/^(.+\n){1,3}/,`${t}: ${e}
`)}})}yv.createCustomError=pD});var kv=ee(xv=>{"use strict";var gD=nc(),Mf=100,vv=60,bv="    ";function wv({source:t,line:e,column:r},i){function s(y,v){return a.slice(y,v).map((w,k)=>String(y+k+1).padStart(g)+" |"+w).join(`
`)}let a=t.split(/\r\n?|\n|\f/),f=Math.max(1,e-i)-1,d=Math.min(e+i,a.length+1),g=Math.max(4,String(d).length)+1,p=0;r+=(bv.length-1)*(a[e-1].substr(0,r-1).match(/\t/g)||[]).length,r>Mf&&(p=r-vv+3,r=vv-2);for(let y=f;y<=d;y++)y>=0&&y<a.length&&(a[y]=a[y].replace(/\t/g,bv),a[y]=(p>0&&a[y].length>p?"\u2026":"")+a[y].substr(p,Mf-2)+(a[y].length>p+Mf-1?"\u2026":""));return[s(f,e),new Array(r+g+2).join("-")+"^",s(e,d)].filter(Boolean).join(`
`)}function mD(t,e,r,i,s){return Object.assign(gD.createCustomError("SyntaxError",t),{source:e,offset:r,line:i,column:s,sourceFragment(f){return wv({source:e,line:i,column:s},isNaN(f)?0:f)},get formattedMessage(){return`Parse error: ${t}
`+wv({source:e,line:i,column:s},2)}})}xv.SyntaxError=mD});var Av=ee(Sv=>{"use strict";var Cv=Me();function yD(t){let e=this.createList(),r=!1,i={recognizer:t};for(;!this.eof;){switch(this.tokenType){case Cv.Comment:this.next();continue;case Cv.WhiteSpace:r=!0,this.next();continue}let s=t.getNode.call(this,i);if(s===void 0)break;r&&(t.onWhiteSpace&&t.onWhiteSpace.call(this,s,e,i),r=!1),e.push(s)}return r&&t.onWhiteSpace&&t.onWhiteSpace.call(this,null,e,i),e}Sv.readSequence=yD});var Ov=ee(Mv=>{"use strict";var Tv=zi(),Lv=kv(),vD=Hs(),bD=Av(),wD=Df(),xD=tc(),Ws=Sr(),Ar=Me(),kD=js(),Ev=()=>{},CD=33,SD=35,Of=59,Dv=123,Nv=0;function AD(t){return function(){return this[t]()}}function Pf(t){let e=Object.create(null);for(let r in t){let i=t[r],s=i.parse||i;s&&(e[r]=s)}return e}function TD(t){let e={context:Object.create(null),scope:Object.assign(Object.create(null),t.scope),atrule:Pf(t.atrule),pseudo:Pf(t.pseudo),node:Pf(t.node)};for(let r in t.parseContext)switch(typeof t.parseContext[r]){case"function":e.context[r]=t.parseContext[r];break;case"string":e.context[r]=AD(t.parseContext[r]);break}return{config:e,...e,...e.node}}function LD(t){let e="",r="<unknown>",i=!1,s=Ev,a=!1,f=new wD.OffsetToLocation,d=Object.assign(new xD.TokenStream,TD(t||{}),{parseAtrulePrelude:!0,parseRulePrelude:!0,parseValue:!0,parseCustomProperty:!1,readSequence:bD.readSequence,consumeUntilBalanceEnd:()=>0,consumeUntilLeftCurlyBracket(p){return p===Dv?1:0},consumeUntilLeftCurlyBracketOrSemicolon(p){return p===Dv||p===Of?1:0},consumeUntilExclamationMarkOrSemicolon(p){return p===CD||p===Of?1:0},consumeUntilSemicolonIncluded(p){return p===Of?2:0},createList(){return new Tv.List},createSingleNodeList(p){return new Tv.List().appendData(p)},getFirstListNode(p){return p&&p.first},getLastListNode(p){return p&&p.last},parseWithFallback(p,y){let v=this.tokenIndex;try{return p.call(this)}catch(w){if(a)throw w;let k=y.call(this,v);return a=!0,s(w,k),a=!1,k}},lookupNonWSType(p){let y;do if(y=this.lookupType(p++),y!==Ar.WhiteSpace)return y;while(y!==Nv);return Nv},charCodeAt(p){return p>=0&&p<e.length?e.charCodeAt(p):0},substring(p,y){return e.substring(p,y)},substrToCursor(p){return this.source.substring(p,this.tokenStart)},cmpChar(p,y){return Ws.cmpChar(e,p,y)},cmpStr(p,y,v){return Ws.cmpStr(e,p,y,v)},consume(p){let y=this.tokenStart;return this.eat(p),this.substrToCursor(y)},consumeFunctionName(){let p=e.substring(this.tokenStart,this.tokenEnd-1);return this.eat(Ar.Function),p},consumeNumber(p){let y=e.substring(this.tokenStart,Ws.consumeNumber(e,this.tokenStart));return this.eat(p),y},eat(p){if(this.tokenType!==p){let y=kD[p].slice(0,-6).replace(/-/g," ").replace(/^./,k=>k.toUpperCase()),v=`${/[[\](){}]/.test(y)?`"${y}"`:y} is expected`,w=this.tokenStart;switch(p){case Ar.Ident:this.tokenType===Ar.Function||this.tokenType===Ar.Url?(w=this.tokenEnd-1,v="Identifier is expected but function found"):v="Identifier is expected";break;case Ar.Hash:this.isDelim(SD)&&(this.next(),w++,v="Name is expected");break;case Ar.Percentage:this.tokenType===Ar.Number&&(w=this.tokenEnd,v="Percent sign is expected");break}this.error(v,w)}this.next()},eatIdent(p){(this.tokenType!==Ar.Ident||this.lookupValue(0,p)===!1)&&this.error(`Identifier "${p}" is expected`),this.next()},eatDelim(p){this.isDelim(p)||this.error(`Delim "${String.fromCharCode(p)}" is expected`),this.next()},getLocation(p,y){return i?f.getLocationRange(p,y,r):null},getLocationFromList(p){if(i){let y=this.getFirstListNode(p),v=this.getLastListNode(p);return f.getLocationRange(y!==null?y.loc.start.offset-f.startOffset:this.tokenStart,v!==null?v.loc.end.offset-f.startOffset:this.tokenStart,r)}return null},error(p,y){let v=typeof y<"u"&&y<e.length?f.getLocation(y):this.eof?f.getLocation(Ws.findWhiteSpaceStart(e,e.length-1)):f.getLocation(this.tokenStart);throw new Lv.SyntaxError(p||"Unexpected input",e,v.offset,v.line,v.column)}});return Object.assign(function(p,y){e=p,y=y||{},d.setSource(e,vD.tokenize),f.setSource(e,y.offset,y.line,y.column),r=y.filename||"<unknown>",i=!!y.positions,s=typeof y.onParseError=="function"?y.onParseError:Ev,a=!1,d.parseAtrulePrelude="parseAtrulePrelude"in y?!!y.parseAtrulePrelude:!0,d.parseRulePrelude="parseRulePrelude"in y?!!y.parseRulePrelude:!0,d.parseValue="parseValue"in y?!!y.parseValue:!0,d.parseCustomProperty="parseCustomProperty"in y?!!y.parseCustomProperty:!1;let{context:v="default",onComment:w}=y;if(!(v in d.context))throw new Error("Unknown context `"+v+"`");typeof w=="function"&&d.forEachToken((T,L,A)=>{if(T===Ar.Comment){let N=d.getLocation(L,A),S=Ws.cmpStr(e,A-2,A,"*/")?e.slice(L+2,A-2):e.slice(L+2,A);w(S,N)}});let k=d.context[v].call(d,y);return d.eof||d.error(),k},{SyntaxError:Lv.SyntaxError,config:d.config})}Mv.createParser=LD});var Iv=ee(If=>{var Pv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");If.encode=function(t){if(0<=t&&t<Pv.length)return Pv[t];throw new TypeError("Must be between 0 and 63: "+t)};If.decode=function(t){var e=65,r=90,i=97,s=122,a=48,f=57,d=43,g=47,p=26,y=52;return e<=t&&t<=r?t-e:i<=t&&t<=s?t-i+p:a<=t&&t<=f?t-a+y:t==d?62:t==g?63:-1}});var Fv=ee(Bf=>{var zv=Iv(),zf=5,Bv=1<<zf,Rv=Bv-1,qv=Bv;function ED(t){return t<0?(-t<<1)+1:(t<<1)+0}function DD(t){var e=(t&1)===1,r=t>>1;return e?-r:r}Bf.encode=function(e){var r="",i,s=ED(e);do i=s&Rv,s>>>=zf,s>0&&(i|=qv),r+=zv.encode(i);while(s>0);return r};Bf.decode=function(e,r,i){var s=e.length,a=0,f=0,d,g;do{if(r>=s)throw new Error("Expected more digits in base 64 VLQ value.");if(g=zv.decode(e.charCodeAt(r++)),g===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));d=!!(g&qv),g&=Rv,a=a+(g<<f),f+=zf}while(d);i.value=DD(a),i.rest=r}});var rc=ee($t=>{function ND(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}$t.getArg=ND;var _v=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,MD=/^data:.+\,.+$/;function Us(t){var e=t.match(_v);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}$t.urlParse=Us;function ko(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}$t.urlGenerate=ko;var OD=32;function PD(t){var e=[];return function(r){for(var i=0;i<e.length;i++)if(e[i].input===r){var s=e[0];return e[0]=e[i],e[i]=s,e[0].result}var a=t(r);return e.unshift({input:r,result:a}),e.length>OD&&e.pop(),a}}var Rf=PD(function(e){var r=e,i=Us(e);if(i){if(!i.path)return e;r=i.path}for(var s=$t.isAbsolute(r),a=[],f=0,d=0;;)if(f=d,d=r.indexOf("/",f),d===-1){a.push(r.slice(f));break}else for(a.push(r.slice(f,d));d<r.length&&r[d]==="/";)d++;for(var g,p=0,d=a.length-1;d>=0;d--)g=a[d],g==="."?a.splice(d,1):g===".."?p++:p>0&&(g===""?(a.splice(d+1,p),p=0):(a.splice(d,2),p--));return r=a.join("/"),r===""&&(r=s?"/":"."),i?(i.path=r,ko(i)):r});$t.normalize=Rf;function jv(t,e){t===""&&(t="."),e===""&&(e=".");var r=Us(e),i=Us(t);if(i&&(t=i.path||"/"),r&&!r.scheme)return i&&(r.scheme=i.scheme),ko(r);if(r||e.match(MD))return e;if(i&&!i.host&&!i.path)return i.host=e,ko(i);var s=e.charAt(0)==="/"?e:Rf(t.replace(/\/+$/,"")+"/"+e);return i?(i.path=s,ko(i)):s}$t.join=jv;$t.isAbsolute=function(t){return t.charAt(0)==="/"||_v.test(t)};function ID(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var i=t.lastIndexOf("/");if(i<0||(t=t.slice(0,i),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}$t.relative=ID;var Hv=function(){var t=Object.create(null);return!("__proto__"in t)}();function Wv(t){return t}function zD(t){return Uv(t)?"$"+t:t}$t.toSetString=Hv?Wv:zD;function BD(t){return Uv(t)?t.slice(1):t}$t.fromSetString=Hv?Wv:BD;function Uv(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}function RD(t,e,r){var i=$r(t.source,e.source);return i!==0||(i=t.originalLine-e.originalLine,i!==0)||(i=t.originalColumn-e.originalColumn,i!==0||r)||(i=t.generatedColumn-e.generatedColumn,i!==0)||(i=t.generatedLine-e.generatedLine,i!==0)?i:$r(t.name,e.name)}$t.compareByOriginalPositions=RD;function qD(t,e,r){var i;return i=t.originalLine-e.originalLine,i!==0||(i=t.originalColumn-e.originalColumn,i!==0||r)||(i=t.generatedColumn-e.generatedColumn,i!==0)||(i=t.generatedLine-e.generatedLine,i!==0)?i:$r(t.name,e.name)}$t.compareByOriginalPositionsNoSource=qD;function FD(t,e,r){var i=t.generatedLine-e.generatedLine;return i!==0||(i=t.generatedColumn-e.generatedColumn,i!==0||r)||(i=$r(t.source,e.source),i!==0)||(i=t.originalLine-e.originalLine,i!==0)||(i=t.originalColumn-e.originalColumn,i!==0)?i:$r(t.name,e.name)}$t.compareByGeneratedPositionsDeflated=FD;function _D(t,e,r){var i=t.generatedColumn-e.generatedColumn;return i!==0||r||(i=$r(t.source,e.source),i!==0)||(i=t.originalLine-e.originalLine,i!==0)||(i=t.originalColumn-e.originalColumn,i!==0)?i:$r(t.name,e.name)}$t.compareByGeneratedPositionsDeflatedNoLine=_D;function $r(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}function jD(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=$r(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:$r(t.name,e.name)}$t.compareByGeneratedPositionsInflated=jD;function HD(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}$t.parseSourceMapInput=HD;function WD(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var i=Us(r);if(!i)throw new Error("sourceMapURL could not be parsed");if(i.path){var s=i.path.lastIndexOf("/");s>=0&&(i.path=i.path.substring(0,s+1))}e=jv(ko(i),e)}return Rf(e)}$t.computeSourceURL=WD});var Gv=ee($v=>{var qf=rc(),Ff=Object.prototype.hasOwnProperty,Bi=typeof Map<"u";function Gr(){this._array=[],this._set=Bi?new Map:Object.create(null)}Gr.fromArray=function(e,r){for(var i=new Gr,s=0,a=e.length;s<a;s++)i.add(e[s],r);return i};Gr.prototype.size=function(){return Bi?this._set.size:Object.getOwnPropertyNames(this._set).length};Gr.prototype.add=function(e,r){var i=Bi?e:qf.toSetString(e),s=Bi?this.has(e):Ff.call(this._set,i),a=this._array.length;(!s||r)&&this._array.push(e),s||(Bi?this._set.set(e,a):this._set[i]=a)};Gr.prototype.has=function(e){if(Bi)return this._set.has(e);var r=qf.toSetString(e);return Ff.call(this._set,r)};Gr.prototype.indexOf=function(e){if(Bi){var r=this._set.get(e);if(r>=0)return r}else{var i=qf.toSetString(e);if(Ff.call(this._set,i))return this._set[i]}throw new Error('"'+e+'" is not in the set.')};Gr.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)};Gr.prototype.toArray=function(){return this._array.slice()};$v.ArraySet=Gr});var Yv=ee(Kv=>{var Vv=rc();function UD(t,e){var r=t.generatedLine,i=e.generatedLine,s=t.generatedColumn,a=e.generatedColumn;return i>r||i==r&&a>=s||Vv.compareByGeneratedPositionsInflated(t,e)<=0}function ic(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}ic.prototype.unsortedForEach=function(e,r){this._array.forEach(e,r)};ic.prototype.add=function(e){UD(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))};ic.prototype.toArray=function(){return this._sorted||(this._array.sort(Vv.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};Kv.MappingList=ic});var Jv=ee(Qv=>{var $s=Fv(),Rt=rc(),oc=Gv().ArraySet,$D=Yv().MappingList;function Kn(t){t||(t={}),this._file=Rt.getArg(t,"file",null),this._sourceRoot=Rt.getArg(t,"sourceRoot",null),this._skipValidation=Rt.getArg(t,"skipValidation",!1),this._sources=new oc,this._names=new oc,this._mappings=new $D,this._sourcesContents=null}Kn.prototype._version=3;Kn.fromSourceMap=function(e){var r=e.sourceRoot,i=new Kn({file:e.file,sourceRoot:r});return e.eachMapping(function(s){var a={generated:{line:s.generatedLine,column:s.generatedColumn}};s.source!=null&&(a.source=s.source,r!=null&&(a.source=Rt.relative(r,a.source)),a.original={line:s.originalLine,column:s.originalColumn},s.name!=null&&(a.name=s.name)),i.addMapping(a)}),e.sources.forEach(function(s){var a=s;r!==null&&(a=Rt.relative(r,s)),i._sources.has(a)||i._sources.add(a);var f=e.sourceContentFor(s);f!=null&&i.setSourceContent(s,f)}),i};Kn.prototype.addMapping=function(e){var r=Rt.getArg(e,"generated"),i=Rt.getArg(e,"original",null),s=Rt.getArg(e,"source",null),a=Rt.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,i,s,a),s!=null&&(s=String(s),this._sources.has(s)||this._sources.add(s)),a!=null&&(a=String(a),this._names.has(a)||this._names.add(a)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:i!=null&&i.line,originalColumn:i!=null&&i.column,source:s,name:a})};Kn.prototype.setSourceContent=function(e,r){var i=e;this._sourceRoot!=null&&(i=Rt.relative(this._sourceRoot,i)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Rt.toSetString(i)]=r):this._sourcesContents&&(delete this._sourcesContents[Rt.toSetString(i)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};Kn.prototype.applySourceMap=function(e,r,i){var s=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);s=e.file}var a=this._sourceRoot;a!=null&&(s=Rt.relative(a,s));var f=new oc,d=new oc;this._mappings.unsortedForEach(function(g){if(g.source===s&&g.originalLine!=null){var p=e.originalPositionFor({line:g.originalLine,column:g.originalColumn});p.source!=null&&(g.source=p.source,i!=null&&(g.source=Rt.join(i,g.source)),a!=null&&(g.source=Rt.relative(a,g.source)),g.originalLine=p.line,g.originalColumn=p.column,p.name!=null&&(g.name=p.name))}var y=g.source;y!=null&&!f.has(y)&&f.add(y);var v=g.name;v!=null&&!d.has(v)&&d.add(v)},this),this._sources=f,this._names=d,e.sources.forEach(function(g){var p=e.sourceContentFor(g);p!=null&&(i!=null&&(g=Rt.join(i,g)),a!=null&&(g=Rt.relative(a,g)),this.setSourceContent(g,p))},this)};Kn.prototype._validateMapping=function(e,r,i,s){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!i&&!s)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&i)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:i,original:r,name:s}))}};Kn.prototype._serializeMappings=function(){for(var e=0,r=1,i=0,s=0,a=0,f=0,d="",g,p,y,v,w=this._mappings.toArray(),k=0,T=w.length;k<T;k++){if(p=w[k],g="",p.generatedLine!==r)for(e=0;p.generatedLine!==r;)g+=";",r++;else if(k>0){if(!Rt.compareByGeneratedPositionsInflated(p,w[k-1]))continue;g+=","}g+=$s.encode(p.generatedColumn-e),e=p.generatedColumn,p.source!=null&&(v=this._sources.indexOf(p.source),g+=$s.encode(v-f),f=v,g+=$s.encode(p.originalLine-1-s),s=p.originalLine-1,g+=$s.encode(p.originalColumn-i),i=p.originalColumn,p.name!=null&&(y=this._names.indexOf(p.name),g+=$s.encode(y-a),a=y)),d+=g}return d};Kn.prototype._generateSourcesContent=function(e,r){return e.map(function(i){if(!this._sourcesContents)return null;r!=null&&(i=Rt.relative(r,i));var s=Rt.toSetString(i);return Object.prototype.hasOwnProperty.call(this._sourcesContents,s)?this._sourcesContents[s]:null},this)};Kn.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e};Kn.prototype.toString=function(){return JSON.stringify(this.toJSON())};Qv.SourceMapGenerator=Kn});var eb=ee(Zv=>{"use strict";var GD=Jv(),Xv=new Set(["Atrule","Selector","Declaration"]);function VD(t){let e=new GD.SourceMapGenerator,r={line:1,column:0},i={line:0,column:0},s={line:1,column:0},a={generated:s},f=1,d=0,g=!1,p=t.node;t.node=function(w){if(w.loc&&w.loc.start&&Xv.has(w.type)){let k=w.loc.start.line,T=w.loc.start.column-1;(i.line!==k||i.column!==T)&&(i.line=k,i.column=T,r.line=f,r.column=d,g&&(g=!1,(r.line!==s.line||r.column!==s.column)&&e.addMapping(a)),g=!0,e.addMapping({source:w.loc.source,original:i,generated:r}))}p.call(this,w),g&&Xv.has(w.type)&&(s.line=f,s.column=d)};let y=t.emit;t.emit=function(w,k,T){for(let L=0;L<w.length;L++)w.charCodeAt(L)===10?(f++,d=0):d++;y(w,k,T)};let v=t.result;return t.result=function(){return g&&e.addMapping(a),{css:v(),map:e}},t}Zv.generateSourceMap=VD});var rb=ee(jf=>{"use strict";var Q=Me(),KD=43,YD=45,_f=(t,e)=>{if(t===Q.Delim&&(t=e),typeof t=="string"){let r=t.charCodeAt(0);return r>127?32768:r<<8}return t},tb=[[Q.Ident,Q.Ident],[Q.Ident,Q.Function],[Q.Ident,Q.Url],[Q.Ident,Q.BadUrl],[Q.Ident,"-"],[Q.Ident,Q.Number],[Q.Ident,Q.Percentage],[Q.Ident,Q.Dimension],[Q.Ident,Q.CDC],[Q.Ident,Q.LeftParenthesis],[Q.AtKeyword,Q.Ident],[Q.AtKeyword,Q.Function],[Q.AtKeyword,Q.Url],[Q.AtKeyword,Q.BadUrl],[Q.AtKeyword,"-"],[Q.AtKeyword,Q.Number],[Q.AtKeyword,Q.Percentage],[Q.AtKeyword,Q.Dimension],[Q.AtKeyword,Q.CDC],[Q.Hash,Q.Ident],[Q.Hash,Q.Function],[Q.Hash,Q.Url],[Q.Hash,Q.BadUrl],[Q.Hash,"-"],[Q.Hash,Q.Number],[Q.Hash,Q.Percentage],[Q.Hash,Q.Dimension],[Q.Hash,Q.CDC],[Q.Dimension,Q.Ident],[Q.Dimension,Q.Function],[Q.Dimension,Q.Url],[Q.Dimension,Q.BadUrl],[Q.Dimension,"-"],[Q.Dimension,Q.Number],[Q.Dimension,Q.Percentage],[Q.Dimension,Q.Dimension],[Q.Dimension,Q.CDC],["#",Q.Ident],["#",Q.Function],["#",Q.Url],["#",Q.BadUrl],["#","-"],["#",Q.Number],["#",Q.Percentage],["#",Q.Dimension],["#",Q.CDC],["-",Q.Ident],["-",Q.Function],["-",Q.Url],["-",Q.BadUrl],["-","-"],["-",Q.Number],["-",Q.Percentage],["-",Q.Dimension],["-",Q.CDC],[Q.Number,Q.Ident],[Q.Number,Q.Function],[Q.Number,Q.Url],[Q.Number,Q.BadUrl],[Q.Number,Q.Number],[Q.Number,Q.Percentage],[Q.Number,Q.Dimension],[Q.Number,"%"],[Q.Number,Q.CDC],["@",Q.Ident],["@",Q.Function],["@",Q.Url],["@",Q.BadUrl],["@","-"],["@",Q.CDC],[".",Q.Number],[".",Q.Percentage],[".",Q.Dimension],["+",Q.Number],["+",Q.Percentage],["+",Q.Dimension],["/","*"]],QD=tb.concat([[Q.Ident,Q.Hash],[Q.Dimension,Q.Hash],[Q.Hash,Q.Hash],[Q.AtKeyword,Q.LeftParenthesis],[Q.AtKeyword,Q.String],[Q.AtKeyword,Q.Colon],[Q.Percentage,Q.Percentage],[Q.Percentage,Q.Dimension],[Q.Percentage,Q.Function],[Q.Percentage,"-"],[Q.RightParenthesis,Q.Ident],[Q.RightParenthesis,Q.Function],[Q.RightParenthesis,Q.Percentage],[Q.RightParenthesis,Q.Dimension],[Q.RightParenthesis,Q.Hash],[Q.RightParenthesis,"-"]]);function nb(t){let e=new Set(t.map(([r,i])=>_f(r)<<16|_f(i)));return function(r,i,s){let a=_f(i,s),f=s.charCodeAt(0);return(f===YD&&i!==Q.Ident&&i!==Q.Function&&i!==Q.CDC||f===KD?e.has(r<<16|f<<8):e.has(r<<16|a))&&this.emit(" ",Q.WhiteSpace,!0),a}}var JD=nb(tb),XD=nb(QD);jf.safe=XD;jf.spec=JD});var sb=ee(ob=>{"use strict";var ZD=Hs(),eN=eb(),Hf=rb(),ib=Me(),tN=92;function nN(t,e){if(typeof e=="function"){let r=null;t.children.forEach(i=>{r!==null&&e.call(this,r),this.node(i),r=i});return}t.children.forEach(this.node,this)}function rN(t){ZD.tokenize(t,(e,r,i)=>{this.token(e,t.slice(r,i))})}function iN(t){let e=new Map;for(let r in t.node){let i=t.node[r];typeof(i.generate||i)=="function"&&e.set(r,i.generate||i)}return function(r,i){let s="",a=0,f={node(g){if(e.has(g.type))e.get(g.type).call(d,g);else throw new Error("Unknown node type: "+g.type)},tokenBefore:Hf.safe,token(g,p){a=this.tokenBefore(a,g,p),this.emit(p,g,!1),g===ib.Delim&&p.charCodeAt(0)===tN&&this.emit(`
`,ib.WhiteSpace,!0)},emit(g){s+=g},result(){return s}};i&&(typeof i.decorator=="function"&&(f=i.decorator(f)),i.sourceMap&&(f=eN.generateSourceMap(f)),i.mode in Hf&&(f.tokenBefore=Hf[i.mode]));let d={node:g=>f.node(g),children:nN,token:(g,p)=>f.token(g,p),tokenize:rN};return f.node(r),f.result()}}ob.createGenerator=iN});var lb=ee(ab=>{"use strict";var Wf=zi();function oN(t){return{fromPlainObject(e){return t(e,{enter(r){r.children&&!(r.children instanceof Wf.List)&&(r.children=new Wf.List().fromArray(r.children))}}),e},toPlainObject(e){return t(e,{leave(r){r.children&&r.children instanceof Wf.List&&(r.children=r.children.toArray())}}),e}}}ab.createConvertor=oN});var pb=ee(hb=>{"use strict";var{hasOwnProperty:Uf}=Object.prototype,Gs=function(){};function cb(t){return typeof t=="function"?t:Gs}function ub(t,e){return function(r,i,s){r.type===e&&t.call(this,r,i,s)}}function sN(t,e){let r=e.structure,i=[];for(let s in r){if(Uf.call(r,s)===!1)continue;let a=r[s],f={name:s,type:!1,nullable:!1};Array.isArray(a)||(a=[a]);for(let d of a)d===null?f.nullable=!0:typeof d=="string"?f.type="node":Array.isArray(d)&&(f.type="list");f.type&&i.push(f)}return i.length?{context:e.walkContext,fields:i}:null}function aN(t){let e={};for(let r in t.node)if(Uf.call(t.node,r)){let i=t.node[r];if(!i.structure)throw new Error("Missed `structure` field in `"+r+"` node type definition");e[r]=sN(r,i)}return e}function fb(t,e){let r=t.fields.slice(),i=t.context,s=typeof i=="string";return e&&r.reverse(),function(a,f,d,g){let p;s&&(p=f[i],f[i]=a);for(let y of r){let v=a[y.name];if(!y.nullable||v){if(y.type==="list"){if(e?v.reduceRight(g,!1):v.reduce(g,!1))return!0}else if(d(v))return!0}}s&&(f[i]=p)}}function db({StyleSheet:t,Atrule:e,Rule:r,Block:i,DeclarationList:s}){return{Atrule:{StyleSheet:t,Atrule:e,Rule:r,Block:i},Rule:{StyleSheet:t,Atrule:e,Rule:r,Block:i},Declaration:{StyleSheet:t,Atrule:e,Rule:r,Block:i,DeclarationList:s}}}function lN(t){let e=aN(t),r={},i={},s=Symbol("break-walk"),a=Symbol("skip-node");for(let p in e)Uf.call(e,p)&&e[p]!==null&&(r[p]=fb(e[p],!1),i[p]=fb(e[p],!0));let f=db(r),d=db(i),g=function(p,y){function v(N,S,M){let O=w.call(A,N,S,M);return O===s?!0:O===a?!1:!!(T.hasOwnProperty(N.type)&&T[N.type](N,A,v,L)||k.call(A,N,S,M)===s)}let w=Gs,k=Gs,T=r,L=(N,S,M,O)=>N||v(S,M,O),A={break:s,skip:a,root:p,stylesheet:null,atrule:null,atrulePrelude:null,rule:null,selector:null,block:null,declaration:null,function:null};if(typeof y=="function")w=y;else if(y&&(w=cb(y.enter),k=cb(y.leave),y.reverse&&(T=i),y.visit)){if(f.hasOwnProperty(y.visit))T=y.reverse?d[y.visit]:f[y.visit];else if(!e.hasOwnProperty(y.visit))throw new Error("Bad value `"+y.visit+"` for `visit` option (should be: "+Object.keys(e).sort().join(", ")+")");w=ub(w,y.visit),k=ub(k,y.visit)}if(w===Gs&&k===Gs)throw new Error("Neither `enter` nor `leave` walker handler is set or both aren't a function");v(p)};return g.break=s,g.skip=a,g.find=function(p,y){let v=null;return g(p,function(w,k,T){if(y.call(this,w,k,T))return v=w,s}),v},g.findLast=function(p,y){let v=null;return g(p,{reverse:!0,enter(w,k,T){if(y.call(this,w,k,T))return v=w,s}}),v},g.findAll=function(p,y){let v=[];return g(p,function(w,k,T){y.call(this,w,k,T)&&v.push(w)}),v},g}hb.createWalker=lN});var sc=ee(gb=>{"use strict";function cN(t){return t}function uN(t){let{min:e,max:r,comma:i}=t;return e===0&&r===0?i?"#?":"*":e===0&&r===1?"?":e===1&&r===0?i?"#":"+":e===1&&r===1?"":(i?"#":"")+(e===r?"{"+e+"}":"{"+e+","+(r!==0?r:"")+"}")}function fN(t){switch(t.type){case"Range":return" ["+(t.min===null?"-\u221E":t.min)+","+(t.max===null?"\u221E":t.max)+"]";default:throw new Error("Unknown node type `"+t.type+"`")}}function dN(t,e,r,i){let s=t.combinator===" "||i?t.combinator:" "+t.combinator+" ",a=t.terms.map(f=>$f(f,e,r,i)).join(s);return t.explicit||r?(i||a[0]===","?"[":"[ ")+a+(i?"]":" ]"):a}function $f(t,e,r,i){let s;switch(t.type){case"Group":s=dN(t,e,r,i)+(t.disallowEmpty?"!":"");break;case"Multiplier":return $f(t.term,e,r,i)+e(uN(t),t);case"Type":s="<"+t.name+(t.opts?e(fN(t.opts),t.opts):"")+">";break;case"Property":s="<'"+t.name+"'>";break;case"Keyword":s=t.name;break;case"AtKeyword":s="@"+t.name;break;case"Function":s=t.name+"(";break;case"String":case"Token":s=t.value;break;case"Comma":s=",";break;default:throw new Error("Unknown node type `"+t.type+"`")}return e(s,t)}function hN(t,e){let r=cN,i=!1,s=!1;return typeof e=="function"?r=e:e&&(i=!!e.forceBraces,s=!!e.compact,typeof e.decorate=="function"&&(r=e.decorate)),$f(t,r,i,s)}gb.generate=hN});var vb=ee(Gf=>{"use strict";var yb=nc(),pN=sc(),mb={offset:0,line:1,column:1};function gN(t,e){let r=t.tokens,i=t.longestMatch,s=i<r.length&&r[i].node||null,a=s!==e?s:null,f=0,d=0,g=0,p="",y,v;for(let w=0;w<r.length;w++){let k=r[w].value;w===i&&(d=k.length,f=p.length),a!==null&&r[w].node===a&&(w<=i?g++:g=0),p+=k}return i===r.length||g>1?(y=ac(a||e,"end")||Vs(mb,p),v=Vs(y)):(y=ac(a,"start")||Vs(ac(e,"start")||mb,p.slice(0,f)),v=ac(a,"end")||Vs(y,p.substr(f,d))),{css:p,mismatchOffset:f,mismatchLength:d,start:y,end:v}}function ac(t,e){let r=t&&t.loc&&t.loc[e];return r?"line"in r?Vs(r):r:null}function Vs({offset:t,line:e,column:r},i){let s={offset:t,line:e,column:r};if(i){let a=i.split(/\n|\r\n?|\f/);s.offset+=i.length,s.line+=a.length-1,s.column=a.length===1?s.column+i.length:a.pop().length+1}return s}var mN=function(t,e){let r=yb.createCustomError("SyntaxReferenceError",t+(e?" `"+e+"`":""));return r.reference=e,r},yN=function(t,e,r,i){let s=yb.createCustomError("SyntaxMatchError",t),{css:a,mismatchOffset:f,mismatchLength:d,start:g,end:p}=gN(i,r);return s.rawMessage=t,s.syntax=e?pN.generate(e):"<generic>",s.css=a,s.mismatchOffset=f,s.mismatchLength=d,s.message=t+`
  syntax: `+s.syntax+`
   value: `+(a||"<empty string>")+`
  --------`+new Array(s.mismatchOffset+1).join("-")+"^",Object.assign(s,g),s.loc={source:r&&r.loc&&r.loc.source||"<unknown>",start:g,end:p},s};Gf.SyntaxMatchError=yN;Gf.SyntaxReferenceError=mN});var uc=ee(Ks=>{"use strict";var lc=new Map,Co=new Map,cc=45,vN=xN,bN=kN,wN=Kf;function Vf(t,e){return e=e||0,t.length-e>=2&&t.charCodeAt(e)===cc&&t.charCodeAt(e+1)===cc}function Kf(t,e){if(e=e||0,t.length-e>=3&&t.charCodeAt(e)===cc&&t.charCodeAt(e+1)!==cc){let r=t.indexOf("-",e+2);if(r!==-1)return t.substring(e,r+1)}return""}function xN(t){if(lc.has(t))return lc.get(t);let e=t.toLowerCase(),r=lc.get(e);if(r===void 0){let i=Vf(e,0),s=i?"":Kf(e,0);r=Object.freeze({basename:e.substr(s.length),name:e,prefix:s,vendor:s,custom:i})}return lc.set(t,r),r}function kN(t){if(Co.has(t))return Co.get(t);let e=t,r=t[0];r==="/"?r=t[1]==="/"?"//":"/":r!=="_"&&r!=="*"&&r!=="$"&&r!=="#"&&r!=="+"&&r!=="&"&&(r="");let i=Vf(e,r.length);if(!i&&(e=e.toLowerCase(),Co.has(e))){let d=Co.get(e);return Co.set(t,d),d}let s=i?"":Kf(e,r.length),a=e.substr(0,r.length+s.length),f=Object.freeze({basename:e.substr(a.length),name:e.substr(r.length),hack:r,vendor:s,prefix:a,custom:i});return Co.set(t,f),f}Ks.isCustomProperty=Vf;Ks.keyword=vN;Ks.property=bN;Ks.vendorPrefix=wN});var Yf=ee(bb=>{"use strict";var CN=["initial","inherit","unset","revert","revert-layer"];bb.cssWideKeywords=CN});var kb=ee((S5,xb)=>{"use strict";var wb=Bn(),ar=Me(),Qf=Sr(),Qs=43,Tr=45,Jf=110,So=!0,SN=!1;function Zf(t,e){return t!==null&&t.type===ar.Delim&&t.value.charCodeAt(0)===e}function Ys(t,e,r){for(;t!==null&&(t.type===ar.WhiteSpace||t.type===ar.Comment);)t=r(++e);return e}function gi(t,e,r,i){if(!t)return 0;let s=t.value.charCodeAt(e);if(s===Qs||s===Tr){if(r)return 0;e++}for(;e<t.value.length;e++)if(!wb.isDigit(t.value.charCodeAt(e)))return 0;return i+1}function Xf(t,e,r){let i=!1,s=Ys(t,e,r);if(t=r(s),t===null)return e;if(t.type!==ar.Number)if(Zf(t,Qs)||Zf(t,Tr)){if(i=!0,s=Ys(r(++s),s,r),t=r(s),t===null||t.type!==ar.Number)return 0}else return e;if(!i){let a=t.value.charCodeAt(0);if(a!==Qs&&a!==Tr)return 0}return gi(t,i?0:1,i,s)}function AN(t,e){let r=0;if(!t)return 0;if(t.type===ar.Number)return gi(t,0,SN,r);if(t.type===ar.Ident&&t.value.charCodeAt(0)===Tr){if(!Qf.cmpChar(t.value,1,Jf))return 0;switch(t.value.length){case 2:return Xf(e(++r),r,e);case 3:return t.value.charCodeAt(2)!==Tr?0:(r=Ys(e(++r),r,e),t=e(r),gi(t,0,So,r));default:return t.value.charCodeAt(2)!==Tr?0:gi(t,3,So,r)}}else if(t.type===ar.Ident||Zf(t,Qs)&&e(r+1).type===ar.Ident){if(t.type!==ar.Ident&&(t=e(++r)),t===null||!Qf.cmpChar(t.value,0,Jf))return 0;switch(t.value.length){case 1:return Xf(e(++r),r,e);case 2:return t.value.charCodeAt(1)!==Tr?0:(r=Ys(e(++r),r,e),t=e(r),gi(t,0,So,r));default:return t.value.charCodeAt(1)!==Tr?0:gi(t,2,So,r)}}else if(t.type===ar.Dimension){let i=t.value.charCodeAt(0),s=i===Qs||i===Tr?1:0,a=s;for(;a<t.value.length&&wb.isDigit(t.value.charCodeAt(a));a++);return a===s||!Qf.cmpChar(t.value,a,Jf)?0:a+1===t.value.length?Xf(e(++r),r,e):t.value.charCodeAt(a+1)!==Tr?0:a+2===t.value.length?(r=Ys(e(++r),r,e),t=e(r),gi(t,0,So,r)):gi(t,a+2,So,r)}return 0}xb.exports=AN});var Tb=ee((A5,Ab)=>{"use strict";var TN=Bn(),Ri=Me(),LN=Sr(),EN=43,Cb=45,Sb=63,DN=117;function ed(t,e){return t!==null&&t.type===Ri.Delim&&t.value.charCodeAt(0)===e}function NN(t,e){return t.value.charCodeAt(0)===e}function Js(t,e,r){let i=0;for(let s=e;s<t.value.length;s++){let a=t.value.charCodeAt(s);if(a===Cb&&r&&i!==0)return Js(t,e+i+1,!1),6;if(!TN.isHexDigit(a)||++i>6)return 0}return i}function fc(t,e,r){if(!t)return 0;for(;ed(r(e),Sb);){if(++t>6)return 0;e++}return e}function MN(t,e){let r=0;if(t===null||t.type!==Ri.Ident||!LN.cmpChar(t.value,0,DN)||(t=e(++r),t===null))return 0;if(ed(t,EN))return t=e(++r),t===null?0:t.type===Ri.Ident?fc(Js(t,0,!0),++r,e):ed(t,Sb)?fc(1,++r,e):0;if(t.type===Ri.Number){let i=Js(t,1,!0);return i===0?0:(t=e(++r),t===null?r:t.type===Ri.Dimension||t.type===Ri.Number?!NN(t,Cb)||!Js(t,1,!1)?0:r+1:fc(i,r,e))}return t.type===Ri.Dimension?fc(Js(t,1,!0),++r,e):0}Ab.exports=MN});var Ib=ee(Xs=>{"use strict";var ON=Yf(),PN=kb(),IN=Tb(),be=Me(),dc=Bn(),td=Sr(),zN=["calc(","-moz-calc(","-webkit-calc("],nd=new Map([[be.Function,be.RightParenthesis],[be.LeftParenthesis,be.RightParenthesis],[be.LeftSquareBracket,be.RightSquareBracket],[be.LeftCurlyBracket,be.RightCurlyBracket]]);function lr(t,e){return e<t.length?t.charCodeAt(e):0}function Lb(t,e){return td.cmpStr(t,0,t.length,e)}function Eb(t,e){for(let r=0;r<e.length;r++)if(Lb(t,e[r]))return!0;return!1}function Db(t,e){return e!==t.length-2?!1:lr(t,e)===92&&dc.isDigit(lr(t,e+1))}function hc(t,e,r){if(t&&t.type==="Range"){let i=Number(r!==void 0&&r!==e.length?e.substr(0,r):e);if(isNaN(i)||t.min!==null&&i<t.min&&typeof t.min!="string"||t.max!==null&&i>t.max&&typeof t.max!="string")return!0}return!1}function BN(t,e){let r=0,i=[],s=0;e:do{switch(t.type){case be.RightCurlyBracket:case be.RightParenthesis:case be.RightSquareBracket:if(t.type!==r)break e;if(r=i.pop(),i.length===0){s++;break e}break;case be.Function:case be.LeftParenthesis:case be.LeftSquareBracket:case be.LeftCurlyBracket:i.push(r),r=nd.get(t.type);break}s++}while(t=e(s));return s}function Yn(t){return function(e,r,i){return e===null?0:e.type===be.Function&&Eb(e.value,zN)?BN(e,r):t(e,r,i)}}function yt(t){return function(e){return e===null||e.type!==t?0:1}}function RN(t){if(t===null||t.type!==be.Ident)return 0;let e=t.value.toLowerCase();return Eb(e,ON.cssWideKeywords)||Lb(e,"default")?0:1}function qN(t){return t===null||t.type!==be.Ident||lr(t.value,0)!==45||lr(t.value,1)!==45?0:1}function FN(t){if(t===null||t.type!==be.Hash)return 0;let e=t.value.length;if(e!==4&&e!==5&&e!==7&&e!==9)return 0;for(let r=1;r<e;r++)if(!dc.isHexDigit(lr(t.value,r)))return 0;return 1}function _N(t){return t===null||t.type!==be.Hash||!dc.isIdentifierStart(lr(t.value,1),lr(t.value,2),lr(t.value,3))?0:1}function jN(t,e){if(!t)return 0;let r=0,i=[],s=0;e:do{switch(t.type){case be.BadString:case be.BadUrl:break e;case be.RightCurlyBracket:case be.RightParenthesis:case be.RightSquareBracket:if(t.type!==r)break e;r=i.pop();break;case be.Semicolon:if(r===0)break e;break;case be.Delim:if(r===0&&t.value==="!")break e;break;case be.Function:case be.LeftParenthesis:case be.LeftSquareBracket:case be.LeftCurlyBracket:i.push(r),r=nd.get(t.type);break}s++}while(t=e(s));return s}function HN(t,e){if(!t)return 0;let r=0,i=[],s=0;e:do{switch(t.type){case be.BadString:case be.BadUrl:break e;case be.RightCurlyBracket:case be.RightParenthesis:case be.RightSquareBracket:if(t.type!==r)break e;r=i.pop();break;case be.Function:case be.LeftParenthesis:case be.LeftSquareBracket:case be.LeftCurlyBracket:i.push(r),r=nd.get(t.type);break}s++}while(t=e(s));return s}function Vr(t){return t&&(t=new Set(t)),function(e,r,i){if(e===null||e.type!==be.Dimension)return 0;let s=td.consumeNumber(e.value,0);if(t!==null){let a=e.value.indexOf("\\",s),f=a===-1||!Db(e.value,a)?e.value.substr(s):e.value.substring(s,a);if(t.has(f.toLowerCase())===!1)return 0}return hc(i,e.value,s)?0:1}}function WN(t,e,r){return t===null||t.type!==be.Percentage||hc(r,t.value,t.value.length-1)?0:1}function Nb(t){return typeof t!="function"&&(t=function(){return 0}),function(e,r,i){return e!==null&&e.type===be.Number&&Number(e.value)===0?1:t(e,r,i)}}function UN(t,e,r){if(t===null)return 0;let i=td.consumeNumber(t.value,0);return!(i===t.value.length)&&!Db(t.value,i)||hc(r,t.value,i)?0:1}function $N(t,e,r){if(t===null||t.type!==be.Number)return 0;let i=lr(t.value,0)===43||lr(t.value,0)===45?1:0;for(;i<t.value.length;i++)if(!dc.isDigit(lr(t.value,i)))return 0;return hc(r,t.value,i)?0:1}var Mb={"ident-token":yt(be.Ident),"function-token":yt(be.Function),"at-keyword-token":yt(be.AtKeyword),"hash-token":yt(be.Hash),"string-token":yt(be.String),"bad-string-token":yt(be.BadString),"url-token":yt(be.Url),"bad-url-token":yt(be.BadUrl),"delim-token":yt(be.Delim),"number-token":yt(be.Number),"percentage-token":yt(be.Percentage),"dimension-token":yt(be.Dimension),"whitespace-token":yt(be.WhiteSpace),"CDO-token":yt(be.CDO),"CDC-token":yt(be.CDC),"colon-token":yt(be.Colon),"semicolon-token":yt(be.Semicolon),"comma-token":yt(be.Comma),"[-token":yt(be.LeftSquareBracket),"]-token":yt(be.RightSquareBracket),"(-token":yt(be.LeftParenthesis),")-token":yt(be.RightParenthesis),"{-token":yt(be.LeftCurlyBracket),"}-token":yt(be.RightCurlyBracket)},Ob={string:yt(be.String),ident:yt(be.Ident),percentage:Yn(WN),zero:Nb(),number:Yn(UN),integer:Yn($N),"custom-ident":RN,"custom-property-name":qN,"hex-color":FN,"id-selector":_N,"an-plus-b":PN,urange:IN,"declaration-value":jN,"any-value":HN};function Pb(t){let{angle:e,decibel:r,frequency:i,flex:s,length:a,resolution:f,semitones:d,time:g}=t||{};return{dimension:Yn(Vr(null)),angle:Yn(Vr(e)),decibel:Yn(Vr(r)),frequency:Yn(Vr(i)),flex:Yn(Vr(s)),length:Yn(Nb(Vr(a))),resolution:Yn(Vr(f)),semitones:Yn(Vr(d)),time:Yn(Vr(g))}}function GN(t){return{...Mb,...Ob,...Pb(t)}}Xs.createDemensionTypes=Pb;Xs.createGenericTypes=GN;Xs.productionTypes=Ob;Xs.tokenTypes=Mb});var zb=ee(Kr=>{"use strict";var VN=["cm","mm","q","in","pt","pc","px","em","rem","ex","rex","cap","rcap","ch","rch","ic","ric","lh","rlh","vw","svw","lvw","dvw","vh","svh","lvh","dvh","vi","svi","lvi","dvi","vb","svb","lvb","dvb","vmin","svmin","lvmin","dvmin","vmax","svmax","lvmax","dvmax","cqw","cqh","cqi","cqb","cqmin","cqmax"],KN=["deg","grad","rad","turn"],YN=["s","ms"],QN=["hz","khz"],JN=["dpi","dpcm","dppx","x"],XN=["fr"],ZN=["db"],eM=["st"];Kr.angle=KN;Kr.decibel=ZN;Kr.flex=XN;Kr.frequency=QN;Kr.length=VN;Kr.resolution=JN;Kr.semitones=eM;Kr.time=YN});var Rb=ee((E5,Bb)=>{"use strict";var tM=Hs(),nM={decorator(t){let e=[],r=null;return{...t,node(i){let s=r;r=i,t.node.call(this,i),r=s},emit(i,s,a){e.push({type:s,value:i,node:a?null:r})},result(){return e}}}};function rM(t){let e=[];return tM.tokenize(t,(r,i,s)=>e.push({type:r,value:t.slice(i,s),node:null})),e}function iM(t,e){return typeof t=="string"?rM(t):e.generate(t,nM)}Bb.exports=iM});var rd=ee(qb=>{"use strict";var oM=nc();function sM(t,e,r){return Object.assign(oM.createCustomError("SyntaxError",t),{input:e,offset:r,rawMessage:t,message:t+`
  `+e+`
--`+new Array((r||e.length)+1).join("-")+"^"})}qb.SyntaxError=sM});var _b=ee(Fb=>{"use strict";var aM=rd(),lM=9,cM=10,uM=12,fM=13,dM=32,id=class{constructor(e){this.str=e,this.pos=0}charCodeAt(e){return e<this.str.length?this.str.charCodeAt(e):0}charCode(){return this.charCodeAt(this.pos)}nextCharCode(){return this.charCodeAt(this.pos+1)}nextNonWsCode(e){return this.charCodeAt(this.findWsEnd(e))}findWsEnd(e){for(;e<this.str.length;e++){let r=this.str.charCodeAt(e);if(r!==fM&&r!==cM&&r!==uM&&r!==dM&&r!==lM)break}return e}substringToPos(e){return this.str.substring(this.pos,this.pos=e)}eat(e){this.charCode()!==e&&this.error("Expect `"+String.fromCharCode(e)+"`"),this.pos++}peek(){return this.pos<this.str.length?this.str.charAt(this.pos++):""}error(e){throw new aM.SyntaxError(e,this.str,this.pos)}};Fb.Tokenizer=id});var bc=ee(Zb=>{"use strict";var hM=_b(),pM=9,gM=10,mM=12,yM=13,vM=32,Kb=33,ad=35,jb=38,pc=39,Yb=40,bM=41,Qb=42,ld=43,cd=44,Hb=45,ud=60,Jb=62,sd=63,wM=64,vc=91,fd=93,gc=123,Wb=124,Ub=125,$b=8734,Zs=new Uint8Array(128).map((t,e)=>/[a-zA-Z0-9\-]/.test(String.fromCharCode(e))?1:0),Gb={" ":1,"&&":2,"||":3,"|":4};function mc(t){return t.substringToPos(t.findWsEnd(t.pos))}function Ao(t){let e=t.pos;for(;e<t.str.length;e++){let r=t.str.charCodeAt(e);if(r>=128||Zs[r]===0)break}return t.pos===e&&t.error("Expect a keyword"),t.substringToPos(e)}function yc(t){let e=t.pos;for(;e<t.str.length;e++){let r=t.str.charCodeAt(e);if(r<48||r>57)break}return t.pos===e&&t.error("Expect a number"),t.substringToPos(e)}function xM(t){let e=t.str.indexOf("'",t.pos+1);return e===-1&&(t.pos=t.str.length,t.error("Expect an apostrophe")),t.substringToPos(e+1)}function Vb(t){let e=null,r=null;return t.eat(gc),e=yc(t),t.charCode()===cd?(t.pos++,t.charCode()!==Ub&&(r=yc(t))):r=e,t.eat(Ub),{min:Number(e),max:r?Number(r):0}}function kM(t){let e=null,r=!1;switch(t.charCode()){case Qb:t.pos++,e={min:0,max:0};break;case ld:t.pos++,e={min:1,max:0};break;case sd:t.pos++,e={min:0,max:1};break;case ad:t.pos++,r=!0,t.charCode()===gc?e=Vb(t):t.charCode()===sd?(t.pos++,e={min:0,max:0}):e={min:1,max:0};break;case gc:e=Vb(t);break;default:return null}return{type:"Multiplier",comma:r,min:e.min,max:e.max,term:null}}function To(t,e){let r=kM(t);return r!==null?(r.term=e,t.charCode()===ad&&t.charCodeAt(t.pos-1)===ld?To(t,r):r):e}function od(t){let e=t.peek();return e===""?null:{type:"Token",value:e}}function CM(t){let e;return t.eat(ud),t.eat(pc),e=Ao(t),t.eat(pc),t.eat(Jb),To(t,{type:"Property",name:e})}function SM(t){let e=null,r=null,i=1;return t.eat(vc),t.charCode()===Hb&&(t.peek(),i=-1),i==-1&&t.charCode()===$b?t.peek():(e=i*Number(yc(t)),Zs[t.charCode()]!==0&&(e+=Ao(t))),mc(t),t.eat(cd),mc(t),t.charCode()===$b?t.peek():(i=1,t.charCode()===Hb&&(t.peek(),i=-1),r=i*Number(yc(t)),Zs[t.charCode()]!==0&&(r+=Ao(t))),t.eat(fd),{type:"Range",min:e,max:r}}function AM(t){let e,r=null;return t.eat(ud),e=Ao(t),t.charCode()===Yb&&t.nextCharCode()===bM&&(t.pos+=2,e+="()"),t.charCodeAt(t.findWsEnd(t.pos))===vc&&(mc(t),r=SM(t)),t.eat(Jb),To(t,{type:"Type",name:e,opts:r})}function TM(t){let e=Ao(t);return t.charCode()===Yb?(t.pos++,{type:"Function",name:e}):To(t,{type:"Keyword",name:e})}function LM(t,e){function r(s,a){return{type:"Group",terms:s,combinator:a,disallowEmpty:!1,explicit:!1}}let i;for(e=Object.keys(e).sort((s,a)=>Gb[s]-Gb[a]);e.length>0;){i=e.shift();let s=0,a=0;for(;s<t.length;s++){let f=t[s];f.type==="Combinator"&&(f.value===i?(a===-1&&(a=s-1),t.splice(s,1),s--):(a!==-1&&s-a>1&&(t.splice(a,s-a,r(t.slice(a,s),i)),s=a+1),a=-1))}a!==-1&&e.length&&t.splice(a,s-a,r(t.slice(a,s),i))}return i}function Xb(t){let e=[],r={},i,s=null,a=t.pos;for(;i=DM(t);)i.type!=="Spaces"&&(i.type==="Combinator"?((s===null||s.type==="Combinator")&&(t.pos=a,t.error("Unexpected combinator")),r[i.value]=!0):s!==null&&s.type!=="Combinator"&&(r[" "]=!0,e.push({type:"Combinator",value:" "})),e.push(i),s=i,a=t.pos);return s!==null&&s.type==="Combinator"&&(t.pos-=a,t.error("Unexpected combinator")),{type:"Group",terms:e,combinator:LM(e,r)||" ",disallowEmpty:!1,explicit:!1}}function EM(t){let e;return t.eat(vc),e=Xb(t),t.eat(fd),e.explicit=!0,t.charCode()===Kb&&(t.pos++,e.disallowEmpty=!0),e}function DM(t){let e=t.charCode();if(e<128&&Zs[e]===1)return TM(t);switch(e){case fd:break;case vc:return To(t,EM(t));case ud:return t.nextCharCode()===pc?CM(t):AM(t);case Wb:return{type:"Combinator",value:t.substringToPos(t.pos+(t.nextCharCode()===Wb?2:1))};case jb:return t.pos++,t.eat(jb),{type:"Combinator",value:"&&"};case cd:return t.pos++,{type:"Comma"};case pc:return To(t,{type:"String",value:xM(t)});case vM:case pM:case gM:case yM:case mM:return{type:"Spaces",value:mc(t)};case wM:return e=t.nextCharCode(),e<128&&Zs[e]===1?(t.pos++,{type:"AtKeyword",name:Ao(t)}):od(t);case Qb:case ld:case sd:case ad:case Kb:break;case gc:if(e=t.nextCharCode(),e<48||e>57)return od(t);break;default:return od(t)}}function NM(t){let e=new hM.Tokenizer(t),r=Xb(e);return e.pos!==t.length&&e.error("Unexpected input"),r.terms.length===1&&r.terms[0].type==="Group"?r.terms[0]:r}Zb.parse=NM});var gd=ee(ea=>{"use strict";var MM=bc(),Pt={type:"Match"},yn={type:"Mismatch"},hd={type:"DisallowEmpty"},OM=40,PM=41;function rn(t,e,r){return e===Pt&&r===yn||t===Pt&&e===Pt&&r===Pt?t:(t.type==="If"&&t.else===yn&&e===Pt&&(e=t.then,t=t.match),{type:"If",match:t,then:e,else:r})}function tw(t){return t.length>2&&t.charCodeAt(t.length-2)===OM&&t.charCodeAt(t.length-1)===PM}function ew(t){return t.type==="Keyword"||t.type==="AtKeyword"||t.type==="Function"||t.type==="Type"&&tw(t.name)}function dd(t,e,r){switch(t){case" ":{let i=Pt;for(let s=e.length-1;s>=0;s--){let a=e[s];i=rn(a,i,yn)}return i}case"|":{let i=yn,s=null;for(let a=e.length-1;a>=0;a--){let f=e[a];if(ew(f)&&(s===null&&a>0&&ew(e[a-1])&&(s=Object.create(null),i=rn({type:"Enum",map:s},Pt,i)),s!==null)){let d=(tw(f.name)?f.name.slice(0,-1):f.name).toLowerCase();if(!(d in s)){s[d]=f;continue}}s=null,i=rn(f,Pt,i)}return i}case"&&":{if(e.length>5)return{type:"MatchOnce",terms:e,all:!0};let i=yn;for(let s=e.length-1;s>=0;s--){let a=e[s],f;e.length>1?f=dd(t,e.filter(function(d){return d!==a}),!1):f=Pt,i=rn(a,f,i)}return i}case"||":{if(e.length>5)return{type:"MatchOnce",terms:e,all:!1};let i=r?Pt:yn;for(let s=e.length-1;s>=0;s--){let a=e[s],f;e.length>1?f=dd(t,e.filter(function(d){return d!==a}),!0):f=Pt,i=rn(a,f,i)}return i}}}function IM(t){let e=Pt,r=pd(t.term);if(t.max===0)r=rn(r,hd,yn),e=rn(r,null,yn),e.then=rn(Pt,Pt,e),t.comma&&(e.then.else=rn({type:"Comma",syntax:t},e,yn));else for(let i=t.min||1;i<=t.max;i++)t.comma&&e!==Pt&&(e=rn({type:"Comma",syntax:t},e,yn)),e=rn(r,rn(Pt,Pt,e),yn);if(t.min===0)e=rn(Pt,Pt,e);else for(let i=0;i<t.min-1;i++)t.comma&&e!==Pt&&(e=rn({type:"Comma",syntax:t},e,yn)),e=rn(r,e,yn);return e}function pd(t){if(typeof t=="function")return{type:"Generic",fn:t};switch(t.type){case"Group":{let e=dd(t.combinator,t.terms.map(pd),!1);return t.disallowEmpty&&(e=rn(e,hd,yn)),e}case"Multiplier":return IM(t);case"Type":case"Property":return{type:t.type,name:t.name,syntax:t};case"Keyword":return{type:t.type,name:t.name.toLowerCase(),syntax:t};case"AtKeyword":return{type:t.type,name:"@"+t.name.toLowerCase(),syntax:t};case"Function":return{type:t.type,name:t.name.toLowerCase()+"(",syntax:t};case"String":return t.value.length===3?{type:"Token",value:t.value.charAt(1),syntax:t}:{type:t.type,value:t.value.substr(1,t.value.length-2).replace(/\\'/g,"'"),syntax:t};case"Token":return{type:t.type,value:t.value,syntax:t};case"Comma":return{type:t.type,syntax:t};default:throw new Error("Unknown node type:",t.type)}}function zM(t,e){return typeof t=="string"&&(t=MM.parse(t)),{type:"MatchGraph",match:pd(t),syntax:e||null,source:t}}ea.DISALLOW_EMPTY=hd;ea.MATCH=Pt;ea.MISMATCH=yn;ea.buildMatchGraph=zM});var cw=ee(vd=>{"use strict";var vt=gd(),Ln=Me(),{hasOwnProperty:nw}=Object.prototype,BM=0,RM=1,wc=2,yd=3,rw="Match",qM="Mismatch",FM="Maximum iteration number exceeded (please fill an issue on https://github.com/csstree/csstree/issues)",iw=15e3;function aw(t){let e=null,r=null,i=t;for(;i!==null;)r=i.prev,i.prev=e,e=i,i=r;return e}function md(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=e.charCodeAt(r),s=t.charCodeAt(r);if(s>=65&&s<=90&&(s=s|32),s!==i)return!1}return!0}function _M(t){return t.type!==Ln.Delim?!1:t.value!=="?"}function ow(t){return t===null?!0:t.type===Ln.Comma||t.type===Ln.Function||t.type===Ln.LeftParenthesis||t.type===Ln.LeftSquareBracket||t.type===Ln.LeftCurlyBracket||_M(t)}function sw(t){return t===null?!0:t.type===Ln.RightParenthesis||t.type===Ln.RightSquareBracket||t.type===Ln.RightCurlyBracket||t.type===Ln.Delim&&t.value==="/"}function lw(t,e,r){function i(){do S++,N=S<t.length?t[S]:null;while(N!==null&&(N.type===Ln.WhiteSpace||N.type===Ln.Comment))}function s(z){let I=S+z;return I<t.length?t[I]:null}function a(z,I){return{nextState:z,matchStack:O,syntaxStack:v,thenStack:w,tokenIndex:S,prev:I}}function f(z){w={nextState:z,matchStack:O,syntaxStack:v,prev:w}}function d(z){k=a(z,k)}function g(){O={type:RM,syntax:e.syntax,token:N,prev:O},i(),T=null,S>M&&(M=S)}function p(){v={syntax:e.syntax,opts:e.syntax.opts||v!==null&&v.opts||null,prev:v},O={type:wc,syntax:e.syntax,token:O.token,prev:O}}function y(){O.type===wc?O=O.prev:O={type:yd,syntax:v.syntax,token:O.token,prev:O},v=v.prev}let v=null,w=null,k=null,T=null,L=0,A=null,N=null,S=-1,M=0,O={type:BM,syntax:null,token:null,prev:null};for(i();A===null&&++L<iw;)switch(e.type){case"Match":if(w===null){if(N!==null&&(S!==t.length-1||N.value!=="\\0"&&N.value!=="\\9")){e=vt.MISMATCH;break}A=rw;break}if(e=w.nextState,e===vt.DISALLOW_EMPTY)if(w.matchStack===O){e=vt.MISMATCH;break}else e=vt.MATCH;for(;w.syntaxStack!==v;)y();w=w.prev;break;case"Mismatch":if(T!==null&&T!==!1)(k===null||S>k.tokenIndex)&&(k=T,T=!1);else if(k===null){A=qM;break}e=k.nextState,w=k.thenStack,v=k.syntaxStack,O=k.matchStack,S=k.tokenIndex,N=S<t.length?t[S]:null,k=k.prev;break;case"MatchGraph":e=e.match;break;case"If":e.else!==vt.MISMATCH&&d(e.else),e.then!==vt.MATCH&&f(e.then),e=e.match;break;case"MatchOnce":e={type:"MatchOnceBuffer",syntax:e,index:0,mask:0};break;case"MatchOnceBuffer":{let _=e.syntax.terms;if(e.index===_.length){if(e.mask===0||e.syntax.all){e=vt.MISMATCH;break}e=vt.MATCH;break}if(e.mask===(1<<_.length)-1){e=vt.MATCH;break}for(;e.index<_.length;e.index++){let U=1<<e.index;if(!(e.mask&U)){d(e),f({type:"AddMatchOnce",syntax:e.syntax,mask:e.mask|U}),e=_[e.index++];break}}break}case"AddMatchOnce":e={type:"MatchOnceBuffer",syntax:e.syntax,index:0,mask:e.mask};break;case"Enum":if(N!==null){let _=N.value.toLowerCase();if(_.indexOf("\\")!==-1&&(_=_.replace(/\\[09].*$/,"")),nw.call(e.map,_)){e=e.map[_];break}}e=vt.MISMATCH;break;case"Generic":{let _=v!==null?v.opts:null,U=S+Math.floor(e.fn(N,s,_));if(!isNaN(U)&&U>S){for(;S<U;)g();e=vt.MATCH}else e=vt.MISMATCH;break}case"Type":case"Property":{let _=e.type==="Type"?"types":"properties",U=nw.call(r,_)?r[_][e.name]:null;if(!U||!U.match)throw new Error("Bad syntax reference: "+(e.type==="Type"?"<"+e.name+">":"<'"+e.name+"'>"));if(T!==!1&&N!==null&&e.type==="Type"&&(e.name==="custom-ident"&&N.type===Ln.Ident||e.name==="length"&&N.value==="0")){T===null&&(T=a(e,k)),e=vt.MISMATCH;break}p(),e=U.match;break}case"Keyword":{let _=e.name;if(N!==null){let U=N.value;if(U.indexOf("\\")!==-1&&(U=U.replace(/\\[09].*$/,"")),md(U,_)){g(),e=vt.MATCH;break}}e=vt.MISMATCH;break}case"AtKeyword":case"Function":if(N!==null&&md(N.value,e.name)){g(),e=vt.MATCH;break}e=vt.MISMATCH;break;case"Token":if(N!==null&&N.value===e.value){g(),e=vt.MATCH;break}e=vt.MISMATCH;break;case"Comma":N!==null&&N.type===Ln.Comma?ow(O.token)?e=vt.MISMATCH:(g(),e=sw(N)?vt.MISMATCH:vt.MATCH):e=ow(O.token)||sw(N)?vt.MATCH:vt.MISMATCH;break;case"String":let z="",I=S;for(;I<t.length&&z.length<e.value.length;I++)z+=t[I].value;if(md(z,e.value)){for(;S<I;)g();e=vt.MATCH}else e=vt.MISMATCH;break;default:throw new Error("Unknown node type: "+e.type)}switch(A){case null:console.warn("[csstree-match] BREAK after "+iw+" iterations"),A=FM,O=null;break;case rw:for(;v!==null;)y();break;default:O=null}return{tokens:t,reason:A,iterations:L,match:O,longestMatch:M}}function jM(t,e,r){let i=lw(t,e,r||{});if(i.match!==null){let s=aw(i.match).prev;for(i.match=[];s!==null;){switch(s.type){case wc:case yd:i.match.push({type:s.type,syntax:s.syntax});break;default:i.match.push({token:s.token.value,node:s.token.node});break}s=s.prev}}return i}function HM(t,e,r){let i=lw(t,e,r||{});if(i.match===null)return i;let s=i.match,a=i.match={syntax:e.syntax||null,match:[]},f=[a];for(s=aw(s).prev;s!==null;){switch(s.type){case wc:a.match.push(a={syntax:s.syntax,match:[]}),f.push(a);break;case yd:f.pop(),a=f[f.length-1];break;default:a.match.push({syntax:s.syntax||null,token:s.token.value,node:s.token.node})}s=s.prev}return i}vd.matchAsList=jM;vd.matchAsTree=HM});var fw=ee(ta=>{"use strict";function uw(t){function e(s){return s===null?!1:s.type==="Type"||s.type==="Property"||s.type==="Keyword"}function r(s){if(Array.isArray(s.match)){for(let a=0;a<s.match.length;a++)if(r(s.match[a]))return e(s.syntax)&&i.unshift(s.syntax),!0}else if(s.node===t)return i=e(s.syntax)?[s.syntax]:[],!0;return!1}let i=null;return this.matched!==null&&r(this.matched),i}function WM(t,e){return bd(this,t,r=>r.type==="Type"&&r.name===e)}function UM(t,e){return bd(this,t,r=>r.type==="Property"&&r.name===e)}function $M(t){return bd(this,t,e=>e.type==="Keyword")}function bd(t,e,r){let i=uw.call(t,e);return i===null?!1:i.some(r)}ta.getTrace=uw;ta.isKeyword=$M;ta.isProperty=UM;ta.isType=WM});var gw=ee(pw=>{"use strict";var GM=zi();function dw(t){return"node"in t?t.node:dw(t.match[0])}function hw(t){return"node"in t?t.node:hw(t.match[t.match.length-1])}function VM(t,e,r,i,s){function a(d){if(d.syntax!==null&&d.syntax.type===i&&d.syntax.name===s){let g=dw(d),p=hw(d);t.syntax.walk(e,function(y,v,w){if(y===g){let k=new GM.List;do{if(k.appendData(v.data),v.data===p)break;v=v.next}while(v!==null);f.push({parent:w,nodes:k})}})}Array.isArray(d.match)&&d.match.forEach(a)}let f=[];return r.matched!==null&&a(r.matched),f}pw.matchFragments=VM});var vw=ee(yw=>{"use strict";var KM=zi(),{hasOwnProperty:na}=Object.prototype;function wd(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t&&t>=0}function mw(t){return!!t&&wd(t.offset)&&wd(t.line)&&wd(t.column)}function YM(t,e){return function(i,s){if(!i||i.constructor!==Object)return s(i,"Type of node should be an Object");for(let a in i){let f=!0;if(na.call(i,a)!==!1){if(a==="type")i.type!==t&&s(i,"Wrong node type `"+i.type+"`, expected `"+t+"`");else if(a==="loc"){if(i.loc===null)continue;if(i.loc&&i.loc.constructor===Object)if(typeof i.loc.source!="string")a+=".source";else if(!mw(i.loc.start))a+=".start";else if(!mw(i.loc.end))a+=".end";else continue;f=!1}else if(e.hasOwnProperty(a)){f=!1;for(let d=0;!f&&d<e[a].length;d++){let g=e[a][d];switch(g){case String:f=typeof i[a]=="string";break;case Boolean:f=typeof i[a]=="boolean";break;case null:f=i[a]===null;break;default:typeof g=="string"?f=i[a]&&i[a].type===g:Array.isArray(g)&&(f=i[a]instanceof KM.List)}}}else s(i,"Unknown field `"+a+"` for "+t+" node type");f||s(i,"Bad value for `"+t+"."+a+"`")}}for(let a in e)na.call(e,a)&&na.call(i,a)===!1&&s(i,"Field `"+t+"."+a+"` is missed")}}function QM(t,e){let r=e.structure,i={type:String,loc:!0},s={type:'"'+t+'"'};for(let a in r){if(na.call(r,a)===!1)continue;let f=[],d=i[a]=Array.isArray(r[a])?r[a].slice():[r[a]];for(let g=0;g<d.length;g++){let p=d[g];if(p===String||p===Boolean)f.push(p.name);else if(p===null)f.push("null");else if(typeof p=="string")f.push("<"+p+">");else if(Array.isArray(p))f.push("List");else throw new Error("Wrong value `"+p+"` in `"+t+"."+a+"` structure definition")}s[a]=f.join(" | ")}return{docs:s,check:YM(t,i)}}function JM(t){let e={};if(t.node){for(let r in t.node)if(na.call(t.node,r)){let i=t.node[r];if(i.structure)e[r]=QM(r,i);else throw new Error("Missed `structure` field in `"+r+"` node type definition")}}return e}yw.getStructureFromConfig=JM});var xd=ee(ww=>{"use strict";var ra=function(){};function bw(t){return typeof t=="function"?t:ra}function XM(t,e,r){function i(f){switch(s.call(r,f),f.type){case"Group":f.terms.forEach(i);break;case"Multiplier":i(f.term);break;case"Type":case"Property":case"Keyword":case"AtKeyword":case"Function":case"String":case"Token":case"Comma":break;default:throw new Error("Unknown type: "+f.type)}a.call(r,f)}let s=ra,a=ra;if(typeof e=="function"?s=e:e&&(s=bw(e.enter),a=bw(e.leave)),s===ra&&a===ra)throw new Error("Neither `enter` nor `leave` walker handler is set or both aren't a function");i(t)}ww.walk=XM});var Ad=ee(Aw=>{"use strict";var Eo=vb(),ia=uc(),ZM=Yf(),eO=Ib(),xw=zb(),tO=Rb(),kd=gd(),kw=cw(),nO=fw(),Cw=gw(),rO=vw(),iO=bc(),Sw=sc(),oO=xd(),sO=kd.buildMatchGraph(ZM.cssWideKeywords.join(" | "));function Cd(t,e,r){let i={};for(let s in t)t[s].syntax&&(i[s]=r?t[s].syntax:Sw.generate(t[s].syntax,{compact:e}));return i}function aO(t,e,r){let i={};for(let[s,a]of Object.entries(t))i[s]={prelude:a.prelude&&(r?a.prelude.syntax:Sw.generate(a.prelude.syntax,{compact:e})),descriptors:a.descriptors&&Cd(a.descriptors,e,r)};return i}function lO(t){for(let e=0;e<t.length;e++)if(t[e].value.toLowerCase()==="var(")return!0;return!1}function cr(t,e,r){return{matched:t,iterations:r,error:e,...nO}}function Lo(t,e,r,i){let s=tO(r,t.syntax),a;return lO(s)?cr(null,new Error("Matching for a tree with var() is not supported")):(i&&(a=kw.matchAsTree(s,t.cssWideKeywordsSyntax,t)),(!i||!a.match)&&(a=kw.matchAsTree(s,e.match,t),!a.match)?cr(null,new Eo.SyntaxMatchError(a.reason,e.syntax,r,a),a.iterations):cr(a.match,null,a.iterations))}var Sd=class{constructor(e,r,i){if(this.cssWideKeywordsSyntax=sO,this.syntax=r,this.generic=!1,this.units={...xw},this.atrules=Object.create(null),this.properties=Object.create(null),this.types=Object.create(null),this.structure=i||rO.getStructureFromConfig(e),e){if(e.units)for(let s of Object.keys(xw))Array.isArray(e.units[s])&&(this.units[s]=e.units[s]);if(e.types)for(let s in e.types)this.addType_(s,e.types[s]);if(e.generic){this.generic=!0;for(let[s,a]of Object.entries(eO.createGenericTypes(this.units)))this.addType_(s,a)}if(e.atrules)for(let s in e.atrules)this.addAtrule_(s,e.atrules[s]);if(e.properties)for(let s in e.properties)this.addProperty_(s,e.properties[s])}}checkStructure(e){function r(a,f){s.push({node:a,message:f})}let i=this.structure,s=[];return this.syntax.walk(e,function(a){i.hasOwnProperty(a.type)?i[a.type].check(a,r):r(a,"Unknown node type `"+a.type+"`")}),s.length?s:!1}createDescriptor(e,r,i,s=null){let a={type:r,name:i},f={type:r,name:i,parent:s,serializable:typeof e=="string"||e&&typeof e.type=="string",syntax:null,match:null};return typeof e=="function"?f.match=kd.buildMatchGraph(e,a):(typeof e=="string"?Object.defineProperty(f,"syntax",{get(){return Object.defineProperty(f,"syntax",{value:iO.parse(e)}),f.syntax}}):f.syntax=e,Object.defineProperty(f,"match",{get(){return Object.defineProperty(f,"match",{value:kd.buildMatchGraph(f.syntax,a)}),f.match}})),f}addAtrule_(e,r){r&&(this.atrules[e]={type:"Atrule",name:e,prelude:r.prelude?this.createDescriptor(r.prelude,"AtrulePrelude",e):null,descriptors:r.descriptors?Object.keys(r.descriptors).reduce((i,s)=>(i[s]=this.createDescriptor(r.descriptors[s],"AtruleDescriptor",s,e),i),Object.create(null)):null})}addProperty_(e,r){r&&(this.properties[e]=this.createDescriptor(r,"Property",e))}addType_(e,r){r&&(this.types[e]=this.createDescriptor(r,"Type",e))}checkAtruleName(e){if(!this.getAtrule(e))return new Eo.SyntaxReferenceError("Unknown at-rule","@"+e)}checkAtrulePrelude(e,r){let i=this.checkAtruleName(e);if(i)return i;let s=this.getAtrule(e);if(!s.prelude&&r)return new SyntaxError("At-rule `@"+e+"` should not contain a prelude");if(s.prelude&&!r&&!Lo(this,s.prelude,"",!1).matched)return new SyntaxError("At-rule `@"+e+"` should contain a prelude")}checkAtruleDescriptorName(e,r){let i=this.checkAtruleName(e);if(i)return i;let s=this.getAtrule(e),a=ia.keyword(r);if(!s.descriptors)return new SyntaxError("At-rule `@"+e+"` has no known descriptors");if(!s.descriptors[a.name]&&!s.descriptors[a.basename])return new Eo.SyntaxReferenceError("Unknown at-rule descriptor",r)}checkPropertyName(e){if(!this.getProperty(e))return new Eo.SyntaxReferenceError("Unknown property",e)}matchAtrulePrelude(e,r){let i=this.checkAtrulePrelude(e,r);if(i)return cr(null,i);let s=this.getAtrule(e);return s.prelude?Lo(this,s.prelude,r||"",!1):cr(null,null)}matchAtruleDescriptor(e,r,i){let s=this.checkAtruleDescriptorName(e,r);if(s)return cr(null,s);let a=this.getAtrule(e),f=ia.keyword(r);return Lo(this,a.descriptors[f.name]||a.descriptors[f.basename],i,!1)}matchDeclaration(e){return e.type!=="Declaration"?cr(null,new Error("Not a Declaration node")):this.matchProperty(e.property,e.value)}matchProperty(e,r){if(ia.property(e).custom)return cr(null,new Error("Lexer matching doesn't applicable for custom properties"));let i=this.checkPropertyName(e);return i?cr(null,i):Lo(this,this.getProperty(e),r,!0)}matchType(e,r){let i=this.getType(e);return i?Lo(this,i,r,!1):cr(null,new Eo.SyntaxReferenceError("Unknown type",e))}match(e,r){return typeof e!="string"&&(!e||!e.type)?cr(null,new Eo.SyntaxReferenceError("Bad syntax")):((typeof e=="string"||!e.match)&&(e=this.createDescriptor(e,"Type","anonymous")),Lo(this,e,r,!1))}findValueFragments(e,r,i,s){return Cw.matchFragments(this,r,this.matchProperty(e,r),i,s)}findDeclarationValueFragments(e,r,i){return Cw.matchFragments(this,e.value,this.matchDeclaration(e),r,i)}findAllFragments(e,r,i){let s=[];return this.syntax.walk(e,{visit:"Declaration",enter:a=>{s.push.apply(s,this.findDeclarationValueFragments(a,r,i))}}),s}getAtrule(e,r=!0){let i=ia.keyword(e);return(i.vendor&&r?this.atrules[i.name]||this.atrules[i.basename]:this.atrules[i.name])||null}getAtrulePrelude(e,r=!0){let i=this.getAtrule(e,r);return i&&i.prelude||null}getAtruleDescriptor(e,r){return this.atrules.hasOwnProperty(e)&&this.atrules.declarators&&this.atrules[e].declarators[r]||null}getProperty(e,r=!0){let i=ia.property(e);return(i.vendor&&r?this.properties[i.name]||this.properties[i.basename]:this.properties[i.name])||null}getType(e){return hasOwnProperty.call(this.types,e)?this.types[e]:null}validate(){function e(s,a,f,d){if(f.has(a))return f.get(a);f.set(a,!1),d.syntax!==null&&oO.walk(d.syntax,function(g){if(g.type!=="Type"&&g.type!=="Property")return;let p=g.type==="Type"?s.types:s.properties,y=g.type==="Type"?r:i;(!hasOwnProperty.call(p,g.name)||e(s,g.name,y,p[g.name]))&&f.set(a,!0)},this)}let r=new Map,i=new Map;for(let s in this.types)e(this,s,r,this.types[s]);for(let s in this.properties)e(this,s,i,this.properties[s]);return r=[...r.keys()].filter(s=>r.get(s)),i=[...i.keys()].filter(s=>i.get(s)),r.length||i.length?{types:r,properties:i}:null}dump(e,r){return{generic:this.generic,units:this.units,types:Cd(this.types,!r,e),properties:Cd(this.properties,!r,e),atrules:aO(this.atrules,!r,e)}}toString(){return JSON.stringify(this.dump())}};Aw.Lexer=Sd});var Ew=ee((F5,Lw)=>{"use strict";function Td(t,e){return typeof e=="string"&&/^\s*\|/.test(e)?typeof t=="string"?t+e:e.replace(/^\s*\|\s*/,""):e||null}function Tw(t,e){let r=Object.create(null);for(let[i,s]of Object.entries(t))if(s){r[i]={};for(let a of Object.keys(s))e.includes(a)&&(r[i][a]=s[a])}return r}function cO(t,e){let r={...t};for(let[i,s]of Object.entries(e))switch(i){case"generic":r[i]=!!s;break;case"units":r[i]={...t[i]};for(let[a,f]of Object.entries(s))r[i][a]=Array.isArray(f)?f:[];break;case"atrules":r[i]={...t[i]};for(let[a,f]of Object.entries(s)){let d=r[i][a]||{},g=r[i][a]={prelude:d.prelude||null,descriptors:{...d.descriptors}};if(f){g.prelude=f.prelude?Td(g.prelude,f.prelude):g.prelude||null;for(let[p,y]of Object.entries(f.descriptors||{}))g.descriptors[p]=y?Td(g.descriptors[p],y):null;Object.keys(g.descriptors).length||(g.descriptors=null)}}break;case"types":case"properties":r[i]={...t[i]};for(let[a,f]of Object.entries(s))r[i][a]=Td(r[i][a],f);break;case"scope":r[i]={...t[i]};for(let[a,f]of Object.entries(s))r[i][a]={...r[i][a],...f};break;case"parseContext":r[i]={...t[i],...s};break;case"atrule":case"pseudo":r[i]={...t[i],...Tw(s,["parse"])};break;case"node":r[i]={...t[i],...Tw(s,["name","structure","parse","generate","walkContext"])};break}return r}Lw.exports=cO});var Ed=ee((_5,Mw)=>{"use strict";var uO=Hs(),fO=Ov(),dO=sb(),hO=lb(),pO=pb(),Dw=Ad(),Ld=Ew();function Nw(t){let e=fO.createParser(t),r=pO.createWalker(t),i=dO.createGenerator(t),{fromPlainObject:s,toPlainObject:a}=hO.createConvertor(r),f={lexer:null,createLexer:d=>new Dw.Lexer(d,f,f.lexer.structure),tokenize:uO.tokenize,parse:e,generate:i,walk:r,find:r.find,findLast:r.findLast,findAll:r.findAll,fromPlainObject:s,toPlainObject:a,fork(d){let g=Ld({},t);return Nw(typeof d=="function"?d(g,Object.assign):Ld(g,d))}};return f.lexer=new Dw.Lexer({generic:!0,units:t.units,types:t.types,atrules:t.atrules,properties:t.properties,node:t.node},f),f}var gO=t=>Nw(Ld({},t));Mw.exports=gO});var Pw=ee((j5,Ow)=>{Ow.exports={generic:!0,units:{angle:["deg","grad","rad","turn"],decibel:["db"],flex:["fr"],frequency:["hz","khz"],length:["cm","mm","q","in","pt","pc","px","em","rem","ex","rex","cap","rcap","ch","rch","ic","ric","lh","rlh","vw","svw","lvw","dvw","vh","svh","lvh","dvh","vi","svi","lvi","dvi","vb","svb","lvb","dvb","vmin","svmin","lvmin","dvmin","vmax","svmax","lvmax","dvmax","cqw","cqh","cqi","cqb","cqmin","cqmax"],resolution:["dpi","dpcm","dppx","x"],semitones:["st"],time:["s","ms"]},types:{"abs()":"abs( <calc-sum> )","absolute-size":"xx-small|x-small|small|medium|large|x-large|xx-large|xxx-large","acos()":"acos( <calc-sum> )","alpha-value":"<number>|<percentage>","angle-percentage":"<angle>|<percentage>","angular-color-hint":"<angle-percentage>","angular-color-stop":"<color>&&<color-stop-angle>?","angular-color-stop-list":"[<angular-color-stop> [, <angular-color-hint>]?]# , <angular-color-stop>","animateable-feature":"scroll-position|contents|<custom-ident>","asin()":"asin( <calc-sum> )","atan()":"atan( <calc-sum> )","atan2()":"atan2( <calc-sum> , <calc-sum> )",attachment:"scroll|fixed|local","attr()":"attr( <attr-name> <type-or-unit>? [, <attr-fallback>]? )","attr-matcher":"['~'|'|'|'^'|'$'|'*']? '='","attr-modifier":"i|s","attribute-selector":"'[' <wq-name> ']'|'[' <wq-name> <attr-matcher> [<string-token>|<ident-token>] <attr-modifier>? ']'","auto-repeat":"repeat( [auto-fill|auto-fit] , [<line-names>? <fixed-size>]+ <line-names>? )","auto-track-list":"[<line-names>? [<fixed-size>|<fixed-repeat>]]* <line-names>? <auto-repeat> [<line-names>? [<fixed-size>|<fixed-repeat>]]* <line-names>?",axis:"block|inline|vertical|horizontal","baseline-position":"[first|last]? baseline","basic-shape":"<inset()>|<circle()>|<ellipse()>|<polygon()>|<path()>","bg-image":"none|<image>","bg-layer":"<bg-image>||<bg-position> [/ <bg-size>]?||<repeat-style>||<attachment>||<box>||<box>","bg-position":"[[left|center|right|top|bottom|<length-percentage>]|[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]|[center|[left|right] <length-percentage>?]&&[center|[top|bottom] <length-percentage>?]]","bg-size":"[<length-percentage>|auto]{1,2}|cover|contain","blur()":"blur( <length> )","blend-mode":"normal|multiply|screen|overlay|darken|lighten|color-dodge|color-burn|hard-light|soft-light|difference|exclusion|hue|saturation|color|luminosity",box:"border-box|padding-box|content-box","brightness()":"brightness( <number-percentage> )","calc()":"calc( <calc-sum> )","calc-sum":"<calc-product> [['+'|'-'] <calc-product>]*","calc-product":"<calc-value> ['*' <calc-value>|'/' <number>]*","calc-value":"<number>|<dimension>|<percentage>|<calc-constant>|( <calc-sum> )","calc-constant":"e|pi|infinity|-infinity|NaN","cf-final-image":"<image>|<color>","cf-mixing-image":"<percentage>?&&<image>","circle()":"circle( [<shape-radius>]? [at <position>]? )","clamp()":"clamp( <calc-sum>#{3} )","class-selector":"'.' <ident-token>","clip-source":"<url>",color:"<rgb()>|<rgba()>|<hsl()>|<hsla()>|<hwb()>|<lab()>|<lch()>|<hex-color>|<named-color>|currentcolor|<deprecated-system-color>","color-stop":"<color-stop-length>|<color-stop-angle>","color-stop-angle":"<angle-percentage>{1,2}","color-stop-length":"<length-percentage>{1,2}","color-stop-list":"[<linear-color-stop> [, <linear-color-hint>]?]# , <linear-color-stop>",combinator:"'>'|'+'|'~'|['||']","common-lig-values":"[common-ligatures|no-common-ligatures]","compat-auto":"searchfield|textarea|push-button|slider-horizontal|checkbox|radio|square-button|menulist|listbox|meter|progress-bar|button","composite-style":"clear|copy|source-over|source-in|source-out|source-atop|destination-over|destination-in|destination-out|destination-atop|xor","compositing-operator":"add|subtract|intersect|exclude","compound-selector":"[<type-selector>? <subclass-selector>* [<pseudo-element-selector> <pseudo-class-selector>*]*]!","compound-selector-list":"<compound-selector>#","complex-selector":"<compound-selector> [<combinator>? <compound-selector>]*","complex-selector-list":"<complex-selector>#","conic-gradient()":"conic-gradient( [from <angle>]? [at <position>]? , <angular-color-stop-list> )","contextual-alt-values":"[contextual|no-contextual]","content-distribution":"space-between|space-around|space-evenly|stretch","content-list":"[<string>|contents|<image>|<counter>|<quote>|<target>|<leader()>|<attr()>]+","content-position":"center|start|end|flex-start|flex-end","content-replacement":"<image>","contrast()":"contrast( [<number-percentage>] )","cos()":"cos( <calc-sum> )",counter:"<counter()>|<counters()>","counter()":"counter( <counter-name> , <counter-style>? )","counter-name":"<custom-ident>","counter-style":"<counter-style-name>|symbols( )","counter-style-name":"<custom-ident>","counters()":"counters( <counter-name> , <string> , <counter-style>? )","cross-fade()":"cross-fade( <cf-mixing-image> , <cf-final-image>? )","cubic-bezier-timing-function":"ease|ease-in|ease-out|ease-in-out|cubic-bezier( <number [0,1]> , <number> , <number [0,1]> , <number> )","deprecated-system-color":"ActiveBorder|ActiveCaption|AppWorkspace|Background|ButtonFace|ButtonHighlight|ButtonShadow|ButtonText|CaptionText|GrayText|Highlight|HighlightText|InactiveBorder|InactiveCaption|InactiveCaptionText|InfoBackground|InfoText|Menu|MenuText|Scrollbar|ThreeDDarkShadow|ThreeDFace|ThreeDHighlight|ThreeDLightShadow|ThreeDShadow|Window|WindowFrame|WindowText","discretionary-lig-values":"[discretionary-ligatures|no-discretionary-ligatures]","display-box":"contents|none","display-inside":"flow|flow-root|table|flex|grid|ruby","display-internal":"table-row-group|table-header-group|table-footer-group|table-row|table-cell|table-column-group|table-column|table-caption|ruby-base|ruby-text|ruby-base-container|ruby-text-container","display-legacy":"inline-block|inline-list-item|inline-table|inline-flex|inline-grid","display-listitem":"<display-outside>?&&[flow|flow-root]?&&list-item","display-outside":"block|inline|run-in","drop-shadow()":"drop-shadow( <length>{2,3} <color>? )","east-asian-variant-values":"[jis78|jis83|jis90|jis04|simplified|traditional]","east-asian-width-values":"[full-width|proportional-width]","element()":"element( <custom-ident> , [first|start|last|first-except]? )|element( <id-selector> )","ellipse()":"ellipse( [<shape-radius>{2}]? [at <position>]? )","ending-shape":"circle|ellipse","env()":"env( <custom-ident> , <declaration-value>? )","exp()":"exp( <calc-sum> )","explicit-track-list":"[<line-names>? <track-size>]+ <line-names>?","family-name":"<string>|<custom-ident>+","feature-tag-value":"<string> [<integer>|on|off]?","feature-type":"@stylistic|@historical-forms|@styleset|@character-variant|@swash|@ornaments|@annotation","feature-value-block":"<feature-type> '{' <feature-value-declaration-list> '}'","feature-value-block-list":"<feature-value-block>+","feature-value-declaration":"<custom-ident> : <integer>+ ;","feature-value-declaration-list":"<feature-value-declaration>","feature-value-name":"<custom-ident>","fill-rule":"nonzero|evenodd","filter-function":"<blur()>|<brightness()>|<contrast()>|<drop-shadow()>|<grayscale()>|<hue-rotate()>|<invert()>|<opacity()>|<saturate()>|<sepia()>","filter-function-list":"[<filter-function>|<url>]+","final-bg-layer":"<'background-color'>||<bg-image>||<bg-position> [/ <bg-size>]?||<repeat-style>||<attachment>||<box>||<box>","fixed-breadth":"<length-percentage>","fixed-repeat":"repeat( [<integer [1,\u221E]>] , [<line-names>? <fixed-size>]+ <line-names>? )","fixed-size":"<fixed-breadth>|minmax( <fixed-breadth> , <track-breadth> )|minmax( <inflexible-breadth> , <fixed-breadth> )","font-stretch-absolute":"normal|ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded|<percentage>","font-variant-css21":"[normal|small-caps]","font-weight-absolute":"normal|bold|<number [1,1000]>","frequency-percentage":"<frequency>|<percentage>","general-enclosed":"[<function-token> <any-value> )]|( <ident> <any-value> )","generic-family":"serif|sans-serif|cursive|fantasy|monospace|-apple-system","generic-name":"serif|sans-serif|cursive|fantasy|monospace","geometry-box":"<shape-box>|fill-box|stroke-box|view-box",gradient:"<linear-gradient()>|<repeating-linear-gradient()>|<radial-gradient()>|<repeating-radial-gradient()>|<conic-gradient()>|<repeating-conic-gradient()>|<-legacy-gradient>","grayscale()":"grayscale( <number-percentage> )","grid-line":"auto|<custom-ident>|[<integer>&&<custom-ident>?]|[span&&[<integer>||<custom-ident>]]","historical-lig-values":"[historical-ligatures|no-historical-ligatures]","hsl()":"hsl( <hue> <percentage> <percentage> [/ <alpha-value>]? )|hsl( <hue> , <percentage> , <percentage> , <alpha-value>? )","hsla()":"hsla( <hue> <percentage> <percentage> [/ <alpha-value>]? )|hsla( <hue> , <percentage> , <percentage> , <alpha-value>? )",hue:"<number>|<angle>","hue-rotate()":"hue-rotate( <angle> )","hwb()":"hwb( [<hue>|none] [<percentage>|none] [<percentage>|none] [/ [<alpha-value>|none]]? )","hypot()":"hypot( <calc-sum># )",image:"<url>|<image()>|<image-set()>|<element()>|<paint()>|<cross-fade()>|<gradient>","image()":"image( <image-tags>? [<image-src>? , <color>?]! )","image-set()":"image-set( <image-set-option># )","image-set-option":"[<image>|<string>] [<resolution>||type( <string> )]","image-src":"<url>|<string>","image-tags":"ltr|rtl","inflexible-breadth":"<length-percentage>|min-content|max-content|auto","inset()":"inset( <length-percentage>{1,4} [round <'border-radius'>]? )","invert()":"invert( <number-percentage> )","keyframes-name":"<custom-ident>|<string>","keyframe-block":"<keyframe-selector># { <declaration-list> }","keyframe-block-list":"<keyframe-block>+","keyframe-selector":"from|to|<percentage>","lab()":"lab( [<percentage>|<number>|none] [<percentage>|<number>|none] [<percentage>|<number>|none] [/ [<alpha-value>|none]]? )","layer()":"layer( <layer-name> )","layer-name":"<ident> ['.' <ident>]*","lch()":"lch( [<percentage>|<number>|none] [<percentage>|<number>|none] [<hue>|none] [/ [<alpha-value>|none]]? )","leader()":"leader( <leader-type> )","leader-type":"dotted|solid|space|<string>","length-percentage":"<length>|<percentage>","line-names":"'[' <custom-ident>* ']'","line-name-list":"[<line-names>|<name-repeat>]+","line-style":"none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset","line-width":"<length>|thin|medium|thick","linear-color-hint":"<length-percentage>","linear-color-stop":"<color> <color-stop-length>?","linear-gradient()":"linear-gradient( [<angle>|to <side-or-corner>]? , <color-stop-list> )","log()":"log( <calc-sum> , <calc-sum>? )","mask-layer":"<mask-reference>||<position> [/ <bg-size>]?||<repeat-style>||<geometry-box>||[<geometry-box>|no-clip]||<compositing-operator>||<masking-mode>","mask-position":"[<length-percentage>|left|center|right] [<length-percentage>|top|center|bottom]?","mask-reference":"none|<image>|<mask-source>","mask-source":"<url>","masking-mode":"alpha|luminance|match-source","matrix()":"matrix( <number>#{6} )","matrix3d()":"matrix3d( <number>#{16} )","max()":"max( <calc-sum># )","media-and":"<media-in-parens> [and <media-in-parens>]+","media-condition":"<media-not>|<media-and>|<media-or>|<media-in-parens>","media-condition-without-or":"<media-not>|<media-and>|<media-in-parens>","media-feature":"( [<mf-plain>|<mf-boolean>|<mf-range>] )","media-in-parens":"( <media-condition> )|<media-feature>|<general-enclosed>","media-not":"not <media-in-parens>","media-or":"<media-in-parens> [or <media-in-parens>]+","media-query":"<media-condition>|[not|only]? <media-type> [and <media-condition-without-or>]?","media-query-list":"<media-query>#","media-type":"<ident>","mf-boolean":"<mf-name>","mf-name":"<ident>","mf-plain":"<mf-name> : <mf-value>","mf-range":"<mf-name> ['<'|'>']? '='? <mf-value>|<mf-value> ['<'|'>']? '='? <mf-name>|<mf-value> '<' '='? <mf-name> '<' '='? <mf-value>|<mf-value> '>' '='? <mf-name> '>' '='? <mf-value>","mf-value":"<number>|<dimension>|<ident>|<ratio>","min()":"min( <calc-sum># )","minmax()":"minmax( [<length-percentage>|min-content|max-content|auto] , [<length-percentage>|<flex>|min-content|max-content|auto] )","mod()":"mod( <calc-sum> , <calc-sum> )","name-repeat":"repeat( [<integer [1,\u221E]>|auto-fill] , <line-names>+ )","named-color":"transparent|aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkgrey|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkslategrey|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dimgrey|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|grey|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgray|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightslategrey|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|rebeccapurple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|slategrey|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|violet|wheat|white|whitesmoke|yellow|yellowgreen|<-non-standard-color>","namespace-prefix":"<ident>","ns-prefix":"[<ident-token>|'*']? '|'","number-percentage":"<number>|<percentage>","numeric-figure-values":"[lining-nums|oldstyle-nums]","numeric-fraction-values":"[diagonal-fractions|stacked-fractions]","numeric-spacing-values":"[proportional-nums|tabular-nums]",nth:"<an-plus-b>|even|odd","opacity()":"opacity( [<number-percentage>] )","overflow-position":"unsafe|safe","outline-radius":"<length>|<percentage>","page-body":"<declaration>? [; <page-body>]?|<page-margin-box> <page-body>","page-margin-box":"<page-margin-box-type> '{' <declaration-list> '}'","page-margin-box-type":"@top-left-corner|@top-left|@top-center|@top-right|@top-right-corner|@bottom-left-corner|@bottom-left|@bottom-center|@bottom-right|@bottom-right-corner|@left-top|@left-middle|@left-bottom|@right-top|@right-middle|@right-bottom","page-selector-list":"[<page-selector>#]?","page-selector":"<pseudo-page>+|<ident> <pseudo-page>*","page-size":"A5|A4|A3|B5|B4|JIS-B5|JIS-B4|letter|legal|ledger","path()":"path( [<fill-rule> ,]? <string> )","paint()":"paint( <ident> , <declaration-value>? )","perspective()":"perspective( [<length [0,\u221E]>|none] )","polygon()":"polygon( <fill-rule>? , [<length-percentage> <length-percentage>]# )",position:"[[left|center|right]||[top|center|bottom]|[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]?|[[left|right] <length-percentage>]&&[[top|bottom] <length-percentage>]]","pow()":"pow( <calc-sum> , <calc-sum> )","pseudo-class-selector":"':' <ident-token>|':' <function-token> <any-value> ')'","pseudo-element-selector":"':' <pseudo-class-selector>","pseudo-page":": [left|right|first|blank]",quote:"open-quote|close-quote|no-open-quote|no-close-quote","radial-gradient()":"radial-gradient( [<ending-shape>||<size>]? [at <position>]? , <color-stop-list> )",ratio:"<number [0,\u221E]> [/ <number [0,\u221E]>]?","relative-selector":"<combinator>? <complex-selector>","relative-selector-list":"<relative-selector>#","relative-size":"larger|smaller","rem()":"rem( <calc-sum> , <calc-sum> )","repeat-style":"repeat-x|repeat-y|[repeat|space|round|no-repeat]{1,2}","repeating-conic-gradient()":"repeating-conic-gradient( [from <angle>]? [at <position>]? , <angular-color-stop-list> )","repeating-linear-gradient()":"repeating-linear-gradient( [<angle>|to <side-or-corner>]? , <color-stop-list> )","repeating-radial-gradient()":"repeating-radial-gradient( [<ending-shape>||<size>]? [at <position>]? , <color-stop-list> )","reversed-counter-name":"reversed( <counter-name> )","rgb()":"rgb( <percentage>{3} [/ <alpha-value>]? )|rgb( <number>{3} [/ <alpha-value>]? )|rgb( <percentage>#{3} , <alpha-value>? )|rgb( <number>#{3} , <alpha-value>? )","rgba()":"rgba( <percentage>{3} [/ <alpha-value>]? )|rgba( <number>{3} [/ <alpha-value>]? )|rgba( <percentage>#{3} , <alpha-value>? )|rgba( <number>#{3} , <alpha-value>? )","rotate()":"rotate( [<angle>|<zero>] )","rotate3d()":"rotate3d( <number> , <number> , <number> , [<angle>|<zero>] )","rotateX()":"rotateX( [<angle>|<zero>] )","rotateY()":"rotateY( [<angle>|<zero>] )","rotateZ()":"rotateZ( [<angle>|<zero>] )","round()":"round( <rounding-strategy>? , <calc-sum> , <calc-sum> )","rounding-strategy":"nearest|up|down|to-zero","saturate()":"saturate( <number-percentage> )","scale()":"scale( [<number>|<percentage>]#{1,2} )","scale3d()":"scale3d( [<number>|<percentage>]#{3} )","scaleX()":"scaleX( [<number>|<percentage>] )","scaleY()":"scaleY( [<number>|<percentage>] )","scaleZ()":"scaleZ( [<number>|<percentage>] )",scroller:"root|nearest","self-position":"center|start|end|self-start|self-end|flex-start|flex-end","shape-radius":"<length-percentage>|closest-side|farthest-side","sign()":"sign( <calc-sum> )","skew()":"skew( [<angle>|<zero>] , [<angle>|<zero>]? )","skewX()":"skewX( [<angle>|<zero>] )","skewY()":"skewY( [<angle>|<zero>] )","sepia()":"sepia( <number-percentage> )",shadow:"inset?&&<length>{2,4}&&<color>?","shadow-t":"[<length>{2,3}&&<color>?]",shape:"rect( <top> , <right> , <bottom> , <left> )|rect( <top> <right> <bottom> <left> )","shape-box":"<box>|margin-box","side-or-corner":"[left|right]||[top|bottom]","sin()":"sin( <calc-sum> )","single-animation":"<time>||<easing-function>||<time>||<single-animation-iteration-count>||<single-animation-direction>||<single-animation-fill-mode>||<single-animation-play-state>||[none|<keyframes-name>]","single-animation-direction":"normal|reverse|alternate|alternate-reverse","single-animation-fill-mode":"none|forwards|backwards|both","single-animation-iteration-count":"infinite|<number>","single-animation-play-state":"running|paused","single-animation-timeline":"auto|none|<timeline-name>|scroll( <axis>? <scroller>? )","single-transition":"[none|<single-transition-property>]||<time>||<easing-function>||<time>","single-transition-property":"all|<custom-ident>",size:"closest-side|farthest-side|closest-corner|farthest-corner|<length>|<length-percentage>{2}","sqrt()":"sqrt( <calc-sum> )","step-position":"jump-start|jump-end|jump-none|jump-both|start|end","step-timing-function":"step-start|step-end|steps( <integer> [, <step-position>]? )","subclass-selector":"<id-selector>|<class-selector>|<attribute-selector>|<pseudo-class-selector>","supports-condition":"not <supports-in-parens>|<supports-in-parens> [and <supports-in-parens>]*|<supports-in-parens> [or <supports-in-parens>]*","supports-in-parens":"( <supports-condition> )|<supports-feature>|<general-enclosed>","supports-feature":"<supports-decl>|<supports-selector-fn>","supports-decl":"( <declaration> )","supports-selector-fn":"selector( <complex-selector> )",symbol:"<string>|<image>|<custom-ident>","tan()":"tan( <calc-sum> )",target:"<target-counter()>|<target-counters()>|<target-text()>","target-counter()":"target-counter( [<string>|<url>] , <custom-ident> , <counter-style>? )","target-counters()":"target-counters( [<string>|<url>] , <custom-ident> , <string> , <counter-style>? )","target-text()":"target-text( [<string>|<url>] , [content|before|after|first-letter]? )","time-percentage":"<time>|<percentage>","timeline-name":"<custom-ident>|<string>","easing-function":"linear|<cubic-bezier-timing-function>|<step-timing-function>","track-breadth":"<length-percentage>|<flex>|min-content|max-content|auto","track-list":"[<line-names>? [<track-size>|<track-repeat>]]+ <line-names>?","track-repeat":"repeat( [<integer [1,\u221E]>] , [<line-names>? <track-size>]+ <line-names>? )","track-size":"<track-breadth>|minmax( <inflexible-breadth> , <track-breadth> )|fit-content( <length-percentage> )","transform-function":"<matrix()>|<translate()>|<translateX()>|<translateY()>|<scale()>|<scaleX()>|<scaleY()>|<rotate()>|<skew()>|<skewX()>|<skewY()>|<matrix3d()>|<translate3d()>|<translateZ()>|<scale3d()>|<scaleZ()>|<rotate3d()>|<rotateX()>|<rotateY()>|<rotateZ()>|<perspective()>","transform-list":"<transform-function>+","translate()":"translate( <length-percentage> , <length-percentage>? )","translate3d()":"translate3d( <length-percentage> , <length-percentage> , <length> )","translateX()":"translateX( <length-percentage> )","translateY()":"translateY( <length-percentage> )","translateZ()":"translateZ( <length> )","type-or-unit":"string|color|url|integer|number|length|angle|time|frequency|cap|ch|em|ex|ic|lh|rlh|rem|vb|vi|vw|vh|vmin|vmax|mm|Q|cm|in|pt|pc|px|deg|grad|rad|turn|ms|s|Hz|kHz|%","type-selector":"<wq-name>|<ns-prefix>? '*'","var()":"var( <custom-property-name> , <declaration-value>? )","viewport-length":"auto|<length-percentage>","visual-box":"content-box|padding-box|border-box","wq-name":"<ns-prefix>? <ident-token>","-legacy-gradient":"<-webkit-gradient()>|<-legacy-linear-gradient>|<-legacy-repeating-linear-gradient>|<-legacy-radial-gradient>|<-legacy-repeating-radial-gradient>","-legacy-linear-gradient":"-moz-linear-gradient( <-legacy-linear-gradient-arguments> )|-webkit-linear-gradient( <-legacy-linear-gradient-arguments> )|-o-linear-gradient( <-legacy-linear-gradient-arguments> )","-legacy-repeating-linear-gradient":"-moz-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )|-webkit-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )|-o-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )","-legacy-linear-gradient-arguments":"[<angle>|<side-or-corner>]? , <color-stop-list>","-legacy-radial-gradient":"-moz-radial-gradient( <-legacy-radial-gradient-arguments> )|-webkit-radial-gradient( <-legacy-radial-gradient-arguments> )|-o-radial-gradient( <-legacy-radial-gradient-arguments> )","-legacy-repeating-radial-gradient":"-moz-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )|-webkit-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )|-o-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )","-legacy-radial-gradient-arguments":"[<position> ,]? [[[<-legacy-radial-gradient-shape>||<-legacy-radial-gradient-size>]|[<length>|<percentage>]{2}] ,]? <color-stop-list>","-legacy-radial-gradient-size":"closest-side|closest-corner|farthest-side|farthest-corner|contain|cover","-legacy-radial-gradient-shape":"circle|ellipse","-non-standard-font":"-apple-system-body|-apple-system-headline|-apple-system-subheadline|-apple-system-caption1|-apple-system-caption2|-apple-system-footnote|-apple-system-short-body|-apple-system-short-headline|-apple-system-short-subheadline|-apple-system-short-caption1|-apple-system-short-footnote|-apple-system-tall-body","-non-standard-color":"-moz-ButtonDefault|-moz-ButtonHoverFace|-moz-ButtonHoverText|-moz-CellHighlight|-moz-CellHighlightText|-moz-Combobox|-moz-ComboboxText|-moz-Dialog|-moz-DialogText|-moz-dragtargetzone|-moz-EvenTreeRow|-moz-Field|-moz-FieldText|-moz-html-CellHighlight|-moz-html-CellHighlightText|-moz-mac-accentdarkestshadow|-moz-mac-accentdarkshadow|-moz-mac-accentface|-moz-mac-accentlightesthighlight|-moz-mac-accentlightshadow|-moz-mac-accentregularhighlight|-moz-mac-accentregularshadow|-moz-mac-chrome-active|-moz-mac-chrome-inactive|-moz-mac-focusring|-moz-mac-menuselect|-moz-mac-menushadow|-moz-mac-menutextselect|-moz-MenuHover|-moz-MenuHoverText|-moz-MenuBarText|-moz-MenuBarHoverText|-moz-nativehyperlinktext|-moz-OddTreeRow|-moz-win-communicationstext|-moz-win-mediatext|-moz-activehyperlinktext|-moz-default-background-color|-moz-default-color|-moz-hyperlinktext|-moz-visitedhyperlinktext|-webkit-activelink|-webkit-focus-ring-color|-webkit-link|-webkit-text","-non-standard-image-rendering":"optimize-contrast|-moz-crisp-edges|-o-crisp-edges|-webkit-optimize-contrast","-non-standard-overflow":"-moz-scrollbars-none|-moz-scrollbars-horizontal|-moz-scrollbars-vertical|-moz-hidden-unscrollable","-non-standard-width":"fill-available|min-intrinsic|intrinsic|-moz-available|-moz-fit-content|-moz-min-content|-moz-max-content|-webkit-min-content|-webkit-max-content","-webkit-gradient()":"-webkit-gradient( <-webkit-gradient-type> , <-webkit-gradient-point> [, <-webkit-gradient-point>|, <-webkit-gradient-radius> , <-webkit-gradient-point>] [, <-webkit-gradient-radius>]? [, <-webkit-gradient-color-stop>]* )","-webkit-gradient-color-stop":"from( <color> )|color-stop( [<number-zero-one>|<percentage>] , <color> )|to( <color> )","-webkit-gradient-point":"[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]","-webkit-gradient-radius":"<length>|<percentage>","-webkit-gradient-type":"linear|radial","-webkit-mask-box-repeat":"repeat|stretch|round","-webkit-mask-clip-style":"border|border-box|padding|padding-box|content|content-box|text","-ms-filter-function-list":"<-ms-filter-function>+","-ms-filter-function":"<-ms-filter-function-progid>|<-ms-filter-function-legacy>","-ms-filter-function-progid":"'progid:' [<ident-token> '.']* [<ident-token>|<function-token> <any-value>? )]","-ms-filter-function-legacy":"<ident-token>|<function-token> <any-value>? )","-ms-filter":"<string>",age:"child|young|old","attr-name":"<wq-name>","attr-fallback":"<any-value>","bg-clip":"<box>|border|text",bottom:"<length>|auto","generic-voice":"[<age>? <gender> <integer>?]",gender:"male|female|neutral",left:"<length>|auto","mask-image":"<mask-reference>#",paint:"none|<color>|<url> [none|<color>]?|context-fill|context-stroke",right:"<length>|auto","scroll-timeline-axis":"block|inline|vertical|horizontal","scroll-timeline-name":"none|<custom-ident>","single-animation-composition":"replace|add|accumulate","svg-length":"<percentage>|<length>|<number>","svg-writing-mode":"lr-tb|rl-tb|tb-rl|lr|rl|tb",top:"<length>|auto",x:"<number>",y:"<number>",declaration:"<ident-token> : <declaration-value>? ['!' important]?","declaration-list":"[<declaration>? ';']* <declaration>?",url:"url( <string> <url-modifier>* )|<url-token>","url-modifier":"<ident>|<function-token> <any-value> )","number-zero-one":"<number [0,1]>","number-one-or-greater":"<number [1,\u221E]>","-non-standard-display":"-ms-inline-flexbox|-ms-grid|-ms-inline-grid|-webkit-flex|-webkit-inline-flex|-webkit-box|-webkit-inline-box|-moz-inline-stack|-moz-box|-moz-inline-box"},properties:{"--*":"<declaration-value>","-ms-accelerator":"false|true","-ms-block-progression":"tb|rl|bt|lr","-ms-content-zoom-chaining":"none|chained","-ms-content-zooming":"none|zoom","-ms-content-zoom-limit":"<'-ms-content-zoom-limit-min'> <'-ms-content-zoom-limit-max'>","-ms-content-zoom-limit-max":"<percentage>","-ms-content-zoom-limit-min":"<percentage>","-ms-content-zoom-snap":"<'-ms-content-zoom-snap-type'>||<'-ms-content-zoom-snap-points'>","-ms-content-zoom-snap-points":"snapInterval( <percentage> , <percentage> )|snapList( <percentage># )","-ms-content-zoom-snap-type":"none|proximity|mandatory","-ms-filter":"<string>","-ms-flow-from":"[none|<custom-ident>]#","-ms-flow-into":"[none|<custom-ident>]#","-ms-grid-columns":"none|<track-list>|<auto-track-list>","-ms-grid-rows":"none|<track-list>|<auto-track-list>","-ms-high-contrast-adjust":"auto|none","-ms-hyphenate-limit-chars":"auto|<integer>{1,3}","-ms-hyphenate-limit-lines":"no-limit|<integer>","-ms-hyphenate-limit-zone":"<percentage>|<length>","-ms-ime-align":"auto|after","-ms-overflow-style":"auto|none|scrollbar|-ms-autohiding-scrollbar","-ms-scrollbar-3dlight-color":"<color>","-ms-scrollbar-arrow-color":"<color>","-ms-scrollbar-base-color":"<color>","-ms-scrollbar-darkshadow-color":"<color>","-ms-scrollbar-face-color":"<color>","-ms-scrollbar-highlight-color":"<color>","-ms-scrollbar-shadow-color":"<color>","-ms-scrollbar-track-color":"<color>","-ms-scroll-chaining":"chained|none","-ms-scroll-limit":"<'-ms-scroll-limit-x-min'> <'-ms-scroll-limit-y-min'> <'-ms-scroll-limit-x-max'> <'-ms-scroll-limit-y-max'>","-ms-scroll-limit-x-max":"auto|<length>","-ms-scroll-limit-x-min":"<length>","-ms-scroll-limit-y-max":"auto|<length>","-ms-scroll-limit-y-min":"<length>","-ms-scroll-rails":"none|railed","-ms-scroll-snap-points-x":"snapInterval( <length-percentage> , <length-percentage> )|snapList( <length-percentage># )","-ms-scroll-snap-points-y":"snapInterval( <length-percentage> , <length-percentage> )|snapList( <length-percentage># )","-ms-scroll-snap-type":"none|proximity|mandatory","-ms-scroll-snap-x":"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-x'>","-ms-scroll-snap-y":"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-y'>","-ms-scroll-translation":"none|vertical-to-horizontal","-ms-text-autospace":"none|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space","-ms-touch-select":"grippers|none","-ms-user-select":"none|element|text","-ms-wrap-flow":"auto|both|start|end|maximum|clear","-ms-wrap-margin":"<length>","-ms-wrap-through":"wrap|none","-moz-appearance":"none|button|button-arrow-down|button-arrow-next|button-arrow-previous|button-arrow-up|button-bevel|button-focus|caret|checkbox|checkbox-container|checkbox-label|checkmenuitem|dualbutton|groupbox|listbox|listitem|menuarrow|menubar|menucheckbox|menuimage|menuitem|menuitemtext|menulist|menulist-button|menulist-text|menulist-textfield|menupopup|menuradio|menuseparator|meterbar|meterchunk|progressbar|progressbar-vertical|progresschunk|progresschunk-vertical|radio|radio-container|radio-label|radiomenuitem|range|range-thumb|resizer|resizerpanel|scale-horizontal|scalethumbend|scalethumb-horizontal|scalethumbstart|scalethumbtick|scalethumb-vertical|scale-vertical|scrollbarbutton-down|scrollbarbutton-left|scrollbarbutton-right|scrollbarbutton-up|scrollbarthumb-horizontal|scrollbarthumb-vertical|scrollbartrack-horizontal|scrollbartrack-vertical|searchfield|separator|sheet|spinner|spinner-downbutton|spinner-textfield|spinner-upbutton|splitter|statusbar|statusbarpanel|tab|tabpanel|tabpanels|tab-scroll-arrow-back|tab-scroll-arrow-forward|textfield|textfield-multiline|toolbar|toolbarbutton|toolbarbutton-dropdown|toolbargripper|toolbox|tooltip|treeheader|treeheadercell|treeheadersortarrow|treeitem|treeline|treetwisty|treetwistyopen|treeview|-moz-mac-unified-toolbar|-moz-win-borderless-glass|-moz-win-browsertabbar-toolbox|-moz-win-communicationstext|-moz-win-communications-toolbox|-moz-win-exclude-glass|-moz-win-glass|-moz-win-mediatext|-moz-win-media-toolbox|-moz-window-button-box|-moz-window-button-box-maximized|-moz-window-button-close|-moz-window-button-maximize|-moz-window-button-minimize|-moz-window-button-restore|-moz-window-frame-bottom|-moz-window-frame-left|-moz-window-frame-right|-moz-window-titlebar|-moz-window-titlebar-maximized","-moz-binding":"<url>|none","-moz-border-bottom-colors":"<color>+|none","-moz-border-left-colors":"<color>+|none","-moz-border-right-colors":"<color>+|none","-moz-border-top-colors":"<color>+|none","-moz-context-properties":"none|[fill|fill-opacity|stroke|stroke-opacity]#","-moz-float-edge":"border-box|content-box|margin-box|padding-box","-moz-force-broken-image-icon":"0|1","-moz-image-region":"<shape>|auto","-moz-orient":"inline|block|horizontal|vertical","-moz-outline-radius":"<outline-radius>{1,4} [/ <outline-radius>{1,4}]?","-moz-outline-radius-bottomleft":"<outline-radius>","-moz-outline-radius-bottomright":"<outline-radius>","-moz-outline-radius-topleft":"<outline-radius>","-moz-outline-radius-topright":"<outline-radius>","-moz-stack-sizing":"ignore|stretch-to-fit","-moz-text-blink":"none|blink","-moz-user-focus":"ignore|normal|select-after|select-before|select-menu|select-same|select-all|none","-moz-user-input":"auto|none|enabled|disabled","-moz-user-modify":"read-only|read-write|write-only","-moz-window-dragging":"drag|no-drag","-moz-window-shadow":"default|menu|tooltip|sheet|none","-webkit-appearance":"none|button|button-bevel|caps-lock-indicator|caret|checkbox|default-button|inner-spin-button|listbox|listitem|media-controls-background|media-controls-fullscreen-background|media-current-time-display|media-enter-fullscreen-button|media-exit-fullscreen-button|media-fullscreen-button|media-mute-button|media-overlay-play-button|media-play-button|media-seek-back-button|media-seek-forward-button|media-slider|media-sliderthumb|media-time-remaining-display|media-toggle-closed-captions-button|media-volume-slider|media-volume-slider-container|media-volume-sliderthumb|menulist|menulist-button|menulist-text|menulist-textfield|meter|progress-bar|progress-bar-value|push-button|radio|scrollbarbutton-down|scrollbarbutton-left|scrollbarbutton-right|scrollbarbutton-up|scrollbargripper-horizontal|scrollbargripper-vertical|scrollbarthumb-horizontal|scrollbarthumb-vertical|scrollbartrack-horizontal|scrollbartrack-vertical|searchfield|searchfield-cancel-button|searchfield-decoration|searchfield-results-button|searchfield-results-decoration|slider-horizontal|slider-vertical|sliderthumb-horizontal|sliderthumb-vertical|square-button|textarea|textfield|-apple-pay-button","-webkit-border-before":"<'border-width'>||<'border-style'>||<color>","-webkit-border-before-color":"<color>","-webkit-border-before-style":"<'border-style'>","-webkit-border-before-width":"<'border-width'>","-webkit-box-reflect":"[above|below|right|left]? <length>? <image>?","-webkit-line-clamp":"none|<integer>","-webkit-mask":"[<mask-reference>||<position> [/ <bg-size>]?||<repeat-style>||[<box>|border|padding|content|text]||[<box>|border|padding|content]]#","-webkit-mask-attachment":"<attachment>#","-webkit-mask-clip":"[<box>|border|padding|content|text]#","-webkit-mask-composite":"<composite-style>#","-webkit-mask-image":"<mask-reference>#","-webkit-mask-origin":"[<box>|border|padding|content]#","-webkit-mask-position":"<position>#","-webkit-mask-position-x":"[<length-percentage>|left|center|right]#","-webkit-mask-position-y":"[<length-percentage>|top|center|bottom]#","-webkit-mask-repeat":"<repeat-style>#","-webkit-mask-repeat-x":"repeat|no-repeat|space|round","-webkit-mask-repeat-y":"repeat|no-repeat|space|round","-webkit-mask-size":"<bg-size>#","-webkit-overflow-scrolling":"auto|touch","-webkit-tap-highlight-color":"<color>","-webkit-text-fill-color":"<color>","-webkit-text-stroke":"<length>||<color>","-webkit-text-stroke-color":"<color>","-webkit-text-stroke-width":"<length>","-webkit-touch-callout":"default|none","-webkit-user-modify":"read-only|read-write|read-write-plaintext-only","accent-color":"auto|<color>","align-content":"normal|<baseline-position>|<content-distribution>|<overflow-position>? <content-position>","align-items":"normal|stretch|<baseline-position>|[<overflow-position>? <self-position>]","align-self":"auto|normal|stretch|<baseline-position>|<overflow-position>? <self-position>","align-tracks":"[normal|<baseline-position>|<content-distribution>|<overflow-position>? <content-position>]#",all:"initial|inherit|unset|revert|revert-layer",animation:"<single-animation>#","animation-composition":"<single-animation-composition>#","animation-delay":"<time>#","animation-direction":"<single-animation-direction>#","animation-duration":"<time>#","animation-fill-mode":"<single-animation-fill-mode>#","animation-iteration-count":"<single-animation-iteration-count>#","animation-name":"[none|<keyframes-name>]#","animation-play-state":"<single-animation-play-state>#","animation-timing-function":"<easing-function>#","animation-timeline":"<single-animation-timeline>#",appearance:"none|auto|textfield|menulist-button|<compat-auto>","aspect-ratio":"auto|<ratio>",azimuth:"<angle>|[[left-side|far-left|left|center-left|center|center-right|right|far-right|right-side]||behind]|leftwards|rightwards","backdrop-filter":"none|<filter-function-list>","backface-visibility":"visible|hidden",background:"[<bg-layer> ,]* <final-bg-layer>","background-attachment":"<attachment>#","background-blend-mode":"<blend-mode>#","background-clip":"<bg-clip>#","background-color":"<color>","background-image":"<bg-image>#","background-origin":"<box>#","background-position":"<bg-position>#","background-position-x":"[center|[[left|right|x-start|x-end]? <length-percentage>?]!]#","background-position-y":"[center|[[top|bottom|y-start|y-end]? <length-percentage>?]!]#","background-repeat":"<repeat-style>#","background-size":"<bg-size>#","block-overflow":"clip|ellipsis|<string>","block-size":"<'width'>",border:"<line-width>||<line-style>||<color>","border-block":"<'border-top-width'>||<'border-top-style'>||<color>","border-block-color":"<'border-top-color'>{1,2}","border-block-style":"<'border-top-style'>","border-block-width":"<'border-top-width'>","border-block-end":"<'border-top-width'>||<'border-top-style'>||<color>","border-block-end-color":"<'border-top-color'>","border-block-end-style":"<'border-top-style'>","border-block-end-width":"<'border-top-width'>","border-block-start":"<'border-top-width'>||<'border-top-style'>||<color>","border-block-start-color":"<'border-top-color'>","border-block-start-style":"<'border-top-style'>","border-block-start-width":"<'border-top-width'>","border-bottom":"<line-width>||<line-style>||<color>","border-bottom-color":"<'border-top-color'>","border-bottom-left-radius":"<length-percentage>{1,2}","border-bottom-right-radius":"<length-percentage>{1,2}","border-bottom-style":"<line-style>","border-bottom-width":"<line-width>","border-collapse":"collapse|separate","border-color":"<color>{1,4}","border-end-end-radius":"<length-percentage>{1,2}","border-end-start-radius":"<length-percentage>{1,2}","border-image":"<'border-image-source'>||<'border-image-slice'> [/ <'border-image-width'>|/ <'border-image-width'>? / <'border-image-outset'>]?||<'border-image-repeat'>","border-image-outset":"[<length>|<number>]{1,4}","border-image-repeat":"[stretch|repeat|round|space]{1,2}","border-image-slice":"<number-percentage>{1,4}&&fill?","border-image-source":"none|<image>","border-image-width":"[<length-percentage>|<number>|auto]{1,4}","border-inline":"<'border-top-width'>||<'border-top-style'>||<color>","border-inline-end":"<'border-top-width'>||<'border-top-style'>||<color>","border-inline-color":"<'border-top-color'>{1,2}","border-inline-style":"<'border-top-style'>","border-inline-width":"<'border-top-width'>","border-inline-end-color":"<'border-top-color'>","border-inline-end-style":"<'border-top-style'>","border-inline-end-width":"<'border-top-width'>","border-inline-start":"<'border-top-width'>||<'border-top-style'>||<color>","border-inline-start-color":"<'border-top-color'>","border-inline-start-style":"<'border-top-style'>","border-inline-start-width":"<'border-top-width'>","border-left":"<line-width>||<line-style>||<color>","border-left-color":"<color>","border-left-style":"<line-style>","border-left-width":"<line-width>","border-radius":"<length-percentage>{1,4} [/ <length-percentage>{1,4}]?","border-right":"<line-width>||<line-style>||<color>","border-right-color":"<color>","border-right-style":"<line-style>","border-right-width":"<line-width>","border-spacing":"<length> <length>?","border-start-end-radius":"<length-percentage>{1,2}","border-start-start-radius":"<length-percentage>{1,2}","border-style":"<line-style>{1,4}","border-top":"<line-width>||<line-style>||<color>","border-top-color":"<color>","border-top-left-radius":"<length-percentage>{1,2}","border-top-right-radius":"<length-percentage>{1,2}","border-top-style":"<line-style>","border-top-width":"<line-width>","border-width":"<line-width>{1,4}",bottom:"<length>|<percentage>|auto","box-align":"start|center|end|baseline|stretch","box-decoration-break":"slice|clone","box-direction":"normal|reverse|inherit","box-flex":"<number>","box-flex-group":"<integer>","box-lines":"single|multiple","box-ordinal-group":"<integer>","box-orient":"horizontal|vertical|inline-axis|block-axis|inherit","box-pack":"start|center|end|justify","box-shadow":"none|<shadow>#","box-sizing":"content-box|border-box","break-after":"auto|avoid|always|all|avoid-page|page|left|right|recto|verso|avoid-column|column|avoid-region|region","break-before":"auto|avoid|always|all|avoid-page|page|left|right|recto|verso|avoid-column|column|avoid-region|region","break-inside":"auto|avoid|avoid-page|avoid-column|avoid-region","caption-side":"top|bottom|block-start|block-end|inline-start|inline-end",caret:"<'caret-color'>||<'caret-shape'>","caret-color":"auto|<color>","caret-shape":"auto|bar|block|underscore",clear:"none|left|right|both|inline-start|inline-end",clip:"<shape>|auto","clip-path":"<clip-source>|[<basic-shape>||<geometry-box>]|none",color:"<color>","print-color-adjust":"economy|exact","color-scheme":"normal|[light|dark|<custom-ident>]+&&only?","column-count":"<integer>|auto","column-fill":"auto|balance|balance-all","column-gap":"normal|<length-percentage>","column-rule":"<'column-rule-width'>||<'column-rule-style'>||<'column-rule-color'>","column-rule-color":"<color>","column-rule-style":"<'border-style'>","column-rule-width":"<'border-width'>","column-span":"none|all","column-width":"<length>|auto",columns:"<'column-width'>||<'column-count'>",contain:"none|strict|content|[[size||inline-size]||layout||style||paint]","contain-intrinsic-size":"[none|<length>|auto <length>]{1,2}","contain-intrinsic-block-size":"none|<length>|auto <length>","contain-intrinsic-height":"none|<length>|auto <length>","contain-intrinsic-inline-size":"none|<length>|auto <length>","contain-intrinsic-width":"none|<length>|auto <length>",content:"normal|none|[<content-replacement>|<content-list>] [/ [<string>|<counter>]+]?","content-visibility":"visible|auto|hidden","counter-increment":"[<counter-name> <integer>?]+|none","counter-reset":"[<counter-name> <integer>?|<reversed-counter-name> <integer>?]+|none","counter-set":"[<counter-name> <integer>?]+|none",cursor:"[[<url> [<x> <y>]? ,]* [auto|default|none|context-menu|help|pointer|progress|wait|cell|crosshair|text|vertical-text|alias|copy|move|no-drop|not-allowed|e-resize|n-resize|ne-resize|nw-resize|s-resize|se-resize|sw-resize|w-resize|ew-resize|ns-resize|nesw-resize|nwse-resize|col-resize|row-resize|all-scroll|zoom-in|zoom-out|grab|grabbing|hand|-webkit-grab|-webkit-grabbing|-webkit-zoom-in|-webkit-zoom-out|-moz-grab|-moz-grabbing|-moz-zoom-in|-moz-zoom-out]]",direction:"ltr|rtl",display:"[<display-outside>||<display-inside>]|<display-listitem>|<display-internal>|<display-box>|<display-legacy>|<-non-standard-display>","empty-cells":"show|hide",filter:"none|<filter-function-list>|<-ms-filter-function-list>",flex:"none|[<'flex-grow'> <'flex-shrink'>?||<'flex-basis'>]","flex-basis":"content|<'width'>","flex-direction":"row|row-reverse|column|column-reverse","flex-flow":"<'flex-direction'>||<'flex-wrap'>","flex-grow":"<number>","flex-shrink":"<number>","flex-wrap":"nowrap|wrap|wrap-reverse",float:"left|right|none|inline-start|inline-end",font:"[[<'font-style'>||<font-variant-css21>||<'font-weight'>||<'font-stretch'>]? <'font-size'> [/ <'line-height'>]? <'font-family'>]|caption|icon|menu|message-box|small-caption|status-bar","font-family":"[<family-name>|<generic-family>]#","font-feature-settings":"normal|<feature-tag-value>#","font-kerning":"auto|normal|none","font-language-override":"normal|<string>","font-optical-sizing":"auto|none","font-variation-settings":"normal|[<string> <number>]#","font-size":"<absolute-size>|<relative-size>|<length-percentage>","font-size-adjust":"none|[ex-height|cap-height|ch-width|ic-width|ic-height]? [from-font|<number>]","font-smooth":"auto|never|always|<absolute-size>|<length>","font-stretch":"<font-stretch-absolute>","font-style":"normal|italic|oblique <angle>?","font-synthesis":"none|[weight||style||small-caps]","font-variant":"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>||stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )||[small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps]||<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero||<east-asian-variant-values>||<east-asian-width-values>||ruby]","font-variant-alternates":"normal|[stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )]","font-variant-caps":"normal|small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps","font-variant-east-asian":"normal|[<east-asian-variant-values>||<east-asian-width-values>||ruby]","font-variant-ligatures":"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>]","font-variant-numeric":"normal|[<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero]","font-variant-position":"normal|sub|super","font-weight":"<font-weight-absolute>|bolder|lighter","forced-color-adjust":"auto|none",gap:"<'row-gap'> <'column-gap'>?",grid:"<'grid-template'>|<'grid-template-rows'> / [auto-flow&&dense?] <'grid-auto-columns'>?|[auto-flow&&dense?] <'grid-auto-rows'>? / <'grid-template-columns'>","grid-area":"<grid-line> [/ <grid-line>]{0,3}","grid-auto-columns":"<track-size>+","grid-auto-flow":"[row|column]||dense","grid-auto-rows":"<track-size>+","grid-column":"<grid-line> [/ <grid-line>]?","grid-column-end":"<grid-line>","grid-column-gap":"<length-percentage>","grid-column-start":"<grid-line>","grid-gap":"<'grid-row-gap'> <'grid-column-gap'>?","grid-row":"<grid-line> [/ <grid-line>]?","grid-row-end":"<grid-line>","grid-row-gap":"<length-percentage>","grid-row-start":"<grid-line>","grid-template":"none|[<'grid-template-rows'> / <'grid-template-columns'>]|[<line-names>? <string> <track-size>? <line-names>?]+ [/ <explicit-track-list>]?","grid-template-areas":"none|<string>+","grid-template-columns":"none|<track-list>|<auto-track-list>|subgrid <line-name-list>?","grid-template-rows":"none|<track-list>|<auto-track-list>|subgrid <line-name-list>?","hanging-punctuation":"none|[first||[force-end|allow-end]||last]",height:"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )","hyphenate-character":"auto|<string>",hyphens:"none|manual|auto","image-orientation":"from-image|<angle>|[<angle>? flip]","image-rendering":"auto|crisp-edges|pixelated|optimizeSpeed|optimizeQuality|<-non-standard-image-rendering>","image-resolution":"[from-image||<resolution>]&&snap?","ime-mode":"auto|normal|active|inactive|disabled","initial-letter":"normal|[<number> <integer>?]","initial-letter-align":"[auto|alphabetic|hanging|ideographic]","inline-size":"<'width'>","input-security":"auto|none",inset:"<'top'>{1,4}","inset-block":"<'top'>{1,2}","inset-block-end":"<'top'>","inset-block-start":"<'top'>","inset-inline":"<'top'>{1,2}","inset-inline-end":"<'top'>","inset-inline-start":"<'top'>",isolation:"auto|isolate","justify-content":"normal|<content-distribution>|<overflow-position>? [<content-position>|left|right]","justify-items":"normal|stretch|<baseline-position>|<overflow-position>? [<self-position>|left|right]|legacy|legacy&&[left|right|center]","justify-self":"auto|normal|stretch|<baseline-position>|<overflow-position>? [<self-position>|left|right]","justify-tracks":"[normal|<content-distribution>|<overflow-position>? [<content-position>|left|right]]#",left:"<length>|<percentage>|auto","letter-spacing":"normal|<length-percentage>","line-break":"auto|loose|normal|strict|anywhere","line-clamp":"none|<integer>","line-height":"normal|<number>|<length>|<percentage>","line-height-step":"<length>","list-style":"<'list-style-type'>||<'list-style-position'>||<'list-style-image'>","list-style-image":"<image>|none","list-style-position":"inside|outside","list-style-type":"<counter-style>|<string>|none",margin:"[<length>|<percentage>|auto]{1,4}","margin-block":"<'margin-left'>{1,2}","margin-block-end":"<'margin-left'>","margin-block-start":"<'margin-left'>","margin-bottom":"<length>|<percentage>|auto","margin-inline":"<'margin-left'>{1,2}","margin-inline-end":"<'margin-left'>","margin-inline-start":"<'margin-left'>","margin-left":"<length>|<percentage>|auto","margin-right":"<length>|<percentage>|auto","margin-top":"<length>|<percentage>|auto","margin-trim":"none|in-flow|all",mask:"<mask-layer>#","mask-border":"<'mask-border-source'>||<'mask-border-slice'> [/ <'mask-border-width'>? [/ <'mask-border-outset'>]?]?||<'mask-border-repeat'>||<'mask-border-mode'>","mask-border-mode":"luminance|alpha","mask-border-outset":"[<length>|<number>]{1,4}","mask-border-repeat":"[stretch|repeat|round|space]{1,2}","mask-border-slice":"<number-percentage>{1,4} fill?","mask-border-source":"none|<image>","mask-border-width":"[<length-percentage>|<number>|auto]{1,4}","mask-clip":"[<geometry-box>|no-clip]#","mask-composite":"<compositing-operator>#","mask-image":"<mask-reference>#","mask-mode":"<masking-mode>#","mask-origin":"<geometry-box>#","mask-position":"<position>#","mask-repeat":"<repeat-style>#","mask-size":"<bg-size>#","mask-type":"luminance|alpha","masonry-auto-flow":"[pack|next]||[definite-first|ordered]","math-depth":"auto-add|add( <integer> )|<integer>","math-shift":"normal|compact","math-style":"normal|compact","max-block-size":"<'max-width'>","max-height":"none|<length-percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )","max-inline-size":"<'max-width'>","max-lines":"none|<integer>","max-width":"none|<length-percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|<-non-standard-width>","min-block-size":"<'min-width'>","min-height":"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )","min-inline-size":"<'min-width'>","min-width":"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|<-non-standard-width>","mix-blend-mode":"<blend-mode>|plus-lighter","object-fit":"fill|contain|cover|none|scale-down","object-position":"<position>",offset:"[<'offset-position'>? [<'offset-path'> [<'offset-distance'>||<'offset-rotate'>]?]?]! [/ <'offset-anchor'>]?","offset-anchor":"auto|<position>","offset-distance":"<length-percentage>","offset-path":"none|ray( [<angle>&&<size>&&contain?] )|<path()>|<url>|[<basic-shape>||<geometry-box>]","offset-position":"auto|<position>","offset-rotate":"[auto|reverse]||<angle>",opacity:"<alpha-value>",order:"<integer>",orphans:"<integer>",outline:"[<'outline-color'>||<'outline-style'>||<'outline-width'>]","outline-color":"<color>|invert","outline-offset":"<length>","outline-style":"auto|<'border-style'>","outline-width":"<line-width>",overflow:"[visible|hidden|clip|scroll|auto]{1,2}|<-non-standard-overflow>","overflow-anchor":"auto|none","overflow-block":"visible|hidden|clip|scroll|auto","overflow-clip-box":"padding-box|content-box","overflow-clip-margin":"<visual-box>||<length [0,\u221E]>","overflow-inline":"visible|hidden|clip|scroll|auto","overflow-wrap":"normal|break-word|anywhere","overflow-x":"visible|hidden|clip|scroll|auto","overflow-y":"visible|hidden|clip|scroll|auto","overscroll-behavior":"[contain|none|auto]{1,2}","overscroll-behavior-block":"contain|none|auto","overscroll-behavior-inline":"contain|none|auto","overscroll-behavior-x":"contain|none|auto","overscroll-behavior-y":"contain|none|auto",padding:"[<length>|<percentage>]{1,4}","padding-block":"<'padding-left'>{1,2}","padding-block-end":"<'padding-left'>","padding-block-start":"<'padding-left'>","padding-bottom":"<length>|<percentage>","padding-inline":"<'padding-left'>{1,2}","padding-inline-end":"<'padding-left'>","padding-inline-start":"<'padding-left'>","padding-left":"<length>|<percentage>","padding-right":"<length>|<percentage>","padding-top":"<length>|<percentage>","page-break-after":"auto|always|avoid|left|right|recto|verso","page-break-before":"auto|always|avoid|left|right|recto|verso","page-break-inside":"auto|avoid","paint-order":"normal|[fill||stroke||markers]",perspective:"none|<length>","perspective-origin":"<position>","place-content":"<'align-content'> <'justify-content'>?","place-items":"<'align-items'> <'justify-items'>?","place-self":"<'align-self'> <'justify-self'>?","pointer-events":"auto|none|visiblePainted|visibleFill|visibleStroke|visible|painted|fill|stroke|all|inherit",position:"static|relative|absolute|sticky|fixed|-webkit-sticky",quotes:"none|auto|[<string> <string>]+",resize:"none|both|horizontal|vertical|block|inline",right:"<length>|<percentage>|auto",rotate:"none|<angle>|[x|y|z|<number>{3}]&&<angle>","row-gap":"normal|<length-percentage>","ruby-align":"start|center|space-between|space-around","ruby-merge":"separate|collapse|auto","ruby-position":"[alternate||[over|under]]|inter-character",scale:"none|<number>{1,3}","scrollbar-color":"auto|<color>{2}","scrollbar-gutter":"auto|stable&&both-edges?","scrollbar-width":"auto|thin|none","scroll-behavior":"auto|smooth","scroll-margin":"<length>{1,4}","scroll-margin-block":"<length>{1,2}","scroll-margin-block-start":"<length>","scroll-margin-block-end":"<length>","scroll-margin-bottom":"<length>","scroll-margin-inline":"<length>{1,2}","scroll-margin-inline-start":"<length>","scroll-margin-inline-end":"<length>","scroll-margin-left":"<length>","scroll-margin-right":"<length>","scroll-margin-top":"<length>","scroll-padding":"[auto|<length-percentage>]{1,4}","scroll-padding-block":"[auto|<length-percentage>]{1,2}","scroll-padding-block-start":"auto|<length-percentage>","scroll-padding-block-end":"auto|<length-percentage>","scroll-padding-bottom":"auto|<length-percentage>","scroll-padding-inline":"[auto|<length-percentage>]{1,2}","scroll-padding-inline-start":"auto|<length-percentage>","scroll-padding-inline-end":"auto|<length-percentage>","scroll-padding-left":"auto|<length-percentage>","scroll-padding-right":"auto|<length-percentage>","scroll-padding-top":"auto|<length-percentage>","scroll-snap-align":"[none|start|end|center]{1,2}","scroll-snap-coordinate":"none|<position>#","scroll-snap-destination":"<position>","scroll-snap-points-x":"none|repeat( <length-percentage> )","scroll-snap-points-y":"none|repeat( <length-percentage> )","scroll-snap-stop":"normal|always","scroll-snap-type":"none|[x|y|block|inline|both] [mandatory|proximity]?","scroll-snap-type-x":"none|mandatory|proximity","scroll-snap-type-y":"none|mandatory|proximity","scroll-timeline":"<scroll-timeline-name>||<scroll-timeline-axis>","scroll-timeline-axis":"block|inline|vertical|horizontal","scroll-timeline-name":"none|<custom-ident>","shape-image-threshold":"<alpha-value>","shape-margin":"<length-percentage>","shape-outside":"none|[<shape-box>||<basic-shape>]|<image>","tab-size":"<integer>|<length>","table-layout":"auto|fixed","text-align":"start|end|left|right|center|justify|match-parent","text-align-last":"auto|start|end|left|right|center|justify","text-combine-upright":"none|all|[digits <integer>?]","text-decoration":"<'text-decoration-line'>||<'text-decoration-style'>||<'text-decoration-color'>||<'text-decoration-thickness'>","text-decoration-color":"<color>","text-decoration-line":"none|[underline||overline||line-through||blink]|spelling-error|grammar-error","text-decoration-skip":"none|[objects||[spaces|[leading-spaces||trailing-spaces]]||edges||box-decoration]","text-decoration-skip-ink":"auto|all|none","text-decoration-style":"solid|double|dotted|dashed|wavy","text-decoration-thickness":"auto|from-font|<length>|<percentage>","text-emphasis":"<'text-emphasis-style'>||<'text-emphasis-color'>","text-emphasis-color":"<color>","text-emphasis-position":"[over|under]&&[right|left]","text-emphasis-style":"none|[[filled|open]||[dot|circle|double-circle|triangle|sesame]]|<string>","text-indent":"<length-percentage>&&hanging?&&each-line?","text-justify":"auto|inter-character|inter-word|none","text-orientation":"mixed|upright|sideways","text-overflow":"[clip|ellipsis|<string>]{1,2}","text-rendering":"auto|optimizeSpeed|optimizeLegibility|geometricPrecision","text-shadow":"none|<shadow-t>#","text-size-adjust":"none|auto|<percentage>","text-transform":"none|capitalize|uppercase|lowercase|full-width|full-size-kana","text-underline-offset":"auto|<length>|<percentage>","text-underline-position":"auto|from-font|[under||[left|right]]",top:"<length>|<percentage>|auto","touch-action":"auto|none|[[pan-x|pan-left|pan-right]||[pan-y|pan-up|pan-down]||pinch-zoom]|manipulation",transform:"none|<transform-list>","transform-box":"content-box|border-box|fill-box|stroke-box|view-box","transform-origin":"[<length-percentage>|left|center|right|top|bottom]|[[<length-percentage>|left|center|right]&&[<length-percentage>|top|center|bottom]] <length>?","transform-style":"flat|preserve-3d",transition:"<single-transition>#","transition-delay":"<time>#","transition-duration":"<time>#","transition-property":"none|<single-transition-property>#","transition-timing-function":"<easing-function>#",translate:"none|<length-percentage> [<length-percentage> <length>?]?","unicode-bidi":"normal|embed|isolate|bidi-override|isolate-override|plaintext|-moz-isolate|-moz-isolate-override|-moz-plaintext|-webkit-isolate|-webkit-isolate-override|-webkit-plaintext","user-select":"auto|text|none|contain|all","vertical-align":"baseline|sub|super|text-top|text-bottom|middle|top|bottom|<percentage>|<length>",visibility:"visible|hidden|collapse","white-space":"normal|pre|nowrap|pre-wrap|pre-line|break-spaces",widows:"<integer>",width:"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|fill|stretch|intrinsic|-moz-max-content|-webkit-max-content|-moz-fit-content|-webkit-fit-content","will-change":"auto|<animateable-feature>#","word-break":"normal|break-all|keep-all|break-word","word-spacing":"normal|<length>","word-wrap":"normal|break-word","writing-mode":"horizontal-tb|vertical-rl|vertical-lr|sideways-rl|sideways-lr|<svg-writing-mode>","z-index":"auto|<integer>",zoom:"normal|reset|<number>|<percentage>","-moz-background-clip":"padding|border","-moz-border-radius-bottomleft":"<'border-bottom-left-radius'>","-moz-border-radius-bottomright":"<'border-bottom-right-radius'>","-moz-border-radius-topleft":"<'border-top-left-radius'>","-moz-border-radius-topright":"<'border-bottom-right-radius'>","-moz-control-character-visibility":"visible|hidden","-moz-osx-font-smoothing":"auto|grayscale","-moz-user-select":"none|text|all|-moz-none","-ms-flex-align":"start|end|center|baseline|stretch","-ms-flex-item-align":"auto|start|end|center|baseline|stretch","-ms-flex-line-pack":"start|end|center|justify|distribute|stretch","-ms-flex-negative":"<'flex-shrink'>","-ms-flex-pack":"start|end|center|justify|distribute","-ms-flex-order":"<integer>","-ms-flex-positive":"<'flex-grow'>","-ms-flex-preferred-size":"<'flex-basis'>","-ms-interpolation-mode":"nearest-neighbor|bicubic","-ms-grid-column-align":"start|end|center|stretch","-ms-grid-row-align":"start|end|center|stretch","-ms-hyphenate-limit-last":"none|always|column|page|spread","-webkit-background-clip":"[<box>|border|padding|content|text]#","-webkit-column-break-after":"always|auto|avoid","-webkit-column-break-before":"always|auto|avoid","-webkit-column-break-inside":"always|auto|avoid","-webkit-font-smoothing":"auto|none|antialiased|subpixel-antialiased","-webkit-mask-box-image":"[<url>|<gradient>|none] [<length-percentage>{4} <-webkit-mask-box-repeat>{2}]?","-webkit-print-color-adjust":"economy|exact","-webkit-text-security":"none|circle|disc|square","-webkit-user-drag":"none|element|auto","-webkit-user-select":"auto|none|text|all","alignment-baseline":"auto|baseline|before-edge|text-before-edge|middle|central|after-edge|text-after-edge|ideographic|alphabetic|hanging|mathematical","baseline-shift":"baseline|sub|super|<svg-length>",behavior:"<url>+","clip-rule":"nonzero|evenodd",cue:"<'cue-before'> <'cue-after'>?","cue-after":"<url> <decibel>?|none","cue-before":"<url> <decibel>?|none","dominant-baseline":"auto|use-script|no-change|reset-size|ideographic|alphabetic|hanging|mathematical|central|middle|text-after-edge|text-before-edge",fill:"<paint>","fill-opacity":"<number-zero-one>","fill-rule":"nonzero|evenodd","glyph-orientation-horizontal":"<angle>","glyph-orientation-vertical":"<angle>",kerning:"auto|<svg-length>",marker:"none|<url>","marker-end":"none|<url>","marker-mid":"none|<url>","marker-start":"none|<url>",pause:"<'pause-before'> <'pause-after'>?","pause-after":"<time>|none|x-weak|weak|medium|strong|x-strong","pause-before":"<time>|none|x-weak|weak|medium|strong|x-strong",rest:"<'rest-before'> <'rest-after'>?","rest-after":"<time>|none|x-weak|weak|medium|strong|x-strong","rest-before":"<time>|none|x-weak|weak|medium|strong|x-strong","shape-rendering":"auto|optimizeSpeed|crispEdges|geometricPrecision",src:"[<url> [format( <string># )]?|local( <family-name> )]#",speak:"auto|none|normal","speak-as":"normal|spell-out||digits||[literal-punctuation|no-punctuation]",stroke:"<paint>","stroke-dasharray":"none|[<svg-length>+]#","stroke-dashoffset":"<svg-length>","stroke-linecap":"butt|round|square","stroke-linejoin":"miter|round|bevel","stroke-miterlimit":"<number-one-or-greater>","stroke-opacity":"<number-zero-one>","stroke-width":"<svg-length>","text-anchor":"start|middle|end","unicode-range":"<urange>#","voice-balance":"<number>|left|center|right|leftwards|rightwards","voice-duration":"auto|<time>","voice-family":"[[<family-name>|<generic-voice>] ,]* [<family-name>|<generic-voice>]|preserve","voice-pitch":"<frequency>&&absolute|[[x-low|low|medium|high|x-high]||[<frequency>|<semitones>|<percentage>]]","voice-range":"<frequency>&&absolute|[[x-low|low|medium|high|x-high]||[<frequency>|<semitones>|<percentage>]]","voice-rate":"[normal|x-slow|slow|medium|fast|x-fast]||<percentage>","voice-stress":"normal|strong|moderate|none|reduced","voice-volume":"silent|[[x-soft|soft|medium|loud|x-loud]||<decibel>]"},atrules:{charset:{prelude:"<string>",descriptors:null},"counter-style":{prelude:"<counter-style-name>",descriptors:{"additive-symbols":"[<integer>&&<symbol>]#",fallback:"<counter-style-name>",negative:"<symbol> <symbol>?",pad:"<integer>&&<symbol>",prefix:"<symbol>",range:"[[<integer>|infinite]{2}]#|auto","speak-as":"auto|bullets|numbers|words|spell-out|<counter-style-name>",suffix:"<symbol>",symbols:"<symbol>+",system:"cyclic|numeric|alphabetic|symbolic|additive|[fixed <integer>?]|[extends <counter-style-name>]"}},document:{prelude:"[<url>|url-prefix( <string> )|domain( <string> )|media-document( <string> )|regexp( <string> )]#",descriptors:null},"font-face":{prelude:null,descriptors:{"ascent-override":"normal|<percentage>","descent-override":"normal|<percentage>","font-display":"[auto|block|swap|fallback|optional]","font-family":"<family-name>","font-feature-settings":"normal|<feature-tag-value>#","font-variation-settings":"normal|[<string> <number>]#","font-stretch":"<font-stretch-absolute>{1,2}","font-style":"normal|italic|oblique <angle>{0,2}","font-weight":"<font-weight-absolute>{1,2}","font-variant":"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>||stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )||[small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps]||<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero||<east-asian-variant-values>||<east-asian-width-values>||ruby]","line-gap-override":"normal|<percentage>","size-adjust":"<percentage>",src:"[<url> [format( <string># )]?|local( <family-name> )]#","unicode-range":"<urange>#"}},"font-feature-values":{prelude:"<family-name>#",descriptors:null},import:{prelude:"[<string>|<url>] [layer|layer( <layer-name> )]? [supports( [<supports-condition>|<declaration>] )]? <media-query-list>?",descriptors:null},keyframes:{prelude:"<keyframes-name>",descriptors:null},layer:{prelude:"[<layer-name>#|<layer-name>?]",descriptors:null},media:{prelude:"<media-query-list>",descriptors:null},namespace:{prelude:"<namespace-prefix>? [<string>|<url>]",descriptors:null},page:{prelude:"<page-selector-list>",descriptors:{bleed:"auto|<length>",marks:"none|[crop||cross]",size:"<length>{1,2}|auto|[<page-size>||[portrait|landscape]]"}},property:{prelude:"<custom-property-name>",descriptors:{syntax:"<string>",inherits:"true|false","initial-value":"<string>"}},"scroll-timeline":{prelude:"<timeline-name>",descriptors:null},supports:{prelude:"<supports-condition>",descriptors:null},viewport:{prelude:null,descriptors:{height:"<viewport-length>{1,2}","max-height":"<viewport-length>","max-width":"<viewport-length>","max-zoom":"auto|<number>|<percentage>","min-height":"<viewport-length>","min-width":"<viewport-length>","min-zoom":"auto|<number>|<percentage>",orientation:"auto|portrait|landscape","user-zoom":"zoom|fixed","viewport-fit":"auto|contain|cover",width:"<viewport-length>{1,2}",zoom:"auto|<number>|<percentage>"}},nest:{prelude:"<complex-selector-list>",descriptors:null}}}});var Nd=ee(oa=>{"use strict";var Jt=Me(),Iw=Bn(),Lr=43,Rn=45,xc=110,qi=!0,mO=!1;function kc(t,e){let r=this.tokenStart+t,i=this.charCodeAt(r);for((i===Lr||i===Rn)&&(e&&this.error("Number sign is not allowed"),r++);r<this.tokenEnd;r++)Iw.isDigit(this.charCodeAt(r))||this.error("Integer is expected",r)}function Do(t){return kc.call(this,0,t)}function mi(t,e){if(!this.cmpChar(this.tokenStart+t,e)){let r="";switch(e){case xc:r="N is expected";break;case Rn:r="HyphenMinus is expected";break}this.error(r,this.tokenStart+t)}}function Dd(){let t=0,e=0,r=this.tokenType;for(;r===Jt.WhiteSpace||r===Jt.Comment;)r=this.lookupType(++t);if(r!==Jt.Number)if(this.isDelim(Lr,t)||this.isDelim(Rn,t)){e=this.isDelim(Lr,t)?Lr:Rn;do r=this.lookupType(++t);while(r===Jt.WhiteSpace||r===Jt.Comment);r!==Jt.Number&&(this.skip(t),Do.call(this,qi))}else return null;return t>0&&this.skip(t),e===0&&(r=this.charCodeAt(this.tokenStart),r!==Lr&&r!==Rn&&this.error("Number sign is expected")),Do.call(this,e!==0),e===Rn?"-"+this.consume(Jt.Number):this.consume(Jt.Number)}var yO="AnPlusB",vO={a:[String,null],b:[String,null]};function bO(){let t=this.tokenStart,e=null,r=null;if(this.tokenType===Jt.Number)Do.call(this,mO),r=this.consume(Jt.Number);else if(this.tokenType===Jt.Ident&&this.cmpChar(this.tokenStart,Rn))switch(e="-1",mi.call(this,1,xc),this.tokenEnd-this.tokenStart){case 2:this.next(),r=Dd.call(this);break;case 3:mi.call(this,2,Rn),this.next(),this.skipSC(),Do.call(this,qi),r="-"+this.consume(Jt.Number);break;default:mi.call(this,2,Rn),kc.call(this,3,qi),this.next(),r=this.substrToCursor(t+2)}else if(this.tokenType===Jt.Ident||this.isDelim(Lr)&&this.lookupType(1)===Jt.Ident){let i=0;switch(e="1",this.isDelim(Lr)&&(i=1,this.next()),mi.call(this,0,xc),this.tokenEnd-this.tokenStart){case 1:this.next(),r=Dd.call(this);break;case 2:mi.call(this,1,Rn),this.next(),this.skipSC(),Do.call(this,qi),r="-"+this.consume(Jt.Number);break;default:mi.call(this,1,Rn),kc.call(this,2,qi),this.next(),r=this.substrToCursor(t+i+1)}}else if(this.tokenType===Jt.Dimension){let i=this.charCodeAt(this.tokenStart),s=i===Lr||i===Rn,a=this.tokenStart+s;for(;a<this.tokenEnd&&Iw.isDigit(this.charCodeAt(a));a++);a===this.tokenStart+s&&this.error("Integer is expected",this.tokenStart+s),mi.call(this,a-this.tokenStart,xc),e=this.substring(t,a),a+1===this.tokenEnd?(this.next(),r=Dd.call(this)):(mi.call(this,a-this.tokenStart+1,Rn),a+2===this.tokenEnd?(this.next(),this.skipSC(),Do.call(this,qi),r="-"+this.consume(Jt.Number)):(kc.call(this,a-this.tokenStart+2,qi),this.next(),r=this.substrToCursor(a+1)))}else this.error();return e!==null&&e.charCodeAt(0)===Lr&&(e=e.substr(1)),r!==null&&r.charCodeAt(0)===Lr&&(r=r.substr(1)),{type:"AnPlusB",loc:this.getLocation(t,this.tokenStart),a:e,b:r}}function wO(t){if(t.a){let e=t.a==="+1"&&"n"||t.a==="1"&&"n"||t.a==="-1"&&"-n"||t.a+"n";if(t.b){let r=t.b[0]==="-"||t.b[0]==="+"?t.b:"+"+t.b;this.tokenize(e+r)}else this.tokenize(e)}else this.tokenize(t.b)}oa.generate=wO;oa.name=yO;oa.parse=bO;oa.structure=vO});var Md=ee(No=>{"use strict";var Er=Me();function zw(t){return this.Raw(t,this.consumeUntilLeftCurlyBracketOrSemicolon,!0)}function xO(){for(let t=1,e;e=this.lookupType(t);t++){if(e===Er.RightCurlyBracket)return!0;if(e===Er.LeftCurlyBracket||e===Er.AtKeyword)return!1}return!1}var kO="Atrule",CO="atrule",SO={name:String,prelude:["AtrulePrelude","Raw",null],block:["Block",null]};function AO(t=!1){let e=this.tokenStart,r,i,s=null,a=null;switch(this.eat(Er.AtKeyword),r=this.substrToCursor(e+1),i=r.toLowerCase(),this.skipSC(),this.eof===!1&&this.tokenType!==Er.LeftCurlyBracket&&this.tokenType!==Er.Semicolon&&(this.parseAtrulePrelude?s=this.parseWithFallback(this.AtrulePrelude.bind(this,r,t),zw):s=zw.call(this,this.tokenIndex),this.skipSC()),this.tokenType){case Er.Semicolon:this.next();break;case Er.LeftCurlyBracket:hasOwnProperty.call(this.atrule,i)&&typeof this.atrule[i].block=="function"?a=this.atrule[i].block.call(this,t):a=this.Block(xO.call(this));break}return{type:"Atrule",loc:this.getLocation(e,this.tokenStart),name:r,prelude:s,block:a}}function TO(t){this.token(Er.AtKeyword,"@"+t.name),t.prelude!==null&&this.node(t.prelude),t.block?this.node(t.block):this.token(Er.Semicolon,";")}No.generate=TO;No.name=kO;No.parse=AO;No.structure=SO;No.walkContext=CO});var Od=ee(Mo=>{"use strict";var Bw=Me(),LO="AtrulePrelude",EO="atrulePrelude",DO={children:[[]]};function NO(t){let e=null;return t!==null&&(t=t.toLowerCase()),this.skipSC(),hasOwnProperty.call(this.atrule,t)&&typeof this.atrule[t].prelude=="function"?e=this.atrule[t].prelude.call(this):e=this.readSequence(this.scope.AtrulePrelude),this.skipSC(),this.eof!==!0&&this.tokenType!==Bw.LeftCurlyBracket&&this.tokenType!==Bw.Semicolon&&this.error("Semicolon or block is expected"),{type:"AtrulePrelude",loc:this.getLocationFromList(e),children:e}}function MO(t){this.children(t)}Mo.generate=MO;Mo.name=LO;Mo.parse=NO;Mo.structure=DO;Mo.walkContext=EO});var Id=ee(sa=>{"use strict";var Qn=Me(),OO=36,Rw=42,Cc=61,PO=94,Pd=124,IO=126;function zO(){this.eof&&this.error("Unexpected end of input");let t=this.tokenStart,e=!1;return this.isDelim(Rw)?(e=!0,this.next()):this.isDelim(Pd)||this.eat(Qn.Ident),this.isDelim(Pd)?this.charCodeAt(this.tokenStart+1)!==Cc?(this.next(),this.eat(Qn.Ident)):e&&this.error("Identifier is expected",this.tokenEnd):e&&this.error("Vertical line is expected"),{type:"Identifier",loc:this.getLocation(t,this.tokenStart),name:this.substrToCursor(t)}}function BO(){let t=this.tokenStart,e=this.charCodeAt(t);return e!==Cc&&e!==IO&&e!==PO&&e!==OO&&e!==Rw&&e!==Pd&&this.error("Attribute selector (=, ~=, ^=, $=, *=, |=) is expected"),this.next(),e!==Cc&&(this.isDelim(Cc)||this.error("Equal sign is expected"),this.next()),this.substrToCursor(t)}var RO="AttributeSelector",qO={name:"Identifier",matcher:[String,null],value:["String","Identifier",null],flags:[String,null]};function FO(){let t=this.tokenStart,e,r=null,i=null,s=null;return this.eat(Qn.LeftSquareBracket),this.skipSC(),e=zO.call(this),this.skipSC(),this.tokenType!==Qn.RightSquareBracket&&(this.tokenType!==Qn.Ident&&(r=BO.call(this),this.skipSC(),i=this.tokenType===Qn.String?this.String():this.Identifier(),this.skipSC()),this.tokenType===Qn.Ident&&(s=this.consume(Qn.Ident),this.skipSC())),this.eat(Qn.RightSquareBracket),{type:"AttributeSelector",loc:this.getLocation(t,this.tokenStart),name:e,matcher:r,value:i,flags:s}}function _O(t){this.token(Qn.Delim,"["),this.node(t.name),t.matcher!==null&&(this.tokenize(t.matcher),this.node(t.value)),t.flags!==null&&this.token(Qn.Ident,t.flags),this.token(Qn.Delim,"]")}sa.generate=_O;sa.name=RO;sa.parse=FO;sa.structure=qO});var zd=ee(Oo=>{"use strict";var ur=Me(),jO=38;function _w(t){return this.Raw(t,null,!0)}function qw(){return this.parseWithFallback(this.Rule,_w)}function Fw(t){return this.Raw(t,this.consumeUntilSemicolonIncluded,!0)}function HO(){if(this.tokenType===ur.Semicolon)return Fw.call(this,this.tokenIndex);let t=this.parseWithFallback(this.Declaration,Fw);return this.tokenType===ur.Semicolon&&this.next(),t}var WO="Block",UO="block",$O={children:[["Atrule","Rule","Declaration"]]};function GO(t){let e=t?HO:qw,r=this.tokenStart,i=this.createList();this.eat(ur.LeftCurlyBracket);e:for(;!this.eof;)switch(this.tokenType){case ur.RightCurlyBracket:break e;case ur.WhiteSpace:case ur.Comment:this.next();break;case ur.AtKeyword:i.push(this.parseWithFallback(this.Atrule.bind(this,t),_w));break;default:t&&this.isDelim(jO)?i.push(qw.call(this)):i.push(e.call(this))}return this.eof||this.eat(ur.RightCurlyBracket),{type:"Block",loc:this.getLocation(r,this.tokenStart),children:i}}function VO(t){this.token(ur.LeftCurlyBracket,"{"),this.children(t,e=>{e.type==="Declaration"&&this.token(ur.Semicolon,";")}),this.token(ur.RightCurlyBracket,"}")}Oo.generate=VO;Oo.name=WO;Oo.parse=GO;Oo.structure=$O;Oo.walkContext=UO});var Bd=ee(aa=>{"use strict";var Sc=Me(),KO="Brackets",YO={children:[[]]};function QO(t,e){let r=this.tokenStart,i=null;return this.eat(Sc.LeftSquareBracket),i=t.call(this,e),this.eof||this.eat(Sc.RightSquareBracket),{type:"Brackets",loc:this.getLocation(r,this.tokenStart),children:i}}function JO(t){this.token(Sc.Delim,"["),this.children(t),this.token(Sc.Delim,"]")}aa.generate=JO;aa.name=KO;aa.parse=QO;aa.structure=YO});var Rd=ee(la=>{"use strict";var jw=Me(),XO="CDC",ZO=[];function eP(){let t=this.tokenStart;return this.eat(jw.CDC),{type:"CDC",loc:this.getLocation(t,this.tokenStart)}}function tP(){this.token(jw.CDC,"-->")}la.generate=tP;la.name=XO;la.parse=eP;la.structure=ZO});var qd=ee(ca=>{"use strict";var Hw=Me(),nP="CDO",rP=[];function iP(){let t=this.tokenStart;return this.eat(Hw.CDO),{type:"CDO",loc:this.getLocation(t,this.tokenStart)}}function oP(){this.token(Hw.CDO,"<!--")}ca.generate=oP;ca.name=nP;ca.parse=iP;ca.structure=rP});var _d=ee(ua=>{"use strict";var Fd=Me(),sP=46,aP="ClassSelector",lP={name:String};function cP(){return this.eatDelim(sP),{type:"ClassSelector",loc:this.getLocation(this.tokenStart-1,this.tokenEnd),name:this.consume(Fd.Ident)}}function uP(t){this.token(Fd.Delim,"."),this.token(Fd.Ident,t.name)}ua.generate=uP;ua.name=aP;ua.parse=cP;ua.structure=lP});var jd=ee(fa=>{"use strict";var Ww=Me(),fP=43,Uw=47,dP=62,hP=126,pP="Combinator",gP={name:String};function mP(){let t=this.tokenStart,e;switch(this.tokenType){case Ww.WhiteSpace:e=" ";break;case Ww.Delim:switch(this.charCodeAt(this.tokenStart)){case dP:case fP:case hP:this.next();break;case Uw:this.next(),this.eatIdent("deep"),this.eatDelim(Uw);break;default:this.error("Combinator is expected")}e=this.substrToCursor(t);break}return{type:"Combinator",loc:this.getLocation(t,this.tokenStart),name:e}}function yP(t){this.tokenize(t.name)}fa.generate=yP;fa.name=pP;fa.parse=mP;fa.structure=gP});var Hd=ee(da=>{"use strict";var $w=Me(),vP=42,bP=47,wP="Comment",xP={value:String};function kP(){let t=this.tokenStart,e=this.tokenEnd;return this.eat($w.Comment),e-t+2>=2&&this.charCodeAt(e-2)===vP&&this.charCodeAt(e-1)===bP&&(e-=2),{type:"Comment",loc:this.getLocation(t,this.tokenStart),value:this.substring(t+2,e)}}function CP(t){this.token($w.Comment,"/*"+t.value+"*/")}da.generate=CP;da.name=wP;da.parse=kP;da.structure=xP});var Wd=ee(Po=>{"use strict";var SP=uc(),En=Me(),Vw=33,AP=35,TP=36,LP=38,EP=42,DP=43,Gw=47;function NP(t){return this.Raw(t,this.consumeUntilExclamationMarkOrSemicolon,!0)}function MP(t){return this.Raw(t,this.consumeUntilExclamationMarkOrSemicolon,!1)}function OP(){let t=this.tokenIndex,e=this.Value();return e.type!=="Raw"&&this.eof===!1&&this.tokenType!==En.Semicolon&&this.isDelim(Vw)===!1&&this.isBalanceEdge(t)===!1&&this.error(),e}var PP="Declaration",IP="declaration",zP={important:[Boolean,String],property:String,value:["Value","Raw"]};function BP(){let t=this.tokenStart,e=this.tokenIndex,r=qP.call(this),i=SP.isCustomProperty(r),s=i?this.parseCustomProperty:this.parseValue,a=i?MP:NP,f=!1,d;this.skipSC(),this.eat(En.Colon);let g=this.tokenIndex;if(i||this.skipSC(),s?d=this.parseWithFallback(OP,a):d=a.call(this,this.tokenIndex),i&&d.type==="Value"&&d.children.isEmpty){for(let p=g-this.tokenIndex;p<=0;p++)if(this.lookupType(p)===En.WhiteSpace){d.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}}return this.isDelim(Vw)&&(f=FP.call(this),this.skipSC()),this.eof===!1&&this.tokenType!==En.Semicolon&&this.isBalanceEdge(e)===!1&&this.error(),{type:"Declaration",loc:this.getLocation(t,this.tokenStart),important:f,property:r,value:d}}function RP(t){this.token(En.Ident,t.property),this.token(En.Colon,":"),this.node(t.value),t.important&&(this.token(En.Delim,"!"),this.token(En.Ident,t.important===!0?"important":t.important))}function qP(){let t=this.tokenStart;if(this.tokenType===En.Delim)switch(this.charCodeAt(this.tokenStart)){case EP:case TP:case DP:case AP:case LP:this.next();break;case Gw:this.next(),this.isDelim(Gw)&&this.next();break}return this.tokenType===En.Hash?this.eat(En.Hash):this.eat(En.Ident),this.substrToCursor(t)}function FP(){this.eat(En.Delim),this.skipSC();let t=this.consume(En.Ident);return t==="important"?!0:t}Po.generate=RP;Po.name=PP;Po.parse=BP;Po.structure=zP;Po.walkContext=IP});var $d=ee(pa=>{"use strict";var ha=Me(),_P=38;function Ud(t){return this.Raw(t,this.consumeUntilSemicolonIncluded,!0)}var jP="DeclarationList",HP={children:[["Declaration","Atrule","Rule"]]};function WP(){let t=this.createList();for(;!this.eof;)switch(this.tokenType){case ha.WhiteSpace:case ha.Comment:case ha.Semicolon:this.next();break;case ha.AtKeyword:t.push(this.parseWithFallback(this.Atrule.bind(this,!0),Ud));break;default:this.isDelim(_P)?t.push(this.parseWithFallback(this.Rule,Ud)):t.push(this.parseWithFallback(this.Declaration,Ud))}return{type:"DeclarationList",loc:this.getLocationFromList(t),children:t}}function UP(t){this.children(t,e=>{e.type==="Declaration"&&this.token(ha.Semicolon,";")})}pa.generate=UP;pa.name=jP;pa.parse=WP;pa.structure=HP});var Gd=ee(ma=>{"use strict";var Kw=Me(),$P="Dimension",GP={value:String,unit:String};function VP(){let t=this.tokenStart,e=this.consumeNumber(Kw.Dimension);return{type:"Dimension",loc:this.getLocation(t,this.tokenStart),value:e,unit:this.substring(t+e.length,this.tokenStart)}}function KP(t){this.token(Kw.Dimension,t.value+t.unit)}ma.generate=KP;ma.name=$P;ma.parse=VP;ma.structure=GP});var Kd=ee(Io=>{"use strict";var Vd=Me(),YP="Function",QP="function",JP={name:String,children:[[]]};function XP(t,e){let r=this.tokenStart,i=this.consumeFunctionName(),s=i.toLowerCase(),a;return a=e.hasOwnProperty(s)?e[s].call(this,e):t.call(this,e),this.eof||this.eat(Vd.RightParenthesis),{type:"Function",loc:this.getLocation(r,this.tokenStart),name:i,children:a}}function ZP(t){this.token(Vd.Function,t.name+"("),this.children(t),this.token(Vd.RightParenthesis,")")}Io.generate=ZP;Io.name=YP;Io.parse=XP;Io.structure=JP;Io.walkContext=QP});var Yd=ee(zo=>{"use strict";var Yw=Me(),eI="XXX",tI="Hash",nI={value:String};function rI(){let t=this.tokenStart;return this.eat(Yw.Hash),{type:"Hash",loc:this.getLocation(t,this.tokenStart),value:this.substrToCursor(t+1)}}function iI(t){this.token(Yw.Hash,"#"+t.value)}zo.generate=iI;zo.name=tI;zo.parse=rI;zo.structure=nI;zo.xxx=eI});var Qd=ee(ya=>{"use strict";var Qw=Me(),oI="Identifier",sI={name:String};function aI(){return{type:"Identifier",loc:this.getLocation(this.tokenStart,this.tokenEnd),name:this.consume(Qw.Ident)}}function lI(t){this.token(Qw.Ident,t.name)}ya.generate=lI;ya.name=oI;ya.parse=aI;ya.structure=sI});var Jd=ee(va=>{"use strict";var Jw=Me(),cI="IdSelector",uI={name:String};function fI(){let t=this.tokenStart;return this.eat(Jw.Hash),{type:"IdSelector",loc:this.getLocation(t,this.tokenStart),name:this.substrToCursor(t+1)}}function dI(t){this.token(Jw.Delim,"#"+t.name)}va.generate=dI;va.name=cI;va.parse=fI;va.structure=uI});var Xd=ee(ba=>{"use strict";var qn=Me(),hI="MediaFeature",pI={name:String,value:["Identifier","Number","Dimension","Ratio",null]};function gI(){let t=this.tokenStart,e,r=null;if(this.eat(qn.LeftParenthesis),this.skipSC(),e=this.consume(qn.Ident),this.skipSC(),this.tokenType!==qn.RightParenthesis){switch(this.eat(qn.Colon),this.skipSC(),this.tokenType){case qn.Number:this.lookupNonWSType(1)===qn.Delim?r=this.Ratio():r=this.Number();break;case qn.Dimension:r=this.Dimension();break;case qn.Ident:r=this.Identifier();break;default:this.error("Number, dimension, ratio or identifier is expected")}this.skipSC()}return this.eat(qn.RightParenthesis),{type:"MediaFeature",loc:this.getLocation(t,this.tokenStart),name:e,value:r}}function mI(t){this.token(qn.LeftParenthesis,"("),this.token(qn.Ident,t.name),t.value!==null&&(this.token(qn.Colon,":"),this.node(t.value)),this.token(qn.RightParenthesis,")")}ba.generate=mI;ba.name=hI;ba.parse=gI;ba.structure=pI});var Zd=ee(wa=>{"use strict";var Ac=Me(),yI="MediaQuery",vI={children:[["Identifier","MediaFeature","WhiteSpace"]]};function bI(){let t=this.createList(),e=null;this.skipSC();e:for(;!this.eof;){switch(this.tokenType){case Ac.Comment:case Ac.WhiteSpace:this.next();continue;case Ac.Ident:e=this.Identifier();break;case Ac.LeftParenthesis:e=this.MediaFeature();break;default:break e}t.push(e)}return e===null&&this.error("Identifier or parenthesis is expected"),{type:"MediaQuery",loc:this.getLocationFromList(t),children:t}}function wI(t){this.children(t)}wa.generate=wI;wa.name=yI;wa.parse=bI;wa.structure=vI});var eh=ee(xa=>{"use strict";var Xw=Me(),xI="MediaQueryList",kI={children:[["MediaQuery"]]};function CI(){let t=this.createList();for(this.skipSC();!this.eof&&(t.push(this.MediaQuery()),this.tokenType===Xw.Comma);)this.next();return{type:"MediaQueryList",loc:this.getLocationFromList(t),children:t}}function SI(t){this.children(t,()=>this.token(Xw.Comma,","))}xa.generate=SI;xa.name=xI;xa.parse=CI;xa.structure=kI});var th=ee(ka=>{"use strict";var AI=Me(),TI=38,LI="NestingSelector",EI={};function DI(){let t=this.tokenStart;return this.eatDelim(TI),{type:"NestingSelector",loc:this.getLocation(t,this.tokenStart)}}function NI(){this.token(AI.Delim,"&")}ka.generate=NI;ka.name=LI;ka.parse=DI;ka.structure=EI});var nh=ee(Ca=>{"use strict";var MI=Me(),OI="Nth",PI={nth:["AnPlusB","Identifier"],selector:["SelectorList",null]};function II(){this.skipSC();let t=this.tokenStart,e=t,r=null,i;return this.lookupValue(0,"odd")||this.lookupValue(0,"even")?i=this.Identifier():i=this.AnPlusB(),e=this.tokenStart,this.skipSC(),this.lookupValue(0,"of")&&(this.next(),r=this.SelectorList(),e=this.tokenStart),{type:"Nth",loc:this.getLocation(t,e),nth:i,selector:r}}function zI(t){this.node(t.nth),t.selector!==null&&(this.token(MI.Ident,"of"),this.node(t.selector))}Ca.generate=zI;Ca.name=OI;Ca.parse=II;Ca.structure=PI});var rh=ee(Sa=>{"use strict";var Zw=Me(),BI="Number",RI={value:String};function qI(){return{type:"Number",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:this.consume(Zw.Number)}}function FI(t){this.token(Zw.Number,t.value)}Sa.generate=FI;Sa.name=BI;Sa.parse=qI;Sa.structure=RI});var ih=ee(Aa=>{"use strict";var _I="Operator",jI={value:String};function HI(){let t=this.tokenStart;return this.next(),{type:"Operator",loc:this.getLocation(t,this.tokenStart),value:this.substrToCursor(t)}}function WI(t){this.tokenize(t.value)}Aa.generate=WI;Aa.name=_I;Aa.parse=HI;Aa.structure=jI});var oh=ee(Ta=>{"use strict";var Tc=Me(),UI="Parentheses",$I={children:[[]]};function GI(t,e){let r=this.tokenStart,i=null;return this.eat(Tc.LeftParenthesis),i=t.call(this,e),this.eof||this.eat(Tc.RightParenthesis),{type:"Parentheses",loc:this.getLocation(r,this.tokenStart),children:i}}function VI(t){this.token(Tc.LeftParenthesis,"("),this.children(t),this.token(Tc.RightParenthesis,")")}Ta.generate=VI;Ta.name=UI;Ta.parse=GI;Ta.structure=$I});var sh=ee(La=>{"use strict";var ex=Me(),KI="Percentage",YI={value:String};function QI(){return{type:"Percentage",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:this.consumeNumber(ex.Percentage)}}function JI(t){this.token(ex.Percentage,t.value+"%")}La.generate=JI;La.name=KI;La.parse=QI;La.structure=YI});var ah=ee(Bo=>{"use strict";var yi=Me(),XI="PseudoClassSelector",ZI="function",e2={name:String,children:[["Raw"],null]};function t2(){let t=this.tokenStart,e=null,r,i;return this.eat(yi.Colon),this.tokenType===yi.Function?(r=this.consumeFunctionName(),i=r.toLowerCase(),hasOwnProperty.call(this.pseudo,i)?(this.skipSC(),e=this.pseudo[i].call(this),this.skipSC()):(e=this.createList(),e.push(this.Raw(this.tokenIndex,null,!1))),this.eat(yi.RightParenthesis)):r=this.consume(yi.Ident),{type:"PseudoClassSelector",loc:this.getLocation(t,this.tokenStart),name:r,children:e}}function n2(t){this.token(yi.Colon,":"),t.children===null?this.token(yi.Ident,t.name):(this.token(yi.Function,t.name+"("),this.children(t),this.token(yi.RightParenthesis,")"))}Bo.generate=n2;Bo.name=XI;Bo.parse=t2;Bo.structure=e2;Bo.walkContext=ZI});var lh=ee(Ro=>{"use strict";var Dr=Me(),r2="PseudoElementSelector",i2="function",o2={name:String,children:[["Raw"],null]};function s2(){let t=this.tokenStart,e=null,r,i;return this.eat(Dr.Colon),this.eat(Dr.Colon),this.tokenType===Dr.Function?(r=this.consumeFunctionName(),i=r.toLowerCase(),hasOwnProperty.call(this.pseudo,i)?(this.skipSC(),e=this.pseudo[i].call(this),this.skipSC()):(e=this.createList(),e.push(this.Raw(this.tokenIndex,null,!1))),this.eat(Dr.RightParenthesis)):r=this.consume(Dr.Ident),{type:"PseudoElementSelector",loc:this.getLocation(t,this.tokenStart),name:r,children:e}}function a2(t){this.token(Dr.Colon,":"),this.token(Dr.Colon,":"),t.children===null?this.token(Dr.Ident,t.name):(this.token(Dr.Function,t.name+"("),this.children(t),this.token(Dr.RightParenthesis,")"))}Ro.generate=a2;Ro.name=r2;Ro.parse=s2;Ro.structure=o2;Ro.walkContext=i2});var ch=ee(Ea=>{"use strict";var Lc=Me(),l2=Bn(),c2=47,u2=46;function tx(){this.skipSC();let t=this.consume(Lc.Number);for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);!l2.isDigit(r)&&r!==u2&&this.error("Unsigned number is expected",this.tokenStart-t.length+e)}return Number(t)===0&&this.error("Zero number is not allowed",this.tokenStart-t.length),t}var f2="Ratio",d2={left:String,right:String};function h2(){let t=this.tokenStart,e=tx.call(this),r;return this.skipSC(),this.eatDelim(c2),r=tx.call(this),{type:"Ratio",loc:this.getLocation(t,this.tokenStart),left:e,right:r}}function p2(t){this.token(Lc.Number,t.left),this.token(Lc.Delim,"/"),this.token(Lc.Number,t.right)}Ea.generate=p2;Ea.name=f2;Ea.parse=h2;Ea.structure=d2});var uh=ee(Da=>{"use strict";var g2=Me();function m2(){return this.tokenIndex>0&&this.lookupType(-1)===g2.WhiteSpace?this.tokenIndex>1?this.getTokenStart(this.tokenIndex-1):this.firstCharOffset:this.tokenStart}var y2="Raw",v2={value:String};function b2(t,e,r){let i=this.getTokenStart(t),s;return this.skipUntilBalanced(t,e||this.consumeUntilBalanceEnd),r&&this.tokenStart>i?s=m2.call(this):s=this.tokenStart,{type:"Raw",loc:this.getLocation(i,s),value:this.substring(i,s)}}function w2(t){this.tokenize(t.value)}Da.generate=w2;Da.name=y2;Da.parse=b2;Da.structure=v2});var fh=ee(qo=>{"use strict";var x2=Me();function nx(t){return this.Raw(t,this.consumeUntilLeftCurlyBracket,!0)}function k2(){let t=this.SelectorList();return t.type!=="Raw"&&this.eof===!1&&this.tokenType!==x2.LeftCurlyBracket&&this.error(),t}var C2="Rule",S2="rule",A2={prelude:["SelectorList","Raw"],block:["Block"]};function T2(){let t=this.tokenIndex,e=this.tokenStart,r,i;return this.parseRulePrelude?r=this.parseWithFallback(k2,nx):r=nx.call(this,t),i=this.Block(!0),{type:"Rule",loc:this.getLocation(e,this.tokenStart),prelude:r,block:i}}function L2(t){this.node(t.prelude),this.node(t.block)}qo.generate=L2;qo.name=C2;qo.parse=T2;qo.structure=A2;qo.walkContext=S2});var dh=ee(Na=>{"use strict";var E2="Selector",D2={children:[["TypeSelector","IdSelector","ClassSelector","AttributeSelector","PseudoClassSelector","PseudoElementSelector","Combinator","WhiteSpace"]]};function N2(){let t=this.readSequence(this.scope.Selector);return this.getFirstListNode(t)===null&&this.error("Selector is expected"),{type:"Selector",loc:this.getLocationFromList(t),children:t}}function M2(t){this.children(t)}Na.generate=M2;Na.name=E2;Na.parse=N2;Na.structure=D2});var hh=ee(Fo=>{"use strict";var rx=Me(),O2="SelectorList",P2="selector",I2={children:[["Selector","Raw"]]};function z2(){let t=this.createList();for(;!this.eof;){if(t.push(this.Selector()),this.tokenType===rx.Comma){this.next();continue}break}return{type:"SelectorList",loc:this.getLocationFromList(t),children:t}}function B2(t){this.children(t,()=>this.token(rx.Comma,","))}Fo.generate=B2;Fo.name=O2;Fo.parse=z2;Fo.structure=I2;Fo.walkContext=P2});var Ec=ee(mh=>{"use strict";var ph=Bn(),ix=Sr(),gh=92,ox=34,sx=39;function R2(t){let e=t.length,r=t.charCodeAt(0),i=r===ox||r===sx?1:0,s=i===1&&e>1&&t.charCodeAt(e-1)===r?e-2:e-1,a="";for(let f=i;f<=s;f++){let d=t.charCodeAt(f);if(d===gh){if(f===s){f!==e-1&&(a=t.substr(f+1));break}if(d=t.charCodeAt(++f),ph.isValidEscape(gh,d)){let g=f-1,p=ix.consumeEscaped(t,g);f=p-1,a+=ix.decodeEscaped(t.substring(g+1,p))}else d===13&&t.charCodeAt(f+1)===10&&f++}else a+=t[f]}return a}function q2(t,e){let r=e?"'":'"',i=e?sx:ox,s="",a=!1;for(let f=0;f<t.length;f++){let d=t.charCodeAt(f);if(d===0){s+="\uFFFD";continue}if(d<=31||d===127){s+="\\"+d.toString(16),a=!0;continue}d===i||d===gh?(s+="\\"+t.charAt(f),a=!1):(a&&(ph.isHexDigit(d)||ph.isWhiteSpace(d))&&(s+=" "),s+=t.charAt(f),a=!1)}return r+s+r}mh.decode=R2;mh.encode=q2});var yh=ee(Ma=>{"use strict";var ax=Ec(),lx=Me(),F2="String",_2={value:String};function j2(){return{type:"String",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:ax.decode(this.consume(lx.String))}}function H2(t){this.token(lx.String,ax.encode(t.value))}Ma.generate=H2;Ma.name=F2;Ma.parse=j2;Ma.structure=_2});var vh=ee(_o=>{"use strict";var Oa=Me(),W2=33;function cx(t){return this.Raw(t,null,!1)}var U2="StyleSheet",$2="stylesheet",G2={children:[["Comment","CDO","CDC","Atrule","Rule","Raw"]]};function V2(){let t=this.tokenStart,e=this.createList(),r;for(;!this.eof;){switch(this.tokenType){case Oa.WhiteSpace:this.next();continue;case Oa.Comment:if(this.charCodeAt(this.tokenStart+2)!==W2){this.next();continue}r=this.Comment();break;case Oa.CDO:r=this.CDO();break;case Oa.CDC:r=this.CDC();break;case Oa.AtKeyword:r=this.parseWithFallback(this.Atrule,cx);break;default:r=this.parseWithFallback(this.Rule,cx)}e.push(r)}return{type:"StyleSheet",loc:this.getLocation(t,this.tokenStart),children:e}}function K2(t){this.children(t)}_o.generate=K2;_o.name=U2;_o.parse=V2;_o.structure=G2;_o.walkContext=$2});var wh=ee(Pa=>{"use strict";var Y2=Me(),Q2=42,ux=124;function bh(){this.tokenType!==Y2.Ident&&this.isDelim(Q2)===!1&&this.error("Identifier or asterisk is expected"),this.next()}var J2="TypeSelector",X2={name:String};function Z2(){let t=this.tokenStart;return this.isDelim(ux)?(this.next(),bh.call(this)):(bh.call(this),this.isDelim(ux)&&(this.next(),bh.call(this))),{type:"TypeSelector",loc:this.getLocation(t,this.tokenStart),name:this.substrToCursor(t)}}function ez(t){this.tokenize(t.name)}Pa.generate=ez;Pa.name=J2;Pa.parse=Z2;Pa.structure=X2});var kh=ee(Ba=>{"use strict";var Ia=Me(),tz=Bn(),fx=43,dx=45,xh=63;function za(t,e){let r=0;for(let i=this.tokenStart+t;i<this.tokenEnd;i++){let s=this.charCodeAt(i);if(s===dx&&e&&r!==0)return za.call(this,t+r+1,!1),-1;tz.isHexDigit(s)||this.error(e&&r!==0?"Hyphen minus"+(r<6?" or hex digit":"")+" is expected":r<6?"Hex digit is expected":"Unexpected input",i),++r>6&&this.error("Too many hex digits",i)}return this.next(),r}function Dc(t){let e=0;for(;this.isDelim(xh);)++e>t&&this.error("Too many question marks"),this.next()}function nz(t){this.charCodeAt(this.tokenStart)!==t&&this.error((t===fx?"Plus sign":"Hyphen minus")+" is expected")}function rz(){let t=0;switch(this.tokenType){case Ia.Number:if(t=za.call(this,1,!0),this.isDelim(xh)){Dc.call(this,6-t);break}if(this.tokenType===Ia.Dimension||this.tokenType===Ia.Number){nz.call(this,dx),za.call(this,1,!1);break}break;case Ia.Dimension:t=za.call(this,1,!0),t>0&&Dc.call(this,6-t);break;default:if(this.eatDelim(fx),this.tokenType===Ia.Ident){t=za.call(this,0,!0),t>0&&Dc.call(this,6-t);break}if(this.isDelim(xh)){this.next(),Dc.call(this,5);break}this.error("Hex digit or question mark is expected")}}var iz="UnicodeRange",oz={value:String};function sz(){let t=this.tokenStart;return this.eatIdent("u"),rz.call(this),{type:"UnicodeRange",loc:this.getLocation(t,this.tokenStart),value:this.substrToCursor(t)}}function az(t){this.tokenize(t.value)}Ba.generate=az;Ba.name=iz;Ba.parse=sz;Ba.structure=oz});var Ah=ee(Sh=>{"use strict";var Nc=Bn(),hx=Sr(),lz=32,Ch=92,cz=34,uz=39,fz=40,px=41;function dz(t){let e=t.length,r=4,i=t.charCodeAt(e-1)===px?e-2:e-1,s="";for(;r<i&&Nc.isWhiteSpace(t.charCodeAt(r));)r++;for(;r<i&&Nc.isWhiteSpace(t.charCodeAt(i));)i--;for(let a=r;a<=i;a++){let f=t.charCodeAt(a);if(f===Ch){if(a===i){a!==e-1&&(s=t.substr(a+1));break}if(f=t.charCodeAt(++a),Nc.isValidEscape(Ch,f)){let d=a-1,g=hx.consumeEscaped(t,d);a=g-1,s+=hx.decodeEscaped(t.substring(d+1,g))}else f===13&&t.charCodeAt(a+1)===10&&a++}else s+=t[a]}return s}function hz(t){let e="",r=!1;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);if(s===0){e+="\uFFFD";continue}if(s<=31||s===127){e+="\\"+s.toString(16),r=!0;continue}s===lz||s===Ch||s===cz||s===uz||s===fz||s===px?(e+="\\"+t.charAt(i),r=!1):(r&&Nc.isHexDigit(s)&&(e+=" "),e+=t.charAt(i),r=!1)}return"url("+e+")"}Sh.decode=dz;Sh.encode=hz});var Th=ee(Ra=>{"use strict";var gx=Ah(),pz=Ec(),Fi=Me(),gz="Url",mz={value:String};function yz(){let t=this.tokenStart,e;switch(this.tokenType){case Fi.Url:e=gx.decode(this.consume(Fi.Url));break;case Fi.Function:this.cmpStr(this.tokenStart,this.tokenEnd,"url(")||this.error("Function name must be `url`"),this.eat(Fi.Function),this.skipSC(),e=pz.decode(this.consume(Fi.String)),this.skipSC(),this.eof||this.eat(Fi.RightParenthesis);break;default:this.error("Url or Function is expected")}return{type:"Url",loc:this.getLocation(t,this.tokenStart),value:e}}function vz(t){this.token(Fi.Url,gx.encode(t.value))}Ra.generate=vz;Ra.name=gz;Ra.parse=yz;Ra.structure=mz});var Lh=ee(qa=>{"use strict";var bz="Value",wz={children:[[]]};function xz(){let t=this.tokenStart,e=this.readSequence(this.scope.Value);return{type:"Value",loc:this.getLocation(t,this.tokenStart),children:e}}function kz(t){this.children(t)}qa.generate=kz;qa.name=bz;qa.parse=xz;qa.structure=wz});var Eh=ee(Fa=>{"use strict";var mx=Me(),Cz=Object.freeze({type:"WhiteSpace",loc:null,value:" "}),Sz="WhiteSpace",Az={value:String};function Tz(){return this.eat(mx.WhiteSpace),Cz}function Lz(t){this.token(mx.WhiteSpace,t.value)}Fa.generate=Lz;Fa.name=Sz;Fa.parse=Tz;Fa.structure=Az});var Dh=ee(Ve=>{"use strict";var Ez=Nd(),Dz=Md(),Nz=Od(),Mz=Id(),Oz=zd(),Pz=Bd(),Iz=Rd(),zz=qd(),Bz=_d(),Rz=jd(),qz=Hd(),Fz=Wd(),_z=$d(),jz=Gd(),Hz=Kd(),Wz=Yd(),Uz=Qd(),$z=Jd(),Gz=Xd(),Vz=Zd(),Kz=eh(),Yz=th(),Qz=nh(),Jz=rh(),Xz=ih(),Zz=oh(),eB=sh(),tB=ah(),nB=lh(),rB=ch(),iB=uh(),oB=fh(),sB=dh(),aB=hh(),lB=yh(),cB=vh(),uB=wh(),fB=kh(),dB=Th(),hB=Lh(),pB=Eh();Ve.AnPlusB=Ez;Ve.Atrule=Dz;Ve.AtrulePrelude=Nz;Ve.AttributeSelector=Mz;Ve.Block=Oz;Ve.Brackets=Pz;Ve.CDC=Iz;Ve.CDO=zz;Ve.ClassSelector=Bz;Ve.Combinator=Rz;Ve.Comment=qz;Ve.Declaration=Fz;Ve.DeclarationList=_z;Ve.Dimension=jz;Ve.Function=Hz;Ve.Hash=Wz;Ve.Identifier=Uz;Ve.IdSelector=$z;Ve.MediaFeature=Gz;Ve.MediaQuery=Vz;Ve.MediaQueryList=Kz;Ve.NestingSelector=Yz;Ve.Nth=Qz;Ve.Number=Jz;Ve.Operator=Xz;Ve.Parentheses=Zz;Ve.Percentage=eB;Ve.PseudoClassSelector=tB;Ve.PseudoElementSelector=nB;Ve.Ratio=rB;Ve.Raw=iB;Ve.Rule=oB;Ve.Selector=sB;Ve.SelectorList=aB;Ve.String=lB;Ve.StyleSheet=cB;Ve.TypeSelector=uB;Ve.UnicodeRange=fB;Ve.Url=dB;Ve.Value=hB;Ve.WhiteSpace=pB});var vx=ee((OU,yx)=>{"use strict";var gB=Pw(),mB=Dh(),yB={generic:!0,...gB,node:mB};yx.exports=yB});var Nh=ee((PU,wx)=>{"use strict";var Jn=Me(),vB=35,bB=42,bx=43,wB=45,xB=47,kB=117;function CB(t){switch(this.tokenType){case Jn.Hash:return this.Hash();case Jn.Comma:return this.Operator();case Jn.LeftParenthesis:return this.Parentheses(this.readSequence,t.recognizer);case Jn.LeftSquareBracket:return this.Brackets(this.readSequence,t.recognizer);case Jn.String:return this.String();case Jn.Dimension:return this.Dimension();case Jn.Percentage:return this.Percentage();case Jn.Number:return this.Number();case Jn.Function:return this.cmpStr(this.tokenStart,this.tokenEnd,"url(")?this.Url():this.Function(this.readSequence,t.recognizer);case Jn.Url:return this.Url();case Jn.Ident:return this.cmpChar(this.tokenStart,kB)&&this.cmpChar(this.tokenStart+1,bx)?this.UnicodeRange():this.Identifier();case Jn.Delim:{let e=this.charCodeAt(this.tokenStart);if(e===xB||e===bB||e===bx||e===wB)return this.Operator();e===vB&&this.error("Hex or identifier is expected",this.tokenStart+1);break}}}wx.exports=CB});var kx=ee((IU,xx)=>{"use strict";var SB=Nh(),AB={getNode:SB};xx.exports=AB});var Ax=ee((zU,Sx)=>{"use strict";var Yr=Me(),TB=35,LB=38,EB=42,DB=43,NB=47,Cx=46,MB=62,OB=124,PB=126;function IB(t,e){e.last!==null&&e.last.type!=="Combinator"&&t!==null&&t.type!=="Combinator"&&e.push({type:"Combinator",loc:null,name:" "})}function zB(){switch(this.tokenType){case Yr.LeftSquareBracket:return this.AttributeSelector();case Yr.Hash:return this.IdSelector();case Yr.Colon:return this.lookupType(1)===Yr.Colon?this.PseudoElementSelector():this.PseudoClassSelector();case Yr.Ident:return this.TypeSelector();case Yr.Number:case Yr.Percentage:return this.Percentage();case Yr.Dimension:this.charCodeAt(this.tokenStart)===Cx&&this.error("Identifier is expected",this.tokenStart+1);break;case Yr.Delim:{switch(this.charCodeAt(this.tokenStart)){case DB:case MB:case PB:case NB:return this.Combinator();case Cx:return this.ClassSelector();case EB:case OB:return this.TypeSelector();case TB:return this.IdSelector();case LB:return this.NestingSelector()}break}}}var BB={onWhiteSpace:IB,getNode:zB};Sx.exports=BB});var Lx=ee((BU,Tx)=>{"use strict";function RB(){return this.createSingleNodeList(this.Raw(this.tokenIndex,null,!1))}Tx.exports=RB});var Nx=ee((RU,Dx)=>{"use strict";var Ex=Me();function qB(){let t=this.createList();if(this.skipSC(),t.push(this.Identifier()),this.skipSC(),this.tokenType===Ex.Comma){t.push(this.Operator());let e=this.tokenIndex,r=this.parseCustomProperty?this.Value(null):this.Raw(this.tokenIndex,this.consumeUntilExclamationMarkOrSemicolon,!1);if(r.type==="Value"&&r.children.isEmpty){for(let i=e-this.tokenIndex;i<=0;i++)if(this.lookupType(i)===Ex.WhiteSpace){r.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}}t.push(r)}return t}Dx.exports=qB});var Px=ee((qU,Ox)=>{"use strict";var FB=Nh(),_B=Lx(),jB=Nx();function Mx(t){return t!==null&&t.type==="Operator"&&(t.value[t.value.length-1]==="-"||t.value[t.value.length-1]==="+")}var HB={getNode:FB,onWhiteSpace(t,e){Mx(t)&&(t.value=" "+t.value),Mx(e.last)&&(e.last.value+=" ")},expression:_B,var:jB};Ox.exports=HB});var Ix=ee(Mc=>{"use strict";var WB=kx(),UB=Ax(),$B=Px();Mc.AtrulePrelude=WB;Mc.Selector=UB;Mc.Value=$B});var Bx=ee((_U,zx)=>{"use strict";var GB={parse:{prelude:null,block(){return this.Block(!0)}}};zx.exports=GB});var qx=ee((jU,Rx)=>{"use strict";var _a=Me(),VB={parse:{prelude(){let t=this.createList();switch(this.skipSC(),this.tokenType){case _a.String:t.push(this.String());break;case _a.Url:case _a.Function:t.push(this.Url());break;default:this.error("String or url() is expected")}return(this.lookupNonWSType(0)===_a.Ident||this.lookupNonWSType(0)===_a.LeftParenthesis)&&t.push(this.MediaQueryList()),t},block:null}};Rx.exports=VB});var _x=ee((HU,Fx)=>{"use strict";var KB={parse:{prelude(){return this.createSingleNodeList(this.MediaQueryList())},block(t=!1){return this.Block(t)}}};Fx.exports=KB});var Hx=ee((WU,jx)=>{"use strict";var YB={parse:{prelude(){return this.createSingleNodeList(this.SelectorList())},block(){return this.Block(!0)}}};jx.exports=YB});var Ux=ee((UU,Wx)=>{"use strict";var QB={parse:{prelude(){return this.createSingleNodeList(this.SelectorList())},block(){return this.Block(!0)}}};Wx.exports=QB});var Vx=ee(($U,Gx)=>{"use strict";var _i=Me();function JB(){return this.createSingleNodeList(this.Raw(this.tokenIndex,null,!1))}function XB(){return this.skipSC(),this.tokenType===_i.Ident&&this.lookupNonWSType(1)===_i.Colon?this.createSingleNodeList(this.Declaration()):$x.call(this)}function $x(){let t=this.createList(),e;this.skipSC();e:for(;!this.eof;){switch(this.tokenType){case _i.Comment:case _i.WhiteSpace:this.next();continue;case _i.Function:e=this.Function(JB,this.scope.AtrulePrelude);break;case _i.Ident:e=this.Identifier();break;case _i.LeftParenthesis:e=this.Parentheses(XB,this.scope.AtrulePrelude);break;default:break e}t.push(e)}return t}var ZB={parse:{prelude(){let t=$x.call(this);return this.getFirstListNode(t)===null&&this.error("Condition is expected"),t},block(t=!1){return this.Block(t)}}};Gx.exports=ZB});var Yx=ee((GU,Kx)=>{"use strict";var eR=Bx(),tR=qx(),nR=_x(),rR=Hx(),iR=Ux(),oR=Vx(),sR={"font-face":eR,import:tR,media:nR,nest:rR,page:iR,supports:oR};Kx.exports=sR});var Xx=ee((VU,Jx)=>{"use strict";var ji={parse(){return this.createSingleNodeList(this.SelectorList())}},Mh={parse(){return this.createSingleNodeList(this.Selector())}},Qx={parse(){return this.createSingleNodeList(this.Identifier())}},Oc={parse(){return this.createSingleNodeList(this.Nth())}},aR={dir:Qx,has:ji,lang:Qx,matches:ji,is:ji,"-moz-any":ji,"-webkit-any":ji,where:ji,not:ji,"nth-child":Oc,"nth-last-child":Oc,"nth-last-of-type":Oc,"nth-of-type":Oc,slotted:Mh,host:Mh,"host-context":Mh};Jx.exports=aR});var Zx=ee(Ke=>{"use strict";var lR=Nd(),cR=Md(),uR=Od(),fR=Id(),dR=zd(),hR=Bd(),pR=Rd(),gR=qd(),mR=_d(),yR=jd(),vR=Hd(),bR=Wd(),wR=$d(),xR=Gd(),kR=Kd(),CR=Yd(),SR=Qd(),AR=Jd(),TR=Xd(),LR=Zd(),ER=eh(),DR=th(),NR=nh(),MR=rh(),OR=ih(),PR=oh(),IR=sh(),zR=ah(),BR=lh(),RR=ch(),qR=uh(),FR=fh(),_R=dh(),jR=hh(),HR=yh(),WR=vh(),UR=wh(),$R=kh(),GR=Th(),VR=Lh(),KR=Eh();Ke.AnPlusB=lR.parse;Ke.Atrule=cR.parse;Ke.AtrulePrelude=uR.parse;Ke.AttributeSelector=fR.parse;Ke.Block=dR.parse;Ke.Brackets=hR.parse;Ke.CDC=pR.parse;Ke.CDO=gR.parse;Ke.ClassSelector=mR.parse;Ke.Combinator=yR.parse;Ke.Comment=vR.parse;Ke.Declaration=bR.parse;Ke.DeclarationList=wR.parse;Ke.Dimension=xR.parse;Ke.Function=kR.parse;Ke.Hash=CR.parse;Ke.Identifier=SR.parse;Ke.IdSelector=AR.parse;Ke.MediaFeature=TR.parse;Ke.MediaQuery=LR.parse;Ke.MediaQueryList=ER.parse;Ke.NestingSelector=DR.parse;Ke.Nth=NR.parse;Ke.Number=MR.parse;Ke.Operator=OR.parse;Ke.Parentheses=PR.parse;Ke.Percentage=IR.parse;Ke.PseudoClassSelector=zR.parse;Ke.PseudoElementSelector=BR.parse;Ke.Ratio=RR.parse;Ke.Raw=qR.parse;Ke.Rule=FR.parse;Ke.Selector=_R.parse;Ke.SelectorList=jR.parse;Ke.String=HR.parse;Ke.StyleSheet=WR.parse;Ke.TypeSelector=UR.parse;Ke.UnicodeRange=$R.parse;Ke.Url=GR.parse;Ke.Value=VR.parse;Ke.WhiteSpace=KR.parse});var t0=ee((YU,e0)=>{"use strict";var YR=Ix(),QR=Yx(),JR=Xx(),XR=Zx(),ZR={parseContext:{default:"StyleSheet",stylesheet:"StyleSheet",atrule:"Atrule",atrulePrelude(t){return this.AtrulePrelude(t.atrule?String(t.atrule):null)},mediaQueryList:"MediaQueryList",mediaQuery:"MediaQuery",rule:"Rule",selectorList:"SelectorList",selector:"Selector",block(){return this.Block(!0)},declarationList:"DeclarationList",declaration:"Declaration",value:"Value"},scope:YR,atrule:QR,pseudo:JR,node:XR};e0.exports=ZR});var r0=ee((QU,n0)=>{"use strict";var eq=Dh(),tq={node:eq};n0.exports=tq});var o0=ee((JU,i0)=>{"use strict";var nq=Ed(),rq=vx(),iq=t0(),oq=r0(),sq=nq({...rq,...iq,...oq});i0.exports=sq});var a0=ee((XU,s0)=>{s0.exports="2.3.1"});var l0=ee(ja=>{"use strict";var aq=rd(),lq=sc(),cq=bc(),uq=xd();ja.SyntaxError=aq.SyntaxError;ja.generate=lq.generate;ja.parse=cq.parse;ja.walk=uq.walk});var u0=ee(c0=>{"use strict";var fq=zi();function Oh(t){let e={};for(let r in t){let i=t[r];i&&(Array.isArray(i)||i instanceof fq.List?i=i.map(Oh):i.constructor===Object&&(i=Oh(i))),e[r]=i}return e}c0.clone=Oh});var p0=ee(Ph=>{"use strict";var h0=Bn(),f0=Sr(),d0=92;function dq(t){let e=t.length-1,r="";for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);if(s===d0){if(i===e)break;if(s=t.charCodeAt(++i),h0.isValidEscape(d0,s)){let a=i-1,f=f0.consumeEscaped(t,a);i=f-1,r+=f0.decodeEscaped(t.substring(a+1,f))}else s===13&&t.charCodeAt(i+1)===10&&i++}else r+=t[i]}return r}function hq(t){let e="";if(t.length===1&&t.charCodeAt(0)===45)return"\\-";for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i===0){e+="\uFFFD";continue}if(i<=31||i===127||i>=48&&i<=57&&(r===0||r===1&&t.charCodeAt(0)===45)){e+="\\"+i.toString(16)+" ";continue}h0.isName(i)?e+=t.charAt(r):e+="\\"+t.charAt(r)}return e}Ph.decode=dq;Ph.encode=hq});var Ic=ee(ct=>{"use strict";var pq=o0(),gq=a0(),mq=Ed(),yq=zi(),vq=Ad(),bq=l0(),wq=u0(),Pc=uc(),xq=p0(),kq=Ec(),Cq=Ah(),Sq=Me(),Aq=js(),Tq=tc(),{tokenize:Lq,parse:Eq,generate:Dq,lexer:Nq,createLexer:Mq,walk:Oq,find:Pq,findLast:Iq,findAll:zq,toPlainObject:Bq,fromPlainObject:Rq,fork:qq}=pq;ct.version=gq.version;ct.createSyntax=mq;ct.List=yq.List;ct.Lexer=vq.Lexer;ct.definitionSyntax=bq;ct.clone=wq.clone;ct.isCustomProperty=Pc.isCustomProperty;ct.keyword=Pc.keyword;ct.property=Pc.property;ct.vendorPrefix=Pc.vendorPrefix;ct.ident=xq;ct.string=kq;ct.url=Cq;ct.tokenTypes=Sq;ct.tokenNames=Aq;ct.TokenStream=Tq.TokenStream;ct.createLexer=Mq;ct.find=Pq;ct.findAll=zq;ct.findLast=Iq;ct.fork=qq;ct.fromPlainObject=Rq;ct.generate=Dq;ct.lexer=Nq;ct.parse=Eq;ct.toPlainObject=Bq;ct.tokenize=Lq;ct.walk=Oq});var b0=ee((r6,v0)=>{var Nr=Ic(),{definitionSyntax:jo}=Nr,g0=new WeakMap;function m0(t){let{type:e,name:r,parent:i}=t||{};switch(e){case"Property":return"<'"+r+"'>";case"Type":return"<"+r+">";case"Function":return r+"()";case"Atrule":return"@"+r;case"AtrulePrelude":return"@"+r+":prelude";case"AtruleDescriptor":return"@"+i+"/"+r;default:return r}}function Ih(t,e,r){function i(p,y){return{type:"Group",terms:p,combinator:y,explicit:!1,disallowEmpty:!1}}function s(p,y){let v=y[y.length-1],w=v.terms.indexOf(p);for(var k=w;k<v.terms.length;k++)if(v.terms[k].type==="Token"&&v.terms[k].value===")"){k++;break}return i(v.terms.slice(w,k)," ")}function a(p){if(p&&p.syntax!==null){let y=[];jo.walk(p.syntax,{enter(v){if((v.type==="Token"&&v.value==="("||v.type==="Type"&&v.name==="function-token")&&g.push(null),v.type==="Type"||v.type==="Property"||v.type==="Function"){let w=v.type+":"+v.name;if(v.type==="Function"){g.push(d),d=v;let k=r.functions[d.name];k||(k=r.createDescriptor(i([],"|"),v.type,v.name),g0.set(k,new Set),r.functions[d.name]=k);let T=g0.get(k);if(!T.has(v)){let L=s(v,y),A=jo.generate(L);T.has(A)||k.syntax.terms.push(L),T.add(v),T.add(A)}}if(y.push(v),!(w in f))switch(f[w]=!0,v.type){case"Type":a(r.getType(v.name),!1);break;case"Property":a(r.getProperty(v.name),!1);break}}else y.push(v)},leave(v){y.pop(),v.type==="Token"&&v.value===")"&&(d=g.pop()||d)}})}}let f,d,g=[];for(let p in e){if(f=Object.create(null),f[t+":"+p]=!0,d=e[p],g.push(d),t==="Atrule"){a(d.prelude);for(let y in d.discriptors)a(d.descriptors[y])}else a(d);g.pop()}}function y0(t,e,r){let i=0,s=[];return typeof t=="string"&&(t=jo.parse(t)),t&&jo.walk(t,{enter:a=>{if(a.type in e){let f=e[a.type];r&&!(a.name in f)&&r.push(f[a.name]={type:a.type,name:a.name,syntax:null,match:null,refs:[]}),s.push({node:a,insideFunction:i>0,resolved:f[a.name]||null})}a.type==="Function"&&i++},leave:a=>{a.type==="Function"&&i--}}),s}v0.exports=function(t,{defineObjectMarker:e,addQueryHelpers:r,query:i}){let{properties:s,types:a,atrules:f}=Nr.lexer,d=Object.create(null),g=["Atrule","AtrulePrelude","AtruleDescriptor","Property","Type","Function"],p={Atrule:f,AtrulePrelude:Object.fromEntries(Object.entries(f).map(([v,{prelude:w}])=>w&&[v,w]).filter(Boolean)),AtruleDescriptor:Object.fromEntries(Object.entries(f).reduce((v,[w,{descriptors:k}])=>k?v.concat(Object.entries(k).map(([T,L])=>[w+"/"+T,L])):v,[])),Property:s,Type:a,Function:d},y=Object.fromEntries(Object.keys(p).map(v=>[v,e(v,{refs:[w=>`${w.type}:${w.name}`],lookupRefs:[w=>`${w.type}:${w.name}`],ref:"name",title:w=>m0(w),page:v})]));Nr.lexer.validate(),Nr.lexer.functions=d,Ih("Atrule",f,Nr.lexer),Ih("Property",s,Nr.lexer),Ih("Type",a,Nr.lexer),t.dict=[].concat(...Object.values(p).map(v=>Object.values(v)));for(let v of t.dict)v.refs=y0(v.syntax,p,t.dict),y[v.type](v);r({formatName:m0,typeSorting(v){let w=g.indexOf(v);return w!==-1?w:1/0},isProblem:v=>i('(no match and type != "Atrule") or refs.resolved.[no match]',v),mdn(v){if(v)switch(v.type){case"Atrule":case"AtrulePrelude":return t.mdn.atRules["@"+v.name]||null;case"AtruleDescriptor":{let w=t.mdn.atRules["@"+v.parent];return w&&w.descriptors&&w.descriptors[v.name]||null}case"Property":case"Type":return t.mdn[v.type==="Property"?"properties":"syntaxes"][v.name]||null}return null},name(v){let w=typeof v=="string"?v:v&&v.name||!1;return w?Nr.keyword(w):null},patch(v){return v&&(v.type==="Property"||v.type==="Type")&&t.patch[v.type==="Property"?"properties":"types"][v.name]||null},syntaxAst(v){let w=v?v.syntax||v:null;return typeof w=="string"?jo.parse(w):w||null},syntax(v){return v?v.syntax?jo.generate(v.syntax):(v.match,"(generic)"):"(unknown)"},refs(v){return v?v.refs||y0(v.syntax||v,p):[]},syntaxChildren(v){let w=[];return v&&(v.term&&w.push(v.term),v.terms&&w.push(...v.terms)),w},lexerMatch(v,w){let{type:k,name:T}=v||{},L=k==="Function"?T+"("+w+")":w,A=!/\S/.test(L),N,S=null;try{A||(N=Nr.lexer.match(v,L))}catch(M){S=M.message+(M.sourceFragment?`
`+M.sourceFragment():"")}return N&&(S=N.error),{match:!S&&N&&N.matched||null,iterations:N&&N.iterations||null,error:S}}})};/^csstree.github.io$/i.test(location.host)&&(function(t,e,r,i,s,a,f){t.GoogleAnalyticsObject=s,t[s]=t[s]||function(){(t[s].q=t[s].q||[]).push(arguments)},t[s].l=1*new Date,a=e.createElement(r),f=e.getElementsByTagName(r)[0],a.async=1,a.src=i,f.parentNode.insertBefore(a,f)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-84136412-1","auto"),ga("send","pageview"));window.csstree=Nr});var k0={};Ce(k0,{default:()=>Fq});function Fq(t){t.view.define("sidebar",{view:"content-filter",content:{view:"list",data:`
            dict.[
                type not in ["AtrulePrelude", "AtruleDescriptor"]
                and (name~=#.filter or descriptors.values().name~=#.filter)
            ]
            .group(=>type)
            .(
                // prepare items
                $items: value.({
                    type,
                    name,
                    parent,
                    nested: type = "Atrule" ? descriptors.values() : null,
                    syntax,
                    missed: no match and type != 'Atrule',
                    brokenRefs: (type != "Atrule" ? $ : (descriptors.values() or []) + (prelude or []))
                        .refs.resolved.[no match]
                }).sort(=>name);

                // section info
                {
                    type: key,
                    $items,
                    badSyntaxes: $items.[missed or brokenRefs]
                }
            )
            .sort(=>type.typeSorting())
        `,emptyText:"No matches",item:{view:"toc-section",header:["text:type",'pill-badge:{ text: items.size(), href: pageLink("report", "dict.[type=\\"" + type + "\\"]") }',{view:"pill-badge",when:"badSyntaxes",className:"danger-badge",data:`{
                        text: badSyntaxes.size()
                    }`}],content:{view:"list",data:"items",itemConfig:{className:e=>e.missed?"missed":""},item:[{view:"auto-link",content:"text-match:{ text, match: #.filter }"},{when:'type="Function" and syntax.terms.size() > 1',view:"html",data:'"<span class=variants> \xD7 " + syntax.terms.size() + "</span>"'},{view:"badge",className:"patched-badge",when:"patch() and mdn()",data:'{ text: "patched" }'},{view:"badge",className:"patched-badge",when:'type != "Function" and no mdn() and no missed',data:'{ text: "added" }'},{view:"pill-badge",className:"danger-badge",when:"brokenRefs",data:"{ text: brokenRefs.size() }"},{view:"list",className:"nested",when:"#.filter",data:"nested.[name~=#.filter]",whenData:!0,item:'auto-link{ content: "text-match:{ text: entity.name, match: #.filter }" }'}]}}}},{tag:!1})}var C0=Yt(()=>{});var S0={};Ce(S0,{default:()=>_q});function _q(t){let e=new WeakMap;new t.view.Popup({className:"chart-tooltip",hoverTriggers:".view-chart .bar",position:"pointer",render(r,i){let{data:s,context:a}=e.get(i);t.view.render(r,[{view:"block",content:"text:labelText"},{view:"block",content:"text-numeric:value = undefined ? '\u2013' : value"}],s,a)}}),t.view.define("bar-chart",(r,i,s,a)=>{function f(S,M){let O=T.appendChild(document.createElement("div")),z=L.appendChild(document.createElement("div")),I=L.children.length-1,_=p(S,I);O.className=M===void 0?"bar empty":"bar",O.style.setProperty("--size",(M||0)/w),z.className="x-label",z.textContent=_,z.style.setProperty("--num",I),e.set(O,{context:a,data:{value:M,labelNum:I,labelRaw:S,labelText:_}})}let{vertical:d}=i,{nextX:g,labelX:p}=i,y=s.slice().sort((S,M)=>S.x<M.x?-1:1),v=y.reduce((S,{y:M})=>Math.max(S,M),0),w=v,k=y.reduce((S,{y:M})=>Math.min(S,M),1/0);typeof g!="function"&&(g=(S,M)=>M),typeof p!="function"&&(p=S=>S);let T=r.appendChild(document.createElement("div")),L=r.appendChild(document.createElement("div")),A=r.appendChild(document.createElement("div"));if(T.className="canvas",L.className="x-labels",A.className="y-labels",v-k>5){let S=v-k<20?1.8:1.15,M=v-k<100?5:10;for(;;){let O=M-w%M;if((w+O)/v>S)break;w+=O,M*=10}}else w=5;for(let S=0,M=w%5?5:6,O=w/(M-1);S<M;S++){let z=A.appendChild(document.createElement("div"));z.textContent=O*S,z.className="y-label"}let N=y[0].x;for(let{x:S,y:M}of y){for(;N!==S;)N=g(N,S),N!==S&&f(N);f(S,M),N=S}r.style.setProperty("--y-label-count",A.children.length),r.style.setProperty("--x-label-count",L.children.length),r.classList.toggle("vertical",!!d),r.append(A,T,L)})}var A0=Yt(()=>{});var T0={};Ce(T0,{default:()=>jq});function jq(t){t.page.define("default",[{view:"page-header",content:["h1:#.model.name",{view:"block",className:"versions",content:['badge:{ prefix: "css-tree", text: csstree.version }','badge:{ prefix: "mdn-data", text: mdn.version }']}]},{view:"context",data:[{title:"Atrules",query:'dict.[type="Atrule"]'},{title:"Properties",query:'dict.[type="Property"]'},{title:"Types",query:'dict.[type="Type"]'},{title:"Functions",query:'dict.[type="Function"]'},{title:"Problems",query:"dict.[isProblem()]",href:"#problems"}],content:{view:"inline-list",item:"indicator",data:`.({
                label: title,
                value: query.query(#.data, #).size(),
                href: href or pageLink('report', { query, title })
            })`}},{view:"section",header:'text:"Reports"',content:{view:"ul",item:'link:{ text: title, href: pageLink("report", { ..., noedit: true }) }'},data:[{title:"Syntax stat",query:`[
    { header: 'Types', data: dict.group(=>type).({ type: key, count: value.size() }) },
    { header: 'Origin', data: dict.({ type, name, mdn: mdn().syntax, csstree: syntax(), patch: patch() })
        .[type!="Function"]
        .group(=>
            csstree="(generic)" ? "Generic" :
            no mdn ? 'Added (missed in MDN data)' :
            patch ? 'Patched MDN data'
                : 'As is from MDN data'
        )
        .({ type: key, count: value.size() })
    }
]`,view:`{
    view: 'list',
    item: [
        'h2:header',
        'bar-chart{ vertical: true, data: data.({ x: type, y: count }) }'
    ]
}`},{title:"CSSTree difference over mdn-data",query:`$csstree: dict
    .({ type, name, mdn: mdn().syntax, csstree: syntax(), patch: patch() })
    .[patch and csstree!="(generic)" and type!="Function"];
$mdnRemoved: patch
    .(
        properties.entries().({ type: 'Property', name: key, csstree: null, patch: value }).sort(name asc) + 
        syntaxes.entries().({ type: 'Type', name: key, csstree: null, patch: value }).sort(name asc)
    )
    .[no patch.syntax]
    .({ ..., mdn: mdn().syntax });
($csstree + $mdnRemoved)
.group(=>
    no csstree and no mdn ? 'Redundant remove' :
    no csstree ? 'Removed' :
    no mdn ? 'Added / mdn-data missed' :
    mdn=csstree ? 'Redundant patch' :
       'Patched'
)`,view:`{
    view: 'list',
    item: {
        view: 'expand',
        header: 'h3:key + " (" + value.size() + ")"',
        content: {
            view: 'table',
            data: 'value',
            cols: [
                {
                    header: 'Name',
                    content: {
                        view: 'nowrap',
                        content: {
                            view: 'auto-link',
                            fallback: 'text:formatName()'
                        }
                    }
                },
                {
                    header: 'Syntax',
                    content: {
                        view: 'switch',
                        content: [
                            {
                                when: 'csstree and mdn',
                                content: [
                                    'html:"<div style=color:#aaa;margin-bottom:5px>" + patch.comment',
                                    'diff-syntax:{ before: mdn, after: csstree }'
                                ]
                            },
                            {
                                when: 'mdn and csstree',
                                content: {
                                    view: 'diff',
                                    data: '{before:mdn, after:csstree}',
                                    type: 'char'
                                }
                            },
                            {
                                content: [
                                    'html:"<div style=color:#aaa;margin-bottom:5px>" + patch.comment',
                                    'syntax:{..., syntax: csstree or mdn}'
                                ]
                            }
                        ]
                    }
                }
            ]
        }
    }
}`},{title:"mdn-data syntax code style problems",query:`$shape: => .({
    type: $$,
    name: key,
    syntax: value.syntax,
    normSyntax: { syntax: value.syntaxAst() }.syntax()
});

mdn.properties.entries().$shape('Property') + mdn.syntaxes.entries().$shape('Type')
| .[syntax != normSyntax]`,view:`{
    view: 'table',
    cols: [
        {
            header: 'Name',
            content: {
                view: 'nowrap',
                content: {
                    view: 'auto-link',
                    fallback: 'text:formatName()'
                }
            }
        },
        {
            header: 'syntax',
            content: \`diff-syntax:{
                before: syntax,
                beforeName: 'Defined\xA0in\xA0mdn/data',
                after: normSyntax,
                afterName: 'Should be'
            }\`
        }
    ]
}`},{title:"Syntaxes used a string in definition",query:'dict.[syntax..(syntaxChildren()).[type="String"]]',view:`{
    view: 'table',
    cols: {
        type: false,
        name: {
            view: 'nowrap',
            content: 'auto-link'
        },
        syntax: 'syntax:{..., matchType: \\'String\\'}',
        match: false,
        refs: false
    }
}`}]}])}var L0=Yt(()=>{});var E0={};Ce(E0,{default:()=>Hq});function Hq(t){t.page.define("problems",[{view:"page-header",content:'h1:"Problems"'},{view:"ol",emptyText:"No problems",data:`
            dict
                .[isProblem()]
                .sort(match desc, type.typeSorting() asc, name asc)
        `,itemConfig:{className:e=>e.match?"":"missed"},item:['auto-link{ fallback: "text:formatName()" }','text:" = "',{view:"switch",content:[{when:"syntax",content:"syntax"},{content:'html:"<span class=error>syntax is missed</span>"'}]}]}])}var D0=Yt(()=>{});var N0={};Ce(N0,{default:()=>Wq});function Wq(t){let e={view:"context",data:"dict[=>type=#.page and name=#.id]",content:[{view:"page-header",prelude:'badge:{ text: type, color: "#ffdc7959" }',content:"h1:formatName()"},{view:"alert-danger",when:'no match and type != "Atrule"',content:'text:"Syntax definition is missed"'},"syntax-test",{view:"block",className:["view-section","syntax-section"],when:"syntax",data:`{
                ...,
                matchType: #.params.hltype,
                matchName: #.params.hlname
            }`,content:[{view:"switch",content:[{when:"patch() and mdn()",content:{view:"tabs",name:"syntaxView",beforeTabs:'header:"Formal syntax"',tabs:[{value:"csstree",content:'text:"CSSTree"'},{value:"mdn",content:'text:"MDN"'},{value:"diff"}],afterTabs:{view:"badge",when:"patch() and mdn()",data:'{ prefix: "Patched", color: "#f1eccb", text: patch().comment }'},content:{view:"switch",content:[{when:'#.syntaxView="csstree"',content:["syntax","syntax-tree"]},{when:'#.syntaxView="mdn"',data:"mdn()",content:["syntax","syntax-tree"]},{content:{view:"block",className:"syntax-diff",content:"diff-syntax:{ before: mdn().syntax, after: syntax() }"}}]}}},{content:[{view:"header",content:['text:"Formal syntax"',{view:"badge",when:'type!="Function" and no mdn() and match',data:'{ text: "Missed in mdn-data", color: "rgba(255, 52, 1, 0.335)" }'}]},"syntax","syntax-tree"]}]}]},{view:"context",when:'type = "Atrule"',content:[{view:"block",className:["view-section","syntax-section"],data:"prelude",whenData:!0,content:['h3:"Prelude"',"syntax",'auto-link{ content: "text:`See detail and test a value`"  }']},{view:"context",when:"descriptors",content:['h3:"Descriptors"',{view:"table",className:"descriptor-table",data:"descriptors.values()",cols:[{header:"Name",content:['auto-link{ content: "text:entity.name" }']},{header:"Syntax",content:"syntax"}]}]}]},{view:"match-graph",when:"match",data:"match"},{view:"section",when:"not type ~= /^Atrule/",header:'text:"Used by"',content:"used-by"}]};t.page.define("Atrule",e),t.page.define("AtruleDescriptor",e),t.page.define("AtrulePrelude",e),t.page.define("Property",e),t.page.define("Type",e),t.page.define("Function",e)}var M0=Yt(()=>{});var O0={};Ce(O0,{default:()=>Uq});function Uq(t){t.view.define("diff-syntax",{view:"key-value",className:"syntax-diff",data:`[
        { key: beforeName or 'MDN', view: 'diff', value: before, before, after, delta: "removed" },
        { key: afterName or 'CSSTree', view: 'diff', value: after, before, after, delta: "added" }
        //{ key: 'Diff', view: 'diff', before, after }
    ]`,value:'render:view or "pre:value"'})}var P0=Yt(()=>{});var z0=ee((zc,I0)=>{(function(t,e){typeof zc=="object"&&typeof I0<"u"?e(zc):typeof define=="function"&&define.amd?define(["exports"],e):(t=t||self,e(t.Diff={}))})(zc,function(t){"use strict";function e(){}e.prototype={diff:function(F,V){var Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},oe=Y.callback;typeof Y=="function"&&(oe=Y,Y={}),this.options=Y;var re=this;function de(De){return oe?(setTimeout(function(){oe(void 0,De)},0),!0):De}F=this.castInput(F),V=this.castInput(V),F=this.removeEmpty(this.tokenize(F)),V=this.removeEmpty(this.tokenize(V));var ge=V.length,we=F.length,ve=1,Ue=ge+we,se=[{newPos:-1,components:[]}],je=this.extractCommon(se[0],V,F,0);if(se[0].newPos+1>=ge&&je+1>=we)return de([{value:this.join(V),count:V.length}]);function Qe(){for(var De=-1*ve;De<=ve;De+=2){var It=void 0,st=se[De-1],tt=se[De+1],nt=(tt?tt.newPos:0)-De;st&&(se[De-1]=void 0);var mt=st&&st.newPos+1<ge,an=tt&&0<=nt&&nt<we;if(!mt&&!an){se[De]=void 0;continue}if(!mt||an&&st.newPos<tt.newPos?(It=i(tt),re.pushComponent(It.components,void 0,!0)):(It=st,It.newPos++,re.pushComponent(It.components,!0,void 0)),nt=re.extractCommon(It,V,F,De),It.newPos+1>=ge&&nt+1>=we)return de(r(re,It.components,V,F,re.useLongestToken));se[De]=It}ve++}if(oe)(function De(){setTimeout(function(){if(ve>Ue)return oe();Qe()||De()},0)})();else for(;ve<=Ue;){var He=Qe();if(He)return He}},pushComponent:function(F,V,Y){var oe=F[F.length-1];oe&&oe.added===V&&oe.removed===Y?F[F.length-1]={count:oe.count+1,added:V,removed:Y}:F.push({count:1,added:V,removed:Y})},extractCommon:function(F,V,Y,oe){for(var re=V.length,de=Y.length,ge=F.newPos,we=ge-oe,ve=0;ge+1<re&&we+1<de&&this.equals(V[ge+1],Y[we+1]);)ge++,we++,ve++;return ve&&F.components.push({count:ve}),F.newPos=ge,we},equals:function(F,V){return this.options.comparator?this.options.comparator(F,V):F===V||this.options.ignoreCase&&F.toLowerCase()===V.toLowerCase()},removeEmpty:function(F){for(var V=[],Y=0;Y<F.length;Y++)F[Y]&&V.push(F[Y]);return V},castInput:function(F){return F},tokenize:function(F){return F.split("")},join:function(F){return F.join("")}};function r(q,F,V,Y,oe){for(var re=0,de=F.length,ge=0,we=0;re<de;re++){var ve=F[re];if(ve.removed){if(ve.value=q.join(Y.slice(we,we+ve.count)),we+=ve.count,re&&F[re-1].added){var se=F[re-1];F[re-1]=F[re],F[re]=se}}else{if(!ve.added&&oe){var Ue=V.slice(ge,ge+ve.count);Ue=Ue.map(function(Qe,He){var De=Y[we+He];return De.length>Qe.length?De:Qe}),ve.value=q.join(Ue)}else ve.value=q.join(V.slice(ge,ge+ve.count));ge+=ve.count,ve.added||(we+=ve.count)}}var je=F[de-1];return de>1&&typeof je.value=="string"&&(je.added||je.removed)&&q.equals("",je.value)&&(F[de-2].value+=je.value,F.pop()),F}function i(q){return{newPos:q.newPos,components:q.components.slice(0)}}var s=new e;function a(q,F,V){return s.diff(q,F,V)}function f(q,F){if(typeof q=="function")F.callback=q;else if(q)for(var V in q)q.hasOwnProperty(V)&&(F[V]=q[V]);return F}var d=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,g=/\S/,p=new e;p.equals=function(q,F){return this.options.ignoreCase&&(q=q.toLowerCase(),F=F.toLowerCase()),q===F||this.options.ignoreWhitespace&&!g.test(q)&&!g.test(F)},p.tokenize=function(q){for(var F=q.split(/(\s+|[()[\]{}'"]|\b)/),V=0;V<F.length-1;V++)!F[V+1]&&F[V+2]&&d.test(F[V])&&d.test(F[V+2])&&(F[V]+=F[V+2],F.splice(V+1,2),V--);return F};function y(q,F,V){return V=f(V,{ignoreWhitespace:!0}),p.diff(q,F,V)}function v(q,F,V){return p.diff(q,F,V)}var w=new e;w.tokenize=function(q){var F=[],V=q.split(/(\n|\r\n)/);V[V.length-1]||V.pop();for(var Y=0;Y<V.length;Y++){var oe=V[Y];Y%2&&!this.options.newlineIsToken?F[F.length-1]+=oe:(this.options.ignoreWhitespace&&(oe=oe.trim()),F.push(oe))}return F};function k(q,F,V){return w.diff(q,F,V)}function T(q,F,V){var Y=f(V,{ignoreWhitespace:!0});return w.diff(q,F,Y)}var L=new e;L.tokenize=function(q){return q.split(/(\S.+?[.!?])(?=\s+|$)/)};function A(q,F,V){return L.diff(q,F,V)}var N=new e;N.tokenize=function(q){return q.split(/([{}:;,]|\s+)/)};function S(q,F,V){return N.diff(q,F,V)}function M(q){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?M=function(F){return typeof F}:M=function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},M(q)}function O(q){return z(q)||I(q)||_()}function z(q){if(Array.isArray(q)){for(var F=0,V=new Array(q.length);F<q.length;F++)V[F]=q[F];return V}}function I(q){if(Symbol.iterator in Object(q)||Object.prototype.toString.call(q)==="[object Arguments]")return Array.from(q)}function _(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var U=Object.prototype.toString,H=new e;H.useLongestToken=!0,H.tokenize=w.tokenize,H.castInput=function(q){var F=this.options,V=F.undefinedReplacement,Y=F.stringifyReplacer,oe=Y===void 0?function(re,de){return typeof de>"u"?V:de}:Y;return typeof q=="string"?q:JSON.stringify($(q,null,null,oe),oe,"  ")},H.equals=function(q,F){return e.prototype.equals.call(H,q.replace(/,([\r\n])/g,"$1"),F.replace(/,([\r\n])/g,"$1"))};function ce(q,F,V){return H.diff(q,F,V)}function $(q,F,V,Y,oe){F=F||[],V=V||[],Y&&(q=Y(oe,q));var re;for(re=0;re<F.length;re+=1)if(F[re]===q)return V[re];var de;if(U.call(q)==="[object Array]"){for(F.push(q),de=new Array(q.length),V.push(de),re=0;re<q.length;re+=1)de[re]=$(q[re],F,V,Y,oe);return F.pop(),V.pop(),de}if(q&&q.toJSON&&(q=q.toJSON()),M(q)==="object"&&q!==null){F.push(q),de={},V.push(de);var ge=[],we;for(we in q)q.hasOwnProperty(we)&&ge.push(we);for(ge.sort(),re=0;re<ge.length;re+=1)we=ge[re],de[we]=$(q[we],F,V,Y,we);F.pop(),V.pop()}else de=q;return de}var ie=new e;ie.tokenize=function(q){return q.slice()},ie.join=ie.removeEmpty=function(q){return q};function D(q,F,V){return ie.diff(q,F,V)}function ae(q){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},V=q.split(/\r\n|[\n\v\f\r\x85]/),Y=q.match(/\r\n|[\n\v\f\r\x85]/g)||[],oe=[],re=0;function de(){var ve={};for(oe.push(ve);re<V.length;){var Ue=V[re];if(/^(\-\-\-|\+\+\+|@@)\s/.test(Ue))break;var se=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(Ue);se&&(ve.index=se[1]),re++}for(ge(ve),ge(ve),ve.hunks=[];re<V.length;){var je=V[re];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(je))break;if(/^@@/.test(je))ve.hunks.push(we());else{if(je&&F.strict)throw new Error("Unknown line "+(re+1)+" "+JSON.stringify(je));re++}}}function ge(ve){var Ue=/^(---|\+\+\+)\s+(.*)$/.exec(V[re]);if(Ue){var se=Ue[1]==="---"?"old":"new",je=Ue[2].split("	",2),Qe=je[0].replace(/\\\\/g,"\\");/^".*"$/.test(Qe)&&(Qe=Qe.substr(1,Qe.length-2)),ve[se+"FileName"]=Qe,ve[se+"Header"]=(je[1]||"").trim(),re++}}function we(){for(var ve=re,Ue=V[re++],se=Ue.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),je={oldStart:+se[1],oldLines:+se[2]||1,newStart:+se[3],newLines:+se[4]||1,lines:[],linedelimiters:[]},Qe=0,He=0;re<V.length&&!(V[re].indexOf("--- ")===0&&re+2<V.length&&V[re+1].indexOf("+++ ")===0&&V[re+2].indexOf("@@")===0);re++){var De=V[re].length==0&&re!=V.length-1?" ":V[re][0];if(De==="+"||De==="-"||De===" "||De==="\\")je.lines.push(V[re]),je.linedelimiters.push(Y[re]||`
`),De==="+"?Qe++:De==="-"?He++:De===" "&&(Qe++,He++);else break}if(!Qe&&je.newLines===1&&(je.newLines=0),!He&&je.oldLines===1&&(je.oldLines=0),F.strict){if(Qe!==je.newLines)throw new Error("Added line count did not match for hunk at line "+(ve+1));if(He!==je.oldLines)throw new Error("Removed line count did not match for hunk at line "+(ve+1))}return je}for(;re<V.length;)de();return oe}function le(q,F,V){var Y=!0,oe=!1,re=!1,de=1;return function ge(){if(Y&&!re){if(oe?de++:Y=!1,q+de<=V)return de;re=!0}if(!oe)return re||(Y=!0),F<=q-de?-de++:(oe=!0,ge())}}function Se(q,F){var V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof F=="string"&&(F=ae(F)),Array.isArray(F)){if(F.length>1)throw new Error("applyPatch only works with a single input.");F=F[0]}var Y=q.split(/\r\n|[\n\v\f\r\x85]/),oe=q.match(/\r\n|[\n\v\f\r\x85]/g)||[],re=F.hunks,de=V.compareLine||function(Wn,en,cn,Un){return en===Un},ge=0,we=V.fuzzFactor||0,ve=0,Ue=0,se,je;function Qe(Wn,en){for(var cn=0;cn<Wn.lines.length;cn++){var Un=Wn.lines[cn],un=Un.length>0?Un[0]:" ",vr=Un.length>0?Un.substr(1):Un;if(un===" "||un==="-"){if(!de(en+1,Y[en],un,vr)&&(ge++,ge>we))return!1;en++}}return!0}for(var He=0;He<re.length;He++){for(var De=re[He],It=Y.length-De.oldLines,st=0,tt=Ue+De.oldStart-1,nt=le(tt,ve,It);st!==void 0;st=nt())if(Qe(De,tt+st)){De.offset=Ue+=st;break}if(st===void 0)return!1;ve=De.offset+De.oldStart+De.oldLines}for(var mt=0,an=0;an<re.length;an++){var Lt=re[an],ht=Lt.oldStart+Lt.offset+mt-1;mt+=Lt.newLines-Lt.oldLines,ht<0&&(ht=0);for(var ln=0;ln<Lt.lines.length;ln++){var Mn=Lt.lines[ln],Nt=Mn.length>0?Mn[0]:" ",ti=Mn.length>0?Mn.substr(1):Mn,mr=Lt.linedelimiters[ln];if(Nt===" ")ht++;else if(Nt==="-")Y.splice(ht,1),oe.splice(ht,1);else if(Nt==="+")Y.splice(ht,0,ti),oe.splice(ht,0,mr),ht++;else if(Nt==="\\"){var yr=Lt.lines[ln-1]?Lt.lines[ln-1][0]:null;yr==="+"?se=!0:yr==="-"&&(je=!0)}}}if(se)for(;!Y[Y.length-1];)Y.pop(),oe.pop();else je&&(Y.push(""),oe.push(`
`));for(var On=0;On<Y.length-1;On++)Y[On]=Y[On]+oe[On];return Y.join("")}function Je(q,F){typeof q=="string"&&(q=ae(q));var V=0;function Y(){var oe=q[V++];if(!oe)return F.complete();F.loadFile(oe,function(re,de){if(re)return F.complete(re);var ge=Se(de,oe,F);F.patched(oe,ge,function(we){if(we)return F.complete(we);Y()})})}Y()}function ot(q,F,V,Y,oe,re,de){de||(de={}),typeof de.context>"u"&&(de.context=4);var ge=k(V,Y,de);ge.push({value:"",lines:[]});function we(st){return st.map(function(tt){return" "+tt})}for(var ve=[],Ue=0,se=0,je=[],Qe=1,He=1,De=function(tt){var nt=ge[tt],mt=nt.lines||nt.value.replace(/\n$/,"").split(`
`);if(nt.lines=mt,nt.added||nt.removed){var an;if(!Ue){var Lt=ge[tt-1];Ue=Qe,se=He,Lt&&(je=de.context>0?we(Lt.lines.slice(-de.context)):[],Ue-=je.length,se-=je.length)}(an=je).push.apply(an,O(mt.map(function(On){return(nt.added?"+":"-")+On}))),nt.added?He+=mt.length:Qe+=mt.length}else{if(Ue)if(mt.length<=de.context*2&&tt<ge.length-2){var ht;(ht=je).push.apply(ht,O(we(mt)))}else{var ln,Mn=Math.min(mt.length,de.context);(ln=je).push.apply(ln,O(we(mt.slice(0,Mn))));var Nt={oldStart:Ue,oldLines:Qe-Ue+Mn,newStart:se,newLines:He-se+Mn,lines:je};if(tt>=ge.length-2&&mt.length<=de.context){var ti=/\n$/.test(V),mr=/\n$/.test(Y),yr=mt.length==0&&je.length>Nt.oldLines;!ti&&yr&&je.splice(Nt.oldLines,0,"\\ No newline at end of file"),(!ti&&!yr||!mr)&&je.push("\\ No newline at end of file")}ve.push(Nt),Ue=0,se=0,je=[]}Qe+=mt.length,He+=mt.length}},It=0;It<ge.length;It++)De(It);return{oldFileName:q,newFileName:F,oldHeader:oe,newHeader:re,hunks:ve}}function kn(q,F,V,Y,oe,re,de){var ge=ot(q,F,V,Y,oe,re,de),we=[];q==F&&we.push("Index: "+q),we.push("==================================================================="),we.push("--- "+ge.oldFileName+(typeof ge.oldHeader>"u"?"":"	"+ge.oldHeader)),we.push("+++ "+ge.newFileName+(typeof ge.newHeader>"u"?"":"	"+ge.newHeader));for(var ve=0;ve<ge.hunks.length;ve++){var Ue=ge.hunks[ve];we.push("@@ -"+Ue.oldStart+","+Ue.oldLines+" +"+Ue.newStart+","+Ue.newLines+" @@"),we.push.apply(we,Ue.lines)}return we.join(`
`)+`
`}function nr(q,F,V,Y,oe,re){return kn(q,q,F,V,Y,oe,re)}function wt(q,F){return q.length!==F.length?!1:Xt(q,F)}function Xt(q,F){if(F.length>q.length)return!1;for(var V=0;V<F.length;V++)if(F[V]!==q[V])return!1;return!0}function xt(q){var F=K(q.lines),V=F.oldLines,Y=F.newLines;V!==void 0?q.oldLines=V:delete q.oldLines,Y!==void 0?q.newLines=Y:delete q.newLines}function Pe(q,F,V){q=Te(q,V),F=Te(F,V);var Y={};(q.index||F.index)&&(Y.index=q.index||F.index),(q.newFileName||F.newFileName)&&(Fe(q)?Fe(F)?(Y.oldFileName=_e(Y,q.oldFileName,F.oldFileName),Y.newFileName=_e(Y,q.newFileName,F.newFileName),Y.oldHeader=_e(Y,q.oldHeader,F.oldHeader),Y.newHeader=_e(Y,q.newHeader,F.newHeader)):(Y.oldFileName=q.oldFileName,Y.newFileName=q.newFileName,Y.oldHeader=q.oldHeader,Y.newHeader=q.newHeader):(Y.oldFileName=F.oldFileName||q.oldFileName,Y.newFileName=F.newFileName||q.newFileName,Y.oldHeader=F.oldHeader||q.oldHeader,Y.newHeader=F.newHeader||q.newHeader)),Y.hunks=[];for(var oe=0,re=0,de=0,ge=0;oe<q.hunks.length||re<F.hunks.length;){var we=q.hunks[oe]||{oldStart:1/0},ve=F.hunks[re]||{oldStart:1/0};if($e(we,ve))Y.hunks.push(ze(we,de)),oe++,ge+=we.newLines-we.oldLines;else if($e(ve,we))Y.hunks.push(ze(ve,ge)),re++,de+=ve.newLines-ve.oldLines;else{var Ue={oldStart:Math.min(we.oldStart,ve.oldStart),oldLines:0,newStart:Math.min(we.newStart+de,ve.oldStart+ge),newLines:0,lines:[]};ut(Ue,we.oldStart,we.lines,ve.oldStart,ve.lines),re++,oe++,Y.hunks.push(Ue)}}return Y}function Te(q,F){if(typeof q=="string"){if(/^@@/m.test(q)||/^Index:/m.test(q))return ae(q)[0];if(!F)throw new Error("Must provide a base reference or pass in a patch");return ot(void 0,void 0,F,q)}return q}function Fe(q){return q.newFileName&&q.newFileName!==q.oldFileName}function _e(q,F,V){return F===V?F:(q.conflict=!0,{mine:F,theirs:V})}function $e(q,F){return q.oldStart<F.oldStart&&q.oldStart+q.oldLines<F.oldStart}function ze(q,F){return{oldStart:q.oldStart,oldLines:q.oldLines,newStart:q.newStart+F,newLines:q.newLines,lines:q.lines}}function ut(q,F,V,Y,oe){var re={offset:F,lines:V,index:0},de={offset:Y,lines:oe,index:0};for(Ze(q,re,de),Ze(q,de,re);re.index<re.lines.length&&de.index<de.lines.length;){var ge=re.lines[re.index],we=de.lines[de.index];if((ge[0]==="-"||ge[0]==="+")&&(we[0]==="-"||we[0]==="+"))Hn(q,re,de);else if(ge[0]==="+"&&we[0]===" "){var ve;(ve=q.lines).push.apply(ve,O(Be(re)))}else if(we[0]==="+"&&ge[0]===" "){var Ue;(Ue=q.lines).push.apply(Ue,O(Be(de)))}else ge[0]==="-"&&we[0]===" "?Nn(q,re,de):we[0]==="-"&&ge[0]===" "?Nn(q,de,re,!0):ge===we?(q.lines.push(ge),re.index++,de.index++):Gt(q,Be(re),Be(de))}kt(q,re),kt(q,de),xt(q)}function Hn(q,F,V){var Y=Be(F),oe=Be(V);if(gr(Y)&&gr(oe)){if(Xt(Y,oe)&&at(V,Y,Y.length-oe.length)){var re;(re=q.lines).push.apply(re,O(Y));return}else if(Xt(oe,Y)&&at(F,oe,oe.length-Y.length)){var de;(de=q.lines).push.apply(de,O(oe));return}}else if(wt(Y,oe)){var ge;(ge=q.lines).push.apply(ge,O(Y));return}Gt(q,Y,oe)}function Nn(q,F,V,Y){var oe=Be(F),re=Zt(V,oe);if(re.merged){var de;(de=q.lines).push.apply(de,O(re.merged))}else Gt(q,Y?re:oe,Y?oe:re)}function Gt(q,F,V){q.conflict=!0,q.lines.push({conflict:!0,mine:F,theirs:V})}function Ze(q,F,V){for(;F.offset<V.offset&&F.index<F.lines.length;){var Y=F.lines[F.index++];q.lines.push(Y),F.offset++}}function kt(q,F){for(;F.index<F.lines.length;){var V=F.lines[F.index++];q.lines.push(V)}}function Be(q){for(var F=[],V=q.lines[q.index][0];q.index<q.lines.length;){var Y=q.lines[q.index];if(V==="-"&&Y[0]==="+"&&(V="+"),V===Y[0])F.push(Y),q.index++;else break}return F}function Zt(q,F){for(var V=[],Y=[],oe=0,re=!1,de=!1;oe<F.length&&q.index<q.lines.length;){var ge=q.lines[q.index],we=F[oe];if(we[0]==="+")break;if(re=re||ge[0]!==" ",Y.push(we),oe++,ge[0]==="+")for(de=!0;ge[0]==="+";)V.push(ge),ge=q.lines[++q.index];we.substr(1)===ge.substr(1)?(V.push(ge),q.index++):de=!0}if((F[oe]||"")[0]==="+"&&re&&(de=!0),de)return V;for(;oe<F.length;)Y.push(F[oe++]);return{merged:Y,changes:V}}function gr(q){return q.reduce(function(F,V){return F&&V[0]==="-"},!0)}function at(q,F,V){for(var Y=0;Y<V;Y++){var oe=F[F.length-V+Y].substr(1);if(q.lines[q.index+Y]!==" "+oe)return!1}return q.index+=V,!0}function K(q){var F=0,V=0;return q.forEach(function(Y){if(typeof Y!="string"){var oe=K(Y.mine),re=K(Y.theirs);F!==void 0&&(oe.oldLines===re.oldLines?F+=oe.oldLines:F=void 0),V!==void 0&&(oe.newLines===re.newLines?V+=oe.newLines:V=void 0)}else V!==void 0&&(Y[0]==="+"||Y[0]===" ")&&V++,F!==void 0&&(Y[0]==="-"||Y[0]===" ")&&F++}),{oldLines:F,newLines:V}}function ue(q){for(var F=[],V,Y,oe=0;oe<q.length;oe++)V=q[oe],V.added?Y=1:V.removed?Y=-1:Y=0,F.push([Y,V.value]);return F}function te(q){for(var F=[],V=0;V<q.length;V++){var Y=q[V];Y.added?F.push("<ins>"):Y.removed&&F.push("<del>"),F.push(Ye(Y.value)),Y.added?F.push("</ins>"):Y.removed&&F.push("</del>")}return F.join("")}function Ye(q){var F=q;return F=F.replace(/&/g,"&amp;"),F=F.replace(/</g,"&lt;"),F=F.replace(/>/g,"&gt;"),F=F.replace(/"/g,"&quot;"),F}t.Diff=e,t.diffChars=a,t.diffWords=y,t.diffWordsWithSpace=v,t.diffLines=k,t.diffTrimmedLines=T,t.diffSentences=A,t.diffCss=S,t.diffJson=ce,t.diffArrays=D,t.structuredPatch=ot,t.createTwoFilesPatch=kn,t.createPatch=nr,t.applyPatch=Se,t.applyPatches=Je,t.parsePatch=ae,t.merge=Pe,t.convertChangesToDMP=ue,t.convertChangesToXML=te,t.canonicalize=$,Object.defineProperty(t,"__esModule",{value:!0})})});var B0={};Ce(B0,{default:()=>$q});function $q(t){let e=z0(),r={char:e.diffChars,word:e.diffWords,wordws:e.diffWordsWithSpace,sentence:e.diffSentences,line:e.diffLines};t.view.define("diff",function(i,s,a){let{type:f="wordws"}=s,{before:d="",after:g="",delta:p="both"}=a,y=(f in r?r[f]:r.wordws)(d,g),v=p==="both"||p==="added",w=p==="both"||p==="removed";y.forEach(k=>{let T=i;if(k.added||k.removed){if(k.added?!v:!w)return;T=i.appendChild(document.createElement("span")),T.className=k.added?"added":"removed"}T.appendChild(document.createTextNode(k.value))})})}var R0=Yt(()=>{});var q0={};Ce(q0,{default:()=>Gq});function Gq(t){t.view.define("key-value-item",function(e,r,i,s){let{key:a="text:key",value:f="struct:value"}=r,d=e.appendChild(document.createElement("span")),g=e.appendChild(document.createElement("span"));d.className="view-key-value-item-key",this.render(d,a,i,s),g.className="view-key-value-item-value",this.render(g,f,i,s)}),t.view.define("key-value",function(e,r,i,s){let{itemConfig:a,key:f,value:d}=r,g=null;if(Array.isArray(i))g=i;else{g=[];for(let p in i)hasOwnProperty.call(i,p)&&g.push({key:p,value:i[p]})}this.renderList(e,this.composeConfig({view:"key-value-item",key:f,value:d},a),g,s)})}var F0=Yt(()=>{});var _0={};Ce(_0,{default:()=>Vq});function Vq(t){t.view.define("pre",function(e,r,i,s){let{content:a}=r;a?this.render(e,a,i,s):e.textContent=i},{tag:"span"}),t.view.define("nowrap",function(e,r,i,s){let{content:a}=r;a?this.render(e,a,i,s):e.textContent=i},{tag:"span"})}var j0=Yt(()=>{});var H0={};Ce(H0,{default:()=>Kq});function Kq(t){let e=Ic();function r(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function i(s,a){return e.definitionSyntax.generate(s,function(f,d){if(d.type==="Type"||d.type==="Property"){let g=t.objectMarkers.lookup(d),p=!g||!g.object.match;f=`<a href="#${d.type}:${d.name}"${p?' class="error"':""}>${r(f)}</a>`}return a&&a.type===d.type&&a.name===d.name&&(f=`<span class="match">${f}</span>`),f})}t.view.define("syntax",function(s,a,f){let{type:d,match:g,matchType:p,matchName:y}=f||{},{syntax:v}=f||{},w="";v?(typeof v=="string"&&(v=e.definitionSyntax.parse(v)),d==="Function"&&(v.combinator="|<br>"),w=i(v,{type:p,name:y}),d==="Function"&&(v.combinator="|")):g&&(w="generic"),s.innerHTML=w},{tag:"span"})}var W0=Yt(()=>{});var U0={};Ce(U0,{default:()=>Yq});function Yq(t){t.view.define("syntax-match",function(e,r,i,s){function a(g){typeof f=="string"&&[].slice.call(t.dom.container.querySelectorAll(f)).forEach(p=>p.classList.toggle("syntax-match-trace-pinned",!!g)),d.querySelector(".instruction").innerText=g?"(click outside trace block to unpin)":"(click to pin trace block)"}let{selector:f}=r,d=document.createElement("div");t.view.render(e,{view:"syntax-match-tree",ignoreClickElements:[d],onPinned:a,onTrace(g){g?(d.hidden=!1,d.lastChild.innerHTML="",t.view.render(d.lastChild,"syntax-match-trace",g,s)):d.hidden=!0}},i),d.className="trace-popup",d.hidden=!0,d.innerHTML='<div class="header">Match trace <span class="instruction"></span></div><div class="trace"></div>',e.appendChild(d),setTimeout(a,0)})}var $0=Yt(()=>{});var G0={};Ce(G0,{default:()=>Qq});function Qq(t){function e(f){return f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r(f,d){switch(f){case"Property":return"<'"+d+"'>";case"Type":return"<"+d+">";case"Function":return d+"()";default:return d}}function i(f,d,g){let p=document.createElement("div"),y=d||f;return p.className="match-tree-node"+(f?" match-tree-node_"+f:""),p.innerHTML='<span class="children"></span><span class="label">'+y+"</span>",p.querySelector(".label").syntaxMatchTrace=g||null,{node:p,children:p.querySelector(".children")}}function s(f,d){let g=f.syntax||f,p;return f.token?p=i("ASTNode",f.token,d.concat(f)):(p=i(g.type,g.name?e(r(g.type,g.name)):""),f.match&&(d.push(f),f.match.forEach(function(y){this.appendChild(s(y,d),this.firstChild)},p.children),d.pop())),p.node}function a(f){let d=null;for(;f!==null;){if(f.syntaxMatchTrace){d=f.syntaxMatchTrace;break}f=f.parentNode}return d}t.view.define("syntax-match-tree",function(f,d,g){function p(S){if([].slice.call(f.querySelectorAll(".pinned")).forEach(M=>M.classList.remove("pinned")),A&&S){let M=S;for(;M!==f;)M.classList.add("pinned"),M=M.parentNode}}function y(S){T!==S&&(T=S,clearTimeout(L),typeof v=="function"&&v(S))}let{onTrace:v,onPinned:w,ignoreClickElements:k}=d,T,L,A=!1;f.appendChild(s(g,[])),f.addEventListener("mouseenter",function(S){let M=a(S.target);(!A||M)&&(y(M),p(S.target))},!0),f.addEventListener("mouseleave",function(){clearTimeout(L),A||(L=setTimeout(function(){y(null)},100))},!0);let N=t.addHostElEventListener("click",function(M){if(!t.dom.container.contains(f)){N();return}if(Array.isArray(k)&&k.some(I=>I.contains(M.target)))return;let O=a(M.target),z=O?!A:!1;z!==A&&typeof w=="function"&&(A=z,w(A)),y(O),p(M.target)},!0)})}var V0=Yt(()=>{});var K0={};Ce(K0,{default:()=>Jq});function Jq(t){let e=Ic();function r(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function i(s){let a=[],f=null;s=s.slice().reverse(),s[0].syntax===null&&s.shift(),s[0].syntax&&s[0].syntax.type==="Function"&&(a=s[1].match.slice(1,-1).map(p=>p.syntax),f=s[1].match[s[1].match.length-1].syntax);let d=s.shift().syntax;return"<ul>"+s.map(function(p,y,v){let{syntax:w}=p;switch(w.type){case"Type":w=e.lexer.getType(w.name).syntax||w;break;case"Property":w=e.lexer.getProperty(w.name).syntax||w;break;case"AtrulePrelude":w=e.lexer.getAtrule(w.name).prelude.syntax||w;break;case"Function":w=e.lexer.functions[w.name].syntax||w;break}let k=e.definitionSyntax.generate(w,function(T,L){if((L.type==="Type"||L.type==="Property")&&(T=r(T)),(L.type==="Type"||L.type==="Property"||L.type==="Keyword"||L.type==="Function"||L.type==="Multiplier")&&(T='<span class="atom">'+T+"</span>"),L===d){let A=T,N;L.type==="Multiplier"&&(N=T.lastIndexOf("#"),T="#"),T=['<span class="match">',`<span class="${y>0?"connector-up":"clear-up"}"></span>`,`<span class="${y!==v.length-1?"connector-down":"clear-down"}"></span>`,'<span class="magick-box"></span>','<span class="match-caption">'+T+"</span>","</span>"].join(""),L.type==="Multiplier"&&(T=A.substr(0,N)+T+A.substr(N+1))}else(a.includes(L)||L===f)&&(T='<span class="children-match"><span class="match-caption">'+T+"</span></span>");return T});return d=p.syntax,'<li><span class="syntax">'+k+"</span></li>"}).join("")+"</ul>"}t.view.define("syntax-match-trace",function(s,a,f){s.innerHTML=i(f)})}var Y0=Yt(()=>{});var Q0={};Ce(Q0,{default:()=>Xq});function Xq(t){t.view.define("syntax-test",{view:"block",when:"match",className:"test-value",content:{view:"context",modifiers:[{view:"block",when:'type="Function"',content:'text:name + "("'},{view:"input",name:"value",placeholder:"Enter a value to match against the syntax"},{view:"block",when:'type="Function"',content:'text:")"'}],content:{view:"section",className:"match-result",when:"#.value ~= /\\S/",data:"lexerMatch(#.value)",header:['text:"Match result "',{view:"badge",when:"iterations",data:'{ text: iterations + " iteration(s)" }'}],content:{view:"switch",content:[{when:"error and #.value~=/\\S/",content:"alert-danger:error"},{when:"match",content:{view:"syntax-match",data:"match",selector:".test-value"}},{content:'alert-success:"Enter a value to test"'}]}}}})}var J0=Yt(()=>{});var X0={};Ce(X0,{default:()=>Zq});function Zq(t){t.view.define("syntax-tree",{view:"context",data:`
        ..(refs().resolved)
            .[type != "Function" and (syntax or no match)]
            .({ ..., matchType: @.matchType, matchName: @.matchName })
    `,content:{view:"list",when:"size()",limit:!1,item:[{view:"auto-link",postRender(e,r,i){i.match||e.firstChild.classList.add("error")}},'text:" = "',{view:"switch",content:[{when:"no match",content:{view:"block",className:"error",content:'text:"syntax is missed"'}},{content:"syntax"}]}]}})}var Z0=Yt(()=>{});var ek={};Ce(ek,{default:()=>eF});function eF(t){t.dom.container.appendChild(i("svg",{style:"position:absolute;z-index:-1;width:0;height:0"},[i("marker",{id:"match-graph-connection-marker",viewBox:"0 0 5 10",refX:"0",refY:"5",markerUnits:"strokeWidth",markerWidth:"6",markerHeight:"4",orient:"auto"},[i("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"rgba(150, 150, 150, 0.65)"})])]));function e(a,f,d){typeof f=="string"&&(f={class:f});for(let g in f)g.startsWith("on")?a.addEventListener(g.substr(2),f[g]):a.setAttribute(g,f[g]);return Array.isArray(d)?d.forEach(g=>a.appendChild(g&&g.nodeType?g:s(g))):typeof d=="string"&&(a.innerHTML=d),a}function r(a,f,d){return e(document.createElement(a),f,d)}function i(a,f,d){return e(document.createElementNS("http://www.w3.org/2000/svg",a),f,d)}function s(a){return document.createTextNode(String(a))}t.view.define("match-graph",function(a,f,d){function g(A,N){if(A.type==="MatchGraph")return g(A.match,N);let S=!1,M,O,z;if(M=r("div","node-wrapper",[O=r("div","node-content",[z=r("div","node")])]),p.has(A))return z.classList.add("node_recursive"),z.innerHTML="Recursive",N.appendChild(M),!0;switch(A.type==="If"&&(p.set(A),v.push(A)),y.set(A,{root:M,content:O,main:z}),A.type){case"Match":{z.classList.add("node_match"),z.innerHTML=A.type;let I=null;for(let _=v.length-1,U=A;_>=0;_--){let H=v[_];if(U===H.then){I=H.then;break}U=H}I!==null&&w.push({from:z,to:I,num:0,total:{count:0}});break}case"Mismatch":{z.classList.add("node_mismatch"),z.innerHTML=A.type;let I=null;for(let _=v.length-1,U=A;_>=0;_--){let H=v[_];if(U===H.then){I=H.else;break}U=H}I!==null&&w.push({from:z,to:I,num:0,total:{count:0}});break}case"DisallowEmpty":z.classList.add("node_disallow-empty"),z.innerHTML=A.type;break;case"Type":case"Property":case"Keyword":case"Function":case"Token":case"String":case"Comma":if(!A.match){let I=!1;switch(A.type){case"Type":I='<a href="#Type:'+A.name+'">&lt;'+A.name+"&gt;</a>";break;case"Property":I='<a href="#Property:'+A.name+`">&lt;'`+A.name+"'&gt;</a>";break;case"Function":case"Keyword":I=A.name;break;case"Token":case"String":I=A.value;break;case"Comma":I=",";break}z.classList.add("node_check"),z.innerHTML='<span class="node__label">'+A.type+'</span><span class="node__key">'+I+"</span>";break}default:{z.classList.add("node_default");let I=M.appendChild(r("div","nested nested_labeled"));z.appendChild(r("div","node__type",A.type)),S=!0;let _=I,U=A.type==="Enum"?A.map:A,H={count:0};for(let ce in U){if(U===A&&ce==="syntax"||ce==="type")continue;let $=U[ce],ie=$&&typeof $=="object",D=z.appendChild(r("div","node-field",'<span class="node-field-label">'+ce+"</span><span>"+(ie?'<span class="connection-dot"></span>':typeof $=="function"?"[function]":JSON.stringify($))+"</span>"));ie&&(g($,I)?_=y.get($):I!==_&&_.content.appendChild(y.get($).root),k.push({from:D.lastChild.lastChild,to:y.get($).main,num:H.count++,total:H}))}}}return N.appendChild(M),A.type==="If"&&v.pop(),S}let p=new Map,y=new Map,v=[],w=[],k=[],T=r("div","graph"),L;d&&g(d,T),a.appendChild(r("h2","view-header",'Match graph<span class="view-badge node-count">'+y.size+"</span>")),a.appendChild(r("div","canvas",[L=i("svg","connections-canvas"),T])),setTimeout(()=>{let A=T.getBoundingClientRect();k.map(function(N){let S=N.from.getBoundingClientRect(),M=N.to.getBoundingClientRect(),O=S.right>M.left,z=S.right-A.left,I=S.top-A.top+S.height/2,_=(O?M.right+1:M.left-1)-A.left-7,U=M.top-A.top+10,H=O?16:12+Math.abs(N.num-N.total.count)*5;if(I===U)return["M",z,I,"H",_].join(" ");let ce=Math.abs(I-U)>16?8:0,$=U<I?-ce:ce;return["M",z,I,"h",H-ce,"q",[ce,0],[ce,$],"V",U-$,"q",[0,$],[O?-ce:ce,$],"H",_].join(" ")}).forEach(function(N){L.appendChild(i("path",{class:"connection",d:N}))})},0)})}var tk=Yt(()=>{});var nk={};Ce(nk,{default:()=>tF});function tF(t){t.view.define("used-by",{view:"columns",data:`
        $dict: #.data.dict;
        $explicit: $dict.[refs.[resolved = @]];
        $explicit
            ..($t:$;$t + $dict.[refs.[resolved=$t]])
            .[$ != @]
            .group(=>type)
            .({
                type: key,
                refs: value.sort(name asc).({ ..., implicit: $ not in $explicit })
            })
            .sort(type.typeSorting() asc)
    `,emptyText:"No syntaxes",column:['h5:type + " (" + refs.size() + ")"',{view:"list",data:"refs",itemConfig:{className:e=>e.implicit&&"implicit"},item:{view:"auto-link",href:(e,r,{page:i,id:s})=>`${e}&hltype=${i}&hlname=${s}`}}]})}var rk=Yt(()=>{});var Jr=ee((jh,Hh)=>{(function(t,e){typeof jh=="object"&&typeof Hh<"u"?Hh.exports=e():typeof define=="function"&&define.amd?define(e):(t=t||self,t.CodeMirror=e())})(jh,function(){"use strict";var t=navigator.userAgent,e=navigator.platform,r=/gecko\/\d/i.test(t),i=/MSIE \d/.test(t),s=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),a=/Edge\/(\d+)/.exec(t),f=i||s||a,d=f&&(i?document.documentMode||6:+(a||s)[1]),g=!a&&/WebKit\//.test(t),p=g&&/Qt\/\d+\.\d+/.test(t),y=!a&&/Chrome\/(\d+)/.exec(t),v=y&&+y[1],w=/Opera\//.test(t),k=/Apple Computer/.test(navigator.vendor),T=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),L=/PhantomJS/.test(t),A=k&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),N=/Android/.test(t),S=A||N||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),M=A||/Mac/.test(e),O=/\bCrOS\b/.test(t),z=/win/i.test(e),I=w&&t.match(/Version\/(\d*\.\d*)/);I&&(I=Number(I[1])),I&&I>=15&&(w=!1,g=!0);var _=M&&(p||w&&(I==null||I<12.11)),U=r||f&&d>=9;function H(n){return new RegExp("(^|\\s)"+n+"(?:$|\\s)\\s*")}var ce=function(n,o){var c=n.className,l=H(o).exec(c);if(l){var u=c.slice(l.index+l[0].length);n.className=c.slice(0,l.index)+(u?l[1]+u:"")}};function $(n){for(var o=n.childNodes.length;o>0;--o)n.removeChild(n.firstChild);return n}function ie(n,o){return $(n).appendChild(o)}function D(n,o,c,l){var u=document.createElement(n);if(c&&(u.className=c),l&&(u.style.cssText=l),typeof o=="string")u.appendChild(document.createTextNode(o));else if(o)for(var h=0;h<o.length;++h)u.appendChild(o[h]);return u}function ae(n,o,c,l){var u=D(n,o,c,l);return u.setAttribute("role","presentation"),u}var le;document.createRange?le=function(n,o,c,l){var u=document.createRange();return u.setEnd(l||n,c),u.setStart(n,o),u}:le=function(n,o,c){var l=document.body.createTextRange();try{l.moveToElementText(n.parentNode)}catch{return l}return l.collapse(!0),l.moveEnd("character",c),l.moveStart("character",o),l};function Se(n,o){if(o.nodeType==3&&(o=o.parentNode),n.contains)return n.contains(o);do if(o.nodeType==11&&(o=o.host),o==n)return!0;while(o=o.parentNode)}function Je(n){var o;try{o=n.activeElement}catch{o=n.body||null}for(;o&&o.shadowRoot&&o.shadowRoot.activeElement;)o=o.shadowRoot.activeElement;return o}function ot(n,o){var c=n.className;H(o).test(c)||(n.className+=(c?" ":"")+o)}function kn(n,o){for(var c=n.split(" "),l=0;l<c.length;l++)c[l]&&!H(c[l]).test(o)&&(o+=" "+c[l]);return o}var nr=function(n){n.select()};A?nr=function(n){n.selectionStart=0,n.selectionEnd=n.value.length}:f&&(nr=function(n){try{n.select()}catch{}});function wt(n){return n.display.wrapper.ownerDocument}function Xt(n){return wt(n).defaultView}function xt(n){var o=Array.prototype.slice.call(arguments,1);return function(){return n.apply(null,o)}}function Pe(n,o,c){o||(o={});for(var l in n)n.hasOwnProperty(l)&&(c!==!1||!o.hasOwnProperty(l))&&(o[l]=n[l]);return o}function Te(n,o,c,l,u){o==null&&(o=n.search(/[^\s\u00a0]/),o==-1&&(o=n.length));for(var h=l||0,m=u||0;;){var b=n.indexOf("	",h);if(b<0||b>=o)return m+(o-h);m+=b-h,m+=c-m%c,h=b+1}}var Fe=function(){this.id=null,this.f=null,this.time=0,this.handler=xt(this.onTimeout,this)};Fe.prototype.onTimeout=function(n){n.id=0,n.time<=+new Date?n.f():setTimeout(n.handler,n.time-+new Date)},Fe.prototype.set=function(n,o){this.f=o;var c=+new Date+n;(!this.id||c<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,n),this.time=c)};function _e(n,o){for(var c=0;c<n.length;++c)if(n[c]==o)return c;return-1}var $e=50,ze={toString:function(){return"CodeMirror.Pass"}},ut={scroll:!1},Hn={origin:"*mouse"},Nn={origin:"+move"};function Gt(n,o,c){for(var l=0,u=0;;){var h=n.indexOf("	",l);h==-1&&(h=n.length);var m=h-l;if(h==n.length||u+m>=o)return l+Math.min(m,o-u);if(u+=h-l,u+=c-u%c,l=h+1,u>=o)return l}}var Ze=[""];function kt(n){for(;Ze.length<=n;)Ze.push(Be(Ze)+" ");return Ze[n]}function Be(n){return n[n.length-1]}function Zt(n,o){for(var c=[],l=0;l<n.length;l++)c[l]=o(n[l],l);return c}function gr(n,o,c){for(var l=0,u=c(o);l<n.length&&c(n[l])<=u;)l++;n.splice(l,0,o)}function at(){}function K(n,o){var c;return Object.create?c=Object.create(n):(at.prototype=n,c=new at),o&&Pe(o,c),c}var ue=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function te(n){return/\w/.test(n)||n>"\x80"&&(n.toUpperCase()!=n.toLowerCase()||ue.test(n))}function Ye(n,o){return o?o.source.indexOf("\\w")>-1&&te(n)?!0:o.test(n):te(n)}function q(n){for(var o in n)if(n.hasOwnProperty(o)&&n[o])return!1;return!0}var F=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function V(n){return n.charCodeAt(0)>=768&&F.test(n)}function Y(n,o,c){for(;(c<0?o>0:o<n.length)&&V(n.charAt(o));)o+=c;return o}function oe(n,o,c){for(var l=o>c?-1:1;;){if(o==c)return o;var u=(o+c)/2,h=l<0?Math.ceil(u):Math.floor(u);if(h==o)return n(h)?o:c;n(h)?c=h:o=h+l}}function re(n,o,c,l){if(!n)return l(o,c,"ltr",0);for(var u=!1,h=0;h<n.length;++h){var m=n[h];(m.from<c&&m.to>o||o==c&&m.to==o)&&(l(Math.max(m.from,o),Math.min(m.to,c),m.level==1?"rtl":"ltr",h),u=!0)}u||l(o,c,"ltr")}var de=null;function ge(n,o,c){var l;de=null;for(var u=0;u<n.length;++u){var h=n[u];if(h.from<o&&h.to>o)return u;h.to==o&&(h.from!=h.to&&c=="before"?l=u:de=u),h.from==o&&(h.from!=h.to&&c!="before"?l=u:de=u)}return l??de}var we=function(){var n="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",o="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function c(C){return C<=247?n.charAt(C):1424<=C&&C<=1524?"R":1536<=C&&C<=1785?o.charAt(C-1536):1774<=C&&C<=2220?"r":8192<=C&&C<=8203?"w":C==8204?"b":"L"}var l=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,u=/[stwN]/,h=/[LRr]/,m=/[Lb1n]/,b=/[1n]/;function x(C,P,B){this.level=C,this.from=P,this.to=B}return function(C,P){var B=P=="ltr"?"L":"R";if(C.length==0||P=="ltr"&&!l.test(C))return!1;for(var G=C.length,W=[],Z=0;Z<G;++Z)W.push(c(C.charCodeAt(Z)));for(var ne=0,fe=B;ne<G;++ne){var he=W[ne];he=="m"?W[ne]=fe:fe=he}for(var me=0,pe=B;me<G;++me){var ye=W[me];ye=="1"&&pe=="r"?W[me]="n":h.test(ye)&&(pe=ye,ye=="r"&&(W[me]="R"))}for(var Ne=1,Ee=W[0];Ne<G-1;++Ne){var Ge=W[Ne];Ge=="+"&&Ee=="1"&&W[Ne+1]=="1"?W[Ne]="1":Ge==","&&Ee==W[Ne+1]&&(Ee=="1"||Ee=="n")&&(W[Ne]=Ee),Ee=Ge}for(var ft=0;ft<G;++ft){var jt=W[ft];if(jt==",")W[ft]="N";else if(jt=="%"){var Ct=void 0;for(Ct=ft+1;Ct<G&&W[Ct]=="%";++Ct);for(var An=ft&&W[ft-1]=="!"||Ct<G&&W[Ct]=="1"?"1":"N",hn=ft;hn<Ct;++hn)W[hn]=An;ft=Ct-1}}for(var Mt=0,pn=B;Mt<G;++Mt){var Ut=W[Mt];pn=="L"&&Ut=="1"?W[Mt]="L":h.test(Ut)&&(pn=Ut)}for(var Bt=0;Bt<G;++Bt)if(u.test(W[Bt])){var Ot=void 0;for(Ot=Bt+1;Ot<G&&u.test(W[Ot]);++Ot);for(var Tt=(Bt?W[Bt-1]:B)=="L",gn=(Ot<G?W[Ot]:B)=="L",vo=Tt==gn?Tt?"L":"R":B,di=Bt;di<Ot;++di)W[di]=vo;Bt=Ot-1}for(var Kt=[],Cr,Ht=0;Ht<G;)if(m.test(W[Ht])){var wf=Ht;for(++Ht;Ht<G&&m.test(W[Ht]);++Ht);Kt.push(new x(0,wf,Ht))}else{var Ur=Ht,Pi=Kt.length,Ii=P=="rtl"?1:0;for(++Ht;Ht<G&&W[Ht]!="L";++Ht);for(var nn=Ur;nn<Ht;)if(b.test(W[nn])){Ur<nn&&(Kt.splice(Pi,0,new x(1,Ur,nn)),Pi+=Ii);var bo=nn;for(++nn;nn<Ht&&b.test(W[nn]);++nn);Kt.splice(Pi,0,new x(2,bo,nn)),Pi+=Ii,Ur=nn}else++nn;Ur<Ht&&Kt.splice(Pi,0,new x(1,Ur,Ht))}return P=="ltr"&&(Kt[0].level==1&&(Cr=C.match(/^\s+/))&&(Kt[0].from=Cr[0].length,Kt.unshift(new x(0,0,Cr[0].length))),Be(Kt).level==1&&(Cr=C.match(/\s+$/))&&(Be(Kt).to-=Cr[0].length,Kt.push(new x(0,G-Cr[0].length,G)))),P=="rtl"?Kt.reverse():Kt}}();function ve(n,o){var c=n.order;return c==null&&(c=n.order=we(n.text,o)),c}var Ue=[],se=function(n,o,c){if(n.addEventListener)n.addEventListener(o,c,!1);else if(n.attachEvent)n.attachEvent("on"+o,c);else{var l=n._handlers||(n._handlers={});l[o]=(l[o]||Ue).concat(c)}};function je(n,o){return n._handlers&&n._handlers[o]||Ue}function Qe(n,o,c){if(n.removeEventListener)n.removeEventListener(o,c,!1);else if(n.detachEvent)n.detachEvent("on"+o,c);else{var l=n._handlers,u=l&&l[o];if(u){var h=_e(u,c);h>-1&&(l[o]=u.slice(0,h).concat(u.slice(h+1)))}}}function He(n,o){var c=je(n,o);if(c.length)for(var l=Array.prototype.slice.call(arguments,2),u=0;u<c.length;++u)c[u].apply(null,l)}function De(n,o,c){return typeof o=="string"&&(o={type:o,preventDefault:function(){this.defaultPrevented=!0}}),He(n,c||o.type,n,o),an(o)||o.codemirrorIgnore}function It(n){var o=n._handlers&&n._handlers.cursorActivity;if(o)for(var c=n.curOp.cursorActivityHandlers||(n.curOp.cursorActivityHandlers=[]),l=0;l<o.length;++l)_e(c,o[l])==-1&&c.push(o[l])}function st(n,o){return je(n,o).length>0}function tt(n){n.prototype.on=function(o,c){se(this,o,c)},n.prototype.off=function(o,c){Qe(this,o,c)}}function nt(n){n.preventDefault?n.preventDefault():n.returnValue=!1}function mt(n){n.stopPropagation?n.stopPropagation():n.cancelBubble=!0}function an(n){return n.defaultPrevented!=null?n.defaultPrevented:n.returnValue==!1}function Lt(n){nt(n),mt(n)}function ht(n){return n.target||n.srcElement}function ln(n){var o=n.which;return o==null&&(n.button&1?o=1:n.button&2?o=3:n.button&4&&(o=2)),M&&n.ctrlKey&&o==1&&(o=3),o}var Mn=function(){if(f&&d<9)return!1;var n=D("div");return"draggable"in n||"dragDrop"in n}(),Nt;function ti(n){if(Nt==null){var o=D("span","\u200B");ie(n,D("span",[o,document.createTextNode("x")])),n.firstChild.offsetHeight!=0&&(Nt=o.offsetWidth<=1&&o.offsetHeight>2&&!(f&&d<8))}var c=Nt?D("span","\u200B"):D("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return c.setAttribute("cm-text",""),c}var mr;function yr(n){if(mr!=null)return mr;var o=ie(n,document.createTextNode("A\u062EA")),c=le(o,0,1).getBoundingClientRect(),l=le(o,1,2).getBoundingClientRect();return $(n),!c||c.left==c.right?!1:mr=l.right-c.right<3}var On=`

b`.split(/\n/).length!=3?function(n){for(var o=0,c=[],l=n.length;o<=l;){var u=n.indexOf(`
`,o);u==-1&&(u=n.length);var h=n.slice(o,n.charAt(u-1)=="\r"?u-1:u),m=h.indexOf("\r");m!=-1?(c.push(h.slice(0,m)),o+=m+1):(c.push(h),o=u+1)}return c}:function(n){return n.split(/\r\n?|\n/)},Wn=window.getSelection?function(n){try{return n.selectionStart!=n.selectionEnd}catch{return!1}}:function(n){var o;try{o=n.ownerDocument.selection.createRange()}catch{}return!o||o.parentElement()!=n?!1:o.compareEndPoints("StartToEnd",o)!=0},en=function(){var n=D("div");return"oncopy"in n?!0:(n.setAttribute("oncopy","return;"),typeof n.oncopy=="function")}(),cn=null;function Un(n){if(cn!=null)return cn;var o=ie(n,D("span","x")),c=o.getBoundingClientRect(),l=le(o,0,1).getBoundingClientRect();return cn=Math.abs(c.left-l.left)>1}var un={},vr={};function kl(n,o){arguments.length>2&&(o.dependencies=Array.prototype.slice.call(arguments,2)),un[n]=o}function Xi(n,o){vr[n]=o}function Cn(n){if(typeof n=="string"&&vr.hasOwnProperty(n))n=vr[n];else if(n&&typeof n.name=="string"&&vr.hasOwnProperty(n.name)){var o=vr[n.name];typeof o=="string"&&(o={name:o}),n=K(o,n),n.name=o.name}else{if(typeof n=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(n))return Cn("application/xml");if(typeof n=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(n))return Cn("application/json")}return typeof n=="string"?{name:n}:n||{name:"null"}}function Br(n,o){o=Cn(o);var c=un[o.name];if(!c)return Br(n,"text/plain");var l=c(n,o);if(ni.hasOwnProperty(o.name)){var u=ni[o.name];for(var h in u)u.hasOwnProperty(h)&&(l.hasOwnProperty(h)&&(l["_"+h]=l[h]),l[h]=u[h])}if(l.name=o.name,o.helperType&&(l.helperType=o.helperType),o.modeProps)for(var m in o.modeProps)l[m]=o.modeProps[m];return l}var ni={};function Cl(n,o){var c=ni.hasOwnProperty(n)?ni[n]:ni[n]={};Pe(o,c)}function Rr(n,o){if(o===!0)return o;if(n.copyState)return n.copyState(o);var c={};for(var l in o){var u=o[l];u instanceof Array&&(u=u.concat([])),c[l]=u}return c}function ri(n,o){for(var c;n.innerMode&&(c=n.innerMode(o),!(!c||c.mode==n));)o=c.state,n=c.mode;return c||{mode:n,state:o}}function fs(n,o,c){return n.startState?n.startState(o,c):!0}var At=function(n,o,c){this.pos=this.start=0,this.string=n,this.tabSize=o||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=c};At.prototype.eol=function(){return this.pos>=this.string.length},At.prototype.sol=function(){return this.pos==this.lineStart},At.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},At.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},At.prototype.eat=function(n){var o=this.string.charAt(this.pos),c;if(typeof n=="string"?c=o==n:c=o&&(n.test?n.test(o):n(o)),c)return++this.pos,o},At.prototype.eatWhile=function(n){for(var o=this.pos;this.eat(n););return this.pos>o},At.prototype.eatSpace=function(){for(var n=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>n},At.prototype.skipToEnd=function(){this.pos=this.string.length},At.prototype.skipTo=function(n){var o=this.string.indexOf(n,this.pos);if(o>-1)return this.pos=o,!0},At.prototype.backUp=function(n){this.pos-=n},At.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Te(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Te(this.string,this.lineStart,this.tabSize):0)},At.prototype.indentation=function(){return Te(this.string,null,this.tabSize)-(this.lineStart?Te(this.string,this.lineStart,this.tabSize):0)},At.prototype.match=function(n,o,c){if(typeof n=="string"){var l=function(m){return c?m.toLowerCase():m},u=this.string.substr(this.pos,n.length);if(l(u)==l(n))return o!==!1&&(this.pos+=n.length),!0}else{var h=this.string.slice(this.pos).match(n);return h&&h.index>0?null:(h&&o!==!1&&(this.pos+=h[0].length),h)}},At.prototype.current=function(){return this.string.slice(this.start,this.pos)},At.prototype.hideFirstChars=function(n,o){this.lineStart+=n;try{return o()}finally{this.lineStart-=n}},At.prototype.lookAhead=function(n){var o=this.lineOracle;return o&&o.lookAhead(n)},At.prototype.baseToken=function(){var n=this.lineOracle;return n&&n.baseToken(this.pos)};function ke(n,o){if(o-=n.first,o<0||o>=n.size)throw new Error("There is no line "+(o+n.first)+" in the document.");for(var c=n;!c.lines;)for(var l=0;;++l){var u=c.children[l],h=u.chunkSize();if(o<h){c=u;break}o-=h}return c.lines[o]}function qr(n,o,c){var l=[],u=o.line;return n.iter(o.line,c.line+1,function(h){var m=h.text;u==c.line&&(m=m.slice(0,c.ch)),u==o.line&&(m=m.slice(o.ch)),l.push(m),++u}),l}function Zi(n,o,c){var l=[];return n.iter(o,c,function(u){l.push(u.text)}),l}function $n(n,o){var c=o-n.height;if(c)for(var l=n;l;l=l.parent)l.height+=c}function rt(n){if(n.parent==null)return null;for(var o=n.parent,c=_e(o.lines,n),l=o.parent;l;o=l,l=l.parent)for(var u=0;l.children[u]!=o;++u)c+=l.children[u].chunkSize();return c+o.first}function br(n,o){var c=n.first;e:do{for(var l=0;l<n.children.length;++l){var u=n.children[l],h=u.height;if(o<h){n=u;continue e}o-=h,c+=u.chunkSize()}return c}while(!n.lines);for(var m=0;m<n.lines.length;++m){var b=n.lines[m],x=b.height;if(o<x)break;o-=x}return c+m}function E(n,o){return o>=n.first&&o<n.first+n.size}function R(n,o){return String(n.lineNumberFormatter(o+n.firstLineNumber))}function j(n,o,c){if(c===void 0&&(c=null),!(this instanceof j))return new j(n,o,c);this.line=n,this.ch=o,this.sticky=c}function J(n,o){return n.line-o.line||n.ch-o.ch}function Re(n,o){return n.sticky==o.sticky&&J(n,o)==0}function Xe(n){return j(n.line,n.ch)}function et(n,o){return J(n,o)<0?o:n}function zt(n,o){return J(n,o)<0?n:o}function Pn(n,o){return Math.max(n.first,Math.min(o,n.first+n.size-1))}function qe(n,o){if(o.line<n.first)return j(n.first,0);var c=n.first+n.size-1;return o.line>c?j(c,ke(n,c).text.length):FT(o,ke(n,o.line).text.length)}function FT(n,o){var c=n.ch;return c==null||c>o?j(n.line,o):c<0?j(n.line,0):n}function Yg(n,o){for(var c=[],l=0;l<o.length;l++)c[l]=qe(n,o[l]);return c}var Sl=function(n,o){this.state=n,this.lookAhead=o},wr=function(n,o,c,l){this.state=o,this.doc=n,this.line=c,this.maxLookAhead=l||0,this.baseTokens=null,this.baseTokenPos=1};wr.prototype.lookAhead=function(n){var o=this.doc.getLine(this.line+n);return o!=null&&n>this.maxLookAhead&&(this.maxLookAhead=n),o},wr.prototype.baseToken=function(n){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=n;)this.baseTokenPos+=2;var o=this.baseTokens[this.baseTokenPos+1];return{type:o&&o.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-n}},wr.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},wr.fromSaved=function(n,o,c){return o instanceof Sl?new wr(n,Rr(n.mode,o.state),c,o.lookAhead):new wr(n,Rr(n.mode,o),c)},wr.prototype.save=function(n){var o=n!==!1?Rr(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Sl(o,this.maxLookAhead):o};function Qg(n,o,c,l){var u=[n.state.modeGen],h={};nm(n,o.text,n.doc.mode,c,function(C,P){return u.push(C,P)},h,l);for(var m=c.state,b=function(C){c.baseTokens=u;var P=n.state.overlays[C],B=1,G=0;c.state=!0,nm(n,o.text,P.mode,c,function(W,Z){for(var ne=B;G<W;){var fe=u[B];fe>W&&u.splice(B,1,W,u[B+1],fe),B+=2,G=Math.min(W,fe)}if(Z)if(P.opaque)u.splice(ne,B-ne,W,"overlay "+Z),B=ne+2;else for(;ne<B;ne+=2){var he=u[ne+1];u[ne+1]=(he?he+" ":"")+"overlay "+Z}},h),c.state=m,c.baseTokens=null,c.baseTokenPos=1},x=0;x<n.state.overlays.length;++x)b(x);return{styles:u,classes:h.bgClass||h.textClass?h:null}}function Jg(n,o,c){if(!o.styles||o.styles[0]!=n.state.modeGen){var l=ds(n,rt(o)),u=o.text.length>n.options.maxHighlightLength&&Rr(n.doc.mode,l.state),h=Qg(n,o,l);u&&(l.state=u),o.stateAfter=l.save(!u),o.styles=h.styles,h.classes?o.styleClasses=h.classes:o.styleClasses&&(o.styleClasses=null),c===n.doc.highlightFrontier&&(n.doc.modeFrontier=Math.max(n.doc.modeFrontier,++n.doc.highlightFrontier))}return o.styles}function ds(n,o,c){var l=n.doc,u=n.display;if(!l.mode.startState)return new wr(l,!0,o);var h=_T(n,o,c),m=h>l.first&&ke(l,h-1).stateAfter,b=m?wr.fromSaved(l,m,h):new wr(l,fs(l.mode),h);return l.iter(h,o,function(x){Eu(n,x.text,b);var C=b.line;x.stateAfter=C==o-1||C%5==0||C>=u.viewFrom&&C<u.viewTo?b.save():null,b.nextLine()}),c&&(l.modeFrontier=b.line),b}function Eu(n,o,c,l){var u=n.doc.mode,h=new At(o,n.options.tabSize,c);for(h.start=h.pos=l||0,o==""&&Xg(u,c.state);!h.eol();)Du(u,h,c.state),h.start=h.pos}function Xg(n,o){if(n.blankLine)return n.blankLine(o);if(n.innerMode){var c=ri(n,o);if(c.mode.blankLine)return c.mode.blankLine(c.state)}}function Du(n,o,c,l){for(var u=0;u<10;u++){l&&(l[0]=ri(n,c).mode);var h=n.token(o,c);if(o.pos>o.start)return h}throw new Error("Mode "+n.name+" failed to advance stream.")}var Zg=function(n,o,c){this.start=n.start,this.end=n.pos,this.string=n.current(),this.type=o||null,this.state=c};function em(n,o,c,l){var u=n.doc,h=u.mode,m;o=qe(u,o);var b=ke(u,o.line),x=ds(n,o.line,c),C=new At(b.text,n.options.tabSize,x),P;for(l&&(P=[]);(l||C.pos<o.ch)&&!C.eol();)C.start=C.pos,m=Du(h,C,x.state),l&&P.push(new Zg(C,m,Rr(u.mode,x.state)));return l?P:new Zg(C,m,x.state)}function tm(n,o){if(n)for(;;){var c=n.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;n=n.slice(0,c.index)+n.slice(c.index+c[0].length);var l=c[1]?"bgClass":"textClass";o[l]==null?o[l]=c[2]:new RegExp("(?:^|\\s)"+c[2]+"(?:$|\\s)").test(o[l])||(o[l]+=" "+c[2])}return n}function nm(n,o,c,l,u,h,m){var b=c.flattenSpans;b==null&&(b=n.options.flattenSpans);var x=0,C=null,P=new At(o,n.options.tabSize,l),B,G=n.options.addModeClass&&[null];for(o==""&&tm(Xg(c,l.state),h);!P.eol();){if(P.pos>n.options.maxHighlightLength?(b=!1,m&&Eu(n,o,l,P.pos),P.pos=o.length,B=null):B=tm(Du(c,P,l.state,G),h),G){var W=G[0].name;W&&(B="m-"+(B?W+" "+B:W))}if(!b||C!=B){for(;x<P.start;)x=Math.min(P.start,x+5e3),u(x,C);C=B}P.start=P.pos}for(;x<P.pos;){var Z=Math.min(P.pos,x+5e3);u(Z,C),x=Z}}function _T(n,o,c){for(var l,u,h=n.doc,m=c?-1:o-(n.doc.mode.innerMode?1e3:100),b=o;b>m;--b){if(b<=h.first)return h.first;var x=ke(h,b-1),C=x.stateAfter;if(C&&(!c||b+(C instanceof Sl?C.lookAhead:0)<=h.modeFrontier))return b;var P=Te(x.text,null,n.options.tabSize);(u==null||l>P)&&(u=b-1,l=P)}return u}function jT(n,o){if(n.modeFrontier=Math.min(n.modeFrontier,o),!(n.highlightFrontier<o-10)){for(var c=n.first,l=o-1;l>c;l--){var u=ke(n,l).stateAfter;if(u&&(!(u instanceof Sl)||l+u.lookAhead<o)){c=l+1;break}}n.highlightFrontier=Math.min(n.highlightFrontier,c)}}var rm=!1,Fr=!1;function HT(){rm=!0}function WT(){Fr=!0}function Al(n,o,c){this.marker=n,this.from=o,this.to=c}function hs(n,o){if(n)for(var c=0;c<n.length;++c){var l=n[c];if(l.marker==o)return l}}function UT(n,o){for(var c,l=0;l<n.length;++l)n[l]!=o&&(c||(c=[])).push(n[l]);return c}function $T(n,o,c){var l=c&&window.WeakSet&&(c.markedSpans||(c.markedSpans=new WeakSet));l&&n.markedSpans&&l.has(n.markedSpans)?n.markedSpans.push(o):(n.markedSpans=n.markedSpans?n.markedSpans.concat([o]):[o],l&&l.add(n.markedSpans)),o.marker.attachLine(n)}function GT(n,o,c){var l;if(n)for(var u=0;u<n.length;++u){var h=n[u],m=h.marker,b=h.from==null||(m.inclusiveLeft?h.from<=o:h.from<o);if(b||h.from==o&&m.type=="bookmark"&&(!c||!h.marker.insertLeft)){var x=h.to==null||(m.inclusiveRight?h.to>=o:h.to>o);(l||(l=[])).push(new Al(m,h.from,x?null:h.to))}}return l}function VT(n,o,c){var l;if(n)for(var u=0;u<n.length;++u){var h=n[u],m=h.marker,b=h.to==null||(m.inclusiveRight?h.to>=o:h.to>o);if(b||h.from==o&&m.type=="bookmark"&&(!c||h.marker.insertLeft)){var x=h.from==null||(m.inclusiveLeft?h.from<=o:h.from<o);(l||(l=[])).push(new Al(m,x?null:h.from-o,h.to==null?null:h.to-o))}}return l}function Nu(n,o){if(o.full)return null;var c=E(n,o.from.line)&&ke(n,o.from.line).markedSpans,l=E(n,o.to.line)&&ke(n,o.to.line).markedSpans;if(!c&&!l)return null;var u=o.from.ch,h=o.to.ch,m=J(o.from,o.to)==0,b=GT(c,u,m),x=VT(l,h,m),C=o.text.length==1,P=Be(o.text).length+(C?u:0);if(b)for(var B=0;B<b.length;++B){var G=b[B];if(G.to==null){var W=hs(x,G.marker);W?C&&(G.to=W.to==null?null:W.to+P):G.to=u}}if(x)for(var Z=0;Z<x.length;++Z){var ne=x[Z];if(ne.to!=null&&(ne.to+=P),ne.from==null){var fe=hs(b,ne.marker);fe||(ne.from=P,C&&(b||(b=[])).push(ne))}else ne.from+=P,C&&(b||(b=[])).push(ne)}b&&(b=im(b)),x&&x!=b&&(x=im(x));var he=[b];if(!C){var me=o.text.length-2,pe;if(me>0&&b)for(var ye=0;ye<b.length;++ye)b[ye].to==null&&(pe||(pe=[])).push(new Al(b[ye].marker,null,null));for(var Ne=0;Ne<me;++Ne)he.push(pe);he.push(x)}return he}function im(n){for(var o=0;o<n.length;++o){var c=n[o];c.from!=null&&c.from==c.to&&c.marker.clearWhenEmpty!==!1&&n.splice(o--,1)}return n.length?n:null}function KT(n,o,c){var l=null;if(n.iter(o.line,c.line+1,function(W){if(W.markedSpans)for(var Z=0;Z<W.markedSpans.length;++Z){var ne=W.markedSpans[Z].marker;ne.readOnly&&(!l||_e(l,ne)==-1)&&(l||(l=[])).push(ne)}}),!l)return null;for(var u=[{from:o,to:c}],h=0;h<l.length;++h)for(var m=l[h],b=m.find(0),x=0;x<u.length;++x){var C=u[x];if(!(J(C.to,b.from)<0||J(C.from,b.to)>0)){var P=[x,1],B=J(C.from,b.from),G=J(C.to,b.to);(B<0||!m.inclusiveLeft&&!B)&&P.push({from:C.from,to:b.from}),(G>0||!m.inclusiveRight&&!G)&&P.push({from:b.to,to:C.to}),u.splice.apply(u,P),x+=P.length-3}}return u}function om(n){var o=n.markedSpans;if(o){for(var c=0;c<o.length;++c)o[c].marker.detachLine(n);n.markedSpans=null}}function sm(n,o){if(o){for(var c=0;c<o.length;++c)o[c].marker.attachLine(n);n.markedSpans=o}}function Tl(n){return n.inclusiveLeft?-1:0}function Ll(n){return n.inclusiveRight?1:0}function Mu(n,o){var c=n.lines.length-o.lines.length;if(c!=0)return c;var l=n.find(),u=o.find(),h=J(l.from,u.from)||Tl(n)-Tl(o);if(h)return-h;var m=J(l.to,u.to)||Ll(n)-Ll(o);return m||o.id-n.id}function am(n,o){var c=Fr&&n.markedSpans,l;if(c)for(var u=void 0,h=0;h<c.length;++h)u=c[h],u.marker.collapsed&&(o?u.from:u.to)==null&&(!l||Mu(l,u.marker)<0)&&(l=u.marker);return l}function lm(n){return am(n,!0)}function El(n){return am(n,!1)}function YT(n,o){var c=Fr&&n.markedSpans,l;if(c)for(var u=0;u<c.length;++u){var h=c[u];h.marker.collapsed&&(h.from==null||h.from<o)&&(h.to==null||h.to>o)&&(!l||Mu(l,h.marker)<0)&&(l=h.marker)}return l}function cm(n,o,c,l,u){var h=ke(n,o),m=Fr&&h.markedSpans;if(m)for(var b=0;b<m.length;++b){var x=m[b];if(x.marker.collapsed){var C=x.marker.find(0),P=J(C.from,c)||Tl(x.marker)-Tl(u),B=J(C.to,l)||Ll(x.marker)-Ll(u);if(!(P>=0&&B<=0||P<=0&&B>=0)&&(P<=0&&(x.marker.inclusiveRight&&u.inclusiveLeft?J(C.to,c)>=0:J(C.to,c)>0)||P>=0&&(x.marker.inclusiveRight&&u.inclusiveLeft?J(C.from,l)<=0:J(C.from,l)<0)))return!0}}}function rr(n){for(var o;o=lm(n);)n=o.find(-1,!0).line;return n}function QT(n){for(var o;o=El(n);)n=o.find(1,!0).line;return n}function JT(n){for(var o,c;o=El(n);)n=o.find(1,!0).line,(c||(c=[])).push(n);return c}function Ou(n,o){var c=ke(n,o),l=rr(c);return c==l?o:rt(l)}function um(n,o){if(o>n.lastLine())return o;var c=ke(n,o),l;if(!ii(n,c))return o;for(;l=El(c);)c=l.find(1,!0).line;return rt(c)+1}function ii(n,o){var c=Fr&&o.markedSpans;if(c){for(var l=void 0,u=0;u<c.length;++u)if(l=c[u],!!l.marker.collapsed){if(l.from==null)return!0;if(!l.marker.widgetNode&&l.from==0&&l.marker.inclusiveLeft&&Pu(n,o,l))return!0}}}function Pu(n,o,c){if(c.to==null){var l=c.marker.find(1,!0);return Pu(n,l.line,hs(l.line.markedSpans,c.marker))}if(c.marker.inclusiveRight&&c.to==o.text.length)return!0;for(var u=void 0,h=0;h<o.markedSpans.length;++h)if(u=o.markedSpans[h],u.marker.collapsed&&!u.marker.widgetNode&&u.from==c.to&&(u.to==null||u.to!=c.from)&&(u.marker.inclusiveLeft||c.marker.inclusiveRight)&&Pu(n,o,u))return!0}function _r(n){n=rr(n);for(var o=0,c=n.parent,l=0;l<c.lines.length;++l){var u=c.lines[l];if(u==n)break;o+=u.height}for(var h=c.parent;h;c=h,h=c.parent)for(var m=0;m<h.children.length;++m){var b=h.children[m];if(b==c)break;o+=b.height}return o}function Dl(n){if(n.height==0)return 0;for(var o=n.text.length,c,l=n;c=lm(l);){var u=c.find(0,!0);l=u.from.line,o+=u.from.ch-u.to.ch}for(l=n;c=El(l);){var h=c.find(0,!0);o-=l.text.length-h.from.ch,l=h.to.line,o+=l.text.length-h.to.ch}return o}function Iu(n){var o=n.display,c=n.doc;o.maxLine=ke(c,c.first),o.maxLineLength=Dl(o.maxLine),o.maxLineChanged=!0,c.iter(function(l){var u=Dl(l);u>o.maxLineLength&&(o.maxLineLength=u,o.maxLine=l)})}var eo=function(n,o,c){this.text=n,sm(this,o),this.height=c?c(this):1};eo.prototype.lineNo=function(){return rt(this)},tt(eo);function XT(n,o,c,l){n.text=o,n.stateAfter&&(n.stateAfter=null),n.styles&&(n.styles=null),n.order!=null&&(n.order=null),om(n),sm(n,c);var u=l?l(n):1;u!=n.height&&$n(n,u)}function ZT(n){n.parent=null,om(n)}var eL={},tL={};function fm(n,o){if(!n||/^\s*$/.test(n))return null;var c=o.addModeClass?tL:eL;return c[n]||(c[n]=n.replace(/\S+/g,"cm-$&"))}function dm(n,o){var c=ae("span",null,null,g?"padding-right: .1px":null),l={pre:ae("pre",[c],"CodeMirror-line"),content:c,col:0,pos:0,cm:n,trailingSpace:!1,splitSpaces:n.getOption("lineWrapping")};o.measure={};for(var u=0;u<=(o.rest?o.rest.length:0);u++){var h=u?o.rest[u-1]:o.line,m=void 0;l.pos=0,l.addToken=rL,yr(n.display.measure)&&(m=ve(h,n.doc.direction))&&(l.addToken=oL(l.addToken,m)),l.map=[];var b=o!=n.display.externalMeasured&&rt(h);sL(h,l,Jg(n,h,b)),h.styleClasses&&(h.styleClasses.bgClass&&(l.bgClass=kn(h.styleClasses.bgClass,l.bgClass||"")),h.styleClasses.textClass&&(l.textClass=kn(h.styleClasses.textClass,l.textClass||""))),l.map.length==0&&l.map.push(0,0,l.content.appendChild(ti(n.display.measure))),u==0?(o.measure.map=l.map,o.measure.cache={}):((o.measure.maps||(o.measure.maps=[])).push(l.map),(o.measure.caches||(o.measure.caches=[])).push({}))}if(g){var x=l.content.lastChild;(/\bcm-tab\b/.test(x.className)||x.querySelector&&x.querySelector(".cm-tab"))&&(l.content.className="cm-tab-wrap-hack")}return He(n,"renderLine",n,o.line,l.pre),l.pre.className&&(l.textClass=kn(l.pre.className,l.textClass||"")),l}function nL(n){var o=D("span","\u2022","cm-invalidchar");return o.title="\\u"+n.charCodeAt(0).toString(16),o.setAttribute("aria-label",o.title),o}function rL(n,o,c,l,u,h,m){if(o){var b=n.splitSpaces?iL(o,n.trailingSpace):o,x=n.cm.state.specialChars,C=!1,P;if(!x.test(o))n.col+=o.length,P=document.createTextNode(b),n.map.push(n.pos,n.pos+o.length,P),f&&d<9&&(C=!0),n.pos+=o.length;else{P=document.createDocumentFragment();for(var B=0;;){x.lastIndex=B;var G=x.exec(o),W=G?G.index-B:o.length-B;if(W){var Z=document.createTextNode(b.slice(B,B+W));f&&d<9?P.appendChild(D("span",[Z])):P.appendChild(Z),n.map.push(n.pos,n.pos+W,Z),n.col+=W,n.pos+=W}if(!G)break;B+=W+1;var ne=void 0;if(G[0]=="	"){var fe=n.cm.options.tabSize,he=fe-n.col%fe;ne=P.appendChild(D("span",kt(he),"cm-tab")),ne.setAttribute("role","presentation"),ne.setAttribute("cm-text","	"),n.col+=he}else G[0]=="\r"||G[0]==`
`?(ne=P.appendChild(D("span",G[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),ne.setAttribute("cm-text",G[0]),n.col+=1):(ne=n.cm.options.specialCharPlaceholder(G[0]),ne.setAttribute("cm-text",G[0]),f&&d<9?P.appendChild(D("span",[ne])):P.appendChild(ne),n.col+=1);n.map.push(n.pos,n.pos+1,ne),n.pos++}}if(n.trailingSpace=b.charCodeAt(o.length-1)==32,c||l||u||C||h||m){var me=c||"";l&&(me+=l),u&&(me+=u);var pe=D("span",[P],me,h);if(m)for(var ye in m)m.hasOwnProperty(ye)&&ye!="style"&&ye!="class"&&pe.setAttribute(ye,m[ye]);return n.content.appendChild(pe)}n.content.appendChild(P)}}function iL(n,o){if(n.length>1&&!/  /.test(n))return n;for(var c=o,l="",u=0;u<n.length;u++){var h=n.charAt(u);h==" "&&c&&(u==n.length-1||n.charCodeAt(u+1)==32)&&(h="\xA0"),l+=h,c=h==" "}return l}function oL(n,o){return function(c,l,u,h,m,b,x){u=u?u+" cm-force-border":"cm-force-border";for(var C=c.pos,P=C+l.length;;){for(var B=void 0,G=0;G<o.length&&(B=o[G],!(B.to>C&&B.from<=C));G++);if(B.to>=P)return n(c,l,u,h,m,b,x);n(c,l.slice(0,B.to-C),u,h,null,b,x),h=null,l=l.slice(B.to-C),C=B.to}}}function hm(n,o,c,l){var u=!l&&c.widgetNode;u&&n.map.push(n.pos,n.pos+o,u),!l&&n.cm.display.input.needsContentAttribute&&(u||(u=n.content.appendChild(document.createElement("span"))),u.setAttribute("cm-marker",c.id)),u&&(n.cm.display.input.setUneditable(u),n.content.appendChild(u)),n.pos+=o,n.trailingSpace=!1}function sL(n,o,c){var l=n.markedSpans,u=n.text,h=0;if(!l){for(var m=1;m<c.length;m+=2)o.addToken(o,u.slice(h,h=c[m]),fm(c[m+1],o.cm.options));return}for(var b=u.length,x=0,C=1,P="",B,G,W=0,Z,ne,fe,he,me;;){if(W==x){Z=ne=fe=G="",me=null,he=null,W=1/0;for(var pe=[],ye=void 0,Ne=0;Ne<l.length;++Ne){var Ee=l[Ne],Ge=Ee.marker;if(Ge.type=="bookmark"&&Ee.from==x&&Ge.widgetNode)pe.push(Ge);else if(Ee.from<=x&&(Ee.to==null||Ee.to>x||Ge.collapsed&&Ee.to==x&&Ee.from==x)){if(Ee.to!=null&&Ee.to!=x&&W>Ee.to&&(W=Ee.to,ne=""),Ge.className&&(Z+=" "+Ge.className),Ge.css&&(G=(G?G+";":"")+Ge.css),Ge.startStyle&&Ee.from==x&&(fe+=" "+Ge.startStyle),Ge.endStyle&&Ee.to==W&&(ye||(ye=[])).push(Ge.endStyle,Ee.to),Ge.title&&((me||(me={})).title=Ge.title),Ge.attributes)for(var ft in Ge.attributes)(me||(me={}))[ft]=Ge.attributes[ft];Ge.collapsed&&(!he||Mu(he.marker,Ge)<0)&&(he=Ee)}else Ee.from>x&&W>Ee.from&&(W=Ee.from)}if(ye)for(var jt=0;jt<ye.length;jt+=2)ye[jt+1]==W&&(ne+=" "+ye[jt]);if(!he||he.from==x)for(var Ct=0;Ct<pe.length;++Ct)hm(o,0,pe[Ct]);if(he&&(he.from||0)==x){if(hm(o,(he.to==null?b+1:he.to)-x,he.marker,he.from==null),he.to==null)return;he.to==x&&(he=!1)}}if(x>=b)break;for(var An=Math.min(b,W);;){if(P){var hn=x+P.length;if(!he){var Mt=hn>An?P.slice(0,An-x):P;o.addToken(o,Mt,B?B+Z:Z,fe,x+Mt.length==W?ne:"",G,me)}if(hn>=An){P=P.slice(An-x),x=An;break}x=hn,fe=""}P=u.slice(h,h=c[C++]),B=fm(c[C++],o.cm.options)}}}function pm(n,o,c){this.line=o,this.rest=JT(o),this.size=this.rest?rt(Be(this.rest))-c+1:1,this.node=this.text=null,this.hidden=ii(n,o)}function Nl(n,o,c){for(var l=[],u,h=o;h<c;h=u){var m=new pm(n.doc,ke(n.doc,h),h);u=h+m.size,l.push(m)}return l}var to=null;function aL(n){to?to.ops.push(n):n.ownsGroup=to={ops:[n],delayedCallbacks:[]}}function lL(n){var o=n.delayedCallbacks,c=0;do{for(;c<o.length;c++)o[c].call(null);for(var l=0;l<n.ops.length;l++){var u=n.ops[l];if(u.cursorActivityHandlers)for(;u.cursorActivityCalled<u.cursorActivityHandlers.length;)u.cursorActivityHandlers[u.cursorActivityCalled++].call(null,u.cm)}}while(c<o.length)}function cL(n,o){var c=n.ownsGroup;if(c)try{lL(c)}finally{to=null,o(c)}}var ps=null;function qt(n,o){var c=je(n,o);if(c.length){var l=Array.prototype.slice.call(arguments,2),u;to?u=to.delayedCallbacks:ps?u=ps:(u=ps=[],setTimeout(uL,0));for(var h=function(b){u.push(function(){return c[b].apply(null,l)})},m=0;m<c.length;++m)h(m)}}function uL(){var n=ps;ps=null;for(var o=0;o<n.length;++o)n[o]()}function gm(n,o,c,l){for(var u=0;u<o.changes.length;u++){var h=o.changes[u];h=="text"?dL(n,o):h=="gutter"?ym(n,o,c,l):h=="class"?zu(n,o):h=="widget"&&hL(n,o,l)}o.changes=null}function gs(n){return n.node==n.text&&(n.node=D("div",null,null,"position: relative"),n.text.parentNode&&n.text.parentNode.replaceChild(n.node,n.text),n.node.appendChild(n.text),f&&d<8&&(n.node.style.zIndex=2)),n.node}function fL(n,o){var c=o.bgClass?o.bgClass+" "+(o.line.bgClass||""):o.line.bgClass;if(c&&(c+=" CodeMirror-linebackground"),o.background)c?o.background.className=c:(o.background.parentNode.removeChild(o.background),o.background=null);else if(c){var l=gs(o);o.background=l.insertBefore(D("div",null,c),l.firstChild),n.display.input.setUneditable(o.background)}}function mm(n,o){var c=n.display.externalMeasured;return c&&c.line==o.line?(n.display.externalMeasured=null,o.measure=c.measure,c.built):dm(n,o)}function dL(n,o){var c=o.text.className,l=mm(n,o);o.text==o.node&&(o.node=l.pre),o.text.parentNode.replaceChild(l.pre,o.text),o.text=l.pre,l.bgClass!=o.bgClass||l.textClass!=o.textClass?(o.bgClass=l.bgClass,o.textClass=l.textClass,zu(n,o)):c&&(o.text.className=c)}function zu(n,o){fL(n,o),o.line.wrapClass?gs(o).className=o.line.wrapClass:o.node!=o.text&&(o.node.className="");var c=o.textClass?o.textClass+" "+(o.line.textClass||""):o.line.textClass;o.text.className=c||""}function ym(n,o,c,l){if(o.gutter&&(o.node.removeChild(o.gutter),o.gutter=null),o.gutterBackground&&(o.node.removeChild(o.gutterBackground),o.gutterBackground=null),o.line.gutterClass){var u=gs(o);o.gutterBackground=D("div",null,"CodeMirror-gutter-background "+o.line.gutterClass,"left: "+(n.options.fixedGutter?l.fixedPos:-l.gutterTotalWidth)+"px; width: "+l.gutterTotalWidth+"px"),n.display.input.setUneditable(o.gutterBackground),u.insertBefore(o.gutterBackground,o.text)}var h=o.line.gutterMarkers;if(n.options.lineNumbers||h){var m=gs(o),b=o.gutter=D("div",null,"CodeMirror-gutter-wrapper","left: "+(n.options.fixedGutter?l.fixedPos:-l.gutterTotalWidth)+"px");if(b.setAttribute("aria-hidden","true"),n.display.input.setUneditable(b),m.insertBefore(b,o.text),o.line.gutterClass&&(b.className+=" "+o.line.gutterClass),n.options.lineNumbers&&(!h||!h["CodeMirror-linenumbers"])&&(o.lineNumber=b.appendChild(D("div",R(n.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+l.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+n.display.lineNumInnerWidth+"px"))),h)for(var x=0;x<n.display.gutterSpecs.length;++x){var C=n.display.gutterSpecs[x].className,P=h.hasOwnProperty(C)&&h[C];P&&b.appendChild(D("div",[P],"CodeMirror-gutter-elt","left: "+l.gutterLeft[C]+"px; width: "+l.gutterWidth[C]+"px"))}}}function hL(n,o,c){o.alignable&&(o.alignable=null);for(var l=H("CodeMirror-linewidget"),u=o.node.firstChild,h=void 0;u;u=h)h=u.nextSibling,l.test(u.className)&&o.node.removeChild(u);vm(n,o,c)}function pL(n,o,c,l){var u=mm(n,o);return o.text=o.node=u.pre,u.bgClass&&(o.bgClass=u.bgClass),u.textClass&&(o.textClass=u.textClass),zu(n,o),ym(n,o,c,l),vm(n,o,l),o.node}function vm(n,o,c){if(bm(n,o.line,o,c,!0),o.rest)for(var l=0;l<o.rest.length;l++)bm(n,o.rest[l],o,c,!1)}function bm(n,o,c,l,u){if(o.widgets)for(var h=gs(c),m=0,b=o.widgets;m<b.length;++m){var x=b[m],C=D("div",[x.node],"CodeMirror-linewidget"+(x.className?" "+x.className:""));x.handleMouseEvents||C.setAttribute("cm-ignore-events","true"),gL(x,C,c,l),n.display.input.setUneditable(C),u&&x.above?h.insertBefore(C,c.gutter||c.text):h.appendChild(C),qt(x,"redraw")}}function gL(n,o,c,l){if(n.noHScroll){(c.alignable||(c.alignable=[])).push(o);var u=l.wrapperWidth;o.style.left=l.fixedPos+"px",n.coverGutter||(u-=l.gutterTotalWidth,o.style.paddingLeft=l.gutterTotalWidth+"px"),o.style.width=u+"px"}n.coverGutter&&(o.style.zIndex=5,o.style.position="relative",n.noHScroll||(o.style.marginLeft=-l.gutterTotalWidth+"px"))}function ms(n){if(n.height!=null)return n.height;var o=n.doc.cm;if(!o)return 0;if(!Se(document.body,n.node)){var c="position: relative;";n.coverGutter&&(c+="margin-left: -"+o.display.gutters.offsetWidth+"px;"),n.noHScroll&&(c+="width: "+o.display.wrapper.clientWidth+"px;"),ie(o.display.measure,D("div",[n.node],null,c))}return n.height=n.node.parentNode.offsetHeight}function jr(n,o){for(var c=ht(o);c!=n.wrapper;c=c.parentNode)if(!c||c.nodeType==1&&c.getAttribute("cm-ignore-events")=="true"||c.parentNode==n.sizer&&c!=n.mover)return!0}function Ml(n){return n.lineSpace.offsetTop}function Bu(n){return n.mover.offsetHeight-n.lineSpace.offsetHeight}function wm(n){if(n.cachedPaddingH)return n.cachedPaddingH;var o=ie(n.measure,D("pre","x","CodeMirror-line-like")),c=window.getComputedStyle?window.getComputedStyle(o):o.currentStyle,l={left:parseInt(c.paddingLeft),right:parseInt(c.paddingRight)};return!isNaN(l.left)&&!isNaN(l.right)&&(n.cachedPaddingH=l),l}function xr(n){return $e-n.display.nativeBarWidth}function Ai(n){return n.display.scroller.clientWidth-xr(n)-n.display.barWidth}function Ru(n){return n.display.scroller.clientHeight-xr(n)-n.display.barHeight}function mL(n,o,c){var l=n.options.lineWrapping,u=l&&Ai(n);if(!o.measure.heights||l&&o.measure.width!=u){var h=o.measure.heights=[];if(l){o.measure.width=u;for(var m=o.text.firstChild.getClientRects(),b=0;b<m.length-1;b++){var x=m[b],C=m[b+1];Math.abs(x.bottom-C.bottom)>2&&h.push((x.bottom+C.top)/2-c.top)}}h.push(c.bottom-c.top)}}function xm(n,o,c){if(n.line==o)return{map:n.measure.map,cache:n.measure.cache};if(n.rest){for(var l=0;l<n.rest.length;l++)if(n.rest[l]==o)return{map:n.measure.maps[l],cache:n.measure.caches[l]};for(var u=0;u<n.rest.length;u++)if(rt(n.rest[u])>c)return{map:n.measure.maps[u],cache:n.measure.caches[u],before:!0}}}function yL(n,o){o=rr(o);var c=rt(o),l=n.display.externalMeasured=new pm(n.doc,o,c);l.lineN=c;var u=l.built=dm(n,l);return l.text=u.pre,ie(n.display.lineMeasure,u.pre),l}function km(n,o,c,l){return kr(n,no(n,o),c,l)}function qu(n,o){if(o>=n.display.viewFrom&&o<n.display.viewTo)return n.display.view[Ei(n,o)];var c=n.display.externalMeasured;if(c&&o>=c.lineN&&o<c.lineN+c.size)return c}function no(n,o){var c=rt(o),l=qu(n,c);l&&!l.text?l=null:l&&l.changes&&(gm(n,l,c,Wu(n)),n.curOp.forceUpdate=!0),l||(l=yL(n,o));var u=xm(l,o,c);return{line:o,view:l,rect:null,map:u.map,cache:u.cache,before:u.before,hasHeights:!1}}function kr(n,o,c,l,u){o.before&&(c=-1);var h=c+(l||""),m;return o.cache.hasOwnProperty(h)?m=o.cache[h]:(o.rect||(o.rect=o.view.text.getBoundingClientRect()),o.hasHeights||(mL(n,o.view,o.rect),o.hasHeights=!0),m=bL(n,o,c,l),m.bogus||(o.cache[h]=m)),{left:m.left,right:m.right,top:u?m.rtop:m.top,bottom:u?m.rbottom:m.bottom}}var Cm={left:0,right:0,top:0,bottom:0};function Sm(n,o,c){for(var l,u,h,m,b,x,C=0;C<n.length;C+=3)if(b=n[C],x=n[C+1],o<b?(u=0,h=1,m="left"):o<x?(u=o-b,h=u+1):(C==n.length-3||o==x&&n[C+3]>o)&&(h=x-b,u=h-1,o>=x&&(m="right")),u!=null){if(l=n[C+2],b==x&&c==(l.insertLeft?"left":"right")&&(m=c),c=="left"&&u==0)for(;C&&n[C-2]==n[C-3]&&n[C-1].insertLeft;)l=n[(C-=3)+2],m="left";if(c=="right"&&u==x-b)for(;C<n.length-3&&n[C+3]==n[C+4]&&!n[C+5].insertLeft;)l=n[(C+=3)+2],m="right";break}return{node:l,start:u,end:h,collapse:m,coverStart:b,coverEnd:x}}function vL(n,o){var c=Cm;if(o=="left")for(var l=0;l<n.length&&(c=n[l]).left==c.right;l++);else for(var u=n.length-1;u>=0&&(c=n[u]).left==c.right;u--);return c}function bL(n,o,c,l){var u=Sm(o.map,c,l),h=u.node,m=u.start,b=u.end,x=u.collapse,C;if(h.nodeType==3){for(var P=0;P<4;P++){for(;m&&V(o.line.text.charAt(u.coverStart+m));)--m;for(;u.coverStart+b<u.coverEnd&&V(o.line.text.charAt(u.coverStart+b));)++b;if(f&&d<9&&m==0&&b==u.coverEnd-u.coverStart?C=h.parentNode.getBoundingClientRect():C=vL(le(h,m,b).getClientRects(),l),C.left||C.right||m==0)break;b=m,m=m-1,x="right"}f&&d<11&&(C=wL(n.display.measure,C))}else{m>0&&(x=l="right");var B;n.options.lineWrapping&&(B=h.getClientRects()).length>1?C=B[l=="right"?B.length-1:0]:C=h.getBoundingClientRect()}if(f&&d<9&&!m&&(!C||!C.left&&!C.right)){var G=h.parentNode.getClientRects()[0];G?C={left:G.left,right:G.left+io(n.display),top:G.top,bottom:G.bottom}:C=Cm}for(var W=C.top-o.rect.top,Z=C.bottom-o.rect.top,ne=(W+Z)/2,fe=o.view.measure.heights,he=0;he<fe.length-1&&!(ne<fe[he]);he++);var me=he?fe[he-1]:0,pe=fe[he],ye={left:(x=="right"?C.right:C.left)-o.rect.left,right:(x=="left"?C.left:C.right)-o.rect.left,top:me,bottom:pe};return!C.left&&!C.right&&(ye.bogus=!0),n.options.singleCursorHeightPerLine||(ye.rtop=W,ye.rbottom=Z),ye}function wL(n,o){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Un(n))return o;var c=screen.logicalXDPI/screen.deviceXDPI,l=screen.logicalYDPI/screen.deviceYDPI;return{left:o.left*c,right:o.right*c,top:o.top*l,bottom:o.bottom*l}}function Am(n){if(n.measure&&(n.measure.cache={},n.measure.heights=null,n.rest))for(var o=0;o<n.rest.length;o++)n.measure.caches[o]={}}function Tm(n){n.display.externalMeasure=null,$(n.display.lineMeasure);for(var o=0;o<n.display.view.length;o++)Am(n.display.view[o])}function ys(n){Tm(n),n.display.cachedCharWidth=n.display.cachedTextHeight=n.display.cachedPaddingH=null,n.options.lineWrapping||(n.display.maxLineChanged=!0),n.display.lineNumChars=null}function Lm(n){return y&&N?-(n.body.getBoundingClientRect().left-parseInt(getComputedStyle(n.body).marginLeft)):n.defaultView.pageXOffset||(n.documentElement||n.body).scrollLeft}function Em(n){return y&&N?-(n.body.getBoundingClientRect().top-parseInt(getComputedStyle(n.body).marginTop)):n.defaultView.pageYOffset||(n.documentElement||n.body).scrollTop}function Fu(n){var o=rr(n),c=o.widgets,l=0;if(c)for(var u=0;u<c.length;++u)c[u].above&&(l+=ms(c[u]));return l}function Ol(n,o,c,l,u){if(!u){var h=Fu(o);c.top+=h,c.bottom+=h}if(l=="line")return c;l||(l="local");var m=_r(o);if(l=="local"?m+=Ml(n.display):m-=n.display.viewOffset,l=="page"||l=="window"){var b=n.display.lineSpace.getBoundingClientRect();m+=b.top+(l=="window"?0:Em(wt(n)));var x=b.left+(l=="window"?0:Lm(wt(n)));c.left+=x,c.right+=x}return c.top+=m,c.bottom+=m,c}function Dm(n,o,c){if(c=="div")return o;var l=o.left,u=o.top;if(c=="page")l-=Lm(wt(n)),u-=Em(wt(n));else if(c=="local"||!c){var h=n.display.sizer.getBoundingClientRect();l+=h.left,u+=h.top}var m=n.display.lineSpace.getBoundingClientRect();return{left:l-m.left,top:u-m.top}}function Pl(n,o,c,l,u){return l||(l=ke(n.doc,o.line)),Ol(n,l,km(n,l,o.ch,u),c)}function ir(n,o,c,l,u,h){l=l||ke(n.doc,o.line),u||(u=no(n,l));function m(Z,ne){var fe=kr(n,u,Z,ne?"right":"left",h);return ne?fe.left=fe.right:fe.right=fe.left,Ol(n,l,fe,c)}var b=ve(l,n.doc.direction),x=o.ch,C=o.sticky;if(x>=l.text.length?(x=l.text.length,C="before"):x<=0&&(x=0,C="after"),!b)return m(C=="before"?x-1:x,C=="before");function P(Z,ne,fe){var he=b[ne],me=he.level==1;return m(fe?Z-1:Z,me!=fe)}var B=ge(b,x,C),G=de,W=P(x,B,C=="before");return G!=null&&(W.other=P(x,G,C!="before")),W}function Nm(n,o){var c=0;o=qe(n.doc,o),n.options.lineWrapping||(c=io(n.display)*o.ch);var l=ke(n.doc,o.line),u=_r(l)+Ml(n.display);return{left:c,right:c,top:u,bottom:u+l.height}}function _u(n,o,c,l,u){var h=j(n,o,c);return h.xRel=u,l&&(h.outside=l),h}function ju(n,o,c){var l=n.doc;if(c+=n.display.viewOffset,c<0)return _u(l.first,0,null,-1,-1);var u=br(l,c),h=l.first+l.size-1;if(u>h)return _u(l.first+l.size-1,ke(l,h).text.length,null,1,1);o<0&&(o=0);for(var m=ke(l,u);;){var b=xL(n,m,u,o,c),x=YT(m,b.ch+(b.xRel>0||b.outside>0?1:0));if(!x)return b;var C=x.find(1);if(C.line==u)return C;m=ke(l,u=C.line)}}function Mm(n,o,c,l){l-=Fu(o);var u=o.text.length,h=oe(function(m){return kr(n,c,m-1).bottom<=l},u,0);return u=oe(function(m){return kr(n,c,m).top>l},h,u),{begin:h,end:u}}function Om(n,o,c,l){c||(c=no(n,o));var u=Ol(n,o,kr(n,c,l),"line").top;return Mm(n,o,c,u)}function Hu(n,o,c,l){return n.bottom<=c?!1:n.top>c?!0:(l?n.left:n.right)>o}function xL(n,o,c,l,u){u-=_r(o);var h=no(n,o),m=Fu(o),b=0,x=o.text.length,C=!0,P=ve(o,n.doc.direction);if(P){var B=(n.options.lineWrapping?CL:kL)(n,o,c,h,P,l,u);C=B.level!=1,b=C?B.from:B.to-1,x=C?B.to:B.from-1}var G=null,W=null,Z=oe(function(Ne){var Ee=kr(n,h,Ne);return Ee.top+=m,Ee.bottom+=m,Hu(Ee,l,u,!1)?(Ee.top<=u&&Ee.left<=l&&(G=Ne,W=Ee),!0):!1},b,x),ne,fe,he=!1;if(W){var me=l-W.left<W.right-l,pe=me==C;Z=G+(pe?0:1),fe=pe?"after":"before",ne=me?W.left:W.right}else{!C&&(Z==x||Z==b)&&Z++,fe=Z==0?"after":Z==o.text.length?"before":kr(n,h,Z-(C?1:0)).bottom+m<=u==C?"after":"before";var ye=ir(n,j(c,Z,fe),"line",o,h);ne=ye.left,he=u<ye.top?-1:u>=ye.bottom?1:0}return Z=Y(o.text,Z,1),_u(c,Z,fe,he,l-ne)}function kL(n,o,c,l,u,h,m){var b=oe(function(B){var G=u[B],W=G.level!=1;return Hu(ir(n,j(c,W?G.to:G.from,W?"before":"after"),"line",o,l),h,m,!0)},0,u.length-1),x=u[b];if(b>0){var C=x.level!=1,P=ir(n,j(c,C?x.from:x.to,C?"after":"before"),"line",o,l);Hu(P,h,m,!0)&&P.top>m&&(x=u[b-1])}return x}function CL(n,o,c,l,u,h,m){var b=Mm(n,o,l,m),x=b.begin,C=b.end;/\s/.test(o.text.charAt(C-1))&&C--;for(var P=null,B=null,G=0;G<u.length;G++){var W=u[G];if(!(W.from>=C||W.to<=x)){var Z=W.level!=1,ne=kr(n,l,Z?Math.min(C,W.to)-1:Math.max(x,W.from)).right,fe=ne<h?h-ne+1e9:ne-h;(!P||B>fe)&&(P=W,B=fe)}}return P||(P=u[u.length-1]),P.from<x&&(P={from:x,to:P.to,level:P.level}),P.to>C&&(P={from:P.from,to:C,level:P.level}),P}var Ti;function ro(n){if(n.cachedTextHeight!=null)return n.cachedTextHeight;if(Ti==null){Ti=D("pre",null,"CodeMirror-line-like");for(var o=0;o<49;++o)Ti.appendChild(document.createTextNode("x")),Ti.appendChild(D("br"));Ti.appendChild(document.createTextNode("x"))}ie(n.measure,Ti);var c=Ti.offsetHeight/50;return c>3&&(n.cachedTextHeight=c),$(n.measure),c||1}function io(n){if(n.cachedCharWidth!=null)return n.cachedCharWidth;var o=D("span","xxxxxxxxxx"),c=D("pre",[o],"CodeMirror-line-like");ie(n.measure,c);var l=o.getBoundingClientRect(),u=(l.right-l.left)/10;return u>2&&(n.cachedCharWidth=u),u||10}function Wu(n){for(var o=n.display,c={},l={},u=o.gutters.clientLeft,h=o.gutters.firstChild,m=0;h;h=h.nextSibling,++m){var b=n.display.gutterSpecs[m].className;c[b]=h.offsetLeft+h.clientLeft+u,l[b]=h.clientWidth}return{fixedPos:Uu(o),gutterTotalWidth:o.gutters.offsetWidth,gutterLeft:c,gutterWidth:l,wrapperWidth:o.wrapper.clientWidth}}function Uu(n){return n.scroller.getBoundingClientRect().left-n.sizer.getBoundingClientRect().left}function Pm(n){var o=ro(n.display),c=n.options.lineWrapping,l=c&&Math.max(5,n.display.scroller.clientWidth/io(n.display)-3);return function(u){if(ii(n.doc,u))return 0;var h=0;if(u.widgets)for(var m=0;m<u.widgets.length;m++)u.widgets[m].height&&(h+=u.widgets[m].height);return c?h+(Math.ceil(u.text.length/l)||1)*o:h+o}}function $u(n){var o=n.doc,c=Pm(n);o.iter(function(l){var u=c(l);u!=l.height&&$n(l,u)})}function Li(n,o,c,l){var u=n.display;if(!c&&ht(o).getAttribute("cm-not-content")=="true")return null;var h,m,b=u.lineSpace.getBoundingClientRect();try{h=o.clientX-b.left,m=o.clientY-b.top}catch{return null}var x=ju(n,h,m),C;if(l&&x.xRel>0&&(C=ke(n.doc,x.line).text).length==x.ch){var P=Te(C,C.length,n.options.tabSize)-C.length;x=j(x.line,Math.max(0,Math.round((h-wm(n.display).left)/io(n.display))-P))}return x}function Ei(n,o){if(o>=n.display.viewTo||(o-=n.display.viewFrom,o<0))return null;for(var c=n.display.view,l=0;l<c.length;l++)if(o-=c[l].size,o<0)return l}function fn(n,o,c,l){o==null&&(o=n.doc.first),c==null&&(c=n.doc.first+n.doc.size),l||(l=0);var u=n.display;if(l&&c<u.viewTo&&(u.updateLineNumbers==null||u.updateLineNumbers>o)&&(u.updateLineNumbers=o),n.curOp.viewChanged=!0,o>=u.viewTo)Fr&&Ou(n.doc,o)<u.viewTo&&si(n);else if(c<=u.viewFrom)Fr&&um(n.doc,c+l)>u.viewFrom?si(n):(u.viewFrom+=l,u.viewTo+=l);else if(o<=u.viewFrom&&c>=u.viewTo)si(n);else if(o<=u.viewFrom){var h=Il(n,c,c+l,1);h?(u.view=u.view.slice(h.index),u.viewFrom=h.lineN,u.viewTo+=l):si(n)}else if(c>=u.viewTo){var m=Il(n,o,o,-1);m?(u.view=u.view.slice(0,m.index),u.viewTo=m.lineN):si(n)}else{var b=Il(n,o,o,-1),x=Il(n,c,c+l,1);b&&x?(u.view=u.view.slice(0,b.index).concat(Nl(n,b.lineN,x.lineN)).concat(u.view.slice(x.index)),u.viewTo+=l):si(n)}var C=u.externalMeasured;C&&(c<C.lineN?C.lineN+=l:o<C.lineN+C.size&&(u.externalMeasured=null))}function oi(n,o,c){n.curOp.viewChanged=!0;var l=n.display,u=n.display.externalMeasured;if(u&&o>=u.lineN&&o<u.lineN+u.size&&(l.externalMeasured=null),!(o<l.viewFrom||o>=l.viewTo)){var h=l.view[Ei(n,o)];if(h.node!=null){var m=h.changes||(h.changes=[]);_e(m,c)==-1&&m.push(c)}}}function si(n){n.display.viewFrom=n.display.viewTo=n.doc.first,n.display.view=[],n.display.viewOffset=0}function Il(n,o,c,l){var u=Ei(n,o),h,m=n.display.view;if(!Fr||c==n.doc.first+n.doc.size)return{index:u,lineN:c};for(var b=n.display.viewFrom,x=0;x<u;x++)b+=m[x].size;if(b!=o){if(l>0){if(u==m.length-1)return null;h=b+m[u].size-o,u++}else h=b-o;o+=h,c+=h}for(;Ou(n.doc,c)!=c;){if(u==(l<0?0:m.length-1))return null;c+=l*m[u-(l<0?1:0)].size,u+=l}return{index:u,lineN:c}}function SL(n,o,c){var l=n.display,u=l.view;u.length==0||o>=l.viewTo||c<=l.viewFrom?(l.view=Nl(n,o,c),l.viewFrom=o):(l.viewFrom>o?l.view=Nl(n,o,l.viewFrom).concat(l.view):l.viewFrom<o&&(l.view=l.view.slice(Ei(n,o))),l.viewFrom=o,l.viewTo<c?l.view=l.view.concat(Nl(n,l.viewTo,c)):l.viewTo>c&&(l.view=l.view.slice(0,Ei(n,c)))),l.viewTo=c}function Im(n){for(var o=n.display.view,c=0,l=0;l<o.length;l++){var u=o[l];!u.hidden&&(!u.node||u.changes)&&++c}return c}function vs(n){n.display.input.showSelection(n.display.input.prepareSelection())}function zm(n,o){o===void 0&&(o=!0);var c=n.doc,l={},u=l.cursors=document.createDocumentFragment(),h=l.selection=document.createDocumentFragment(),m=n.options.$customCursor;m&&(o=!0);for(var b=0;b<c.sel.ranges.length;b++)if(!(!o&&b==c.sel.primIndex)){var x=c.sel.ranges[b];if(!(x.from().line>=n.display.viewTo||x.to().line<n.display.viewFrom)){var C=x.empty();if(m){var P=m(n,x);P&&Gu(n,P,u)}else(C||n.options.showCursorWhenSelecting)&&Gu(n,x.head,u);C||AL(n,x,h)}}return l}function Gu(n,o,c){var l=ir(n,o,"div",null,null,!n.options.singleCursorHeightPerLine),u=c.appendChild(D("div","\xA0","CodeMirror-cursor"));if(u.style.left=l.left+"px",u.style.top=l.top+"px",u.style.height=Math.max(0,l.bottom-l.top)*n.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(n.getWrapperElement().className)){var h=Pl(n,o,"div",null,null),m=h.right-h.left;u.style.width=(m>0?m:n.defaultCharWidth())+"px"}if(l.other){var b=c.appendChild(D("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));b.style.display="",b.style.left=l.other.left+"px",b.style.top=l.other.top+"px",b.style.height=(l.other.bottom-l.other.top)*.85+"px"}}function zl(n,o){return n.top-o.top||n.left-o.left}function AL(n,o,c){var l=n.display,u=n.doc,h=document.createDocumentFragment(),m=wm(n.display),b=m.left,x=Math.max(l.sizerWidth,Ai(n)-l.sizer.offsetLeft)-m.right,C=u.direction=="ltr";function P(pe,ye,Ne,Ee){ye<0&&(ye=0),ye=Math.round(ye),Ee=Math.round(Ee),h.appendChild(D("div",null,"CodeMirror-selected","position: absolute; left: "+pe+`px;
                             top: `+ye+"px; width: "+(Ne??x-pe)+`px;
                             height: `+(Ee-ye)+"px"))}function B(pe,ye,Ne){var Ee=ke(u,pe),Ge=Ee.text.length,ft,jt;function Ct(Mt,pn){return Pl(n,j(pe,Mt),"div",Ee,pn)}function An(Mt,pn,Ut){var Bt=Om(n,Ee,null,Mt),Ot=pn=="ltr"==(Ut=="after")?"left":"right",Tt=Ut=="after"?Bt.begin:Bt.end-(/\s/.test(Ee.text.charAt(Bt.end-1))?2:1);return Ct(Tt,Ot)[Ot]}var hn=ve(Ee,u.direction);return re(hn,ye||0,Ne??Ge,function(Mt,pn,Ut,Bt){var Ot=Ut=="ltr",Tt=Ct(Mt,Ot?"left":"right"),gn=Ct(pn-1,Ot?"right":"left"),vo=ye==null&&Mt==0,di=Ne==null&&pn==Ge,Kt=Bt==0,Cr=!hn||Bt==hn.length-1;if(gn.top-Tt.top<=3){var Ht=(C?vo:di)&&Kt,wf=(C?di:vo)&&Cr,Ur=Ht?b:(Ot?Tt:gn).left,Pi=wf?x:(Ot?gn:Tt).right;P(Ur,Tt.top,Pi-Ur,Tt.bottom)}else{var Ii,nn,bo,xf;Ot?(Ii=C&&vo&&Kt?b:Tt.left,nn=C?x:An(Mt,Ut,"before"),bo=C?b:An(pn,Ut,"after"),xf=C&&di&&Cr?x:gn.right):(Ii=C?An(Mt,Ut,"before"):b,nn=!C&&vo&&Kt?x:Tt.right,bo=!C&&di&&Cr?b:gn.left,xf=C?An(pn,Ut,"after"):x),P(Ii,Tt.top,nn-Ii,Tt.bottom),Tt.bottom<gn.top&&P(b,Tt.bottom,null,gn.top),P(bo,gn.top,xf-bo,gn.bottom)}(!ft||zl(Tt,ft)<0)&&(ft=Tt),zl(gn,ft)<0&&(ft=gn),(!jt||zl(Tt,jt)<0)&&(jt=Tt),zl(gn,jt)<0&&(jt=gn)}),{start:ft,end:jt}}var G=o.from(),W=o.to();if(G.line==W.line)B(G.line,G.ch,W.ch);else{var Z=ke(u,G.line),ne=ke(u,W.line),fe=rr(Z)==rr(ne),he=B(G.line,G.ch,fe?Z.text.length+1:null).end,me=B(W.line,fe?0:null,W.ch).start;fe&&(he.top<me.top-2?(P(he.right,he.top,null,he.bottom),P(b,me.top,me.left,me.bottom)):P(he.right,he.top,me.left-he.right,he.bottom)),he.bottom<me.top&&P(b,he.bottom,null,me.top)}c.appendChild(h)}function Vu(n){if(n.state.focused){var o=n.display;clearInterval(o.blinker);var c=!0;o.cursorDiv.style.visibility="",n.options.cursorBlinkRate>0?o.blinker=setInterval(function(){n.hasFocus()||oo(n),o.cursorDiv.style.visibility=(c=!c)?"":"hidden"},n.options.cursorBlinkRate):n.options.cursorBlinkRate<0&&(o.cursorDiv.style.visibility="hidden")}}function Bm(n){n.hasFocus()||(n.display.input.focus(),n.state.focused||Yu(n))}function Ku(n){n.state.delayingBlurEvent=!0,setTimeout(function(){n.state.delayingBlurEvent&&(n.state.delayingBlurEvent=!1,n.state.focused&&oo(n))},100)}function Yu(n,o){n.state.delayingBlurEvent&&!n.state.draggingText&&(n.state.delayingBlurEvent=!1),n.options.readOnly!="nocursor"&&(n.state.focused||(He(n,"focus",n,o),n.state.focused=!0,ot(n.display.wrapper,"CodeMirror-focused"),!n.curOp&&n.display.selForContextMenu!=n.doc.sel&&(n.display.input.reset(),g&&setTimeout(function(){return n.display.input.reset(!0)},20)),n.display.input.receivedFocus()),Vu(n))}function oo(n,o){n.state.delayingBlurEvent||(n.state.focused&&(He(n,"blur",n,o),n.state.focused=!1,ce(n.display.wrapper,"CodeMirror-focused")),clearInterval(n.display.blinker),setTimeout(function(){n.state.focused||(n.display.shift=!1)},150))}function Bl(n){for(var o=n.display,c=o.lineDiv.offsetTop,l=Math.max(0,o.scroller.getBoundingClientRect().top),u=o.lineDiv.getBoundingClientRect().top,h=0,m=0;m<o.view.length;m++){var b=o.view[m],x=n.options.lineWrapping,C=void 0,P=0;if(!b.hidden){if(u+=b.line.height,f&&d<8){var B=b.node.offsetTop+b.node.offsetHeight;C=B-c,c=B}else{var G=b.node.getBoundingClientRect();C=G.bottom-G.top,!x&&b.text.firstChild&&(P=b.text.firstChild.getBoundingClientRect().right-G.left-1)}var W=b.line.height-C;if((W>.005||W<-.005)&&(u<l&&(h-=W),$n(b.line,C),Rm(b.line),b.rest))for(var Z=0;Z<b.rest.length;Z++)Rm(b.rest[Z]);if(P>n.display.sizerWidth){var ne=Math.ceil(P/io(n.display));ne>n.display.maxLineLength&&(n.display.maxLineLength=ne,n.display.maxLine=b.line,n.display.maxLineChanged=!0)}}}Math.abs(h)>2&&(o.scroller.scrollTop+=h)}function Rm(n){if(n.widgets)for(var o=0;o<n.widgets.length;++o){var c=n.widgets[o],l=c.node.parentNode;l&&(c.height=l.offsetHeight)}}function Rl(n,o,c){var l=c&&c.top!=null?Math.max(0,c.top):n.scroller.scrollTop;l=Math.floor(l-Ml(n));var u=c&&c.bottom!=null?c.bottom:l+n.wrapper.clientHeight,h=br(o,l),m=br(o,u);if(c&&c.ensure){var b=c.ensure.from.line,x=c.ensure.to.line;b<h?(h=b,m=br(o,_r(ke(o,b))+n.wrapper.clientHeight)):Math.min(x,o.lastLine())>=m&&(h=br(o,_r(ke(o,x))-n.wrapper.clientHeight),m=x)}return{from:h,to:Math.max(m,h+1)}}function TL(n,o){if(!De(n,"scrollCursorIntoView")){var c=n.display,l=c.sizer.getBoundingClientRect(),u=null,h=c.wrapper.ownerDocument;if(o.top+l.top<0?u=!0:o.bottom+l.top>(h.defaultView.innerHeight||h.documentElement.clientHeight)&&(u=!1),u!=null&&!L){var m=D("div","\u200B",null,`position: absolute;
                         top: `+(o.top-c.viewOffset-Ml(n.display))+`px;
                         height: `+(o.bottom-o.top+xr(n)+c.barHeight)+`px;
                         left: `+o.left+"px; width: "+Math.max(2,o.right-o.left)+"px;");n.display.lineSpace.appendChild(m),m.scrollIntoView(u),n.display.lineSpace.removeChild(m)}}}function LL(n,o,c,l){l==null&&(l=0);var u;!n.options.lineWrapping&&o==c&&(c=o.sticky=="before"?j(o.line,o.ch+1,"before"):o,o=o.ch?j(o.line,o.sticky=="before"?o.ch-1:o.ch,"after"):o);for(var h=0;h<5;h++){var m=!1,b=ir(n,o),x=!c||c==o?b:ir(n,c);u={left:Math.min(b.left,x.left),top:Math.min(b.top,x.top)-l,right:Math.max(b.left,x.left),bottom:Math.max(b.bottom,x.bottom)+l};var C=Qu(n,u),P=n.doc.scrollTop,B=n.doc.scrollLeft;if(C.scrollTop!=null&&(ws(n,C.scrollTop),Math.abs(n.doc.scrollTop-P)>1&&(m=!0)),C.scrollLeft!=null&&(Di(n,C.scrollLeft),Math.abs(n.doc.scrollLeft-B)>1&&(m=!0)),!m)break}return u}function EL(n,o){var c=Qu(n,o);c.scrollTop!=null&&ws(n,c.scrollTop),c.scrollLeft!=null&&Di(n,c.scrollLeft)}function Qu(n,o){var c=n.display,l=ro(n.display);o.top<0&&(o.top=0);var u=n.curOp&&n.curOp.scrollTop!=null?n.curOp.scrollTop:c.scroller.scrollTop,h=Ru(n),m={};o.bottom-o.top>h&&(o.bottom=o.top+h);var b=n.doc.height+Bu(c),x=o.top<l,C=o.bottom>b-l;if(o.top<u)m.scrollTop=x?0:o.top;else if(o.bottom>u+h){var P=Math.min(o.top,(C?b:o.bottom)-h);P!=u&&(m.scrollTop=P)}var B=n.options.fixedGutter?0:c.gutters.offsetWidth,G=n.curOp&&n.curOp.scrollLeft!=null?n.curOp.scrollLeft:c.scroller.scrollLeft-B,W=Ai(n)-c.gutters.offsetWidth,Z=o.right-o.left>W;return Z&&(o.right=o.left+W),o.left<10?m.scrollLeft=0:o.left<G?m.scrollLeft=Math.max(0,o.left+B-(Z?0:10)):o.right>W+G-3&&(m.scrollLeft=o.right+(Z?0:10)-W),m}function Ju(n,o){o!=null&&(ql(n),n.curOp.scrollTop=(n.curOp.scrollTop==null?n.doc.scrollTop:n.curOp.scrollTop)+o)}function so(n){ql(n);var o=n.getCursor();n.curOp.scrollToPos={from:o,to:o,margin:n.options.cursorScrollMargin}}function bs(n,o,c){(o!=null||c!=null)&&ql(n),o!=null&&(n.curOp.scrollLeft=o),c!=null&&(n.curOp.scrollTop=c)}function DL(n,o){ql(n),n.curOp.scrollToPos=o}function ql(n){var o=n.curOp.scrollToPos;if(o){n.curOp.scrollToPos=null;var c=Nm(n,o.from),l=Nm(n,o.to);qm(n,c,l,o.margin)}}function qm(n,o,c,l){var u=Qu(n,{left:Math.min(o.left,c.left),top:Math.min(o.top,c.top)-l,right:Math.max(o.right,c.right),bottom:Math.max(o.bottom,c.bottom)+l});bs(n,u.scrollLeft,u.scrollTop)}function ws(n,o){Math.abs(n.doc.scrollTop-o)<2||(r||Zu(n,{top:o}),Fm(n,o,!0),r&&Zu(n),Cs(n,100))}function Fm(n,o,c){o=Math.max(0,Math.min(n.display.scroller.scrollHeight-n.display.scroller.clientHeight,o)),!(n.display.scroller.scrollTop==o&&!c)&&(n.doc.scrollTop=o,n.display.scrollbars.setScrollTop(o),n.display.scroller.scrollTop!=o&&(n.display.scroller.scrollTop=o))}function Di(n,o,c,l){o=Math.max(0,Math.min(o,n.display.scroller.scrollWidth-n.display.scroller.clientWidth)),!((c?o==n.doc.scrollLeft:Math.abs(n.doc.scrollLeft-o)<2)&&!l)&&(n.doc.scrollLeft=o,Um(n),n.display.scroller.scrollLeft!=o&&(n.display.scroller.scrollLeft=o),n.display.scrollbars.setScrollLeft(o))}function xs(n){var o=n.display,c=o.gutters.offsetWidth,l=Math.round(n.doc.height+Bu(n.display));return{clientHeight:o.scroller.clientHeight,viewHeight:o.wrapper.clientHeight,scrollWidth:o.scroller.scrollWidth,clientWidth:o.scroller.clientWidth,viewWidth:o.wrapper.clientWidth,barLeft:n.options.fixedGutter?c:0,docHeight:l,scrollHeight:l+xr(n)+o.barHeight,nativeBarWidth:o.nativeBarWidth,gutterWidth:c}}var Ni=function(n,o,c){this.cm=c;var l=this.vert=D("div",[D("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),u=this.horiz=D("div",[D("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");l.tabIndex=u.tabIndex=-1,n(l),n(u),se(l,"scroll",function(){l.clientHeight&&o(l.scrollTop,"vertical")}),se(u,"scroll",function(){u.clientWidth&&o(u.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,f&&d<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Ni.prototype.update=function(n){var o=n.scrollWidth>n.clientWidth+1,c=n.scrollHeight>n.clientHeight+1,l=n.nativeBarWidth;if(c){this.vert.style.display="block",this.vert.style.bottom=o?l+"px":"0";var u=n.viewHeight-(o?l:0);this.vert.firstChild.style.height=Math.max(0,n.scrollHeight-n.clientHeight+u)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(o){this.horiz.style.display="block",this.horiz.style.right=c?l+"px":"0",this.horiz.style.left=n.barLeft+"px";var h=n.viewWidth-n.barLeft-(c?l:0);this.horiz.firstChild.style.width=Math.max(0,n.scrollWidth-n.clientWidth+h)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&n.clientHeight>0&&(l==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:c?l:0,bottom:o?l:0}},Ni.prototype.setScrollLeft=function(n){this.horiz.scrollLeft!=n&&(this.horiz.scrollLeft=n),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Ni.prototype.setScrollTop=function(n){this.vert.scrollTop!=n&&(this.vert.scrollTop=n),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Ni.prototype.zeroWidthHack=function(){var n=M&&!T?"12px":"18px";this.horiz.style.height=this.vert.style.width=n,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Fe,this.disableVert=new Fe},Ni.prototype.enableZeroWidthBar=function(n,o,c){n.style.visibility="";function l(){var u=n.getBoundingClientRect(),h=c=="vert"?document.elementFromPoint(u.right-1,(u.top+u.bottom)/2):document.elementFromPoint((u.right+u.left)/2,u.bottom-1);h!=n?n.style.visibility="hidden":o.set(1e3,l)}o.set(1e3,l)},Ni.prototype.clear=function(){var n=this.horiz.parentNode;n.removeChild(this.horiz),n.removeChild(this.vert)};var ks=function(){};ks.prototype.update=function(){return{bottom:0,right:0}},ks.prototype.setScrollLeft=function(){},ks.prototype.setScrollTop=function(){},ks.prototype.clear=function(){};function ao(n,o){o||(o=xs(n));var c=n.display.barWidth,l=n.display.barHeight;_m(n,o);for(var u=0;u<4&&c!=n.display.barWidth||l!=n.display.barHeight;u++)c!=n.display.barWidth&&n.options.lineWrapping&&Bl(n),_m(n,xs(n)),c=n.display.barWidth,l=n.display.barHeight}function _m(n,o){var c=n.display,l=c.scrollbars.update(o);c.sizer.style.paddingRight=(c.barWidth=l.right)+"px",c.sizer.style.paddingBottom=(c.barHeight=l.bottom)+"px",c.heightForcer.style.borderBottom=l.bottom+"px solid transparent",l.right&&l.bottom?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=l.bottom+"px",c.scrollbarFiller.style.width=l.right+"px"):c.scrollbarFiller.style.display="",l.bottom&&n.options.coverGutterNextToScrollbar&&n.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=l.bottom+"px",c.gutterFiller.style.width=o.gutterWidth+"px"):c.gutterFiller.style.display=""}var jm={native:Ni,null:ks};function Hm(n){n.display.scrollbars&&(n.display.scrollbars.clear(),n.display.scrollbars.addClass&&ce(n.display.wrapper,n.display.scrollbars.addClass)),n.display.scrollbars=new jm[n.options.scrollbarStyle](function(o){n.display.wrapper.insertBefore(o,n.display.scrollbarFiller),se(o,"mousedown",function(){n.state.focused&&setTimeout(function(){return n.display.input.focus()},0)}),o.setAttribute("cm-not-content","true")},function(o,c){c=="horizontal"?Di(n,o):ws(n,o)},n),n.display.scrollbars.addClass&&ot(n.display.wrapper,n.display.scrollbars.addClass)}var NL=0;function Mi(n){n.curOp={cm:n,viewChanged:!1,startHeight:n.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++NL,markArrays:null},aL(n.curOp)}function Oi(n){var o=n.curOp;o&&cL(o,function(c){for(var l=0;l<c.ops.length;l++)c.ops[l].cm.curOp=null;ML(c)})}function ML(n){for(var o=n.ops,c=0;c<o.length;c++)OL(o[c]);for(var l=0;l<o.length;l++)PL(o[l]);for(var u=0;u<o.length;u++)IL(o[u]);for(var h=0;h<o.length;h++)zL(o[h]);for(var m=0;m<o.length;m++)BL(o[m])}function OL(n){var o=n.cm,c=o.display;qL(o),n.updateMaxLine&&Iu(o),n.mustUpdate=n.viewChanged||n.forceUpdate||n.scrollTop!=null||n.scrollToPos&&(n.scrollToPos.from.line<c.viewFrom||n.scrollToPos.to.line>=c.viewTo)||c.maxLineChanged&&o.options.lineWrapping,n.update=n.mustUpdate&&new Fl(o,n.mustUpdate&&{top:n.scrollTop,ensure:n.scrollToPos},n.forceUpdate)}function PL(n){n.updatedDisplay=n.mustUpdate&&Xu(n.cm,n.update)}function IL(n){var o=n.cm,c=o.display;n.updatedDisplay&&Bl(o),n.barMeasure=xs(o),c.maxLineChanged&&!o.options.lineWrapping&&(n.adjustWidthTo=km(o,c.maxLine,c.maxLine.text.length).left+3,o.display.sizerWidth=n.adjustWidthTo,n.barMeasure.scrollWidth=Math.max(c.scroller.clientWidth,c.sizer.offsetLeft+n.adjustWidthTo+xr(o)+o.display.barWidth),n.maxScrollLeft=Math.max(0,c.sizer.offsetLeft+n.adjustWidthTo-Ai(o))),(n.updatedDisplay||n.selectionChanged)&&(n.preparedSelection=c.input.prepareSelection())}function zL(n){var o=n.cm;n.adjustWidthTo!=null&&(o.display.sizer.style.minWidth=n.adjustWidthTo+"px",n.maxScrollLeft<o.doc.scrollLeft&&Di(o,Math.min(o.display.scroller.scrollLeft,n.maxScrollLeft),!0),o.display.maxLineChanged=!1);var c=n.focus&&n.focus==Je(wt(o));n.preparedSelection&&o.display.input.showSelection(n.preparedSelection,c),(n.updatedDisplay||n.startHeight!=o.doc.height)&&ao(o,n.barMeasure),n.updatedDisplay&&tf(o,n.barMeasure),n.selectionChanged&&Vu(o),o.state.focused&&n.updateInput&&o.display.input.reset(n.typing),c&&Bm(n.cm)}function BL(n){var o=n.cm,c=o.display,l=o.doc;if(n.updatedDisplay&&Wm(o,n.update),c.wheelStartX!=null&&(n.scrollTop!=null||n.scrollLeft!=null||n.scrollToPos)&&(c.wheelStartX=c.wheelStartY=null),n.scrollTop!=null&&Fm(o,n.scrollTop,n.forceScroll),n.scrollLeft!=null&&Di(o,n.scrollLeft,!0,!0),n.scrollToPos){var u=LL(o,qe(l,n.scrollToPos.from),qe(l,n.scrollToPos.to),n.scrollToPos.margin);TL(o,u)}var h=n.maybeHiddenMarkers,m=n.maybeUnhiddenMarkers;if(h)for(var b=0;b<h.length;++b)h[b].lines.length||He(h[b],"hide");if(m)for(var x=0;x<m.length;++x)m[x].lines.length&&He(m[x],"unhide");c.wrapper.offsetHeight&&(l.scrollTop=o.display.scroller.scrollTop),n.changeObjs&&He(o,"changes",o,n.changeObjs),n.update&&n.update.finish()}function Sn(n,o){if(n.curOp)return o();Mi(n);try{return o()}finally{Oi(n)}}function Ft(n,o){return function(){if(n.curOp)return o.apply(n,arguments);Mi(n);try{return o.apply(n,arguments)}finally{Oi(n)}}}function tn(n){return function(){if(this.curOp)return n.apply(this,arguments);Mi(this);try{return n.apply(this,arguments)}finally{Oi(this)}}}function _t(n){return function(){var o=this.cm;if(!o||o.curOp)return n.apply(this,arguments);Mi(o);try{return n.apply(this,arguments)}finally{Oi(o)}}}function Cs(n,o){n.doc.highlightFrontier<n.display.viewTo&&n.state.highlight.set(o,xt(RL,n))}function RL(n){var o=n.doc;if(!(o.highlightFrontier>=n.display.viewTo)){var c=+new Date+n.options.workTime,l=ds(n,o.highlightFrontier),u=[];o.iter(l.line,Math.min(o.first+o.size,n.display.viewTo+500),function(h){if(l.line>=n.display.viewFrom){var m=h.styles,b=h.text.length>n.options.maxHighlightLength?Rr(o.mode,l.state):null,x=Qg(n,h,l,!0);b&&(l.state=b),h.styles=x.styles;var C=h.styleClasses,P=x.classes;P?h.styleClasses=P:C&&(h.styleClasses=null);for(var B=!m||m.length!=h.styles.length||C!=P&&(!C||!P||C.bgClass!=P.bgClass||C.textClass!=P.textClass),G=0;!B&&G<m.length;++G)B=m[G]!=h.styles[G];B&&u.push(l.line),h.stateAfter=l.save(),l.nextLine()}else h.text.length<=n.options.maxHighlightLength&&Eu(n,h.text,l),h.stateAfter=l.line%5==0?l.save():null,l.nextLine();if(+new Date>c)return Cs(n,n.options.workDelay),!0}),o.highlightFrontier=l.line,o.modeFrontier=Math.max(o.modeFrontier,l.line),u.length&&Sn(n,function(){for(var h=0;h<u.length;h++)oi(n,u[h],"text")})}}var Fl=function(n,o,c){var l=n.display;this.viewport=o,this.visible=Rl(l,n.doc,o),this.editorIsHidden=!l.wrapper.offsetWidth,this.wrapperHeight=l.wrapper.clientHeight,this.wrapperWidth=l.wrapper.clientWidth,this.oldDisplayWidth=Ai(n),this.force=c,this.dims=Wu(n),this.events=[]};Fl.prototype.signal=function(n,o){st(n,o)&&this.events.push(arguments)},Fl.prototype.finish=function(){for(var n=0;n<this.events.length;n++)He.apply(null,this.events[n])};function qL(n){var o=n.display;!o.scrollbarsClipped&&o.scroller.offsetWidth&&(o.nativeBarWidth=o.scroller.offsetWidth-o.scroller.clientWidth,o.heightForcer.style.height=xr(n)+"px",o.sizer.style.marginBottom=-o.nativeBarWidth+"px",o.sizer.style.borderRightWidth=xr(n)+"px",o.scrollbarsClipped=!0)}function FL(n){if(n.hasFocus())return null;var o=Je(wt(n));if(!o||!Se(n.display.lineDiv,o))return null;var c={activeElt:o};if(window.getSelection){var l=Xt(n).getSelection();l.anchorNode&&l.extend&&Se(n.display.lineDiv,l.anchorNode)&&(c.anchorNode=l.anchorNode,c.anchorOffset=l.anchorOffset,c.focusNode=l.focusNode,c.focusOffset=l.focusOffset)}return c}function _L(n){if(!(!n||!n.activeElt||n.activeElt==Je(n.activeElt.ownerDocument))&&(n.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(n.activeElt.nodeName)&&n.anchorNode&&Se(document.body,n.anchorNode)&&Se(document.body,n.focusNode))){var o=n.activeElt.ownerDocument,c=o.defaultView.getSelection(),l=o.createRange();l.setEnd(n.anchorNode,n.anchorOffset),l.collapse(!1),c.removeAllRanges(),c.addRange(l),c.extend(n.focusNode,n.focusOffset)}}function Xu(n,o){var c=n.display,l=n.doc;if(o.editorIsHidden)return si(n),!1;if(!o.force&&o.visible.from>=c.viewFrom&&o.visible.to<=c.viewTo&&(c.updateLineNumbers==null||c.updateLineNumbers>=c.viewTo)&&c.renderedView==c.view&&Im(n)==0)return!1;$m(n)&&(si(n),o.dims=Wu(n));var u=l.first+l.size,h=Math.max(o.visible.from-n.options.viewportMargin,l.first),m=Math.min(u,o.visible.to+n.options.viewportMargin);c.viewFrom<h&&h-c.viewFrom<20&&(h=Math.max(l.first,c.viewFrom)),c.viewTo>m&&c.viewTo-m<20&&(m=Math.min(u,c.viewTo)),Fr&&(h=Ou(n.doc,h),m=um(n.doc,m));var b=h!=c.viewFrom||m!=c.viewTo||c.lastWrapHeight!=o.wrapperHeight||c.lastWrapWidth!=o.wrapperWidth;SL(n,h,m),c.viewOffset=_r(ke(n.doc,c.viewFrom)),n.display.mover.style.top=c.viewOffset+"px";var x=Im(n);if(!b&&x==0&&!o.force&&c.renderedView==c.view&&(c.updateLineNumbers==null||c.updateLineNumbers>=c.viewTo))return!1;var C=FL(n);return x>4&&(c.lineDiv.style.display="none"),jL(n,c.updateLineNumbers,o.dims),x>4&&(c.lineDiv.style.display=""),c.renderedView=c.view,_L(C),$(c.cursorDiv),$(c.selectionDiv),c.gutters.style.height=c.sizer.style.minHeight=0,b&&(c.lastWrapHeight=o.wrapperHeight,c.lastWrapWidth=o.wrapperWidth,Cs(n,400)),c.updateLineNumbers=null,!0}function Wm(n,o){for(var c=o.viewport,l=!0;;l=!1){if(!l||!n.options.lineWrapping||o.oldDisplayWidth==Ai(n)){if(c&&c.top!=null&&(c={top:Math.min(n.doc.height+Bu(n.display)-Ru(n),c.top)}),o.visible=Rl(n.display,n.doc,c),o.visible.from>=n.display.viewFrom&&o.visible.to<=n.display.viewTo)break}else l&&(o.visible=Rl(n.display,n.doc,c));if(!Xu(n,o))break;Bl(n);var u=xs(n);vs(n),ao(n,u),tf(n,u),o.force=!1}o.signal(n,"update",n),(n.display.viewFrom!=n.display.reportedViewFrom||n.display.viewTo!=n.display.reportedViewTo)&&(o.signal(n,"viewportChange",n,n.display.viewFrom,n.display.viewTo),n.display.reportedViewFrom=n.display.viewFrom,n.display.reportedViewTo=n.display.viewTo)}function Zu(n,o){var c=new Fl(n,o);if(Xu(n,c)){Bl(n),Wm(n,c);var l=xs(n);vs(n),ao(n,l),tf(n,l),c.finish()}}function jL(n,o,c){var l=n.display,u=n.options.lineNumbers,h=l.lineDiv,m=h.firstChild;function b(Z){var ne=Z.nextSibling;return g&&M&&n.display.currentWheelTarget==Z?Z.style.display="none":Z.parentNode.removeChild(Z),ne}for(var x=l.view,C=l.viewFrom,P=0;P<x.length;P++){var B=x[P];if(!B.hidden)if(!B.node||B.node.parentNode!=h){var G=pL(n,B,C,c);h.insertBefore(G,m)}else{for(;m!=B.node;)m=b(m);var W=u&&o!=null&&o<=C&&B.lineNumber;B.changes&&(_e(B.changes,"gutter")>-1&&(W=!1),gm(n,B,C,c)),W&&($(B.lineNumber),B.lineNumber.appendChild(document.createTextNode(R(n.options,C)))),m=B.node.nextSibling}C+=B.size}for(;m;)m=b(m)}function ef(n){var o=n.gutters.offsetWidth;n.sizer.style.marginLeft=o+"px",qt(n,"gutterChanged",n)}function tf(n,o){n.display.sizer.style.minHeight=o.docHeight+"px",n.display.heightForcer.style.top=o.docHeight+"px",n.display.gutters.style.height=o.docHeight+n.display.barHeight+xr(n)+"px"}function Um(n){var o=n.display,c=o.view;if(!(!o.alignWidgets&&(!o.gutters.firstChild||!n.options.fixedGutter))){for(var l=Uu(o)-o.scroller.scrollLeft+n.doc.scrollLeft,u=o.gutters.offsetWidth,h=l+"px",m=0;m<c.length;m++)if(!c[m].hidden){n.options.fixedGutter&&(c[m].gutter&&(c[m].gutter.style.left=h),c[m].gutterBackground&&(c[m].gutterBackground.style.left=h));var b=c[m].alignable;if(b)for(var x=0;x<b.length;x++)b[x].style.left=h}n.options.fixedGutter&&(o.gutters.style.left=l+u+"px")}}function $m(n){if(!n.options.lineNumbers)return!1;var o=n.doc,c=R(n.options,o.first+o.size-1),l=n.display;if(c.length!=l.lineNumChars){var u=l.measure.appendChild(D("div",[D("div",c)],"CodeMirror-linenumber CodeMirror-gutter-elt")),h=u.firstChild.offsetWidth,m=u.offsetWidth-h;return l.lineGutter.style.width="",l.lineNumInnerWidth=Math.max(h,l.lineGutter.offsetWidth-m)+1,l.lineNumWidth=l.lineNumInnerWidth+m,l.lineNumChars=l.lineNumInnerWidth?c.length:-1,l.lineGutter.style.width=l.lineNumWidth+"px",ef(n.display),!0}return!1}function nf(n,o){for(var c=[],l=!1,u=0;u<n.length;u++){var h=n[u],m=null;if(typeof h!="string"&&(m=h.style,h=h.className),h=="CodeMirror-linenumbers")if(o)l=!0;else continue;c.push({className:h,style:m})}return o&&!l&&c.push({className:"CodeMirror-linenumbers",style:null}),c}function Gm(n){var o=n.gutters,c=n.gutterSpecs;$(o),n.lineGutter=null;for(var l=0;l<c.length;++l){var u=c[l],h=u.className,m=u.style,b=o.appendChild(D("div",null,"CodeMirror-gutter "+h));m&&(b.style.cssText=m),h=="CodeMirror-linenumbers"&&(n.lineGutter=b,b.style.width=(n.lineNumWidth||1)+"px")}o.style.display=c.length?"":"none",ef(n)}function Ss(n){Gm(n.display),fn(n),Um(n)}function HL(n,o,c,l){var u=this;this.input=c,u.scrollbarFiller=D("div",null,"CodeMirror-scrollbar-filler"),u.scrollbarFiller.setAttribute("cm-not-content","true"),u.gutterFiller=D("div",null,"CodeMirror-gutter-filler"),u.gutterFiller.setAttribute("cm-not-content","true"),u.lineDiv=ae("div",null,"CodeMirror-code"),u.selectionDiv=D("div",null,null,"position: relative; z-index: 1"),u.cursorDiv=D("div",null,"CodeMirror-cursors"),u.measure=D("div",null,"CodeMirror-measure"),u.lineMeasure=D("div",null,"CodeMirror-measure"),u.lineSpace=ae("div",[u.measure,u.lineMeasure,u.selectionDiv,u.cursorDiv,u.lineDiv],null,"position: relative; outline: none");var h=ae("div",[u.lineSpace],"CodeMirror-lines");u.mover=D("div",[h],null,"position: relative"),u.sizer=D("div",[u.mover],"CodeMirror-sizer"),u.sizerWidth=null,u.heightForcer=D("div",null,null,"position: absolute; height: "+$e+"px; width: 1px;"),u.gutters=D("div",null,"CodeMirror-gutters"),u.lineGutter=null,u.scroller=D("div",[u.sizer,u.heightForcer,u.gutters],"CodeMirror-scroll"),u.scroller.setAttribute("tabIndex","-1"),u.wrapper=D("div",[u.scrollbarFiller,u.gutterFiller,u.scroller],"CodeMirror"),y&&v>=105&&(u.wrapper.style.clipPath="inset(0px)"),u.wrapper.setAttribute("translate","no"),f&&d<8&&(u.gutters.style.zIndex=-1,u.scroller.style.paddingRight=0),!g&&!(r&&S)&&(u.scroller.draggable=!0),n&&(n.appendChild?n.appendChild(u.wrapper):n(u.wrapper)),u.viewFrom=u.viewTo=o.first,u.reportedViewFrom=u.reportedViewTo=o.first,u.view=[],u.renderedView=null,u.externalMeasured=null,u.viewOffset=0,u.lastWrapHeight=u.lastWrapWidth=0,u.updateLineNumbers=null,u.nativeBarWidth=u.barHeight=u.barWidth=0,u.scrollbarsClipped=!1,u.lineNumWidth=u.lineNumInnerWidth=u.lineNumChars=null,u.alignWidgets=!1,u.cachedCharWidth=u.cachedTextHeight=u.cachedPaddingH=null,u.maxLine=null,u.maxLineLength=0,u.maxLineChanged=!1,u.wheelDX=u.wheelDY=u.wheelStartX=u.wheelStartY=null,u.shift=!1,u.selForContextMenu=null,u.activeTouch=null,u.gutterSpecs=nf(l.gutters,l.lineNumbers),Gm(u),c.init(u)}var _l=0,Hr=null;f?Hr=-.53:r?Hr=15:y?Hr=-.7:k&&(Hr=-1/3);function Vm(n){var o=n.wheelDeltaX,c=n.wheelDeltaY;return o==null&&n.detail&&n.axis==n.HORIZONTAL_AXIS&&(o=n.detail),c==null&&n.detail&&n.axis==n.VERTICAL_AXIS?c=n.detail:c==null&&(c=n.wheelDelta),{x:o,y:c}}function WL(n){var o=Vm(n);return o.x*=Hr,o.y*=Hr,o}function Km(n,o){y&&v==102&&(n.display.chromeScrollHack==null?n.display.sizer.style.pointerEvents="none":clearTimeout(n.display.chromeScrollHack),n.display.chromeScrollHack=setTimeout(function(){n.display.chromeScrollHack=null,n.display.sizer.style.pointerEvents=""},100));var c=Vm(o),l=c.x,u=c.y,h=Hr;o.deltaMode===0&&(l=o.deltaX,u=o.deltaY,h=1);var m=n.display,b=m.scroller,x=b.scrollWidth>b.clientWidth,C=b.scrollHeight>b.clientHeight;if(l&&x||u&&C){if(u&&M&&g){e:for(var P=o.target,B=m.view;P!=b;P=P.parentNode)for(var G=0;G<B.length;G++)if(B[G].node==P){n.display.currentWheelTarget=P;break e}}if(l&&!r&&!w&&h!=null){u&&C&&ws(n,Math.max(0,b.scrollTop+u*h)),Di(n,Math.max(0,b.scrollLeft+l*h)),(!u||u&&C)&&nt(o),m.wheelStartX=null;return}if(u&&h!=null){var W=u*h,Z=n.doc.scrollTop,ne=Z+m.wrapper.clientHeight;W<0?Z=Math.max(0,Z+W-50):ne=Math.min(n.doc.height,ne+W+50),Zu(n,{top:Z,bottom:ne})}_l<20&&o.deltaMode!==0&&(m.wheelStartX==null?(m.wheelStartX=b.scrollLeft,m.wheelStartY=b.scrollTop,m.wheelDX=l,m.wheelDY=u,setTimeout(function(){if(m.wheelStartX!=null){var fe=b.scrollLeft-m.wheelStartX,he=b.scrollTop-m.wheelStartY,me=he&&m.wheelDY&&he/m.wheelDY||fe&&m.wheelDX&&fe/m.wheelDX;m.wheelStartX=m.wheelStartY=null,me&&(Hr=(Hr*_l+me)/(_l+1),++_l)}},200)):(m.wheelDX+=l,m.wheelDY+=u))}}var In=function(n,o){this.ranges=n,this.primIndex=o};In.prototype.primary=function(){return this.ranges[this.primIndex]},In.prototype.equals=function(n){if(n==this)return!0;if(n.primIndex!=this.primIndex||n.ranges.length!=this.ranges.length)return!1;for(var o=0;o<this.ranges.length;o++){var c=this.ranges[o],l=n.ranges[o];if(!Re(c.anchor,l.anchor)||!Re(c.head,l.head))return!1}return!0},In.prototype.deepCopy=function(){for(var n=[],o=0;o<this.ranges.length;o++)n[o]=new it(Xe(this.ranges[o].anchor),Xe(this.ranges[o].head));return new In(n,this.primIndex)},In.prototype.somethingSelected=function(){for(var n=0;n<this.ranges.length;n++)if(!this.ranges[n].empty())return!0;return!1},In.prototype.contains=function(n,o){o||(o=n);for(var c=0;c<this.ranges.length;c++){var l=this.ranges[c];if(J(o,l.from())>=0&&J(n,l.to())<=0)return c}return-1};var it=function(n,o){this.anchor=n,this.head=o};it.prototype.from=function(){return zt(this.anchor,this.head)},it.prototype.to=function(){return et(this.anchor,this.head)},it.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function or(n,o,c){var l=n&&n.options.selectionsMayTouch,u=o[c];o.sort(function(G,W){return J(G.from(),W.from())}),c=_e(o,u);for(var h=1;h<o.length;h++){var m=o[h],b=o[h-1],x=J(b.to(),m.from());if(l&&!m.empty()?x>0:x>=0){var C=zt(b.from(),m.from()),P=et(b.to(),m.to()),B=b.empty()?m.from()==m.head:b.from()==b.head;h<=c&&--c,o.splice(--h,2,new it(B?P:C,B?C:P))}}return new In(o,c)}function ai(n,o){return new In([new it(n,o||n)],0)}function li(n){return n.text?j(n.from.line+n.text.length-1,Be(n.text).length+(n.text.length==1?n.from.ch:0)):n.to}function Ym(n,o){if(J(n,o.from)<0)return n;if(J(n,o.to)<=0)return li(o);var c=n.line+o.text.length-(o.to.line-o.from.line)-1,l=n.ch;return n.line==o.to.line&&(l+=li(o).ch-o.to.ch),j(c,l)}function rf(n,o){for(var c=[],l=0;l<n.sel.ranges.length;l++){var u=n.sel.ranges[l];c.push(new it(Ym(u.anchor,o),Ym(u.head,o)))}return or(n.cm,c,n.sel.primIndex)}function Qm(n,o,c){return n.line==o.line?j(c.line,n.ch-o.ch+c.ch):j(c.line+(n.line-o.line),n.ch)}function UL(n,o,c){for(var l=[],u=j(n.first,0),h=u,m=0;m<o.length;m++){var b=o[m],x=Qm(b.from,u,h),C=Qm(li(b),u,h);if(u=b.to,h=C,c=="around"){var P=n.sel.ranges[m],B=J(P.head,P.anchor)<0;l[m]=new it(B?C:x,B?x:C)}else l[m]=new it(x,x)}return new In(l,n.sel.primIndex)}function of(n){n.doc.mode=Br(n.options,n.doc.modeOption),As(n)}function As(n){n.doc.iter(function(o){o.stateAfter&&(o.stateAfter=null),o.styles&&(o.styles=null)}),n.doc.modeFrontier=n.doc.highlightFrontier=n.doc.first,Cs(n,100),n.state.modeGen++,n.curOp&&fn(n)}function Jm(n,o){return o.from.ch==0&&o.to.ch==0&&Be(o.text)==""&&(!n.cm||n.cm.options.wholeLineUpdateBefore)}function sf(n,o,c,l){function u(me){return c?c[me]:null}function h(me,pe,ye){XT(me,pe,ye,l),qt(me,"change",me,o)}function m(me,pe){for(var ye=[],Ne=me;Ne<pe;++Ne)ye.push(new eo(C[Ne],u(Ne),l));return ye}var b=o.from,x=o.to,C=o.text,P=ke(n,b.line),B=ke(n,x.line),G=Be(C),W=u(C.length-1),Z=x.line-b.line;if(o.full)n.insert(0,m(0,C.length)),n.remove(C.length,n.size-C.length);else if(Jm(n,o)){var ne=m(0,C.length-1);h(B,B.text,W),Z&&n.remove(b.line,Z),ne.length&&n.insert(b.line,ne)}else if(P==B)if(C.length==1)h(P,P.text.slice(0,b.ch)+G+P.text.slice(x.ch),W);else{var fe=m(1,C.length-1);fe.push(new eo(G+P.text.slice(x.ch),W,l)),h(P,P.text.slice(0,b.ch)+C[0],u(0)),n.insert(b.line+1,fe)}else if(C.length==1)h(P,P.text.slice(0,b.ch)+C[0]+B.text.slice(x.ch),u(0)),n.remove(b.line+1,Z);else{h(P,P.text.slice(0,b.ch)+C[0],u(0)),h(B,G+B.text.slice(x.ch),W);var he=m(1,C.length-1);Z>1&&n.remove(b.line+1,Z-1),n.insert(b.line+1,he)}qt(n,"change",n,o)}function ci(n,o,c){function l(u,h,m){if(u.linked)for(var b=0;b<u.linked.length;++b){var x=u.linked[b];if(x.doc!=h){var C=m&&x.sharedHist;c&&!C||(o(x.doc,C),l(x.doc,u,C))}}}l(n,null,!0)}function Xm(n,o){if(o.cm)throw new Error("This document is already in use.");n.doc=o,o.cm=n,$u(n),of(n),Zm(n),n.options.direction=o.direction,n.options.lineWrapping||Iu(n),n.options.mode=o.modeOption,fn(n)}function Zm(n){(n.doc.direction=="rtl"?ot:ce)(n.display.lineDiv,"CodeMirror-rtl")}function $L(n){Sn(n,function(){Zm(n),fn(n)})}function jl(n){this.done=[],this.undone=[],this.undoDepth=n?n.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=n?n.maxGeneration:1}function af(n,o){var c={from:Xe(o.from),to:li(o),text:qr(n,o.from,o.to)};return ny(n,c,o.from.line,o.to.line+1),ci(n,function(l){return ny(l,c,o.from.line,o.to.line+1)},!0),c}function ey(n){for(;n.length;){var o=Be(n);if(o.ranges)n.pop();else break}}function GL(n,o){if(o)return ey(n.done),Be(n.done);if(n.done.length&&!Be(n.done).ranges)return Be(n.done);if(n.done.length>1&&!n.done[n.done.length-2].ranges)return n.done.pop(),Be(n.done)}function ty(n,o,c,l){var u=n.history;u.undone.length=0;var h=+new Date,m,b;if((u.lastOp==l||u.lastOrigin==o.origin&&o.origin&&(o.origin.charAt(0)=="+"&&u.lastModTime>h-(n.cm?n.cm.options.historyEventDelay:500)||o.origin.charAt(0)=="*"))&&(m=GL(u,u.lastOp==l)))b=Be(m.changes),J(o.from,o.to)==0&&J(o.from,b.to)==0?b.to=li(o):m.changes.push(af(n,o));else{var x=Be(u.done);for((!x||!x.ranges)&&Hl(n.sel,u.done),m={changes:[af(n,o)],generation:u.generation},u.done.push(m);u.done.length>u.undoDepth;)u.done.shift(),u.done[0].ranges||u.done.shift()}u.done.push(c),u.generation=++u.maxGeneration,u.lastModTime=u.lastSelTime=h,u.lastOp=u.lastSelOp=l,u.lastOrigin=u.lastSelOrigin=o.origin,b||He(n,"historyAdded")}function VL(n,o,c,l){var u=o.charAt(0);return u=="*"||u=="+"&&c.ranges.length==l.ranges.length&&c.somethingSelected()==l.somethingSelected()&&new Date-n.history.lastSelTime<=(n.cm?n.cm.options.historyEventDelay:500)}function KL(n,o,c,l){var u=n.history,h=l&&l.origin;c==u.lastSelOp||h&&u.lastSelOrigin==h&&(u.lastModTime==u.lastSelTime&&u.lastOrigin==h||VL(n,h,Be(u.done),o))?u.done[u.done.length-1]=o:Hl(o,u.done),u.lastSelTime=+new Date,u.lastSelOrigin=h,u.lastSelOp=c,l&&l.clearRedo!==!1&&ey(u.undone)}function Hl(n,o){var c=Be(o);c&&c.ranges&&c.equals(n)||o.push(n)}function ny(n,o,c,l){var u=o["spans_"+n.id],h=0;n.iter(Math.max(n.first,c),Math.min(n.first+n.size,l),function(m){m.markedSpans&&((u||(u=o["spans_"+n.id]={}))[h]=m.markedSpans),++h})}function YL(n){if(!n)return null;for(var o,c=0;c<n.length;++c)n[c].marker.explicitlyCleared?o||(o=n.slice(0,c)):o&&o.push(n[c]);return o?o.length?o:null:n}function QL(n,o){var c=o["spans_"+n.id];if(!c)return null;for(var l=[],u=0;u<o.text.length;++u)l.push(YL(c[u]));return l}function ry(n,o){var c=QL(n,o),l=Nu(n,o);if(!c)return l;if(!l)return c;for(var u=0;u<c.length;++u){var h=c[u],m=l[u];if(h&&m)e:for(var b=0;b<m.length;++b){for(var x=m[b],C=0;C<h.length;++C)if(h[C].marker==x.marker)continue e;h.push(x)}else m&&(c[u]=m)}return c}function lo(n,o,c){for(var l=[],u=0;u<n.length;++u){var h=n[u];if(h.ranges){l.push(c?In.prototype.deepCopy.call(h):h);continue}var m=h.changes,b=[];l.push({changes:b});for(var x=0;x<m.length;++x){var C=m[x],P=void 0;if(b.push({from:C.from,to:C.to,text:C.text}),o)for(var B in C)(P=B.match(/^spans_(\d+)$/))&&_e(o,Number(P[1]))>-1&&(Be(b)[B]=C[B],delete C[B])}}return l}function lf(n,o,c,l){if(l){var u=n.anchor;if(c){var h=J(o,u)<0;h!=J(c,u)<0?(u=o,o=c):h!=J(o,c)<0&&(o=c)}return new it(u,o)}else return new it(c||o,o)}function Wl(n,o,c,l,u){u==null&&(u=n.cm&&(n.cm.display.shift||n.extend)),Vt(n,new In([lf(n.sel.primary(),o,c,u)],0),l)}function iy(n,o,c){for(var l=[],u=n.cm&&(n.cm.display.shift||n.extend),h=0;h<n.sel.ranges.length;h++)l[h]=lf(n.sel.ranges[h],o[h],null,u);var m=or(n.cm,l,n.sel.primIndex);Vt(n,m,c)}function cf(n,o,c,l){var u=n.sel.ranges.slice(0);u[o]=c,Vt(n,or(n.cm,u,n.sel.primIndex),l)}function oy(n,o,c,l){Vt(n,ai(o,c),l)}function JL(n,o,c){var l={ranges:o.ranges,update:function(u){this.ranges=[];for(var h=0;h<u.length;h++)this.ranges[h]=new it(qe(n,u[h].anchor),qe(n,u[h].head))},origin:c&&c.origin};return He(n,"beforeSelectionChange",n,l),n.cm&&He(n.cm,"beforeSelectionChange",n.cm,l),l.ranges!=o.ranges?or(n.cm,l.ranges,l.ranges.length-1):o}function sy(n,o,c){var l=n.history.done,u=Be(l);u&&u.ranges?(l[l.length-1]=o,Ul(n,o,c)):Vt(n,o,c)}function Vt(n,o,c){Ul(n,o,c),KL(n,n.sel,n.cm?n.cm.curOp.id:NaN,c)}function Ul(n,o,c){(st(n,"beforeSelectionChange")||n.cm&&st(n.cm,"beforeSelectionChange"))&&(o=JL(n,o,c));var l=c&&c.bias||(J(o.primary().head,n.sel.primary().head)<0?-1:1);ay(n,cy(n,o,l,!0)),!(c&&c.scroll===!1)&&n.cm&&n.cm.getOption("readOnly")!="nocursor"&&so(n.cm)}function ay(n,o){o.equals(n.sel)||(n.sel=o,n.cm&&(n.cm.curOp.updateInput=1,n.cm.curOp.selectionChanged=!0,It(n.cm)),qt(n,"cursorActivity",n))}function ly(n){ay(n,cy(n,n.sel,null,!1))}function cy(n,o,c,l){for(var u,h=0;h<o.ranges.length;h++){var m=o.ranges[h],b=o.ranges.length==n.sel.ranges.length&&n.sel.ranges[h],x=$l(n,m.anchor,b&&b.anchor,c,l),C=m.head==m.anchor?x:$l(n,m.head,b&&b.head,c,l);(u||x!=m.anchor||C!=m.head)&&(u||(u=o.ranges.slice(0,h)),u[h]=new it(x,C))}return u?or(n.cm,u,o.primIndex):o}function co(n,o,c,l,u){var h=ke(n,o.line);if(h.markedSpans)for(var m=0;m<h.markedSpans.length;++m){var b=h.markedSpans[m],x=b.marker,C="selectLeft"in x?!x.selectLeft:x.inclusiveLeft,P="selectRight"in x?!x.selectRight:x.inclusiveRight;if((b.from==null||(C?b.from<=o.ch:b.from<o.ch))&&(b.to==null||(P?b.to>=o.ch:b.to>o.ch))){if(u&&(He(x,"beforeCursorEnter"),x.explicitlyCleared))if(h.markedSpans){--m;continue}else break;if(!x.atomic)continue;if(c){var B=x.find(l<0?1:-1),G=void 0;if((l<0?P:C)&&(B=uy(n,B,-l,B&&B.line==o.line?h:null)),B&&B.line==o.line&&(G=J(B,c))&&(l<0?G<0:G>0))return co(n,B,o,l,u)}var W=x.find(l<0?-1:1);return(l<0?C:P)&&(W=uy(n,W,l,W.line==o.line?h:null)),W?co(n,W,o,l,u):null}}return o}function $l(n,o,c,l,u){var h=l||1,m=co(n,o,c,h,u)||!u&&co(n,o,c,h,!0)||co(n,o,c,-h,u)||!u&&co(n,o,c,-h,!0);return m||(n.cantEdit=!0,j(n.first,0))}function uy(n,o,c,l){return c<0&&o.ch==0?o.line>n.first?qe(n,j(o.line-1)):null:c>0&&o.ch==(l||ke(n,o.line)).text.length?o.line<n.first+n.size-1?j(o.line+1,0):null:new j(o.line,o.ch+c)}function fy(n){n.setSelection(j(n.firstLine(),0),j(n.lastLine()),ut)}function dy(n,o,c){var l={canceled:!1,from:o.from,to:o.to,text:o.text,origin:o.origin,cancel:function(){return l.canceled=!0}};return c&&(l.update=function(u,h,m,b){u&&(l.from=qe(n,u)),h&&(l.to=qe(n,h)),m&&(l.text=m),b!==void 0&&(l.origin=b)}),He(n,"beforeChange",n,l),n.cm&&He(n.cm,"beforeChange",n.cm,l),l.canceled?(n.cm&&(n.cm.curOp.updateInput=2),null):{from:l.from,to:l.to,text:l.text,origin:l.origin}}function uo(n,o,c){if(n.cm){if(!n.cm.curOp)return Ft(n.cm,uo)(n,o,c);if(n.cm.state.suppressEdits)return}if(!((st(n,"beforeChange")||n.cm&&st(n.cm,"beforeChange"))&&(o=dy(n,o,!0),!o))){var l=rm&&!c&&KT(n,o.from,o.to);if(l)for(var u=l.length-1;u>=0;--u)hy(n,{from:l[u].from,to:l[u].to,text:u?[""]:o.text,origin:o.origin});else hy(n,o)}}function hy(n,o){if(!(o.text.length==1&&o.text[0]==""&&J(o.from,o.to)==0)){var c=rf(n,o);ty(n,o,c,n.cm?n.cm.curOp.id:NaN),Ts(n,o,c,Nu(n,o));var l=[];ci(n,function(u,h){!h&&_e(l,u.history)==-1&&(yy(u.history,o),l.push(u.history)),Ts(u,o,null,Nu(u,o))})}}function Gl(n,o,c){var l=n.cm&&n.cm.state.suppressEdits;if(!(l&&!c)){for(var u=n.history,h,m=n.sel,b=o=="undo"?u.done:u.undone,x=o=="undo"?u.undone:u.done,C=0;C<b.length&&(h=b[C],!(c?h.ranges&&!h.equals(n.sel):!h.ranges));C++);if(C!=b.length){for(u.lastOrigin=u.lastSelOrigin=null;;)if(h=b.pop(),h.ranges){if(Hl(h,x),c&&!h.equals(n.sel)){Vt(n,h,{clearRedo:!1});return}m=h}else if(l){b.push(h);return}else break;var P=[];Hl(m,x),x.push({changes:P,generation:u.generation}),u.generation=h.generation||++u.maxGeneration;for(var B=st(n,"beforeChange")||n.cm&&st(n.cm,"beforeChange"),G=function(ne){var fe=h.changes[ne];if(fe.origin=o,B&&!dy(n,fe,!1))return b.length=0,{};P.push(af(n,fe));var he=ne?rf(n,fe):Be(b);Ts(n,fe,he,ry(n,fe)),!ne&&n.cm&&n.cm.scrollIntoView({from:fe.from,to:li(fe)});var me=[];ci(n,function(pe,ye){!ye&&_e(me,pe.history)==-1&&(yy(pe.history,fe),me.push(pe.history)),Ts(pe,fe,null,ry(pe,fe))})},W=h.changes.length-1;W>=0;--W){var Z=G(W);if(Z)return Z.v}}}}function py(n,o){if(o!=0&&(n.first+=o,n.sel=new In(Zt(n.sel.ranges,function(u){return new it(j(u.anchor.line+o,u.anchor.ch),j(u.head.line+o,u.head.ch))}),n.sel.primIndex),n.cm)){fn(n.cm,n.first,n.first-o,o);for(var c=n.cm.display,l=c.viewFrom;l<c.viewTo;l++)oi(n.cm,l,"gutter")}}function Ts(n,o,c,l){if(n.cm&&!n.cm.curOp)return Ft(n.cm,Ts)(n,o,c,l);if(o.to.line<n.first){py(n,o.text.length-1-(o.to.line-o.from.line));return}if(!(o.from.line>n.lastLine())){if(o.from.line<n.first){var u=o.text.length-1-(n.first-o.from.line);py(n,u),o={from:j(n.first,0),to:j(o.to.line+u,o.to.ch),text:[Be(o.text)],origin:o.origin}}var h=n.lastLine();o.to.line>h&&(o={from:o.from,to:j(h,ke(n,h).text.length),text:[o.text[0]],origin:o.origin}),o.removed=qr(n,o.from,o.to),c||(c=rf(n,o)),n.cm?XL(n.cm,o,l):sf(n,o,l),Ul(n,c,ut),n.cantEdit&&$l(n,j(n.firstLine(),0))&&(n.cantEdit=!1)}}function XL(n,o,c){var l=n.doc,u=n.display,h=o.from,m=o.to,b=!1,x=h.line;n.options.lineWrapping||(x=rt(rr(ke(l,h.line))),l.iter(x,m.line+1,function(W){if(W==u.maxLine)return b=!0,!0})),l.sel.contains(o.from,o.to)>-1&&It(n),sf(l,o,c,Pm(n)),n.options.lineWrapping||(l.iter(x,h.line+o.text.length,function(W){var Z=Dl(W);Z>u.maxLineLength&&(u.maxLine=W,u.maxLineLength=Z,u.maxLineChanged=!0,b=!1)}),b&&(n.curOp.updateMaxLine=!0)),jT(l,h.line),Cs(n,400);var C=o.text.length-(m.line-h.line)-1;o.full?fn(n):h.line==m.line&&o.text.length==1&&!Jm(n.doc,o)?oi(n,h.line,"text"):fn(n,h.line,m.line+1,C);var P=st(n,"changes"),B=st(n,"change");if(B||P){var G={from:h,to:m,text:o.text,removed:o.removed,origin:o.origin};B&&qt(n,"change",n,G),P&&(n.curOp.changeObjs||(n.curOp.changeObjs=[])).push(G)}n.display.selForContextMenu=null}function fo(n,o,c,l,u){var h;l||(l=c),J(l,c)<0&&(h=[l,c],c=h[0],l=h[1]),typeof o=="string"&&(o=n.splitLines(o)),uo(n,{from:c,to:l,text:o,origin:u})}function gy(n,o,c,l){c<n.line?n.line+=l:o<n.line&&(n.line=o,n.ch=0)}function my(n,o,c,l){for(var u=0;u<n.length;++u){var h=n[u],m=!0;if(h.ranges){h.copied||(h=n[u]=h.deepCopy(),h.copied=!0);for(var b=0;b<h.ranges.length;b++)gy(h.ranges[b].anchor,o,c,l),gy(h.ranges[b].head,o,c,l);continue}for(var x=0;x<h.changes.length;++x){var C=h.changes[x];if(c<C.from.line)C.from=j(C.from.line+l,C.from.ch),C.to=j(C.to.line+l,C.to.ch);else if(o<=C.to.line){m=!1;break}}m||(n.splice(0,u+1),u=0)}}function yy(n,o){var c=o.from.line,l=o.to.line,u=o.text.length-(l-c)-1;my(n.done,c,l,u),my(n.undone,c,l,u)}function Ls(n,o,c,l){var u=o,h=o;return typeof o=="number"?h=ke(n,Pn(n,o)):u=rt(o),u==null?null:(l(h,u)&&n.cm&&oi(n.cm,u,c),h)}function Es(n){this.lines=n,this.parent=null;for(var o=0,c=0;c<n.length;++c)n[c].parent=this,o+=n[c].height;this.height=o}Es.prototype={chunkSize:function(){return this.lines.length},removeInner:function(n,o){for(var c=n,l=n+o;c<l;++c){var u=this.lines[c];this.height-=u.height,ZT(u),qt(u,"delete")}this.lines.splice(n,o)},collapse:function(n){n.push.apply(n,this.lines)},insertInner:function(n,o,c){this.height+=c,this.lines=this.lines.slice(0,n).concat(o).concat(this.lines.slice(n));for(var l=0;l<o.length;++l)o[l].parent=this},iterN:function(n,o,c){for(var l=n+o;n<l;++n)if(c(this.lines[n]))return!0}};function Ds(n){this.children=n;for(var o=0,c=0,l=0;l<n.length;++l){var u=n[l];o+=u.chunkSize(),c+=u.height,u.parent=this}this.size=o,this.height=c,this.parent=null}Ds.prototype={chunkSize:function(){return this.size},removeInner:function(n,o){this.size-=o;for(var c=0;c<this.children.length;++c){var l=this.children[c],u=l.chunkSize();if(n<u){var h=Math.min(o,u-n),m=l.height;if(l.removeInner(n,h),this.height-=m-l.height,u==h&&(this.children.splice(c--,1),l.parent=null),(o-=h)==0)break;n=0}else n-=u}if(this.size-o<25&&(this.children.length>1||!(this.children[0]instanceof Es))){var b=[];this.collapse(b),this.children=[new Es(b)],this.children[0].parent=this}},collapse:function(n){for(var o=0;o<this.children.length;++o)this.children[o].collapse(n)},insertInner:function(n,o,c){this.size+=o.length,this.height+=c;for(var l=0;l<this.children.length;++l){var u=this.children[l],h=u.chunkSize();if(n<=h){if(u.insertInner(n,o,c),u.lines&&u.lines.length>50){for(var m=u.lines.length%25+25,b=m;b<u.lines.length;){var x=new Es(u.lines.slice(b,b+=25));u.height-=x.height,this.children.splice(++l,0,x),x.parent=this}u.lines=u.lines.slice(0,m),this.maybeSpill()}break}n-=h}},maybeSpill:function(){if(!(this.children.length<=10)){var n=this;do{var o=n.children.splice(n.children.length-5,5),c=new Ds(o);if(n.parent){n.size-=c.size,n.height-=c.height;var u=_e(n.parent.children,n);n.parent.children.splice(u+1,0,c)}else{var l=new Ds(n.children);l.parent=n,n.children=[l,c],n=l}c.parent=n.parent}while(n.children.length>10);n.parent.maybeSpill()}},iterN:function(n,o,c){for(var l=0;l<this.children.length;++l){var u=this.children[l],h=u.chunkSize();if(n<h){var m=Math.min(o,h-n);if(u.iterN(n,m,c))return!0;if((o-=m)==0)break;n=0}else n-=h}}};var Ns=function(n,o,c){if(c)for(var l in c)c.hasOwnProperty(l)&&(this[l]=c[l]);this.doc=n,this.node=o};Ns.prototype.clear=function(){var n=this.doc.cm,o=this.line.widgets,c=this.line,l=rt(c);if(!(l==null||!o)){for(var u=0;u<o.length;++u)o[u]==this&&o.splice(u--,1);o.length||(c.widgets=null);var h=ms(this);$n(c,Math.max(0,c.height-h)),n&&(Sn(n,function(){vy(n,c,-h),oi(n,l,"widget")}),qt(n,"lineWidgetCleared",n,this,l))}},Ns.prototype.changed=function(){var n=this,o=this.height,c=this.doc.cm,l=this.line;this.height=null;var u=ms(this)-o;u&&(ii(this.doc,l)||$n(l,l.height+u),c&&Sn(c,function(){c.curOp.forceUpdate=!0,vy(c,l,u),qt(c,"lineWidgetChanged",c,n,rt(l))}))},tt(Ns);function vy(n,o,c){_r(o)<(n.curOp&&n.curOp.scrollTop||n.doc.scrollTop)&&Ju(n,c)}function ZL(n,o,c,l){var u=new Ns(n,c,l),h=n.cm;return h&&u.noHScroll&&(h.display.alignWidgets=!0),Ls(n,o,"widget",function(m){var b=m.widgets||(m.widgets=[]);if(u.insertAt==null?b.push(u):b.splice(Math.min(b.length,Math.max(0,u.insertAt)),0,u),u.line=m,h&&!ii(n,m)){var x=_r(m)<n.scrollTop;$n(m,m.height+ms(u)),x&&Ju(h,u.height),h.curOp.forceUpdate=!0}return!0}),h&&qt(h,"lineWidgetAdded",h,u,typeof o=="number"?o:rt(o)),u}var by=0,ui=function(n,o){this.lines=[],this.type=o,this.doc=n,this.id=++by};ui.prototype.clear=function(){if(!this.explicitlyCleared){var n=this.doc.cm,o=n&&!n.curOp;if(o&&Mi(n),st(this,"clear")){var c=this.find();c&&qt(this,"clear",c.from,c.to)}for(var l=null,u=null,h=0;h<this.lines.length;++h){var m=this.lines[h],b=hs(m.markedSpans,this);n&&!this.collapsed?oi(n,rt(m),"text"):n&&(b.to!=null&&(u=rt(m)),b.from!=null&&(l=rt(m))),m.markedSpans=UT(m.markedSpans,b),b.from==null&&this.collapsed&&!ii(this.doc,m)&&n&&$n(m,ro(n.display))}if(n&&this.collapsed&&!n.options.lineWrapping)for(var x=0;x<this.lines.length;++x){var C=rr(this.lines[x]),P=Dl(C);P>n.display.maxLineLength&&(n.display.maxLine=C,n.display.maxLineLength=P,n.display.maxLineChanged=!0)}l!=null&&n&&this.collapsed&&fn(n,l,u+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,n&&ly(n.doc)),n&&qt(n,"markerCleared",n,this,l,u),o&&Oi(n),this.parent&&this.parent.clear()}},ui.prototype.find=function(n,o){n==null&&this.type=="bookmark"&&(n=1);for(var c,l,u=0;u<this.lines.length;++u){var h=this.lines[u],m=hs(h.markedSpans,this);if(m.from!=null&&(c=j(o?h:rt(h),m.from),n==-1))return c;if(m.to!=null&&(l=j(o?h:rt(h),m.to),n==1))return l}return c&&{from:c,to:l}},ui.prototype.changed=function(){var n=this,o=this.find(-1,!0),c=this,l=this.doc.cm;!o||!l||Sn(l,function(){var u=o.line,h=rt(o.line),m=qu(l,h);if(m&&(Am(m),l.curOp.selectionChanged=l.curOp.forceUpdate=!0),l.curOp.updateMaxLine=!0,!ii(c.doc,u)&&c.height!=null){var b=c.height;c.height=null;var x=ms(c)-b;x&&$n(u,u.height+x)}qt(l,"markerChanged",l,n)})},ui.prototype.attachLine=function(n){if(!this.lines.length&&this.doc.cm){var o=this.doc.cm.curOp;(!o.maybeHiddenMarkers||_e(o.maybeHiddenMarkers,this)==-1)&&(o.maybeUnhiddenMarkers||(o.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(n)},ui.prototype.detachLine=function(n){if(this.lines.splice(_e(this.lines,n),1),!this.lines.length&&this.doc.cm){var o=this.doc.cm.curOp;(o.maybeHiddenMarkers||(o.maybeHiddenMarkers=[])).push(this)}},tt(ui);function ho(n,o,c,l,u){if(l&&l.shared)return eE(n,o,c,l,u);if(n.cm&&!n.cm.curOp)return Ft(n.cm,ho)(n,o,c,l,u);var h=new ui(n,u),m=J(o,c);if(l&&Pe(l,h,!1),m>0||m==0&&h.clearWhenEmpty!==!1)return h;if(h.replacedWith&&(h.collapsed=!0,h.widgetNode=ae("span",[h.replacedWith],"CodeMirror-widget"),l.handleMouseEvents||h.widgetNode.setAttribute("cm-ignore-events","true"),l.insertLeft&&(h.widgetNode.insertLeft=!0)),h.collapsed){if(cm(n,o.line,o,c,h)||o.line!=c.line&&cm(n,c.line,o,c,h))throw new Error("Inserting collapsed marker partially overlapping an existing one");WT()}h.addToHistory&&ty(n,{from:o,to:c,origin:"markText"},n.sel,NaN);var b=o.line,x=n.cm,C;if(n.iter(b,c.line+1,function(B){x&&h.collapsed&&!x.options.lineWrapping&&rr(B)==x.display.maxLine&&(C=!0),h.collapsed&&b!=o.line&&$n(B,0),$T(B,new Al(h,b==o.line?o.ch:null,b==c.line?c.ch:null),n.cm&&n.cm.curOp),++b}),h.collapsed&&n.iter(o.line,c.line+1,function(B){ii(n,B)&&$n(B,0)}),h.clearOnEnter&&se(h,"beforeCursorEnter",function(){return h.clear()}),h.readOnly&&(HT(),(n.history.done.length||n.history.undone.length)&&n.clearHistory()),h.collapsed&&(h.id=++by,h.atomic=!0),x){if(C&&(x.curOp.updateMaxLine=!0),h.collapsed)fn(x,o.line,c.line+1);else if(h.className||h.startStyle||h.endStyle||h.css||h.attributes||h.title)for(var P=o.line;P<=c.line;P++)oi(x,P,"text");h.atomic&&ly(x.doc),qt(x,"markerAdded",x,h)}return h}var Ms=function(n,o){this.markers=n,this.primary=o;for(var c=0;c<n.length;++c)n[c].parent=this};Ms.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var n=0;n<this.markers.length;++n)this.markers[n].clear();qt(this,"clear")}},Ms.prototype.find=function(n,o){return this.primary.find(n,o)},tt(Ms);function eE(n,o,c,l,u){l=Pe(l),l.shared=!1;var h=[ho(n,o,c,l,u)],m=h[0],b=l.widgetNode;return ci(n,function(x){b&&(l.widgetNode=b.cloneNode(!0)),h.push(ho(x,qe(x,o),qe(x,c),l,u));for(var C=0;C<x.linked.length;++C)if(x.linked[C].isParent)return;m=Be(h)}),new Ms(h,m)}function wy(n){return n.findMarks(j(n.first,0),n.clipPos(j(n.lastLine())),function(o){return o.parent})}function tE(n,o){for(var c=0;c<o.length;c++){var l=o[c],u=l.find(),h=n.clipPos(u.from),m=n.clipPos(u.to);if(J(h,m)){var b=ho(n,h,m,l.primary,l.primary.type);l.markers.push(b),b.parent=l}}}function nE(n){for(var o=function(l){var u=n[l],h=[u.primary.doc];ci(u.primary.doc,function(x){return h.push(x)});for(var m=0;m<u.markers.length;m++){var b=u.markers[m];_e(h,b.doc)==-1&&(b.parent=null,u.markers.splice(m--,1))}},c=0;c<n.length;c++)o(c)}var rE=0,dn=function(n,o,c,l,u){if(!(this instanceof dn))return new dn(n,o,c,l,u);c==null&&(c=0),Ds.call(this,[new Es([new eo("",null)])]),this.first=c,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=c;var h=j(c,0);this.sel=ai(h),this.history=new jl(null),this.id=++rE,this.modeOption=o,this.lineSep=l,this.direction=u=="rtl"?"rtl":"ltr",this.extend=!1,typeof n=="string"&&(n=this.splitLines(n)),sf(this,{from:h,to:h,text:n}),Vt(this,ai(h),ut)};dn.prototype=K(Ds.prototype,{constructor:dn,iter:function(n,o,c){c?this.iterN(n-this.first,o-n,c):this.iterN(this.first,this.first+this.size,n)},insert:function(n,o){for(var c=0,l=0;l<o.length;++l)c+=o[l].height;this.insertInner(n-this.first,o,c)},remove:function(n,o){this.removeInner(n-this.first,o)},getValue:function(n){var o=Zi(this,this.first,this.first+this.size);return n===!1?o:o.join(n||this.lineSeparator())},setValue:_t(function(n){var o=j(this.first,0),c=this.first+this.size-1;uo(this,{from:o,to:j(c,ke(this,c).text.length),text:this.splitLines(n),origin:"setValue",full:!0},!0),this.cm&&bs(this.cm,0,0),Vt(this,ai(o),ut)}),replaceRange:function(n,o,c,l){o=qe(this,o),c=c?qe(this,c):o,fo(this,n,o,c,l)},getRange:function(n,o,c){var l=qr(this,qe(this,n),qe(this,o));return c===!1?l:c===""?l.join(""):l.join(c||this.lineSeparator())},getLine:function(n){var o=this.getLineHandle(n);return o&&o.text},getLineHandle:function(n){if(E(this,n))return ke(this,n)},getLineNumber:function(n){return rt(n)},getLineHandleVisualStart:function(n){return typeof n=="number"&&(n=ke(this,n)),rr(n)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(n){return qe(this,n)},getCursor:function(n){var o=this.sel.primary(),c;return n==null||n=="head"?c=o.head:n=="anchor"?c=o.anchor:n=="end"||n=="to"||n===!1?c=o.to():c=o.from(),c},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:_t(function(n,o,c){oy(this,qe(this,typeof n=="number"?j(n,o||0):n),null,c)}),setSelection:_t(function(n,o,c){oy(this,qe(this,n),qe(this,o||n),c)}),extendSelection:_t(function(n,o,c){Wl(this,qe(this,n),o&&qe(this,o),c)}),extendSelections:_t(function(n,o){iy(this,Yg(this,n),o)}),extendSelectionsBy:_t(function(n,o){var c=Zt(this.sel.ranges,n);iy(this,Yg(this,c),o)}),setSelections:_t(function(n,o,c){if(n.length){for(var l=[],u=0;u<n.length;u++)l[u]=new it(qe(this,n[u].anchor),qe(this,n[u].head||n[u].anchor));o==null&&(o=Math.min(n.length-1,this.sel.primIndex)),Vt(this,or(this.cm,l,o),c)}}),addSelection:_t(function(n,o,c){var l=this.sel.ranges.slice(0);l.push(new it(qe(this,n),qe(this,o||n))),Vt(this,or(this.cm,l,l.length-1),c)}),getSelection:function(n){for(var o=this.sel.ranges,c,l=0;l<o.length;l++){var u=qr(this,o[l].from(),o[l].to());c=c?c.concat(u):u}return n===!1?c:c.join(n||this.lineSeparator())},getSelections:function(n){for(var o=[],c=this.sel.ranges,l=0;l<c.length;l++){var u=qr(this,c[l].from(),c[l].to());n!==!1&&(u=u.join(n||this.lineSeparator())),o[l]=u}return o},replaceSelection:function(n,o,c){for(var l=[],u=0;u<this.sel.ranges.length;u++)l[u]=n;this.replaceSelections(l,o,c||"+input")},replaceSelections:_t(function(n,o,c){for(var l=[],u=this.sel,h=0;h<u.ranges.length;h++){var m=u.ranges[h];l[h]={from:m.from(),to:m.to(),text:this.splitLines(n[h]),origin:c}}for(var b=o&&o!="end"&&UL(this,l,o),x=l.length-1;x>=0;x--)uo(this,l[x]);b?sy(this,b):this.cm&&so(this.cm)}),undo:_t(function(){Gl(this,"undo")}),redo:_t(function(){Gl(this,"redo")}),undoSelection:_t(function(){Gl(this,"undo",!0)}),redoSelection:_t(function(){Gl(this,"redo",!0)}),setExtending:function(n){this.extend=n},getExtending:function(){return this.extend},historySize:function(){for(var n=this.history,o=0,c=0,l=0;l<n.done.length;l++)n.done[l].ranges||++o;for(var u=0;u<n.undone.length;u++)n.undone[u].ranges||++c;return{undo:o,redo:c}},clearHistory:function(){var n=this;this.history=new jl(this.history),ci(this,function(o){return o.history=n.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(n){return n&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(n){return this.history.generation==(n||this.cleanGeneration)},getHistory:function(){return{done:lo(this.history.done),undone:lo(this.history.undone)}},setHistory:function(n){var o=this.history=new jl(this.history);o.done=lo(n.done.slice(0),null,!0),o.undone=lo(n.undone.slice(0),null,!0)},setGutterMarker:_t(function(n,o,c){return Ls(this,n,"gutter",function(l){var u=l.gutterMarkers||(l.gutterMarkers={});return u[o]=c,!c&&q(u)&&(l.gutterMarkers=null),!0})}),clearGutter:_t(function(n){var o=this;this.iter(function(c){c.gutterMarkers&&c.gutterMarkers[n]&&Ls(o,c,"gutter",function(){return c.gutterMarkers[n]=null,q(c.gutterMarkers)&&(c.gutterMarkers=null),!0})})}),lineInfo:function(n){var o;if(typeof n=="number"){if(!E(this,n)||(o=n,n=ke(this,n),!n))return null}else if(o=rt(n),o==null)return null;return{line:o,handle:n,text:n.text,gutterMarkers:n.gutterMarkers,textClass:n.textClass,bgClass:n.bgClass,wrapClass:n.wrapClass,widgets:n.widgets}},addLineClass:_t(function(n,o,c){return Ls(this,n,o=="gutter"?"gutter":"class",function(l){var u=o=="text"?"textClass":o=="background"?"bgClass":o=="gutter"?"gutterClass":"wrapClass";if(!l[u])l[u]=c;else{if(H(c).test(l[u]))return!1;l[u]+=" "+c}return!0})}),removeLineClass:_t(function(n,o,c){return Ls(this,n,o=="gutter"?"gutter":"class",function(l){var u=o=="text"?"textClass":o=="background"?"bgClass":o=="gutter"?"gutterClass":"wrapClass",h=l[u];if(h)if(c==null)l[u]=null;else{var m=h.match(H(c));if(!m)return!1;var b=m.index+m[0].length;l[u]=h.slice(0,m.index)+(!m.index||b==h.length?"":" ")+h.slice(b)||null}else return!1;return!0})}),addLineWidget:_t(function(n,o,c){return ZL(this,n,o,c)}),removeLineWidget:function(n){n.clear()},markText:function(n,o,c){return ho(this,qe(this,n),qe(this,o),c,c&&c.type||"range")},setBookmark:function(n,o){var c={replacedWith:o&&(o.nodeType==null?o.widget:o),insertLeft:o&&o.insertLeft,clearWhenEmpty:!1,shared:o&&o.shared,handleMouseEvents:o&&o.handleMouseEvents};return n=qe(this,n),ho(this,n,n,c,"bookmark")},findMarksAt:function(n){n=qe(this,n);var o=[],c=ke(this,n.line).markedSpans;if(c)for(var l=0;l<c.length;++l){var u=c[l];(u.from==null||u.from<=n.ch)&&(u.to==null||u.to>=n.ch)&&o.push(u.marker.parent||u.marker)}return o},findMarks:function(n,o,c){n=qe(this,n),o=qe(this,o);var l=[],u=n.line;return this.iter(n.line,o.line+1,function(h){var m=h.markedSpans;if(m)for(var b=0;b<m.length;b++){var x=m[b];!(x.to!=null&&u==n.line&&n.ch>=x.to||x.from==null&&u!=n.line||x.from!=null&&u==o.line&&x.from>=o.ch)&&(!c||c(x.marker))&&l.push(x.marker.parent||x.marker)}++u}),l},getAllMarks:function(){var n=[];return this.iter(function(o){var c=o.markedSpans;if(c)for(var l=0;l<c.length;++l)c[l].from!=null&&n.push(c[l].marker)}),n},posFromIndex:function(n){var o,c=this.first,l=this.lineSeparator().length;return this.iter(function(u){var h=u.text.length+l;if(h>n)return o=n,!0;n-=h,++c}),qe(this,j(c,o))},indexFromPos:function(n){n=qe(this,n);var o=n.ch;if(n.line<this.first||n.ch<0)return 0;var c=this.lineSeparator().length;return this.iter(this.first,n.line,function(l){o+=l.text.length+c}),o},copy:function(n){var o=new dn(Zi(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return o.scrollTop=this.scrollTop,o.scrollLeft=this.scrollLeft,o.sel=this.sel,o.extend=!1,n&&(o.history.undoDepth=this.history.undoDepth,o.setHistory(this.getHistory())),o},linkedDoc:function(n){n||(n={});var o=this.first,c=this.first+this.size;n.from!=null&&n.from>o&&(o=n.from),n.to!=null&&n.to<c&&(c=n.to);var l=new dn(Zi(this,o,c),n.mode||this.modeOption,o,this.lineSep,this.direction);return n.sharedHist&&(l.history=this.history),(this.linked||(this.linked=[])).push({doc:l,sharedHist:n.sharedHist}),l.linked=[{doc:this,isParent:!0,sharedHist:n.sharedHist}],tE(l,wy(this)),l},unlinkDoc:function(n){if(n instanceof bt&&(n=n.doc),this.linked)for(var o=0;o<this.linked.length;++o){var c=this.linked[o];if(c.doc==n){this.linked.splice(o,1),n.unlinkDoc(this),nE(wy(this));break}}if(n.history==this.history){var l=[n.id];ci(n,function(u){return l.push(u.id)},!0),n.history=new jl(null),n.history.done=lo(this.history.done,l),n.history.undone=lo(this.history.undone,l)}},iterLinkedDocs:function(n){ci(this,n)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(n){return this.lineSep?n.split(this.lineSep):On(n)},lineSeparator:function(){return this.lineSep||`
`},setDirection:_t(function(n){n!="rtl"&&(n="ltr"),n!=this.direction&&(this.direction=n,this.iter(function(o){return o.order=null}),this.cm&&$L(this.cm))})}),dn.prototype.eachLine=dn.prototype.iter;var xy=0;function iE(n){var o=this;if(ky(o),!(De(o,n)||jr(o.display,n))){nt(n),f&&(xy=+new Date);var c=Li(o,n,!0),l=n.dataTransfer.files;if(!(!c||o.isReadOnly()))if(l&&l.length&&window.FileReader&&window.File)for(var u=l.length,h=Array(u),m=0,b=function(){++m==u&&Ft(o,function(){c=qe(o.doc,c);var W={from:c,to:c,text:o.doc.splitLines(h.filter(function(Z){return Z!=null}).join(o.doc.lineSeparator())),origin:"paste"};uo(o.doc,W),sy(o.doc,ai(qe(o.doc,c),qe(o.doc,li(W))))})()},x=function(W,Z){if(o.options.allowDropFileTypes&&_e(o.options.allowDropFileTypes,W.type)==-1){b();return}var ne=new FileReader;ne.onerror=function(){return b()},ne.onload=function(){var fe=ne.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(fe)){b();return}h[Z]=fe,b()},ne.readAsText(W)},C=0;C<l.length;C++)x(l[C],C);else{if(o.state.draggingText&&o.doc.sel.contains(c)>-1){o.state.draggingText(n),setTimeout(function(){return o.display.input.focus()},20);return}try{var P=n.dataTransfer.getData("Text");if(P){var B;if(o.state.draggingText&&!o.state.draggingText.copy&&(B=o.listSelections()),Ul(o.doc,ai(c,c)),B)for(var G=0;G<B.length;++G)fo(o.doc,"",B[G].anchor,B[G].head,"drag");o.replaceSelection(P,"around","paste"),o.display.input.focus()}}catch{}}}}function oE(n,o){if(f&&(!n.state.draggingText||+new Date-xy<100)){Lt(o);return}if(!(De(n,o)||jr(n.display,o))&&(o.dataTransfer.setData("Text",n.getSelection()),o.dataTransfer.effectAllowed="copyMove",o.dataTransfer.setDragImage&&!k)){var c=D("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",w&&(c.width=c.height=1,n.display.wrapper.appendChild(c),c._top=c.offsetTop),o.dataTransfer.setDragImage(c,0,0),w&&c.parentNode.removeChild(c)}}function sE(n,o){var c=Li(n,o);if(c){var l=document.createDocumentFragment();Gu(n,c,l),n.display.dragCursor||(n.display.dragCursor=D("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),n.display.lineSpace.insertBefore(n.display.dragCursor,n.display.cursorDiv)),ie(n.display.dragCursor,l)}}function ky(n){n.display.dragCursor&&(n.display.lineSpace.removeChild(n.display.dragCursor),n.display.dragCursor=null)}function Cy(n){if(document.getElementsByClassName){for(var o=document.getElementsByClassName("CodeMirror"),c=[],l=0;l<o.length;l++){var u=o[l].CodeMirror;u&&c.push(u)}c.length&&c[0].operation(function(){for(var h=0;h<c.length;h++)n(c[h])})}}var Sy=!1;function aE(){Sy||(lE(),Sy=!0)}function lE(){var n;se(window,"resize",function(){n==null&&(n=setTimeout(function(){n=null,Cy(cE)},100))}),se(window,"blur",function(){return Cy(oo)})}function cE(n){var o=n.display;o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.scrollbarsClipped=!1,n.setSize()}for(var fi={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Os=0;Os<10;Os++)fi[Os+48]=fi[Os+96]=String(Os);for(var Vl=65;Vl<=90;Vl++)fi[Vl]=String.fromCharCode(Vl);for(var Ps=1;Ps<=12;Ps++)fi[Ps+111]=fi[Ps+63235]="F"+Ps;var Wr={};Wr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Wr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Wr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Wr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Wr.default=M?Wr.macDefault:Wr.pcDefault;function uE(n){var o=n.split(/-(?!$)/);n=o[o.length-1];for(var c,l,u,h,m=0;m<o.length-1;m++){var b=o[m];if(/^(cmd|meta|m)$/i.test(b))h=!0;else if(/^a(lt)?$/i.test(b))c=!0;else if(/^(c|ctrl|control)$/i.test(b))l=!0;else if(/^s(hift)?$/i.test(b))u=!0;else throw new Error("Unrecognized modifier name: "+b)}return c&&(n="Alt-"+n),l&&(n="Ctrl-"+n),h&&(n="Cmd-"+n),u&&(n="Shift-"+n),n}function fE(n){var o={};for(var c in n)if(n.hasOwnProperty(c)){var l=n[c];if(/^(name|fallthrough|(de|at)tach)$/.test(c))continue;if(l=="..."){delete n[c];continue}for(var u=Zt(c.split(" "),uE),h=0;h<u.length;h++){var m=void 0,b=void 0;h==u.length-1?(b=u.join(" "),m=l):(b=u.slice(0,h+1).join(" "),m="...");var x=o[b];if(!x)o[b]=m;else if(x!=m)throw new Error("Inconsistent bindings for "+b)}delete n[c]}for(var C in o)n[C]=o[C];return n}function po(n,o,c,l){o=Kl(o);var u=o.call?o.call(n,l):o[n];if(u===!1)return"nothing";if(u==="...")return"multi";if(u!=null&&c(u))return"handled";if(o.fallthrough){if(Object.prototype.toString.call(o.fallthrough)!="[object Array]")return po(n,o.fallthrough,c,l);for(var h=0;h<o.fallthrough.length;h++){var m=po(n,o.fallthrough[h],c,l);if(m)return m}}}function Ay(n){var o=typeof n=="string"?n:fi[n.keyCode];return o=="Ctrl"||o=="Alt"||o=="Shift"||o=="Mod"}function Ty(n,o,c){var l=n;return o.altKey&&l!="Alt"&&(n="Alt-"+n),(_?o.metaKey:o.ctrlKey)&&l!="Ctrl"&&(n="Ctrl-"+n),(_?o.ctrlKey:o.metaKey)&&l!="Mod"&&(n="Cmd-"+n),!c&&o.shiftKey&&l!="Shift"&&(n="Shift-"+n),n}function Ly(n,o){if(w&&n.keyCode==34&&n.char)return!1;var c=fi[n.keyCode];return c==null||n.altGraphKey?!1:(n.keyCode==3&&n.code&&(c=n.code),Ty(c,n,o))}function Kl(n){return typeof n=="string"?Wr[n]:n}function go(n,o){for(var c=n.doc.sel.ranges,l=[],u=0;u<c.length;u++){for(var h=o(c[u]);l.length&&J(h.from,Be(l).to)<=0;){var m=l.pop();if(J(m.from,h.from)<0){h.from=m.from;break}}l.push(h)}Sn(n,function(){for(var b=l.length-1;b>=0;b--)fo(n.doc,"",l[b].from,l[b].to,"+delete");so(n)})}function uf(n,o,c){var l=Y(n.text,o+c,c);return l<0||l>n.text.length?null:l}function ff(n,o,c){var l=uf(n,o.ch,c);return l==null?null:new j(o.line,l,c<0?"after":"before")}function df(n,o,c,l,u){if(n){o.doc.direction=="rtl"&&(u=-u);var h=ve(c,o.doc.direction);if(h){var m=u<0?Be(h):h[0],b=u<0==(m.level==1),x=b?"after":"before",C;if(m.level>0||o.doc.direction=="rtl"){var P=no(o,c);C=u<0?c.text.length-1:0;var B=kr(o,P,C).top;C=oe(function(G){return kr(o,P,G).top==B},u<0==(m.level==1)?m.from:m.to-1,C),x=="before"&&(C=uf(c,C,1))}else C=u<0?m.to:m.from;return new j(l,C,x)}}return new j(l,u<0?c.text.length:0,u<0?"before":"after")}function dE(n,o,c,l){var u=ve(o,n.doc.direction);if(!u)return ff(o,c,l);c.ch>=o.text.length?(c.ch=o.text.length,c.sticky="before"):c.ch<=0&&(c.ch=0,c.sticky="after");var h=ge(u,c.ch,c.sticky),m=u[h];if(n.doc.direction=="ltr"&&m.level%2==0&&(l>0?m.to>c.ch:m.from<c.ch))return ff(o,c,l);var b=function(he,me){return uf(o,he instanceof j?he.ch:he,me)},x,C=function(he){return n.options.lineWrapping?(x=x||no(n,o),Om(n,o,x,he)):{begin:0,end:o.text.length}},P=C(c.sticky=="before"?b(c,-1):c.ch);if(n.doc.direction=="rtl"||m.level==1){var B=m.level==1==l<0,G=b(c,B?1:-1);if(G!=null&&(B?G<=m.to&&G<=P.end:G>=m.from&&G>=P.begin)){var W=B?"before":"after";return new j(c.line,G,W)}}var Z=function(he,me,pe){for(var ye=function(ft,jt){return jt?new j(c.line,b(ft,1),"before"):new j(c.line,ft,"after")};he>=0&&he<u.length;he+=me){var Ne=u[he],Ee=me>0==(Ne.level!=1),Ge=Ee?pe.begin:b(pe.end,-1);if(Ne.from<=Ge&&Ge<Ne.to||(Ge=Ee?Ne.from:b(Ne.to,-1),pe.begin<=Ge&&Ge<pe.end))return ye(Ge,Ee)}},ne=Z(h+l,l,P);if(ne)return ne;var fe=l>0?P.end:b(P.begin,-1);return fe!=null&&!(l>0&&fe==o.text.length)&&(ne=Z(l>0?0:u.length-1,l,C(fe)),ne)?ne:null}var Is={selectAll:fy,singleSelection:function(n){return n.setSelection(n.getCursor("anchor"),n.getCursor("head"),ut)},killLine:function(n){return go(n,function(o){if(o.empty()){var c=ke(n.doc,o.head.line).text.length;return o.head.ch==c&&o.head.line<n.lastLine()?{from:o.head,to:j(o.head.line+1,0)}:{from:o.head,to:j(o.head.line,c)}}else return{from:o.from(),to:o.to()}})},deleteLine:function(n){return go(n,function(o){return{from:j(o.from().line,0),to:qe(n.doc,j(o.to().line+1,0))}})},delLineLeft:function(n){return go(n,function(o){return{from:j(o.from().line,0),to:o.from()}})},delWrappedLineLeft:function(n){return go(n,function(o){var c=n.charCoords(o.head,"div").top+5,l=n.coordsChar({left:0,top:c},"div");return{from:l,to:o.from()}})},delWrappedLineRight:function(n){return go(n,function(o){var c=n.charCoords(o.head,"div").top+5,l=n.coordsChar({left:n.display.lineDiv.offsetWidth+100,top:c},"div");return{from:o.from(),to:l}})},undo:function(n){return n.undo()},redo:function(n){return n.redo()},undoSelection:function(n){return n.undoSelection()},redoSelection:function(n){return n.redoSelection()},goDocStart:function(n){return n.extendSelection(j(n.firstLine(),0))},goDocEnd:function(n){return n.extendSelection(j(n.lastLine()))},goLineStart:function(n){return n.extendSelectionsBy(function(o){return Ey(n,o.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(n){return n.extendSelectionsBy(function(o){return Dy(n,o.head)},{origin:"+move",bias:1})},goLineEnd:function(n){return n.extendSelectionsBy(function(o){return hE(n,o.head.line)},{origin:"+move",bias:-1})},goLineRight:function(n){return n.extendSelectionsBy(function(o){var c=n.cursorCoords(o.head,"div").top+5;return n.coordsChar({left:n.display.lineDiv.offsetWidth+100,top:c},"div")},Nn)},goLineLeft:function(n){return n.extendSelectionsBy(function(o){var c=n.cursorCoords(o.head,"div").top+5;return n.coordsChar({left:0,top:c},"div")},Nn)},goLineLeftSmart:function(n){return n.extendSelectionsBy(function(o){var c=n.cursorCoords(o.head,"div").top+5,l=n.coordsChar({left:0,top:c},"div");return l.ch<n.getLine(l.line).search(/\S/)?Dy(n,o.head):l},Nn)},goLineUp:function(n){return n.moveV(-1,"line")},goLineDown:function(n){return n.moveV(1,"line")},goPageUp:function(n){return n.moveV(-1,"page")},goPageDown:function(n){return n.moveV(1,"page")},goCharLeft:function(n){return n.moveH(-1,"char")},goCharRight:function(n){return n.moveH(1,"char")},goColumnLeft:function(n){return n.moveH(-1,"column")},goColumnRight:function(n){return n.moveH(1,"column")},goWordLeft:function(n){return n.moveH(-1,"word")},goGroupRight:function(n){return n.moveH(1,"group")},goGroupLeft:function(n){return n.moveH(-1,"group")},goWordRight:function(n){return n.moveH(1,"word")},delCharBefore:function(n){return n.deleteH(-1,"codepoint")},delCharAfter:function(n){return n.deleteH(1,"char")},delWordBefore:function(n){return n.deleteH(-1,"word")},delWordAfter:function(n){return n.deleteH(1,"word")},delGroupBefore:function(n){return n.deleteH(-1,"group")},delGroupAfter:function(n){return n.deleteH(1,"group")},indentAuto:function(n){return n.indentSelection("smart")},indentMore:function(n){return n.indentSelection("add")},indentLess:function(n){return n.indentSelection("subtract")},insertTab:function(n){return n.replaceSelection("	")},insertSoftTab:function(n){for(var o=[],c=n.listSelections(),l=n.options.tabSize,u=0;u<c.length;u++){var h=c[u].from(),m=Te(n.getLine(h.line),h.ch,l);o.push(kt(l-m%l))}n.replaceSelections(o)},defaultTab:function(n){n.somethingSelected()?n.indentSelection("add"):n.execCommand("insertTab")},transposeChars:function(n){return Sn(n,function(){for(var o=n.listSelections(),c=[],l=0;l<o.length;l++)if(o[l].empty()){var u=o[l].head,h=ke(n.doc,u.line).text;if(h){if(u.ch==h.length&&(u=new j(u.line,u.ch-1)),u.ch>0)u=new j(u.line,u.ch+1),n.replaceRange(h.charAt(u.ch-1)+h.charAt(u.ch-2),j(u.line,u.ch-2),u,"+transpose");else if(u.line>n.doc.first){var m=ke(n.doc,u.line-1).text;m&&(u=new j(u.line,1),n.replaceRange(h.charAt(0)+n.doc.lineSeparator()+m.charAt(m.length-1),j(u.line-1,m.length-1),u,"+transpose"))}}c.push(new it(u,u))}n.setSelections(c)})},newlineAndIndent:function(n){return Sn(n,function(){for(var o=n.listSelections(),c=o.length-1;c>=0;c--)n.replaceRange(n.doc.lineSeparator(),o[c].anchor,o[c].head,"+input");o=n.listSelections();for(var l=0;l<o.length;l++)n.indentLine(o[l].from().line,null,!0);so(n)})},openLine:function(n){return n.replaceSelection(`
`,"start")},toggleOverwrite:function(n){return n.toggleOverwrite()}};function Ey(n,o){var c=ke(n.doc,o),l=rr(c);return l!=c&&(o=rt(l)),df(!0,n,l,o,1)}function hE(n,o){var c=ke(n.doc,o),l=QT(c);return l!=c&&(o=rt(l)),df(!0,n,c,o,-1)}function Dy(n,o){var c=Ey(n,o.line),l=ke(n.doc,c.line),u=ve(l,n.doc.direction);if(!u||u[0].level==0){var h=Math.max(c.ch,l.text.search(/\S/)),m=o.line==c.line&&o.ch<=h&&o.ch;return j(c.line,m?0:h,c.sticky)}return c}function Yl(n,o,c){if(typeof o=="string"&&(o=Is[o],!o))return!1;n.display.input.ensurePolled();var l=n.display.shift,u=!1;try{n.isReadOnly()&&(n.state.suppressEdits=!0),c&&(n.display.shift=!1),u=o(n)!=ze}finally{n.display.shift=l,n.state.suppressEdits=!1}return u}function pE(n,o,c){for(var l=0;l<n.state.keyMaps.length;l++){var u=po(o,n.state.keyMaps[l],c,n);if(u)return u}return n.options.extraKeys&&po(o,n.options.extraKeys,c,n)||po(o,n.options.keyMap,c,n)}var gE=new Fe;function zs(n,o,c,l){var u=n.state.keySeq;if(u){if(Ay(o))return"handled";if(/\'$/.test(o)?n.state.keySeq=null:gE.set(50,function(){n.state.keySeq==u&&(n.state.keySeq=null,n.display.input.reset())}),Ny(n,u+" "+o,c,l))return!0}return Ny(n,o,c,l)}function Ny(n,o,c,l){var u=pE(n,o,l);return u=="multi"&&(n.state.keySeq=o),u=="handled"&&qt(n,"keyHandled",n,o,c),(u=="handled"||u=="multi")&&(nt(c),Vu(n)),!!u}function My(n,o){var c=Ly(o,!0);return c?o.shiftKey&&!n.state.keySeq?zs(n,"Shift-"+c,o,function(l){return Yl(n,l,!0)})||zs(n,c,o,function(l){if(typeof l=="string"?/^go[A-Z]/.test(l):l.motion)return Yl(n,l)}):zs(n,c,o,function(l){return Yl(n,l)}):!1}function mE(n,o,c){return zs(n,"'"+c+"'",o,function(l){return Yl(n,l,!0)})}var hf=null;function Oy(n){var o=this;if(!(n.target&&n.target!=o.display.input.getField())&&(o.curOp.focus=Je(wt(o)),!De(o,n))){f&&d<11&&n.keyCode==27&&(n.returnValue=!1);var c=n.keyCode;o.display.shift=c==16||n.shiftKey;var l=My(o,n);w&&(hf=l?c:null,!l&&c==88&&!en&&(M?n.metaKey:n.ctrlKey)&&o.replaceSelection("",null,"cut")),r&&!M&&!l&&c==46&&n.shiftKey&&!n.ctrlKey&&document.execCommand&&document.execCommand("cut"),c==18&&!/\bCodeMirror-crosshair\b/.test(o.display.lineDiv.className)&&yE(o)}}function yE(n){var o=n.display.lineDiv;ot(o,"CodeMirror-crosshair");function c(l){(l.keyCode==18||!l.altKey)&&(ce(o,"CodeMirror-crosshair"),Qe(document,"keyup",c),Qe(document,"mouseover",c))}se(document,"keyup",c),se(document,"mouseover",c)}function Py(n){n.keyCode==16&&(this.doc.sel.shift=!1),De(this,n)}function Iy(n){var o=this;if(!(n.target&&n.target!=o.display.input.getField())&&!(jr(o.display,n)||De(o,n)||n.ctrlKey&&!n.altKey||M&&n.metaKey)){var c=n.keyCode,l=n.charCode;if(w&&c==hf){hf=null,nt(n);return}if(!(w&&(!n.which||n.which<10)&&My(o,n))){var u=String.fromCharCode(l??c);u!="\b"&&(mE(o,n,u)||o.display.input.onKeyPress(n))}}}var vE=400,pf=function(n,o,c){this.time=n,this.pos=o,this.button=c};pf.prototype.compare=function(n,o,c){return this.time+vE>n&&J(o,this.pos)==0&&c==this.button};var Bs,Rs;function bE(n,o){var c=+new Date;return Rs&&Rs.compare(c,n,o)?(Bs=Rs=null,"triple"):Bs&&Bs.compare(c,n,o)?(Rs=new pf(c,n,o),Bs=null,"double"):(Bs=new pf(c,n,o),Rs=null,"single")}function zy(n){var o=this,c=o.display;if(!(De(o,n)||c.activeTouch&&c.input.supportsTouch())){if(c.input.ensurePolled(),c.shift=n.shiftKey,jr(c,n)){g||(c.scroller.draggable=!1,setTimeout(function(){return c.scroller.draggable=!0},100));return}if(!gf(o,n)){var l=Li(o,n),u=ln(n),h=l?bE(l,u):"single";Xt(o).focus(),u==1&&o.state.selectingText&&o.state.selectingText(n),!(l&&wE(o,u,l,h,n))&&(u==1?l?kE(o,l,h,n):ht(n)==c.scroller&&nt(n):u==2?(l&&Wl(o.doc,l),setTimeout(function(){return c.input.focus()},20)):u==3&&(U?o.display.input.onContextMenu(n):Ku(o)))}}}function wE(n,o,c,l,u){var h="Click";return l=="double"?h="Double"+h:l=="triple"&&(h="Triple"+h),h=(o==1?"Left":o==2?"Middle":"Right")+h,zs(n,Ty(h,u),u,function(m){if(typeof m=="string"&&(m=Is[m]),!m)return!1;var b=!1;try{n.isReadOnly()&&(n.state.suppressEdits=!0),b=m(n,c)!=ze}finally{n.state.suppressEdits=!1}return b})}function xE(n,o,c){var l=n.getOption("configureMouse"),u=l?l(n,o,c):{};if(u.unit==null){var h=O?c.shiftKey&&c.metaKey:c.altKey;u.unit=h?"rectangle":o=="single"?"char":o=="double"?"word":"line"}return(u.extend==null||n.doc.extend)&&(u.extend=n.doc.extend||c.shiftKey),u.addNew==null&&(u.addNew=M?c.metaKey:c.ctrlKey),u.moveOnDrag==null&&(u.moveOnDrag=!(M?c.altKey:c.ctrlKey)),u}function kE(n,o,c,l){f?setTimeout(xt(Bm,n),0):n.curOp.focus=Je(wt(n));var u=xE(n,c,l),h=n.doc.sel,m;n.options.dragDrop&&Mn&&!n.isReadOnly()&&c=="single"&&(m=h.contains(o))>-1&&(J((m=h.ranges[m]).from(),o)<0||o.xRel>0)&&(J(m.to(),o)>0||o.xRel<0)?CE(n,l,o,u):SE(n,l,o,u)}function CE(n,o,c,l){var u=n.display,h=!1,m=Ft(n,function(C){g&&(u.scroller.draggable=!1),n.state.draggingText=!1,n.state.delayingBlurEvent&&(n.hasFocus()?n.state.delayingBlurEvent=!1:Ku(n)),Qe(u.wrapper.ownerDocument,"mouseup",m),Qe(u.wrapper.ownerDocument,"mousemove",b),Qe(u.scroller,"dragstart",x),Qe(u.scroller,"drop",m),h||(nt(C),l.addNew||Wl(n.doc,c,null,null,l.extend),g&&!k||f&&d==9?setTimeout(function(){u.wrapper.ownerDocument.body.focus({preventScroll:!0}),u.input.focus()},20):u.input.focus())}),b=function(C){h=h||Math.abs(o.clientX-C.clientX)+Math.abs(o.clientY-C.clientY)>=10},x=function(){return h=!0};g&&(u.scroller.draggable=!0),n.state.draggingText=m,m.copy=!l.moveOnDrag,se(u.wrapper.ownerDocument,"mouseup",m),se(u.wrapper.ownerDocument,"mousemove",b),se(u.scroller,"dragstart",x),se(u.scroller,"drop",m),n.state.delayingBlurEvent=!0,setTimeout(function(){return u.input.focus()},20),u.scroller.dragDrop&&u.scroller.dragDrop()}function By(n,o,c){if(c=="char")return new it(o,o);if(c=="word")return n.findWordAt(o);if(c=="line")return new it(j(o.line,0),qe(n.doc,j(o.line+1,0)));var l=c(n,o);return new it(l.from,l.to)}function SE(n,o,c,l){f&&Ku(n);var u=n.display,h=n.doc;nt(o);var m,b,x=h.sel,C=x.ranges;if(l.addNew&&!l.extend?(b=h.sel.contains(c),b>-1?m=C[b]:m=new it(c,c)):(m=h.sel.primary(),b=h.sel.primIndex),l.unit=="rectangle")l.addNew||(m=new it(c,c)),c=Li(n,o,!0,!0),b=-1;else{var P=By(n,c,l.unit);l.extend?m=lf(m,P.anchor,P.head,l.extend):m=P}l.addNew?b==-1?(b=C.length,Vt(h,or(n,C.concat([m]),b),{scroll:!1,origin:"*mouse"})):C.length>1&&C[b].empty()&&l.unit=="char"&&!l.extend?(Vt(h,or(n,C.slice(0,b).concat(C.slice(b+1)),0),{scroll:!1,origin:"*mouse"}),x=h.sel):cf(h,b,m,Hn):(b=0,Vt(h,new In([m],0),Hn),x=h.sel);var B=c;function G(pe){if(J(B,pe)!=0)if(B=pe,l.unit=="rectangle"){for(var ye=[],Ne=n.options.tabSize,Ee=Te(ke(h,c.line).text,c.ch,Ne),Ge=Te(ke(h,pe.line).text,pe.ch,Ne),ft=Math.min(Ee,Ge),jt=Math.max(Ee,Ge),Ct=Math.min(c.line,pe.line),An=Math.min(n.lastLine(),Math.max(c.line,pe.line));Ct<=An;Ct++){var hn=ke(h,Ct).text,Mt=Gt(hn,ft,Ne);ft==jt?ye.push(new it(j(Ct,Mt),j(Ct,Mt))):hn.length>Mt&&ye.push(new it(j(Ct,Mt),j(Ct,Gt(hn,jt,Ne))))}ye.length||ye.push(new it(c,c)),Vt(h,or(n,x.ranges.slice(0,b).concat(ye),b),{origin:"*mouse",scroll:!1}),n.scrollIntoView(pe)}else{var pn=m,Ut=By(n,pe,l.unit),Bt=pn.anchor,Ot;J(Ut.anchor,Bt)>0?(Ot=Ut.head,Bt=zt(pn.from(),Ut.anchor)):(Ot=Ut.anchor,Bt=et(pn.to(),Ut.head));var Tt=x.ranges.slice(0);Tt[b]=AE(n,new it(qe(h,Bt),Ot)),Vt(h,or(n,Tt,b),Hn)}}var W=u.wrapper.getBoundingClientRect(),Z=0;function ne(pe){var ye=++Z,Ne=Li(n,pe,!0,l.unit=="rectangle");if(Ne)if(J(Ne,B)!=0){n.curOp.focus=Je(wt(n)),G(Ne);var Ee=Rl(u,h);(Ne.line>=Ee.to||Ne.line<Ee.from)&&setTimeout(Ft(n,function(){Z==ye&&ne(pe)}),150)}else{var Ge=pe.clientY<W.top?-20:pe.clientY>W.bottom?20:0;Ge&&setTimeout(Ft(n,function(){Z==ye&&(u.scroller.scrollTop+=Ge,ne(pe))}),50)}}function fe(pe){n.state.selectingText=!1,Z=1/0,pe&&(nt(pe),u.input.focus()),Qe(u.wrapper.ownerDocument,"mousemove",he),Qe(u.wrapper.ownerDocument,"mouseup",me),h.history.lastSelOrigin=null}var he=Ft(n,function(pe){pe.buttons===0||!ln(pe)?fe(pe):ne(pe)}),me=Ft(n,fe);n.state.selectingText=me,se(u.wrapper.ownerDocument,"mousemove",he),se(u.wrapper.ownerDocument,"mouseup",me)}function AE(n,o){var c=o.anchor,l=o.head,u=ke(n.doc,c.line);if(J(c,l)==0&&c.sticky==l.sticky)return o;var h=ve(u);if(!h)return o;var m=ge(h,c.ch,c.sticky),b=h[m];if(b.from!=c.ch&&b.to!=c.ch)return o;var x=m+(b.from==c.ch==(b.level!=1)?0:1);if(x==0||x==h.length)return o;var C;if(l.line!=c.line)C=(l.line-c.line)*(n.doc.direction=="ltr"?1:-1)>0;else{var P=ge(h,l.ch,l.sticky),B=P-m||(l.ch-c.ch)*(b.level==1?-1:1);P==x-1||P==x?C=B<0:C=B>0}var G=h[x+(C?-1:0)],W=C==(G.level==1),Z=W?G.from:G.to,ne=W?"after":"before";return c.ch==Z&&c.sticky==ne?o:new it(new j(c.line,Z,ne),l)}function Ry(n,o,c,l){var u,h;if(o.touches)u=o.touches[0].clientX,h=o.touches[0].clientY;else try{u=o.clientX,h=o.clientY}catch{return!1}if(u>=Math.floor(n.display.gutters.getBoundingClientRect().right))return!1;l&&nt(o);var m=n.display,b=m.lineDiv.getBoundingClientRect();if(h>b.bottom||!st(n,c))return an(o);h-=b.top-m.viewOffset;for(var x=0;x<n.display.gutterSpecs.length;++x){var C=m.gutters.childNodes[x];if(C&&C.getBoundingClientRect().right>=u){var P=br(n.doc,h),B=n.display.gutterSpecs[x];return He(n,c,n,P,B.className,o),an(o)}}}function gf(n,o){return Ry(n,o,"gutterClick",!0)}function qy(n,o){jr(n.display,o)||TE(n,o)||De(n,o,"contextmenu")||U||n.display.input.onContextMenu(o)}function TE(n,o){return st(n,"gutterContextMenu")?Ry(n,o,"gutterContextMenu",!1):!1}function Fy(n){n.display.wrapper.className=n.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+n.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ys(n)}var mo={toString:function(){return"CodeMirror.Init"}},_y={},Ql={};function LE(n){var o=n.optionHandlers;function c(l,u,h,m){n.defaults[l]=u,h&&(o[l]=m?function(b,x,C){C!=mo&&h(b,x,C)}:h)}n.defineOption=c,n.Init=mo,c("value","",function(l,u){return l.setValue(u)},!0),c("mode",null,function(l,u){l.doc.modeOption=u,of(l)},!0),c("indentUnit",2,of,!0),c("indentWithTabs",!1),c("smartIndent",!0),c("tabSize",4,function(l){As(l),ys(l),fn(l)},!0),c("lineSeparator",null,function(l,u){if(l.doc.lineSep=u,!!u){var h=[],m=l.doc.first;l.doc.iter(function(x){for(var C=0;;){var P=x.text.indexOf(u,C);if(P==-1)break;C=P+u.length,h.push(j(m,P))}m++});for(var b=h.length-1;b>=0;b--)fo(l.doc,u,h[b],j(h[b].line,h[b].ch+u.length))}}),c("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(l,u,h){l.state.specialChars=new RegExp(u.source+(u.test("	")?"":"|	"),"g"),h!=mo&&l.refresh()}),c("specialCharPlaceholder",nL,function(l){return l.refresh()},!0),c("electricChars",!0),c("inputStyle",S?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),c("spellcheck",!1,function(l,u){return l.getInputField().spellcheck=u},!0),c("autocorrect",!1,function(l,u){return l.getInputField().autocorrect=u},!0),c("autocapitalize",!1,function(l,u){return l.getInputField().autocapitalize=u},!0),c("rtlMoveVisually",!z),c("wholeLineUpdateBefore",!0),c("theme","default",function(l){Fy(l),Ss(l)},!0),c("keyMap","default",function(l,u,h){var m=Kl(u),b=h!=mo&&Kl(h);b&&b.detach&&b.detach(l,m),m.attach&&m.attach(l,b||null)}),c("extraKeys",null),c("configureMouse",null),c("lineWrapping",!1,DE,!0),c("gutters",[],function(l,u){l.display.gutterSpecs=nf(u,l.options.lineNumbers),Ss(l)},!0),c("fixedGutter",!0,function(l,u){l.display.gutters.style.left=u?Uu(l.display)+"px":"0",l.refresh()},!0),c("coverGutterNextToScrollbar",!1,function(l){return ao(l)},!0),c("scrollbarStyle","native",function(l){Hm(l),ao(l),l.display.scrollbars.setScrollTop(l.doc.scrollTop),l.display.scrollbars.setScrollLeft(l.doc.scrollLeft)},!0),c("lineNumbers",!1,function(l,u){l.display.gutterSpecs=nf(l.options.gutters,u),Ss(l)},!0),c("firstLineNumber",1,Ss,!0),c("lineNumberFormatter",function(l){return l},Ss,!0),c("showCursorWhenSelecting",!1,vs,!0),c("resetSelectionOnContextMenu",!0),c("lineWiseCopyCut",!0),c("pasteLinesPerSelection",!0),c("selectionsMayTouch",!1),c("readOnly",!1,function(l,u){u=="nocursor"&&(oo(l),l.display.input.blur()),l.display.input.readOnlyChanged(u)}),c("screenReaderLabel",null,function(l,u){u=u===""?null:u,l.display.input.screenReaderLabelChanged(u)}),c("disableInput",!1,function(l,u){u||l.display.input.reset()},!0),c("dragDrop",!0,EE),c("allowDropFileTypes",null),c("cursorBlinkRate",530),c("cursorScrollMargin",0),c("cursorHeight",1,vs,!0),c("singleCursorHeightPerLine",!0,vs,!0),c("workTime",100),c("workDelay",100),c("flattenSpans",!0,As,!0),c("addModeClass",!1,As,!0),c("pollInterval",100),c("undoDepth",200,function(l,u){return l.doc.history.undoDepth=u}),c("historyEventDelay",1250),c("viewportMargin",10,function(l){return l.refresh()},!0),c("maxHighlightLength",1e4,As,!0),c("moveInputWithCursor",!0,function(l,u){u||l.display.input.resetPosition()}),c("tabindex",null,function(l,u){return l.display.input.getField().tabIndex=u||""}),c("autofocus",null),c("direction","ltr",function(l,u){return l.doc.setDirection(u)},!0),c("phrases",null)}function EE(n,o,c){var l=c&&c!=mo;if(!o!=!l){var u=n.display.dragFunctions,h=o?se:Qe;h(n.display.scroller,"dragstart",u.start),h(n.display.scroller,"dragenter",u.enter),h(n.display.scroller,"dragover",u.over),h(n.display.scroller,"dragleave",u.leave),h(n.display.scroller,"drop",u.drop)}}function DE(n){n.options.lineWrapping?(ot(n.display.wrapper,"CodeMirror-wrap"),n.display.sizer.style.minWidth="",n.display.sizerWidth=null):(ce(n.display.wrapper,"CodeMirror-wrap"),Iu(n)),$u(n),fn(n),ys(n),setTimeout(function(){return ao(n)},100)}function bt(n,o){var c=this;if(!(this instanceof bt))return new bt(n,o);this.options=o=o?Pe(o):{},Pe(_y,o,!1);var l=o.value;typeof l=="string"?l=new dn(l,o.mode,null,o.lineSeparator,o.direction):o.mode&&(l.modeOption=o.mode),this.doc=l;var u=new bt.inputStyles[o.inputStyle](this),h=this.display=new HL(n,l,u,o);h.wrapper.CodeMirror=this,Fy(this),o.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Hm(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Fe,keySeq:null,specialChars:null},o.autofocus&&!S&&h.input.focus(),f&&d<11&&setTimeout(function(){return c.display.input.reset(!0)},20),NE(this),aE(),Mi(this),this.curOp.forceUpdate=!0,Xm(this,l),o.autofocus&&!S||this.hasFocus()?setTimeout(function(){c.hasFocus()&&!c.state.focused&&Yu(c)},20):oo(this);for(var m in Ql)Ql.hasOwnProperty(m)&&Ql[m](this,o[m],mo);$m(this),o.finishInit&&o.finishInit(this);for(var b=0;b<mf.length;++b)mf[b](this);Oi(this),g&&o.lineWrapping&&getComputedStyle(h.lineDiv).textRendering=="optimizelegibility"&&(h.lineDiv.style.textRendering="auto")}bt.defaults=_y,bt.optionHandlers=Ql;function NE(n){var o=n.display;se(o.scroller,"mousedown",Ft(n,zy)),f&&d<11?se(o.scroller,"dblclick",Ft(n,function(x){if(!De(n,x)){var C=Li(n,x);if(!(!C||gf(n,x)||jr(n.display,x))){nt(x);var P=n.findWordAt(C);Wl(n.doc,P.anchor,P.head)}}})):se(o.scroller,"dblclick",function(x){return De(n,x)||nt(x)}),se(o.scroller,"contextmenu",function(x){return qy(n,x)}),se(o.input.getField(),"contextmenu",function(x){o.scroller.contains(x.target)||qy(n,x)});var c,l={end:0};function u(){o.activeTouch&&(c=setTimeout(function(){return o.activeTouch=null},1e3),l=o.activeTouch,l.end=+new Date)}function h(x){if(x.touches.length!=1)return!1;var C=x.touches[0];return C.radiusX<=1&&C.radiusY<=1}function m(x,C){if(C.left==null)return!0;var P=C.left-x.left,B=C.top-x.top;return P*P+B*B>20*20}se(o.scroller,"touchstart",function(x){if(!De(n,x)&&!h(x)&&!gf(n,x)){o.input.ensurePolled(),clearTimeout(c);var C=+new Date;o.activeTouch={start:C,moved:!1,prev:C-l.end<=300?l:null},x.touches.length==1&&(o.activeTouch.left=x.touches[0].pageX,o.activeTouch.top=x.touches[0].pageY)}}),se(o.scroller,"touchmove",function(){o.activeTouch&&(o.activeTouch.moved=!0)}),se(o.scroller,"touchend",function(x){var C=o.activeTouch;if(C&&!jr(o,x)&&C.left!=null&&!C.moved&&new Date-C.start<300){var P=n.coordsChar(o.activeTouch,"page"),B;!C.prev||m(C,C.prev)?B=new it(P,P):!C.prev.prev||m(C,C.prev.prev)?B=n.findWordAt(P):B=new it(j(P.line,0),qe(n.doc,j(P.line+1,0))),n.setSelection(B.anchor,B.head),n.focus(),nt(x)}u()}),se(o.scroller,"touchcancel",u),se(o.scroller,"scroll",function(){o.scroller.clientHeight&&(ws(n,o.scroller.scrollTop),Di(n,o.scroller.scrollLeft,!0),He(n,"scroll",n))}),se(o.scroller,"mousewheel",function(x){return Km(n,x)}),se(o.scroller,"DOMMouseScroll",function(x){return Km(n,x)}),se(o.wrapper,"scroll",function(){return o.wrapper.scrollTop=o.wrapper.scrollLeft=0}),o.dragFunctions={enter:function(x){De(n,x)||Lt(x)},over:function(x){De(n,x)||(sE(n,x),Lt(x))},start:function(x){return oE(n,x)},drop:Ft(n,iE),leave:function(x){De(n,x)||ky(n)}};var b=o.input.getField();se(b,"keyup",function(x){return Py.call(n,x)}),se(b,"keydown",Ft(n,Oy)),se(b,"keypress",Ft(n,Iy)),se(b,"focus",function(x){return Yu(n,x)}),se(b,"blur",function(x){return oo(n,x)})}var mf=[];bt.defineInitHook=function(n){return mf.push(n)};function qs(n,o,c,l){var u=n.doc,h;c==null&&(c="add"),c=="smart"&&(u.mode.indent?h=ds(n,o).state:c="prev");var m=n.options.tabSize,b=ke(u,o),x=Te(b.text,null,m);b.stateAfter&&(b.stateAfter=null);var C=b.text.match(/^\s*/)[0],P;if(!l&&!/\S/.test(b.text))P=0,c="not";else if(c=="smart"&&(P=u.mode.indent(h,b.text.slice(C.length),b.text),P==ze||P>150)){if(!l)return;c="prev"}c=="prev"?o>u.first?P=Te(ke(u,o-1).text,null,m):P=0:c=="add"?P=x+n.options.indentUnit:c=="subtract"?P=x-n.options.indentUnit:typeof c=="number"&&(P=x+c),P=Math.max(0,P);var B="",G=0;if(n.options.indentWithTabs)for(var W=Math.floor(P/m);W;--W)G+=m,B+="	";if(G<P&&(B+=kt(P-G)),B!=C)return fo(u,B,j(o,0),j(o,C.length),"+input"),b.stateAfter=null,!0;for(var Z=0;Z<u.sel.ranges.length;Z++){var ne=u.sel.ranges[Z];if(ne.head.line==o&&ne.head.ch<C.length){var fe=j(o,C.length);cf(u,Z,new it(fe,fe));break}}}var sr=null;function Jl(n){sr=n}function yf(n,o,c,l,u){var h=n.doc;n.display.shift=!1,l||(l=h.sel);var m=+new Date-200,b=u=="paste"||n.state.pasteIncoming>m,x=On(o),C=null;if(b&&l.ranges.length>1)if(sr&&sr.text.join(`
`)==o){if(l.ranges.length%sr.text.length==0){C=[];for(var P=0;P<sr.text.length;P++)C.push(h.splitLines(sr.text[P]))}}else x.length==l.ranges.length&&n.options.pasteLinesPerSelection&&(C=Zt(x,function(he){return[he]}));for(var B=n.curOp.updateInput,G=l.ranges.length-1;G>=0;G--){var W=l.ranges[G],Z=W.from(),ne=W.to();W.empty()&&(c&&c>0?Z=j(Z.line,Z.ch-c):n.state.overwrite&&!b?ne=j(ne.line,Math.min(ke(h,ne.line).text.length,ne.ch+Be(x).length)):b&&sr&&sr.lineWise&&sr.text.join(`
`)==x.join(`
`)&&(Z=ne=j(Z.line,0)));var fe={from:Z,to:ne,text:C?C[G%C.length]:x,origin:u||(b?"paste":n.state.cutIncoming>m?"cut":"+input")};uo(n.doc,fe),qt(n,"inputRead",n,fe)}o&&!b&&Hy(n,o),so(n),n.curOp.updateInput<2&&(n.curOp.updateInput=B),n.curOp.typing=!0,n.state.pasteIncoming=n.state.cutIncoming=-1}function jy(n,o){var c=n.clipboardData&&n.clipboardData.getData("Text");if(c)return n.preventDefault(),!o.isReadOnly()&&!o.options.disableInput&&o.hasFocus()&&Sn(o,function(){return yf(o,c,0,null,"paste")}),!0}function Hy(n,o){if(!(!n.options.electricChars||!n.options.smartIndent))for(var c=n.doc.sel,l=c.ranges.length-1;l>=0;l--){var u=c.ranges[l];if(!(u.head.ch>100||l&&c.ranges[l-1].head.line==u.head.line)){var h=n.getModeAt(u.head),m=!1;if(h.electricChars){for(var b=0;b<h.electricChars.length;b++)if(o.indexOf(h.electricChars.charAt(b))>-1){m=qs(n,u.head.line,"smart");break}}else h.electricInput&&h.electricInput.test(ke(n.doc,u.head.line).text.slice(0,u.head.ch))&&(m=qs(n,u.head.line,"smart"));m&&qt(n,"electricInput",n,u.head.line)}}}function Wy(n){for(var o=[],c=[],l=0;l<n.doc.sel.ranges.length;l++){var u=n.doc.sel.ranges[l].head.line,h={anchor:j(u,0),head:j(u+1,0)};c.push(h),o.push(n.getRange(h.anchor,h.head))}return{text:o,ranges:c}}function vf(n,o,c,l){n.setAttribute("autocorrect",c?"on":"off"),n.setAttribute("autocapitalize",l?"on":"off"),n.setAttribute("spellcheck",!!o)}function Uy(){var n=D("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),o=D("div",[n],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return g?n.style.width="1000px":n.setAttribute("wrap","off"),A&&(n.style.border="1px solid black"),o}function ME(n){var o=n.optionHandlers,c=n.helpers={};n.prototype={constructor:n,focus:function(){Xt(this).focus(),this.display.input.focus()},setOption:function(l,u){var h=this.options,m=h[l];h[l]==u&&l!="mode"||(h[l]=u,o.hasOwnProperty(l)&&Ft(this,o[l])(this,u,m),He(this,"optionChange",this,l))},getOption:function(l){return this.options[l]},getDoc:function(){return this.doc},addKeyMap:function(l,u){this.state.keyMaps[u?"push":"unshift"](Kl(l))},removeKeyMap:function(l){for(var u=this.state.keyMaps,h=0;h<u.length;++h)if(u[h]==l||u[h].name==l)return u.splice(h,1),!0},addOverlay:tn(function(l,u){var h=l.token?l:n.getMode(this.options,l);if(h.startState)throw new Error("Overlays may not be stateful.");gr(this.state.overlays,{mode:h,modeSpec:l,opaque:u&&u.opaque,priority:u&&u.priority||0},function(m){return m.priority}),this.state.modeGen++,fn(this)}),removeOverlay:tn(function(l){for(var u=this.state.overlays,h=0;h<u.length;++h){var m=u[h].modeSpec;if(m==l||typeof l=="string"&&m.name==l){u.splice(h,1),this.state.modeGen++,fn(this);return}}}),indentLine:tn(function(l,u,h){typeof u!="string"&&typeof u!="number"&&(u==null?u=this.options.smartIndent?"smart":"prev":u=u?"add":"subtract"),E(this.doc,l)&&qs(this,l,u,h)}),indentSelection:tn(function(l){for(var u=this.doc.sel.ranges,h=-1,m=0;m<u.length;m++){var b=u[m];if(b.empty())b.head.line>h&&(qs(this,b.head.line,l,!0),h=b.head.line,m==this.doc.sel.primIndex&&so(this));else{var x=b.from(),C=b.to(),P=Math.max(h,x.line);h=Math.min(this.lastLine(),C.line-(C.ch?0:1))+1;for(var B=P;B<h;++B)qs(this,B,l);var G=this.doc.sel.ranges;x.ch==0&&u.length==G.length&&G[m].from().ch>0&&cf(this.doc,m,new it(x,G[m].to()),ut)}}}),getTokenAt:function(l,u){return em(this,l,u)},getLineTokens:function(l,u){return em(this,j(l),u,!0)},getTokenTypeAt:function(l){l=qe(this.doc,l);var u=Jg(this,ke(this.doc,l.line)),h=0,m=(u.length-1)/2,b=l.ch,x;if(b==0)x=u[2];else for(;;){var C=h+m>>1;if((C?u[C*2-1]:0)>=b)m=C;else if(u[C*2+1]<b)h=C+1;else{x=u[C*2+2];break}}var P=x?x.indexOf("overlay "):-1;return P<0?x:P==0?null:x.slice(0,P-1)},getModeAt:function(l){var u=this.doc.mode;return u.innerMode?n.innerMode(u,this.getTokenAt(l).state).mode:u},getHelper:function(l,u){return this.getHelpers(l,u)[0]},getHelpers:function(l,u){var h=[];if(!c.hasOwnProperty(u))return h;var m=c[u],b=this.getModeAt(l);if(typeof b[u]=="string")m[b[u]]&&h.push(m[b[u]]);else if(b[u])for(var x=0;x<b[u].length;x++){var C=m[b[u][x]];C&&h.push(C)}else b.helperType&&m[b.helperType]?h.push(m[b.helperType]):m[b.name]&&h.push(m[b.name]);for(var P=0;P<m._global.length;P++){var B=m._global[P];B.pred(b,this)&&_e(h,B.val)==-1&&h.push(B.val)}return h},getStateAfter:function(l,u){var h=this.doc;return l=Pn(h,l??h.first+h.size-1),ds(this,l+1,u).state},cursorCoords:function(l,u){var h,m=this.doc.sel.primary();return l==null?h=m.head:typeof l=="object"?h=qe(this.doc,l):h=l?m.from():m.to(),ir(this,h,u||"page")},charCoords:function(l,u){return Pl(this,qe(this.doc,l),u||"page")},coordsChar:function(l,u){return l=Dm(this,l,u||"page"),ju(this,l.left,l.top)},lineAtHeight:function(l,u){return l=Dm(this,{top:l,left:0},u||"page").top,br(this.doc,l+this.display.viewOffset)},heightAtLine:function(l,u,h){var m=!1,b;if(typeof l=="number"){var x=this.doc.first+this.doc.size-1;l<this.doc.first?l=this.doc.first:l>x&&(l=x,m=!0),b=ke(this.doc,l)}else b=l;return Ol(this,b,{top:0,left:0},u||"page",h||m).top+(m?this.doc.height-_r(b):0)},defaultTextHeight:function(){return ro(this.display)},defaultCharWidth:function(){return io(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(l,u,h,m,b){var x=this.display;l=ir(this,qe(this.doc,l));var C=l.bottom,P=l.left;if(u.style.position="absolute",u.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(u),x.sizer.appendChild(u),m=="over")C=l.top;else if(m=="above"||m=="near"){var B=Math.max(x.wrapper.clientHeight,this.doc.height),G=Math.max(x.sizer.clientWidth,x.lineSpace.clientWidth);(m=="above"||l.bottom+u.offsetHeight>B)&&l.top>u.offsetHeight?C=l.top-u.offsetHeight:l.bottom+u.offsetHeight<=B&&(C=l.bottom),P+u.offsetWidth>G&&(P=G-u.offsetWidth)}u.style.top=C+"px",u.style.left=u.style.right="",b=="right"?(P=x.sizer.clientWidth-u.offsetWidth,u.style.right="0px"):(b=="left"?P=0:b=="middle"&&(P=(x.sizer.clientWidth-u.offsetWidth)/2),u.style.left=P+"px"),h&&EL(this,{left:P,top:C,right:P+u.offsetWidth,bottom:C+u.offsetHeight})},triggerOnKeyDown:tn(Oy),triggerOnKeyPress:tn(Iy),triggerOnKeyUp:Py,triggerOnMouseDown:tn(zy),execCommand:function(l){if(Is.hasOwnProperty(l))return Is[l].call(null,this)},triggerElectric:tn(function(l){Hy(this,l)}),findPosH:function(l,u,h,m){var b=1;u<0&&(b=-1,u=-u);for(var x=qe(this.doc,l),C=0;C<u&&(x=bf(this.doc,x,b,h,m),!x.hitSide);++C);return x},moveH:tn(function(l,u){var h=this;this.extendSelectionsBy(function(m){return h.display.shift||h.doc.extend||m.empty()?bf(h.doc,m.head,l,u,h.options.rtlMoveVisually):l<0?m.from():m.to()},Nn)}),deleteH:tn(function(l,u){var h=this.doc.sel,m=this.doc;h.somethingSelected()?m.replaceSelection("",null,"+delete"):go(this,function(b){var x=bf(m,b.head,l,u,!1);return l<0?{from:x,to:b.head}:{from:b.head,to:x}})}),findPosV:function(l,u,h,m){var b=1,x=m;u<0&&(b=-1,u=-u);for(var C=qe(this.doc,l),P=0;P<u;++P){var B=ir(this,C,"div");if(x==null?x=B.left:B.left=x,C=$y(this,B,b,h),C.hitSide)break}return C},moveV:tn(function(l,u){var h=this,m=this.doc,b=[],x=!this.display.shift&&!m.extend&&m.sel.somethingSelected();if(m.extendSelectionsBy(function(P){if(x)return l<0?P.from():P.to();var B=ir(h,P.head,"div");P.goalColumn!=null&&(B.left=P.goalColumn),b.push(B.left);var G=$y(h,B,l,u);return u=="page"&&P==m.sel.primary()&&Ju(h,Pl(h,G,"div").top-B.top),G},Nn),b.length)for(var C=0;C<m.sel.ranges.length;C++)m.sel.ranges[C].goalColumn=b[C]}),findWordAt:function(l){var u=this.doc,h=ke(u,l.line).text,m=l.ch,b=l.ch;if(h){var x=this.getHelper(l,"wordChars");(l.sticky=="before"||b==h.length)&&m?--m:++b;for(var C=h.charAt(m),P=Ye(C,x)?function(B){return Ye(B,x)}:/\s/.test(C)?function(B){return/\s/.test(B)}:function(B){return!/\s/.test(B)&&!Ye(B)};m>0&&P(h.charAt(m-1));)--m;for(;b<h.length&&P(h.charAt(b));)++b}return new it(j(l.line,m),j(l.line,b))},toggleOverwrite:function(l){l!=null&&l==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?ot(this.display.cursorDiv,"CodeMirror-overwrite"):ce(this.display.cursorDiv,"CodeMirror-overwrite"),He(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Je(wt(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:tn(function(l,u){bs(this,l,u)}),getScrollInfo:function(){var l=this.display.scroller;return{left:l.scrollLeft,top:l.scrollTop,height:l.scrollHeight-xr(this)-this.display.barHeight,width:l.scrollWidth-xr(this)-this.display.barWidth,clientHeight:Ru(this),clientWidth:Ai(this)}},scrollIntoView:tn(function(l,u){l==null?(l={from:this.doc.sel.primary().head,to:null},u==null&&(u=this.options.cursorScrollMargin)):typeof l=="number"?l={from:j(l,0),to:null}:l.from==null&&(l={from:l,to:null}),l.to||(l.to=l.from),l.margin=u||0,l.from.line!=null?DL(this,l):qm(this,l.from,l.to,l.margin)}),setSize:tn(function(l,u){var h=this,m=function(x){return typeof x=="number"||/^\d+$/.test(String(x))?x+"px":x};l!=null&&(this.display.wrapper.style.width=m(l)),u!=null&&(this.display.wrapper.style.height=m(u)),this.options.lineWrapping&&Tm(this);var b=this.display.viewFrom;this.doc.iter(b,this.display.viewTo,function(x){if(x.widgets){for(var C=0;C<x.widgets.length;C++)if(x.widgets[C].noHScroll){oi(h,b,"widget");break}}++b}),this.curOp.forceUpdate=!0,He(this,"refresh",this)}),operation:function(l){return Sn(this,l)},startOperation:function(){return Mi(this)},endOperation:function(){return Oi(this)},refresh:tn(function(){var l=this.display.cachedTextHeight;fn(this),this.curOp.forceUpdate=!0,ys(this),bs(this,this.doc.scrollLeft,this.doc.scrollTop),ef(this.display),(l==null||Math.abs(l-ro(this.display))>.5||this.options.lineWrapping)&&$u(this),He(this,"refresh",this)}),swapDoc:tn(function(l){var u=this.doc;return u.cm=null,this.state.selectingText&&this.state.selectingText(),Xm(this,l),ys(this),this.display.input.reset(),bs(this,l.scrollLeft,l.scrollTop),this.curOp.forceScroll=!0,qt(this,"swapDoc",this,u),u}),phrase:function(l){var u=this.options.phrases;return u&&Object.prototype.hasOwnProperty.call(u,l)?u[l]:l},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},tt(n),n.registerHelper=function(l,u,h){c.hasOwnProperty(l)||(c[l]=n[l]={_global:[]}),c[l][u]=h},n.registerGlobalHelper=function(l,u,h,m){n.registerHelper(l,u,m),c[l]._global.push({pred:h,val:m})}}function bf(n,o,c,l,u){var h=o,m=c,b=ke(n,o.line),x=u&&n.direction=="rtl"?-c:c;function C(){var me=o.line+x;return me<n.first||me>=n.first+n.size?!1:(o=new j(me,o.ch,o.sticky),b=ke(n,me))}function P(me){var pe;if(l=="codepoint"){var ye=b.text.charCodeAt(o.ch+(c>0?0:-1));if(isNaN(ye))pe=null;else{var Ne=c>0?ye>=55296&&ye<56320:ye>=56320&&ye<57343;pe=new j(o.line,Math.max(0,Math.min(b.text.length,o.ch+c*(Ne?2:1))),-c)}}else u?pe=dE(n.cm,b,o,c):pe=ff(b,o,c);if(pe==null)if(!me&&C())o=df(u,n.cm,b,o.line,x);else return!1;else o=pe;return!0}if(l=="char"||l=="codepoint")P();else if(l=="column")P(!0);else if(l=="word"||l=="group")for(var B=null,G=l=="group",W=n.cm&&n.cm.getHelper(o,"wordChars"),Z=!0;!(c<0&&!P(!Z));Z=!1){var ne=b.text.charAt(o.ch)||`
`,fe=Ye(ne,W)?"w":G&&ne==`
`?"n":!G||/\s/.test(ne)?null:"p";if(G&&!Z&&!fe&&(fe="s"),B&&B!=fe){c<0&&(c=1,P(),o.sticky="after");break}if(fe&&(B=fe),c>0&&!P(!Z))break}var he=$l(n,o,h,m,!0);return Re(h,he)&&(he.hitSide=!0),he}function $y(n,o,c,l){var u=n.doc,h=o.left,m;if(l=="page"){var b=Math.min(n.display.wrapper.clientHeight,Xt(n).innerHeight||u(n).documentElement.clientHeight),x=Math.max(b-.5*ro(n.display),3);m=(c>0?o.bottom:o.top)+c*x}else l=="line"&&(m=c>0?o.bottom+3:o.top-3);for(var C;C=ju(n,h,m),!!C.outside;){if(c<0?m<=0:m>=u.height){C.hitSide=!0;break}m+=c*5}return C}var lt=function(n){this.cm=n,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Fe,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};lt.prototype.init=function(n){var o=this,c=this,l=c.cm,u=c.div=n.lineDiv;u.contentEditable=!0,vf(u,l.options.spellcheck,l.options.autocorrect,l.options.autocapitalize);function h(b){for(var x=b.target;x;x=x.parentNode){if(x==u)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(x.className))break}return!1}se(u,"paste",function(b){!h(b)||De(l,b)||jy(b,l)||d<=11&&setTimeout(Ft(l,function(){return o.updateFromDOM()}),20)}),se(u,"compositionstart",function(b){o.composing={data:b.data,done:!1}}),se(u,"compositionupdate",function(b){o.composing||(o.composing={data:b.data,done:!1})}),se(u,"compositionend",function(b){o.composing&&(b.data!=o.composing.data&&o.readFromDOMSoon(),o.composing.done=!0)}),se(u,"touchstart",function(){return c.forceCompositionEnd()}),se(u,"input",function(){o.composing||o.readFromDOMSoon()});function m(b){if(!(!h(b)||De(l,b))){if(l.somethingSelected())Jl({lineWise:!1,text:l.getSelections()}),b.type=="cut"&&l.replaceSelection("",null,"cut");else if(l.options.lineWiseCopyCut){var x=Wy(l);Jl({lineWise:!0,text:x.text}),b.type=="cut"&&l.operation(function(){l.setSelections(x.ranges,0,ut),l.replaceSelection("",null,"cut")})}else return;if(b.clipboardData){b.clipboardData.clearData();var C=sr.text.join(`
`);if(b.clipboardData.setData("Text",C),b.clipboardData.getData("Text")==C){b.preventDefault();return}}var P=Uy(),B=P.firstChild;vf(B),l.display.lineSpace.insertBefore(P,l.display.lineSpace.firstChild),B.value=sr.text.join(`
`);var G=Je(u.ownerDocument);nr(B),setTimeout(function(){l.display.lineSpace.removeChild(P),G.focus(),G==u&&c.showPrimarySelection()},50)}}se(u,"copy",m),se(u,"cut",m)},lt.prototype.screenReaderLabelChanged=function(n){n?this.div.setAttribute("aria-label",n):this.div.removeAttribute("aria-label")},lt.prototype.prepareSelection=function(){var n=zm(this.cm,!1);return n.focus=Je(this.div.ownerDocument)==this.div,n},lt.prototype.showSelection=function(n,o){!n||!this.cm.display.view.length||((n.focus||o)&&this.showPrimarySelection(),this.showMultipleSelections(n))},lt.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},lt.prototype.showPrimarySelection=function(){var n=this.getSelection(),o=this.cm,c=o.doc.sel.primary(),l=c.from(),u=c.to();if(o.display.viewTo==o.display.viewFrom||l.line>=o.display.viewTo||u.line<o.display.viewFrom){n.removeAllRanges();return}var h=Xl(o,n.anchorNode,n.anchorOffset),m=Xl(o,n.focusNode,n.focusOffset);if(!(h&&!h.bad&&m&&!m.bad&&J(zt(h,m),l)==0&&J(et(h,m),u)==0)){var b=o.display.view,x=l.line>=o.display.viewFrom&&Gy(o,l)||{node:b[0].measure.map[2],offset:0},C=u.line<o.display.viewTo&&Gy(o,u);if(!C){var P=b[b.length-1].measure,B=P.maps?P.maps[P.maps.length-1]:P.map;C={node:B[B.length-1],offset:B[B.length-2]-B[B.length-3]}}if(!x||!C){n.removeAllRanges();return}var G=n.rangeCount&&n.getRangeAt(0),W;try{W=le(x.node,x.offset,C.offset,C.node)}catch{}W&&(!r&&o.state.focused?(n.collapse(x.node,x.offset),W.collapsed||(n.removeAllRanges(),n.addRange(W))):(n.removeAllRanges(),n.addRange(W)),G&&n.anchorNode==null?n.addRange(G):r&&this.startGracePeriod()),this.rememberSelection()}},lt.prototype.startGracePeriod=function(){var n=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){n.gracePeriod=!1,n.selectionChanged()&&n.cm.operation(function(){return n.cm.curOp.selectionChanged=!0})},20)},lt.prototype.showMultipleSelections=function(n){ie(this.cm.display.cursorDiv,n.cursors),ie(this.cm.display.selectionDiv,n.selection)},lt.prototype.rememberSelection=function(){var n=this.getSelection();this.lastAnchorNode=n.anchorNode,this.lastAnchorOffset=n.anchorOffset,this.lastFocusNode=n.focusNode,this.lastFocusOffset=n.focusOffset},lt.prototype.selectionInEditor=function(){var n=this.getSelection();if(!n.rangeCount)return!1;var o=n.getRangeAt(0).commonAncestorContainer;return Se(this.div,o)},lt.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||Je(this.div.ownerDocument)!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},lt.prototype.blur=function(){this.div.blur()},lt.prototype.getField=function(){return this.div},lt.prototype.supportsTouch=function(){return!0},lt.prototype.receivedFocus=function(){var n=this,o=this;this.selectionInEditor()?setTimeout(function(){return n.pollSelection()},20):Sn(this.cm,function(){return o.cm.curOp.selectionChanged=!0});function c(){o.cm.state.focused&&(o.pollSelection(),o.polling.set(o.cm.options.pollInterval,c))}this.polling.set(this.cm.options.pollInterval,c)},lt.prototype.selectionChanged=function(){var n=this.getSelection();return n.anchorNode!=this.lastAnchorNode||n.anchorOffset!=this.lastAnchorOffset||n.focusNode!=this.lastFocusNode||n.focusOffset!=this.lastFocusOffset},lt.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var n=this.getSelection(),o=this.cm;if(N&&y&&this.cm.display.gutterSpecs.length&&OE(n.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var c=Xl(o,n.anchorNode,n.anchorOffset),l=Xl(o,n.focusNode,n.focusOffset);c&&l&&Sn(o,function(){Vt(o.doc,ai(c,l),ut),(c.bad||l.bad)&&(o.curOp.selectionChanged=!0)})}}},lt.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var n=this.cm,o=n.display,c=n.doc.sel.primary(),l=c.from(),u=c.to();if(l.ch==0&&l.line>n.firstLine()&&(l=j(l.line-1,ke(n.doc,l.line-1).length)),u.ch==ke(n.doc,u.line).text.length&&u.line<n.lastLine()&&(u=j(u.line+1,0)),l.line<o.viewFrom||u.line>o.viewTo-1)return!1;var h,m,b;l.line==o.viewFrom||(h=Ei(n,l.line))==0?(m=rt(o.view[0].line),b=o.view[0].node):(m=rt(o.view[h].line),b=o.view[h-1].node.nextSibling);var x=Ei(n,u.line),C,P;if(x==o.view.length-1?(C=o.viewTo-1,P=o.lineDiv.lastChild):(C=rt(o.view[x+1].line)-1,P=o.view[x+1].node.previousSibling),!b)return!1;for(var B=n.doc.splitLines(PE(n,b,P,m,C)),G=qr(n.doc,j(m,0),j(C,ke(n.doc,C).text.length));B.length>1&&G.length>1;)if(Be(B)==Be(G))B.pop(),G.pop(),C--;else if(B[0]==G[0])B.shift(),G.shift(),m++;else break;for(var W=0,Z=0,ne=B[0],fe=G[0],he=Math.min(ne.length,fe.length);W<he&&ne.charCodeAt(W)==fe.charCodeAt(W);)++W;for(var me=Be(B),pe=Be(G),ye=Math.min(me.length-(B.length==1?W:0),pe.length-(G.length==1?W:0));Z<ye&&me.charCodeAt(me.length-Z-1)==pe.charCodeAt(pe.length-Z-1);)++Z;if(B.length==1&&G.length==1&&m==l.line)for(;W&&W>l.ch&&me.charCodeAt(me.length-Z-1)==pe.charCodeAt(pe.length-Z-1);)W--,Z++;B[B.length-1]=me.slice(0,me.length-Z).replace(/^\u200b+/,""),B[0]=B[0].slice(W).replace(/\u200b+$/,"");var Ne=j(m,W),Ee=j(C,G.length?Be(G).length-Z:0);if(B.length>1||B[0]||J(Ne,Ee))return fo(n.doc,B,Ne,Ee,"+input"),!0},lt.prototype.ensurePolled=function(){this.forceCompositionEnd()},lt.prototype.reset=function(){this.forceCompositionEnd()},lt.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},lt.prototype.readFromDOMSoon=function(){var n=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(n.readDOMTimeout=null,n.composing)if(n.composing.done)n.composing=null;else return;n.updateFromDOM()},80))},lt.prototype.updateFromDOM=function(){var n=this;(this.cm.isReadOnly()||!this.pollContent())&&Sn(this.cm,function(){return fn(n.cm)})},lt.prototype.setUneditable=function(n){n.contentEditable="false"},lt.prototype.onKeyPress=function(n){n.charCode==0||this.composing||(n.preventDefault(),this.cm.isReadOnly()||Ft(this.cm,yf)(this.cm,String.fromCharCode(n.charCode==null?n.keyCode:n.charCode),0))},lt.prototype.readOnlyChanged=function(n){this.div.contentEditable=String(n!="nocursor")},lt.prototype.onContextMenu=function(){},lt.prototype.resetPosition=function(){},lt.prototype.needsContentAttribute=!0;function Gy(n,o){var c=qu(n,o.line);if(!c||c.hidden)return null;var l=ke(n.doc,o.line),u=xm(c,l,o.line),h=ve(l,n.doc.direction),m="left";if(h){var b=ge(h,o.ch);m=b%2?"right":"left"}var x=Sm(u.map,o.ch,m);return x.offset=x.collapse=="right"?x.end:x.start,x}function OE(n){for(var o=n;o;o=o.parentNode)if(/CodeMirror-gutter-wrapper/.test(o.className))return!0;return!1}function yo(n,o){return o&&(n.bad=!0),n}function PE(n,o,c,l,u){var h="",m=!1,b=n.doc.lineSeparator(),x=!1;function C(W){return function(Z){return Z.id==W}}function P(){m&&(h+=b,x&&(h+=b),m=x=!1)}function B(W){W&&(P(),h+=W)}function G(W){if(W.nodeType==1){var Z=W.getAttribute("cm-text");if(Z){B(Z);return}var ne=W.getAttribute("cm-marker"),fe;if(ne){var he=n.findMarks(j(l,0),j(u+1,0),C(+ne));he.length&&(fe=he[0].find(0))&&B(qr(n.doc,fe.from,fe.to).join(b));return}if(W.getAttribute("contenteditable")=="false")return;var me=/^(pre|div|p|li|table|br)$/i.test(W.nodeName);if(!/^br$/i.test(W.nodeName)&&W.textContent.length==0)return;me&&P();for(var pe=0;pe<W.childNodes.length;pe++)G(W.childNodes[pe]);/^(pre|p)$/i.test(W.nodeName)&&(x=!0),me&&(m=!0)}else W.nodeType==3&&B(W.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;G(o),o!=c;)o=o.nextSibling,x=!1;return h}function Xl(n,o,c){var l;if(o==n.display.lineDiv){if(l=n.display.lineDiv.childNodes[c],!l)return yo(n.clipPos(j(n.display.viewTo-1)),!0);o=null,c=0}else for(l=o;;l=l.parentNode){if(!l||l==n.display.lineDiv)return null;if(l.parentNode&&l.parentNode==n.display.lineDiv)break}for(var u=0;u<n.display.view.length;u++){var h=n.display.view[u];if(h.node==l)return IE(h,o,c)}}function IE(n,o,c){var l=n.text.firstChild,u=!1;if(!o||!Se(l,o))return yo(j(rt(n.line),0),!0);if(o==l&&(u=!0,o=l.childNodes[c],c=0,!o)){var h=n.rest?Be(n.rest):n.line;return yo(j(rt(h),h.text.length),u)}var m=o.nodeType==3?o:null,b=o;for(!m&&o.childNodes.length==1&&o.firstChild.nodeType==3&&(m=o.firstChild,c&&(c=m.nodeValue.length));b.parentNode!=l;)b=b.parentNode;var x=n.measure,C=x.maps;function P(fe,he,me){for(var pe=-1;pe<(C?C.length:0);pe++)for(var ye=pe<0?x.map:C[pe],Ne=0;Ne<ye.length;Ne+=3){var Ee=ye[Ne+2];if(Ee==fe||Ee==he){var Ge=rt(pe<0?n.line:n.rest[pe]),ft=ye[Ne]+me;return(me<0||Ee!=fe)&&(ft=ye[Ne+(me?1:0)]),j(Ge,ft)}}}var B=P(m,b,c);if(B)return yo(B,u);for(var G=b.nextSibling,W=m?m.nodeValue.length-c:0;G;G=G.nextSibling){if(B=P(G,G.firstChild,0),B)return yo(j(B.line,B.ch-W),u);W+=G.textContent.length}for(var Z=b.previousSibling,ne=c;Z;Z=Z.previousSibling){if(B=P(Z,Z.firstChild,-1),B)return yo(j(B.line,B.ch+ne),u);ne+=Z.textContent.length}}var Et=function(n){this.cm=n,this.prevInput="",this.pollingFast=!1,this.polling=new Fe,this.hasSelection=!1,this.composing=null,this.resetting=!1};Et.prototype.init=function(n){var o=this,c=this,l=this.cm;this.createField(n);var u=this.textarea;n.wrapper.insertBefore(this.wrapper,n.wrapper.firstChild),A&&(u.style.width="0px"),se(u,"input",function(){f&&d>=9&&o.hasSelection&&(o.hasSelection=null),c.poll()}),se(u,"paste",function(m){De(l,m)||jy(m,l)||(l.state.pasteIncoming=+new Date,c.fastPoll())});function h(m){if(!De(l,m)){if(l.somethingSelected())Jl({lineWise:!1,text:l.getSelections()});else if(l.options.lineWiseCopyCut){var b=Wy(l);Jl({lineWise:!0,text:b.text}),m.type=="cut"?l.setSelections(b.ranges,null,ut):(c.prevInput="",u.value=b.text.join(`
`),nr(u))}else return;m.type=="cut"&&(l.state.cutIncoming=+new Date)}}se(u,"cut",h),se(u,"copy",h),se(n.scroller,"paste",function(m){if(!(jr(n,m)||De(l,m))){if(!u.dispatchEvent){l.state.pasteIncoming=+new Date,c.focus();return}var b=new Event("paste");b.clipboardData=m.clipboardData,u.dispatchEvent(b)}}),se(n.lineSpace,"selectstart",function(m){jr(n,m)||nt(m)}),se(u,"compositionstart",function(){var m=l.getCursor("from");c.composing&&c.composing.range.clear(),c.composing={start:m,range:l.markText(m,l.getCursor("to"),{className:"CodeMirror-composing"})}}),se(u,"compositionend",function(){c.composing&&(c.poll(),c.composing.range.clear(),c.composing=null)})},Et.prototype.createField=function(n){this.wrapper=Uy(),this.textarea=this.wrapper.firstChild;var o=this.cm.options;vf(this.textarea,o.spellcheck,o.autocorrect,o.autocapitalize)},Et.prototype.screenReaderLabelChanged=function(n){n?this.textarea.setAttribute("aria-label",n):this.textarea.removeAttribute("aria-label")},Et.prototype.prepareSelection=function(){var n=this.cm,o=n.display,c=n.doc,l=zm(n);if(n.options.moveInputWithCursor){var u=ir(n,c.sel.primary().head,"div"),h=o.wrapper.getBoundingClientRect(),m=o.lineDiv.getBoundingClientRect();l.teTop=Math.max(0,Math.min(o.wrapper.clientHeight-10,u.top+m.top-h.top)),l.teLeft=Math.max(0,Math.min(o.wrapper.clientWidth-10,u.left+m.left-h.left))}return l},Et.prototype.showSelection=function(n){var o=this.cm,c=o.display;ie(c.cursorDiv,n.cursors),ie(c.selectionDiv,n.selection),n.teTop!=null&&(this.wrapper.style.top=n.teTop+"px",this.wrapper.style.left=n.teLeft+"px")},Et.prototype.reset=function(n){if(!(this.contextMenuPending||this.composing&&n)){var o=this.cm;if(this.resetting=!0,o.somethingSelected()){this.prevInput="";var c=o.getSelection();this.textarea.value=c,o.state.focused&&nr(this.textarea),f&&d>=9&&(this.hasSelection=c)}else n||(this.prevInput=this.textarea.value="",f&&d>=9&&(this.hasSelection=null));this.resetting=!1}},Et.prototype.getField=function(){return this.textarea},Et.prototype.supportsTouch=function(){return!1},Et.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!S||Je(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch{}},Et.prototype.blur=function(){this.textarea.blur()},Et.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Et.prototype.receivedFocus=function(){this.slowPoll()},Et.prototype.slowPoll=function(){var n=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){n.poll(),n.cm.state.focused&&n.slowPoll()})},Et.prototype.fastPoll=function(){var n=!1,o=this;o.pollingFast=!0;function c(){var l=o.poll();!l&&!n?(n=!0,o.polling.set(60,c)):(o.pollingFast=!1,o.slowPoll())}o.polling.set(20,c)},Et.prototype.poll=function(){var n=this,o=this.cm,c=this.textarea,l=this.prevInput;if(this.contextMenuPending||this.resetting||!o.state.focused||Wn(c)&&!l&&!this.composing||o.isReadOnly()||o.options.disableInput||o.state.keySeq)return!1;var u=c.value;if(u==l&&!o.somethingSelected())return!1;if(f&&d>=9&&this.hasSelection===u||M&&/[\uf700-\uf7ff]/.test(u))return o.display.input.reset(),!1;if(o.doc.sel==o.display.selForContextMenu){var h=u.charCodeAt(0);if(h==8203&&!l&&(l="\u200B"),h==8666)return this.reset(),this.cm.execCommand("undo")}for(var m=0,b=Math.min(l.length,u.length);m<b&&l.charCodeAt(m)==u.charCodeAt(m);)++m;return Sn(o,function(){yf(o,u.slice(m),l.length-m,null,n.composing?"*compose":null),u.length>1e3||u.indexOf(`
`)>-1?c.value=n.prevInput="":n.prevInput=u,n.composing&&(n.composing.range.clear(),n.composing.range=o.markText(n.composing.start,o.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Et.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Et.prototype.onKeyPress=function(){f&&d>=9&&(this.hasSelection=null),this.fastPoll()},Et.prototype.onContextMenu=function(n){var o=this,c=o.cm,l=c.display,u=o.textarea;o.contextMenuPending&&o.contextMenuPending();var h=Li(c,n),m=l.scroller.scrollTop;if(!h||w)return;var b=c.options.resetSelectionOnContextMenu;b&&c.doc.sel.contains(h)==-1&&Ft(c,Vt)(c.doc,ai(h),ut);var x=u.style.cssText,C=o.wrapper.style.cssText,P=o.wrapper.offsetParent.getBoundingClientRect();o.wrapper.style.cssText="position: static",u.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(n.clientY-P.top-5)+"px; left: "+(n.clientX-P.left-5)+`px;
      z-index: 1000; background: `+(f?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var B;g&&(B=u.ownerDocument.defaultView.scrollY),l.input.focus(),g&&u.ownerDocument.defaultView.scrollTo(null,B),l.input.reset(),c.somethingSelected()||(u.value=o.prevInput=" "),o.contextMenuPending=W,l.selForContextMenu=c.doc.sel,clearTimeout(l.detectingSelectAll);function G(){if(u.selectionStart!=null){var ne=c.somethingSelected(),fe="\u200B"+(ne?u.value:"");u.value="\u21DA",u.value=fe,o.prevInput=ne?"":"\u200B",u.selectionStart=1,u.selectionEnd=fe.length,l.selForContextMenu=c.doc.sel}}function W(){if(o.contextMenuPending==W&&(o.contextMenuPending=!1,o.wrapper.style.cssText=C,u.style.cssText=x,f&&d<9&&l.scrollbars.setScrollTop(l.scroller.scrollTop=m),u.selectionStart!=null)){(!f||f&&d<9)&&G();var ne=0,fe=function(){l.selForContextMenu==c.doc.sel&&u.selectionStart==0&&u.selectionEnd>0&&o.prevInput=="\u200B"?Ft(c,fy)(c):ne++<10?l.detectingSelectAll=setTimeout(fe,500):(l.selForContextMenu=null,l.input.reset())};l.detectingSelectAll=setTimeout(fe,200)}}if(f&&d>=9&&G(),U){Lt(n);var Z=function(){Qe(window,"mouseup",Z),setTimeout(W,20)};se(window,"mouseup",Z)}else setTimeout(W,50)},Et.prototype.readOnlyChanged=function(n){n||this.reset(),this.textarea.disabled=n=="nocursor",this.textarea.readOnly=!!n},Et.prototype.setUneditable=function(){},Et.prototype.needsContentAttribute=!1;function zE(n,o){if(o=o?Pe(o):{},o.value=n.value,!o.tabindex&&n.tabIndex&&(o.tabindex=n.tabIndex),!o.placeholder&&n.placeholder&&(o.placeholder=n.placeholder),o.autofocus==null){var c=Je(n.ownerDocument);o.autofocus=c==n||n.getAttribute("autofocus")!=null&&c==document.body}function l(){n.value=b.getValue()}var u;if(n.form&&(se(n.form,"submit",l),!o.leaveSubmitMethodAlone)){var h=n.form;u=h.submit;try{var m=h.submit=function(){l(),h.submit=u,h.submit(),h.submit=m}}catch{}}o.finishInit=function(x){x.save=l,x.getTextArea=function(){return n},x.toTextArea=function(){x.toTextArea=isNaN,l(),n.parentNode.removeChild(x.getWrapperElement()),n.style.display="",n.form&&(Qe(n.form,"submit",l),!o.leaveSubmitMethodAlone&&typeof n.form.submit=="function"&&(n.form.submit=u))}},n.style.display="none";var b=bt(function(x){return n.parentNode.insertBefore(x,n.nextSibling)},o);return b}function BE(n){n.off=Qe,n.on=se,n.wheelEventPixels=WL,n.Doc=dn,n.splitLines=On,n.countColumn=Te,n.findColumn=Gt,n.isWordChar=te,n.Pass=ze,n.signal=He,n.Line=eo,n.changeEnd=li,n.scrollbarModel=jm,n.Pos=j,n.cmpPos=J,n.modes=un,n.mimeModes=vr,n.resolveMode=Cn,n.getMode=Br,n.modeExtensions=ni,n.extendMode=Cl,n.copyState=Rr,n.startState=fs,n.innerMode=ri,n.commands=Is,n.keyMap=Wr,n.keyName=Ly,n.isModifierKey=Ay,n.lookupKey=po,n.normalizeKeyMap=fE,n.StringStream=At,n.SharedTextMarker=Ms,n.TextMarker=ui,n.LineWidget=Ns,n.e_preventDefault=nt,n.e_stopPropagation=mt,n.e_stop=Lt,n.addClass=ot,n.contains=Se,n.rmClass=ce,n.keyNames=fi}LE(bt),ME(bt);var RE="iter insert remove copy getEditor constructor".split(" ");for(var Zl in dn.prototype)dn.prototype.hasOwnProperty(Zl)&&_e(RE,Zl)<0&&(bt.prototype[Zl]=function(n){return function(){return n.apply(this.doc,arguments)}}(dn.prototype[Zl]));return tt(dn),bt.inputStyles={textarea:Et,contenteditable:lt},bt.defineMode=function(n){!bt.defaults.mode&&n!="null"&&(bt.defaults.mode=n),kl.apply(this,arguments)},bt.defineMIME=Xi,bt.defineMode("null",function(){return{token:function(n){return n.skipToEnd()}}}),bt.defineMIME("text/plain","null"),bt.defineExtension=function(n,o){bt.prototype[n]=o},bt.defineDocExtension=function(n,o){dn.prototype[n]=o},bt.fromTextArea=zE,BE(bt),bt.version="5.65.15",bt})});var $h=ee((Gk,Vk)=>{(function(t){typeof Gk=="object"&&typeof Vk=="object"?t(Jr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";t.defineMode("javascript",function(e,r){var i=e.indentUnit,s=r.statementIndent,a=r.jsonld,f=r.json||a,d=r.trackScope!==!1,g=r.typescript,p=r.wordCharacters||/[\w$\xa1-\uffff]/,y=function(){function E(zt){return{type:zt,style:"keyword"}}var R=E("keyword a"),j=E("keyword b"),J=E("keyword c"),Re=E("keyword d"),Xe=E("operator"),et={type:"atom",style:"atom"};return{if:E("if"),while:R,with:R,else:j,do:j,try:j,finally:j,return:Re,break:Re,continue:Re,new:E("new"),delete:J,void:J,throw:J,debugger:E("debugger"),var:E("var"),const:E("var"),let:E("var"),function:E("function"),catch:E("catch"),for:E("for"),switch:E("switch"),case:E("case"),default:E("default"),in:Xe,typeof:Xe,instanceof:Xe,true:et,false:et,null:et,undefined:et,NaN:et,Infinity:et,this:E("this"),class:E("class"),super:E("atom"),yield:J,export:E("export"),import:E("import"),extends:J,await:J}}(),v=/[+\-*&%=<>!?|~^@]/,w=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function k(E){for(var R=!1,j,J=!1;(j=E.next())!=null;){if(!R){if(j=="/"&&!J)return;j=="["?J=!0:J&&j=="]"&&(J=!1)}R=!R&&j=="\\"}}var T,L;function A(E,R,j){return T=E,L=j,R}function N(E,R){var j=E.next();if(j=='"'||j=="'")return R.tokenize=S(j),R.tokenize(E,R);if(j=="."&&E.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return A("number","number");if(j=="."&&E.match(".."))return A("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(j))return A(j);if(j=="="&&E.eat(">"))return A("=>","operator");if(j=="0"&&E.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return A("number","number");if(/\d/.test(j))return E.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),A("number","number");if(j=="/")return E.eat("*")?(R.tokenize=M,M(E,R)):E.eat("/")?(E.skipToEnd(),A("comment","comment")):br(E,R,1)?(k(E),E.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),A("regexp","string-2")):(E.eat("="),A("operator","operator",E.current()));if(j=="`")return R.tokenize=O,O(E,R);if(j=="#"&&E.peek()=="!")return E.skipToEnd(),A("meta","meta");if(j=="#"&&E.eatWhile(p))return A("variable","property");if(j=="<"&&E.match("!--")||j=="-"&&E.match("->")&&!/\S/.test(E.string.slice(0,E.start)))return E.skipToEnd(),A("comment","comment");if(v.test(j))return(j!=">"||!R.lexical||R.lexical.type!=">")&&(E.eat("=")?(j=="!"||j=="=")&&E.eat("="):/[<>*+\-|&?]/.test(j)&&(E.eat(j),j==">"&&E.eat(j))),j=="?"&&E.eat(".")?A("."):A("operator","operator",E.current());if(p.test(j)){E.eatWhile(p);var J=E.current();if(R.lastType!="."){if(y.propertyIsEnumerable(J)){var Re=y[J];return A(Re.type,Re.style,J)}if(J=="async"&&E.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return A("async","keyword",J)}return A("variable","variable",J)}}function S(E){return function(R,j){var J=!1,Re;if(a&&R.peek()=="@"&&R.match(w))return j.tokenize=N,A("jsonld-keyword","meta");for(;(Re=R.next())!=null&&!(Re==E&&!J);)J=!J&&Re=="\\";return J||(j.tokenize=N),A("string","string")}}function M(E,R){for(var j=!1,J;J=E.next();){if(J=="/"&&j){R.tokenize=N;break}j=J=="*"}return A("comment","comment")}function O(E,R){for(var j=!1,J;(J=E.next())!=null;){if(!j&&(J=="`"||J=="$"&&E.eat("{"))){R.tokenize=N;break}j=!j&&J=="\\"}return A("quasi","string-2",E.current())}var z="([{}])";function I(E,R){R.fatArrowAt&&(R.fatArrowAt=null);var j=E.string.indexOf("=>",E.start);if(!(j<0)){if(g){var J=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(E.string.slice(E.start,j));J&&(j=J.index)}for(var Re=0,Xe=!1,et=j-1;et>=0;--et){var zt=E.string.charAt(et),Pn=z.indexOf(zt);if(Pn>=0&&Pn<3){if(!Re){++et;break}if(--Re==0){zt=="("&&(Xe=!0);break}}else if(Pn>=3&&Pn<6)++Re;else if(p.test(zt))Xe=!0;else if(/["'\/`]/.test(zt))for(;;--et){if(et==0)return;var qe=E.string.charAt(et-1);if(qe==zt&&E.string.charAt(et-2)!="\\"){et--;break}}else if(Xe&&!Re){++et;break}}Xe&&!Re&&(R.fatArrowAt=et)}}var _={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function U(E,R,j,J,Re,Xe){this.indented=E,this.column=R,this.type=j,this.prev=Re,this.info=Xe,J!=null&&(this.align=J)}function H(E,R){if(!d)return!1;for(var j=E.localVars;j;j=j.next)if(j.name==R)return!0;for(var J=E.context;J;J=J.prev)for(var j=J.vars;j;j=j.next)if(j.name==R)return!0}function ce(E,R,j,J,Re){var Xe=E.cc;for($.state=E,$.stream=Re,$.marked=null,$.cc=Xe,$.style=R,E.lexical.hasOwnProperty("align")||(E.lexical.align=!0);;){var et=Xe.length?Xe.pop():f?ze:_e;if(et(j,J)){for(;Xe.length&&Xe[Xe.length-1].lex;)Xe.pop()();return $.marked?$.marked:j=="variable"&&H(E,J)?"variable-2":R}}}var $={state:null,column:null,marked:null,cc:null};function ie(){for(var E=arguments.length-1;E>=0;E--)$.cc.push(arguments[E])}function D(){return ie.apply(null,arguments),!0}function ae(E,R){for(var j=R;j;j=j.next)if(j.name==E)return!0;return!1}function le(E){var R=$.state;if($.marked="def",!!d){if(R.context){if(R.lexical.info=="var"&&R.context&&R.context.block){var j=Se(E,R.context);if(j!=null){R.context=j;return}}else if(!ae(E,R.localVars)){R.localVars=new kn(E,R.localVars);return}}r.globalVars&&!ae(E,R.globalVars)&&(R.globalVars=new kn(E,R.globalVars))}}function Se(E,R){if(R)if(R.block){var j=Se(E,R.prev);return j?j==R.prev?R:new ot(j,R.vars,!0):null}else return ae(E,R.vars)?R:new ot(R.prev,new kn(E,R.vars),!1);else return null}function Je(E){return E=="public"||E=="private"||E=="protected"||E=="abstract"||E=="readonly"}function ot(E,R,j){this.prev=E,this.vars=R,this.block=j}function kn(E,R){this.name=E,this.next=R}var nr=new kn("this",new kn("arguments",null));function wt(){$.state.context=new ot($.state.context,$.state.localVars,!1),$.state.localVars=nr}function Xt(){$.state.context=new ot($.state.context,$.state.localVars,!0),$.state.localVars=null}wt.lex=Xt.lex=!0;function xt(){$.state.localVars=$.state.context.vars,$.state.context=$.state.context.prev}xt.lex=!0;function Pe(E,R){var j=function(){var J=$.state,Re=J.indented;if(J.lexical.type=="stat")Re=J.lexical.indented;else for(var Xe=J.lexical;Xe&&Xe.type==")"&&Xe.align;Xe=Xe.prev)Re=Xe.indented;J.lexical=new U(Re,$.stream.column(),E,null,J.lexical,R)};return j.lex=!0,j}function Te(){var E=$.state;E.lexical.prev&&(E.lexical.type==")"&&(E.indented=E.lexical.indented),E.lexical=E.lexical.prev)}Te.lex=!0;function Fe(E){function R(j){return j==E?D():E==";"||j=="}"||j==")"||j=="]"?ie():D(R)}return R}function _e(E,R){return E=="var"?D(Pe("vardef",R),Lt,Fe(";"),Te):E=="keyword a"?D(Pe("form"),Hn,_e,Te):E=="keyword b"?D(Pe("form"),_e,Te):E=="keyword d"?$.stream.match(/^\s*$/,!1)?D():D(Pe("stat"),Gt,Fe(";"),Te):E=="debugger"?D(Fe(";")):E=="{"?D(Pe("}"),Xt,de,Te,xt):E==";"?D():E=="if"?($.state.lexical.info=="else"&&$.state.cc[$.state.cc.length-1]==Te&&$.state.cc.pop()(),D(Pe("form"),Hn,_e,Te,mr)):E=="function"?D(en):E=="for"?D(Pe("form"),Xt,yr,_e,xt,Te):E=="class"||g&&R=="interface"?($.marked="keyword",D(Pe("form",E=="class"?E:R),kl,Te)):E=="variable"?g&&R=="declare"?($.marked="keyword",D(_e)):g&&(R=="module"||R=="enum"||R=="type")&&$.stream.match(/^\s*\w/,!1)?($.marked="keyword",R=="enum"?D(Zi):R=="type"?D(Un,Fe("operator"),se,Fe(";")):D(Pe("form"),ht,Fe("{"),Pe("}"),de,Te,Te)):g&&R=="namespace"?($.marked="keyword",D(Pe("form"),ze,_e,Te)):g&&R=="abstract"?($.marked="keyword",D(_e)):D(Pe("stat"),Ye):E=="switch"?D(Pe("form"),Hn,Fe("{"),Pe("}","switch"),Xt,de,Te,Te,xt):E=="case"?D(ze,Fe(":")):E=="default"?D(Fe(":")):E=="catch"?D(Pe("form"),wt,$e,_e,Te,xt):E=="export"?D(Pe("stat"),ni,Te):E=="import"?D(Pe("stat"),Rr,Te):E=="async"?D(_e):R=="@"?D(ze,_e):ie(Pe("stat"),ze,Fe(";"),Te)}function $e(E){if(E=="(")return D(un,Fe(")"))}function ze(E,R){return Nn(E,R,!1)}function ut(E,R){return Nn(E,R,!0)}function Hn(E){return E!="("?ie():D(Pe(")"),Gt,Fe(")"),Te)}function Nn(E,R,j){if($.state.fatArrowAt==$.stream.start){var J=j?at:gr;if(E=="(")return D(wt,Pe(")"),oe(un,")"),Te,Fe("=>"),J,xt);if(E=="variable")return ie(wt,ht,Fe("=>"),J,xt)}var Re=j?kt:Ze;return _.hasOwnProperty(E)?D(Re):E=="function"?D(en,Re):E=="class"||g&&R=="interface"?($.marked="keyword",D(Pe("form"),vr,Te)):E=="keyword c"||E=="async"?D(j?ut:ze):E=="("?D(Pe(")"),Gt,Fe(")"),Te,Re):E=="operator"||E=="spread"?D(j?ut:ze):E=="["?D(Pe("]"),qr,Te,Re):E=="{"?re(F,"}",null,Re):E=="quasi"?ie(Be,Re):E=="new"?D(K(j)):D()}function Gt(E){return E.match(/[;\}\)\],]/)?ie():ie(ze)}function Ze(E,R){return E==","?D(Gt):kt(E,R,!1)}function kt(E,R,j){var J=j==!1?Ze:kt,Re=j==!1?ze:ut;if(E=="=>")return D(wt,j?at:gr,xt);if(E=="operator")return/\+\+|--/.test(R)||g&&R=="!"?D(J):g&&R=="<"&&$.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?D(Pe(">"),oe(se,">"),Te,J):R=="?"?D(ze,Fe(":"),Re):D(Re);if(E=="quasi")return ie(Be,J);if(E!=";"){if(E=="(")return re(ut,")","call",J);if(E==".")return D(q,J);if(E=="[")return D(Pe("]"),Gt,Fe("]"),Te,J);if(g&&R=="as")return $.marked="keyword",D(se,J);if(E=="regexp")return $.state.lastType=$.marked="operator",$.stream.backUp($.stream.pos-$.stream.start-1),D(Re)}}function Be(E,R){return E!="quasi"?ie():R.slice(R.length-2)!="${"?D(Be):D(Gt,Zt)}function Zt(E){if(E=="}")return $.marked="string-2",$.state.tokenize=O,D(Be)}function gr(E){return I($.stream,$.state),ie(E=="{"?_e:ze)}function at(E){return I($.stream,$.state),ie(E=="{"?_e:ut)}function K(E){return function(R){return R=="."?D(E?te:ue):R=="variable"&&g?D(nt,E?kt:Ze):ie(E?ut:ze)}}function ue(E,R){if(R=="target")return $.marked="keyword",D(Ze)}function te(E,R){if(R=="target")return $.marked="keyword",D(kt)}function Ye(E){return E==":"?D(Te,_e):ie(Ze,Fe(";"),Te)}function q(E){if(E=="variable")return $.marked="property",D()}function F(E,R){if(E=="async")return $.marked="property",D(F);if(E=="variable"||$.style=="keyword"){if($.marked="property",R=="get"||R=="set")return D(V);var j;return g&&$.state.fatArrowAt==$.stream.start&&(j=$.stream.match(/^\s*:\s*/,!1))&&($.state.fatArrowAt=$.stream.pos+j[0].length),D(Y)}else{if(E=="number"||E=="string")return $.marked=a?"property":$.style+" property",D(Y);if(E=="jsonld-keyword")return D(Y);if(g&&Je(R))return $.marked="keyword",D(F);if(E=="[")return D(ze,ge,Fe("]"),Y);if(E=="spread")return D(ut,Y);if(R=="*")return $.marked="keyword",D(F);if(E==":")return ie(Y)}}function V(E){return E!="variable"?ie(Y):($.marked="property",D(en))}function Y(E){if(E==":")return D(ut);if(E=="(")return ie(en)}function oe(E,R,j){function J(Re,Xe){if(j?j.indexOf(Re)>-1:Re==","){var et=$.state.lexical;return et.info=="call"&&(et.pos=(et.pos||0)+1),D(function(zt,Pn){return zt==R||Pn==R?ie():ie(E)},J)}return Re==R||Xe==R?D():j&&j.indexOf(";")>-1?ie(E):D(Fe(R))}return function(Re,Xe){return Re==R||Xe==R?D():ie(E,J)}}function re(E,R,j){for(var J=3;J<arguments.length;J++)$.cc.push(arguments[J]);return D(Pe(R,j),oe(E,R),Te)}function de(E){return E=="}"?D():ie(_e,de)}function ge(E,R){if(g){if(E==":")return D(se);if(R=="?")return D(ge)}}function we(E,R){if(g&&(E==":"||R=="in"))return D(se)}function ve(E){if(g&&E==":")return $.stream.match(/^\s*\w+\s+is\b/,!1)?D(ze,Ue,se):D(se)}function Ue(E,R){if(R=="is")return $.marked="keyword",D()}function se(E,R){if(R=="keyof"||R=="typeof"||R=="infer"||R=="readonly")return $.marked="keyword",D(R=="typeof"?ut:se);if(E=="variable"||R=="void")return $.marked="type",D(tt);if(R=="|"||R=="&")return D(se);if(E=="string"||E=="number"||E=="atom")return D(tt);if(E=="[")return D(Pe("]"),oe(se,"]",","),Te,tt);if(E=="{")return D(Pe("}"),Qe,Te,tt);if(E=="(")return D(oe(st,")"),je,tt);if(E=="<")return D(oe(se,">"),se);if(E=="quasi")return ie(De,tt)}function je(E){if(E=="=>")return D(se)}function Qe(E){return E.match(/[\}\)\]]/)?D():E==","||E==";"?D(Qe):ie(He,Qe)}function He(E,R){if(E=="variable"||$.style=="keyword")return $.marked="property",D(He);if(R=="?"||E=="number"||E=="string")return D(He);if(E==":")return D(se);if(E=="[")return D(Fe("variable"),we,Fe("]"),He);if(E=="(")return ie(cn,He);if(!E.match(/[;\}\)\],]/))return D()}function De(E,R){return E!="quasi"?ie():R.slice(R.length-2)!="${"?D(De):D(se,It)}function It(E){if(E=="}")return $.marked="string-2",$.state.tokenize=O,D(De)}function st(E,R){return E=="variable"&&$.stream.match(/^\s*[?:]/,!1)||R=="?"?D(st):E==":"?D(se):E=="spread"?D(st):ie(se)}function tt(E,R){if(R=="<")return D(Pe(">"),oe(se,">"),Te,tt);if(R=="|"||E=="."||R=="&")return D(se);if(E=="[")return D(se,Fe("]"),tt);if(R=="extends"||R=="implements")return $.marked="keyword",D(se);if(R=="?")return D(se,Fe(":"),se)}function nt(E,R){if(R=="<")return D(Pe(">"),oe(se,">"),Te,tt)}function mt(){return ie(se,an)}function an(E,R){if(R=="=")return D(se)}function Lt(E,R){return R=="enum"?($.marked="keyword",D(Zi)):ie(ht,ge,Nt,ti)}function ht(E,R){if(g&&Je(R))return $.marked="keyword",D(ht);if(E=="variable")return le(R),D();if(E=="spread")return D(ht);if(E=="[")return re(Mn,"]");if(E=="{")return re(ln,"}")}function ln(E,R){return E=="variable"&&!$.stream.match(/^\s*:/,!1)?(le(R),D(Nt)):(E=="variable"&&($.marked="property"),E=="spread"?D(ht):E=="}"?ie():E=="["?D(ze,Fe("]"),Fe(":"),ln):D(Fe(":"),ht,Nt))}function Mn(){return ie(ht,Nt)}function Nt(E,R){if(R=="=")return D(ut)}function ti(E){if(E==",")return D(Lt)}function mr(E,R){if(E=="keyword b"&&R=="else")return D(Pe("form","else"),_e,Te)}function yr(E,R){if(R=="await")return D(yr);if(E=="(")return D(Pe(")"),On,Te)}function On(E){return E=="var"?D(Lt,Wn):E=="variable"?D(Wn):ie(Wn)}function Wn(E,R){return E==")"?D():E==";"?D(Wn):R=="in"||R=="of"?($.marked="keyword",D(ze,Wn)):ie(ze,Wn)}function en(E,R){if(R=="*")return $.marked="keyword",D(en);if(E=="variable")return le(R),D(en);if(E=="(")return D(wt,Pe(")"),oe(un,")"),Te,ve,_e,xt);if(g&&R=="<")return D(Pe(">"),oe(mt,">"),Te,en)}function cn(E,R){if(R=="*")return $.marked="keyword",D(cn);if(E=="variable")return le(R),D(cn);if(E=="(")return D(wt,Pe(")"),oe(un,")"),Te,ve,xt);if(g&&R=="<")return D(Pe(">"),oe(mt,">"),Te,cn)}function Un(E,R){if(E=="keyword"||E=="variable")return $.marked="type",D(Un);if(R=="<")return D(Pe(">"),oe(mt,">"),Te)}function un(E,R){return R=="@"&&D(ze,un),E=="spread"?D(un):g&&Je(R)?($.marked="keyword",D(un)):g&&E=="this"?D(ge,Nt):ie(ht,ge,Nt)}function vr(E,R){return E=="variable"?kl(E,R):Xi(E,R)}function kl(E,R){if(E=="variable")return le(R),D(Xi)}function Xi(E,R){if(R=="<")return D(Pe(">"),oe(mt,">"),Te,Xi);if(R=="extends"||R=="implements"||g&&E==",")return R=="implements"&&($.marked="keyword"),D(g?se:ze,Xi);if(E=="{")return D(Pe("}"),Cn,Te)}function Cn(E,R){if(E=="async"||E=="variable"&&(R=="static"||R=="get"||R=="set"||g&&Je(R))&&$.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return $.marked="keyword",D(Cn);if(E=="variable"||$.style=="keyword")return $.marked="property",D(Br,Cn);if(E=="number"||E=="string")return D(Br,Cn);if(E=="[")return D(ze,ge,Fe("]"),Br,Cn);if(R=="*")return $.marked="keyword",D(Cn);if(g&&E=="(")return ie(cn,Cn);if(E==";"||E==",")return D(Cn);if(E=="}")return D();if(R=="@")return D(ze,Cn)}function Br(E,R){if(R=="!"||R=="?")return D(Br);if(E==":")return D(se,Nt);if(R=="=")return D(ut);var j=$.state.lexical.prev,J=j&&j.info=="interface";return ie(J?cn:en)}function ni(E,R){return R=="*"?($.marked="keyword",D(ke,Fe(";"))):R=="default"?($.marked="keyword",D(ze,Fe(";"))):E=="{"?D(oe(Cl,"}"),ke,Fe(";")):ie(_e)}function Cl(E,R){if(R=="as")return $.marked="keyword",D(Fe("variable"));if(E=="variable")return ie(ut,Cl)}function Rr(E){return E=="string"?D():E=="("?ie(ze):E=="."?ie(Ze):ie(ri,fs,ke)}function ri(E,R){return E=="{"?re(ri,"}"):(E=="variable"&&le(R),R=="*"&&($.marked="keyword"),D(At))}function fs(E){if(E==",")return D(ri,fs)}function At(E,R){if(R=="as")return $.marked="keyword",D(ri)}function ke(E,R){if(R=="from")return $.marked="keyword",D(ze)}function qr(E){return E=="]"?D():ie(oe(ut,"]"))}function Zi(){return ie(Pe("form"),ht,Fe("{"),Pe("}"),oe($n,"}"),Te,Te)}function $n(){return ie(ht,Nt)}function rt(E,R){return E.lastType=="operator"||E.lastType==","||v.test(R.charAt(0))||/[,.]/.test(R.charAt(0))}function br(E,R,j){return R.tokenize==N&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(R.lastType)||R.lastType=="quasi"&&/\{\s*$/.test(E.string.slice(0,E.pos-(j||0)))}return{startState:function(E){var R={tokenize:N,lastType:"sof",cc:[],lexical:new U((E||0)-i,0,"block",!1),localVars:r.localVars,context:r.localVars&&new ot(null,null,!1),indented:E||0};return r.globalVars&&typeof r.globalVars=="object"&&(R.globalVars=r.globalVars),R},token:function(E,R){if(E.sol()&&(R.lexical.hasOwnProperty("align")||(R.lexical.align=!1),R.indented=E.indentation(),I(E,R)),R.tokenize!=M&&E.eatSpace())return null;var j=R.tokenize(E,R);return T=="comment"?j:(R.lastType=T=="operator"&&(L=="++"||L=="--")?"incdec":T,ce(R,j,T,L,E))},indent:function(E,R){if(E.tokenize==M||E.tokenize==O)return t.Pass;if(E.tokenize!=N)return 0;var j=R&&R.charAt(0),J=E.lexical,Re;if(!/^\s*else\b/.test(R))for(var Xe=E.cc.length-1;Xe>=0;--Xe){var et=E.cc[Xe];if(et==Te)J=J.prev;else if(et!=mr&&et!=xt)break}for(;(J.type=="stat"||J.type=="form")&&(j=="}"||(Re=E.cc[E.cc.length-1])&&(Re==Ze||Re==kt)&&!/^[,\.=+\-*:?[\(]/.test(R));)J=J.prev;s&&J.type==")"&&J.prev.type=="stat"&&(J=J.prev);var zt=J.type,Pn=j==zt;return zt=="vardef"?J.indented+(E.lastType=="operator"||E.lastType==","?J.info.length+1:0):zt=="form"&&j=="{"?J.indented:zt=="form"?J.indented+i:zt=="stat"?J.indented+(rt(E,R)?s||i:0):J.info=="switch"&&!Pn&&r.doubleIndentSwitch!=!1?J.indented+(/^(?:case|default)\b/.test(R)?i:2*i):J.align?J.column+(Pn?0:1):J.indented+(Pn?0:i)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:f?null:"/*",blockCommentEnd:f?null:"*/",blockCommentContinue:f?null:" * ",lineComment:f?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:f?"json":"javascript",jsonldMode:a,jsonMode:f,expressionAllowed:br,skipExpression:function(E){ce(E,"atom","atom","true",new t.StringStream("",2,null))}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})})});var Uc=ee((e9,UC)=>{function FF(t,e){switch(t.charCodeAt(e)){default:return 0;case 10:return 1;case 13:return e+1<t.length&&t.charCodeAt(e+1)===10?2:1}}UC.exports={newLineLength:FF}});var GC=ee((t9,$C)=>{var{newLineLength:_F}=Uc();$C.exports=(t,e)=>{let r=1,i=0;for(let s=0;s<t.length;s++){let a=_F(t,s);a!==0&&(e(i,s+a,r++),i=s+a,s+=a-1)}e(i,t.length,r++)}});var KC=ee((n9,VC)=>{var{newLineLength:jF}=Uc();VC.exports=(t,e)=>{let r=1,i=0;for(let s=0;s<t.length;s++){let a=jF(t,s);a!==0&&(e(i,s,r++),i=s+a,s+=a-1)}e(i,t.length,r++)}});var QC=ee((r9,YC)=>{YC.exports=function(t){if(t instanceof RegExp){let e=t.flags.indexOf("g")!==-1?t.flags:t.flags+"g",r=new RegExp(t,e);return function(i,s){let a;for(;a=r.exec(i);)s(a.index,a.index+a[0].length)}}return t=String(t),function(e,r){let i=-1;for(;i=e.indexOf(t,i+1),i!==-1;)r(i,i+t.length)}}});var XC=ee((i9,JC)=>{var{newLineLength:HF}=Uc();JC.exports=(t,e)=>{let r=1;for(let i=0;i<t.length;i++){let s=HF(t,i);s!==0&&(e(i,i+s,r++),i+=s-1)}}});var eS=ee((o9,ZC)=>{ZC.exports={lines:GC(),lineContents:KC(),matches:QC(),newlines:XC()}});var $c=ee((s9,rS)=>{function tS(t){return sp.call(null,t)}function sp(t){let e=this===window?{}:this||{},r={};return Object.assign(r,e,t,{fork:sp.bind(r),ranges:Object.assign({},e.ranges,t&&t.ranges)}),typeof r.createHook!="function"&&(r.createHook=i=>i()),r}function nS(t){let e=Object.assign({},this);for(let r in t){let i=t[r];if(!(!i||typeof i!="object"))if(hasOwnProperty.call(e,r)){let s=e[r];e[r]=s&&typeof s.fork=="function"?s.fork(t[r]):s}else e[r]=tS(t[r])}return e.fork=nS.bind(e),e}rS.exports={createPrinter:tS,forkPrinter:sp,forkPrinterSet:nS}});var ap=ee((a9,iS)=>{iS.exports=$c().createPrinter()});var sS=ee((l9,oS)=>{var{createPrinter:WF}=$c();oS.exports=WF({print:t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")})});var lS=ee((c9,aS)=>{var{forkPrinterSet:UF}=$c();aS.exports=UF.call({},{noop:ap(),html:sS(),tty:ap()})});var uS=ee((u9,cS)=>{cS.exports=function(e,r){let i=[];return r.forEach(({generate:s,marker:a})=>s(e,(f,d,g)=>i.push({type:a,start:f,end:d,data:g}))),i}});var dS=ee((f9,fS)=>{var Gc=()=>"",$F=function(){};function Gi(t,e){return typeof t=="function"?t:e||$F}fS.exports=function(e,r,i){let s=Gi(i.print,M=>M),a=Object.assign(Object.defineProperties(Object.create(null),{offset:{get:()=>v},line:{get:()=>w},column:{get:()=>k},start:{get:()=>d.start},end:{get:()=>d.end},data:{get:()=>d.data}}),Gi(i.createContext)()),f=[],d={start:0,end:e.length},g=i.ranges||{},p=[],y=1/0,v=0,w=1,k=1,T="";T+=Gi(i.open,Gc)(a),g=[].concat(Object.getOwnPropertyNames(g),Object.getOwnPropertySymbols(g)).reduce((M,O)=>{let z=g[O];return typeof z=="function"&&(g[O]=z=i.createHook(z)),z&&(p.push(O),M[O]={open:Gi(z.open,Gc),close:Gi(z.close,Gc),print:Gi(z.print,s)}),M},{}),r=r.slice().sort((M,O)=>M.start-O.start||O.end-M.end||p.indexOf(M.type)-p.indexOf(O.type));let L=M=>g[(d=f[M]).type].open(a)||"",A=M=>g[(d=f[M]).type].close(a)||"",N=M=>{if(v!==M){let O=e.substring(v,M),z=f.length?g[f[f.length-1].type].print:s;for(let I=v;I<M;I++){let _=e.charCodeAt(I);_===10||_===13&&(I>=e.length||e.charCodeAt(I+1)!==10)?(w++,k=1):k++}T+=z(O,a),v=M}},S=M=>{for(;y<=M;){N(y);for(let O=f.length-1;O>=0&&f[O].end===y;O--)T+=A(O),f.pop();y=1/0;for(let O=0;O<f.length;O++)f[O].end<y&&(y=f[O].end)}};for(let M=0;M<r.length;M++){let O=r[M],z=0;if(g.hasOwnProperty(O.type)!==!1&&!(O.start>O.end||!Number.isFinite(O.start)||!Number.isFinite(O.end))){for(S(O.start),N(O.start),z=0;z<f.length;z++)if(f[z].end<O.end){for(let I=f.length-1;I>=z;I--)T+=A(I);break}for(f.splice(z,0,O);z<f.length;z++)T+=L(z);O.end<y&&(y=O.end)}}S(e.length),N(e.length);for(let M=f.length-1;M>=0;M--)T+=A(M);return T+=Gi(i.close,Gc)(a)||"",T}});var gS=ee((d9,pS)=>{var GF=eS(),up=lS(),hS=uS(),VF=dS();function KF(t,e){return{marker:t,generate:e}}function YF(t,e){let r={};for(let i in e)r[i]={ranges:{[t]:e[i]}};return r}function cp(t,e,r){let i=(s,a)=>{let f=e[a||r]||up.noop,d=hS(s,t);return VF(s,d,f)};return Object.assign(i,{print:i,generateRanges(s){return hS(s,t)},use(s,a){let f=Symbol(s.name),d=s.ranges||s,g=Array.isArray(d)?(p,y)=>d.forEach(v=>y(...v)):d;return typeof g!="function"||(a||(a=s.printer),!a)?i:cp(t.concat(KF(f,g)),e.fork(YF(f,a)),r)},printer(s){return cp(t,e,s)}})}function lp(t,e,r){let i=cp([],r||up,e);return Array.isArray(t)&&(i=t.reduce((s,a)=>Array.isArray(a)?s.use(...a):s.use(a),i)),i}pS.exports=Object.assign(lp,{gen:GF,printer:Object.assign((...t)=>lp().printer(...t),up),use(...t){return lp().use(...t)}})});var vS=ee((mS,yS)=>{(function(t){typeof mS=="object"&&typeof yS=="object"?t(Jr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";t.defineMode("css",function(U,H){var ce=H.inline;H.propertyKeywords||(H=t.resolveMode("text/css"));var $=U.indentUnit,ie=H.tokenHooks,D=H.documentTypes||{},ae=H.mediaTypes||{},le=H.mediaFeatures||{},Se=H.mediaValueKeywords||{},Je=H.propertyKeywords||{},ot=H.nonStandardPropertyKeywords||{},kn=H.fontProperties||{},nr=H.counterDescriptors||{},wt=H.colorKeywords||{},Xt=H.valueKeywords||{},xt=H.allowNested,Pe=H.lineComment,Te=H.supportsAtComponent===!0,Fe=U.highlightNonStandardPropertyKeywords!==!1,_e,$e;function ze(K,ue){return _e=ue,K}function ut(K,ue){var te=K.next();if(ie[te]){var Ye=ie[te](K,ue);if(Ye!==!1)return Ye}if(te=="@")return K.eatWhile(/[\w\\\-]/),ze("def",K.current());if(te=="="||(te=="~"||te=="|")&&K.eat("="))return ze(null,"compare");if(te=='"'||te=="'")return ue.tokenize=Hn(te),ue.tokenize(K,ue);if(te=="#")return K.eatWhile(/[\w\\\-]/),ze("atom","hash");if(te=="!")return K.match(/^\s*\w*/),ze("keyword","important");if(/\d/.test(te)||te=="."&&K.eat(/\d/))return K.eatWhile(/[\w.%]/),ze("number","unit");if(te==="-"){if(/[\d.]/.test(K.peek()))return K.eatWhile(/[\w.%]/),ze("number","unit");if(K.match(/^-[\w\\\-]*/))return K.eatWhile(/[\w\\\-]/),K.match(/^\s*:/,!1)?ze("variable-2","variable-definition"):ze("variable-2","variable");if(K.match(/^\w+-/))return ze("meta","meta")}else return/[,+>*\/]/.test(te)?ze(null,"select-op"):te=="."&&K.match(/^-?[_a-z][_a-z0-9-]*/i)?ze("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(te)?ze(null,te):K.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(K.current())&&(ue.tokenize=Nn),ze("variable callee","variable")):/[\w\\\-]/.test(te)?(K.eatWhile(/[\w\\\-]/),ze("property","word")):ze(null,null)}function Hn(K){return function(ue,te){for(var Ye=!1,q;(q=ue.next())!=null;){if(q==K&&!Ye){K==")"&&ue.backUp(1);break}Ye=!Ye&&q=="\\"}return(q==K||!Ye&&K!=")")&&(te.tokenize=null),ze("string","string")}}function Nn(K,ue){return K.next(),K.match(/^\s*[\"\')]/,!1)?ue.tokenize=null:ue.tokenize=Hn(")"),ze(null,"(")}function Gt(K,ue,te){this.type=K,this.indent=ue,this.prev=te}function Ze(K,ue,te,Ye){return K.context=new Gt(te,ue.indentation()+(Ye===!1?0:$),K.context),te}function kt(K){return K.context.prev&&(K.context=K.context.prev),K.context.type}function Be(K,ue,te){return at[te.context.type](K,ue,te)}function Zt(K,ue,te,Ye){for(var q=Ye||1;q>0;q--)te.context=te.context.prev;return Be(K,ue,te)}function gr(K){var ue=K.current().toLowerCase();Xt.hasOwnProperty(ue)?$e="atom":wt.hasOwnProperty(ue)?$e="keyword":$e="variable"}var at={};return at.top=function(K,ue,te){if(K=="{")return Ze(te,ue,"block");if(K=="}"&&te.context.prev)return kt(te);if(Te&&/@component/i.test(K))return Ze(te,ue,"atComponentBlock");if(/^@(-moz-)?document$/i.test(K))return Ze(te,ue,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(K))return Ze(te,ue,"atBlock");if(/^@(font-face|counter-style)/i.test(K))return te.stateArg=K,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(K))return"keyframes";if(K&&K.charAt(0)=="@")return Ze(te,ue,"at");if(K=="hash")$e="builtin";else if(K=="word")$e="tag";else{if(K=="variable-definition")return"maybeprop";if(K=="interpolation")return Ze(te,ue,"interpolation");if(K==":")return"pseudo";if(xt&&K=="(")return Ze(te,ue,"parens")}return te.context.type},at.block=function(K,ue,te){if(K=="word"){var Ye=ue.current().toLowerCase();return Je.hasOwnProperty(Ye)?($e="property","maybeprop"):ot.hasOwnProperty(Ye)?($e=Fe?"string-2":"property","maybeprop"):xt?($e=ue.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):($e+=" error","maybeprop")}else return K=="meta"?"block":!xt&&(K=="hash"||K=="qualifier")?($e="error","block"):at.top(K,ue,te)},at.maybeprop=function(K,ue,te){return K==":"?Ze(te,ue,"prop"):Be(K,ue,te)},at.prop=function(K,ue,te){if(K==";")return kt(te);if(K=="{"&&xt)return Ze(te,ue,"propBlock");if(K=="}"||K=="{")return Zt(K,ue,te);if(K=="(")return Ze(te,ue,"parens");if(K=="hash"&&!/^#([0-9a-fA-F]{3,4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/.test(ue.current()))$e+=" error";else if(K=="word")gr(ue);else if(K=="interpolation")return Ze(te,ue,"interpolation");return"prop"},at.propBlock=function(K,ue,te){return K=="}"?kt(te):K=="word"?($e="property","maybeprop"):te.context.type},at.parens=function(K,ue,te){return K=="{"||K=="}"?Zt(K,ue,te):K==")"?kt(te):K=="("?Ze(te,ue,"parens"):K=="interpolation"?Ze(te,ue,"interpolation"):(K=="word"&&gr(ue),"parens")},at.pseudo=function(K,ue,te){return K=="meta"?"pseudo":K=="word"?($e="variable-3",te.context.type):Be(K,ue,te)},at.documentTypes=function(K,ue,te){return K=="word"&&D.hasOwnProperty(ue.current())?($e="tag",te.context.type):at.atBlock(K,ue,te)},at.atBlock=function(K,ue,te){if(K=="(")return Ze(te,ue,"atBlock_parens");if(K=="}"||K==";")return Zt(K,ue,te);if(K=="{")return kt(te)&&Ze(te,ue,xt?"block":"top");if(K=="interpolation")return Ze(te,ue,"interpolation");if(K=="word"){var Ye=ue.current().toLowerCase();Ye=="only"||Ye=="not"||Ye=="and"||Ye=="or"?$e="keyword":ae.hasOwnProperty(Ye)?$e="attribute":le.hasOwnProperty(Ye)?$e="property":Se.hasOwnProperty(Ye)?$e="keyword":Je.hasOwnProperty(Ye)?$e="property":ot.hasOwnProperty(Ye)?$e=Fe?"string-2":"property":Xt.hasOwnProperty(Ye)?$e="atom":wt.hasOwnProperty(Ye)?$e="keyword":$e="error"}return te.context.type},at.atComponentBlock=function(K,ue,te){return K=="}"?Zt(K,ue,te):K=="{"?kt(te)&&Ze(te,ue,xt?"block":"top",!1):(K=="word"&&($e="error"),te.context.type)},at.atBlock_parens=function(K,ue,te){return K==")"?kt(te):K=="{"||K=="}"?Zt(K,ue,te,2):at.atBlock(K,ue,te)},at.restricted_atBlock_before=function(K,ue,te){return K=="{"?Ze(te,ue,"restricted_atBlock"):K=="word"&&te.stateArg=="@counter-style"?($e="variable","restricted_atBlock_before"):Be(K,ue,te)},at.restricted_atBlock=function(K,ue,te){return K=="}"?(te.stateArg=null,kt(te)):K=="word"?(te.stateArg=="@font-face"&&!kn.hasOwnProperty(ue.current().toLowerCase())||te.stateArg=="@counter-style"&&!nr.hasOwnProperty(ue.current().toLowerCase())?$e="error":$e="property","maybeprop"):"restricted_atBlock"},at.keyframes=function(K,ue,te){return K=="word"?($e="variable","keyframes"):K=="{"?Ze(te,ue,"top"):Be(K,ue,te)},at.at=function(K,ue,te){return K==";"?kt(te):K=="{"||K=="}"?Zt(K,ue,te):(K=="word"?$e="tag":K=="hash"&&($e="builtin"),"at")},at.interpolation=function(K,ue,te){return K=="}"?kt(te):K=="{"||K==";"?Zt(K,ue,te):(K=="word"?$e="variable":K!="variable"&&K!="("&&K!=")"&&($e="error"),"interpolation")},{startState:function(K){return{tokenize:null,state:ce?"block":"top",stateArg:null,context:new Gt(ce?"block":"top",K||0,null)}},token:function(K,ue){if(!ue.tokenize&&K.eatSpace())return null;var te=(ue.tokenize||ut)(K,ue);return te&&typeof te=="object"&&(_e=te[1],te=te[0]),$e=te,_e!="comment"&&(ue.state=at[ue.state](_e,K,ue)),$e},indent:function(K,ue){var te=K.context,Ye=ue&&ue.charAt(0),q=te.indent;return te.type=="prop"&&(Ye=="}"||Ye==")")&&(te=te.prev),te.prev&&(Ye=="}"&&(te.type=="block"||te.type=="top"||te.type=="interpolation"||te.type=="restricted_atBlock")?(te=te.prev,q=te.indent):(Ye==")"&&(te.type=="parens"||te.type=="atBlock_parens")||Ye=="{"&&(te.type=="at"||te.type=="atBlock"))&&(q=Math.max(0,te.indent-$))),q},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:Pe,fold:"brace"}});function e(U){for(var H={},ce=0;ce<U.length;++ce)H[U[ce].toLowerCase()]=!0;return H}var r=["domain","regexp","url","url-prefix"],i=e(r),s=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],a=e(s),f=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme","dynamic-range","video-dynamic-range"],d=e(f),g=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light","standard","high"],p=e(g),y=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],v=e(y),w=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],k=e(w),T=["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],L=e(T),A=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],N=e(A),S=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],M=e(S),O=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","conic-gradient","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-play-button","media-slider","media-sliderthumb","media-volume-slider","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeating-conic-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],z=e(O),I=r.concat(s).concat(f).concat(g).concat(y).concat(w).concat(S).concat(O);t.registerHelper("hintWords","css",I);function _(U,H){for(var ce=!1,$;($=U.next())!=null;){if(ce&&$=="/"){H.tokenize=null;break}ce=$=="*"}return["comment","comment"]}t.defineMIME("text/css",{documentTypes:i,mediaTypes:a,mediaFeatures:d,mediaValueKeywords:p,propertyKeywords:v,nonStandardPropertyKeywords:k,fontProperties:L,counterDescriptors:N,colorKeywords:M,valueKeywords:z,tokenHooks:{"/":function(U,H){return U.eat("*")?(H.tokenize=_,_(U,H)):!1}},name:"css"}),t.defineMIME("text/x-scss",{mediaTypes:a,mediaFeatures:d,mediaValueKeywords:p,propertyKeywords:v,nonStandardPropertyKeywords:k,colorKeywords:M,valueKeywords:z,fontProperties:L,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(U,H){return U.eat("/")?(U.skipToEnd(),["comment","comment"]):U.eat("*")?(H.tokenize=_,_(U,H)):["operator","operator"]},":":function(U){return U.match(/^\s*\{/,!1)?[null,null]:!1},$:function(U){return U.match(/^[\w-]+/),U.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(U){return U.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),t.defineMIME("text/x-less",{mediaTypes:a,mediaFeatures:d,mediaValueKeywords:p,propertyKeywords:v,nonStandardPropertyKeywords:k,colorKeywords:M,valueKeywords:z,fontProperties:L,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(U,H){return U.eat("/")?(U.skipToEnd(),["comment","comment"]):U.eat("*")?(H.tokenize=_,_(U,H)):["operator","operator"]},"@":function(U){return U.eat("{")?[null,"interpolation"]:U.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)?!1:(U.eatWhile(/[\w\\\-]/),U.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),t.defineMIME("text/x-gss",{documentTypes:i,mediaTypes:a,mediaFeatures:d,propertyKeywords:v,nonStandardPropertyKeywords:k,fontProperties:L,counterDescriptors:N,colorKeywords:M,valueKeywords:z,supportsAtComponent:!0,tokenHooks:{"/":function(U,H){return U.eat("*")?(H.tokenize=_,_(U,H)):!1}},name:"css",helperType:"gss"})})});var xS=ee((bS,wS)=>{(function(t){typeof bS=="object"&&typeof wS=="object"?t(Jr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";var e={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},r={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};t.defineMode("xml",function(i,s){var a=i.indentUnit,f={},d=s.htmlMode?e:r;for(var g in d)f[g]=d[g];for(var g in s)f[g]=s[g];var p,y;function v(D,ae){function le(ot){return ae.tokenize=ot,ot(D,ae)}var Se=D.next();if(Se=="<")return D.eat("!")?D.eat("[")?D.match("CDATA[")?le(T("atom","]]>")):null:D.match("--")?le(T("comment","-->")):D.match("DOCTYPE",!0,!0)?(D.eatWhile(/[\w\._\-]/),le(L(1))):null:D.eat("?")?(D.eatWhile(/[\w\._\-]/),ae.tokenize=T("meta","?>"),"meta"):(p=D.eat("/")?"closeTag":"openTag",ae.tokenize=w,"tag bracket");if(Se=="&"){var Je;return D.eat("#")?D.eat("x")?Je=D.eatWhile(/[a-fA-F\d]/)&&D.eat(";"):Je=D.eatWhile(/[\d]/)&&D.eat(";"):Je=D.eatWhile(/[\w\.\-:]/)&&D.eat(";"),Je?"atom":"error"}else return D.eatWhile(/[^&<]/),null}v.isInText=!0;function w(D,ae){var le=D.next();if(le==">"||le=="/"&&D.eat(">"))return ae.tokenize=v,p=le==">"?"endTag":"selfcloseTag","tag bracket";if(le=="=")return p="equals",null;if(le=="<"){ae.tokenize=v,ae.state=O,ae.tagName=ae.tagStart=null;var Se=ae.tokenize(D,ae);return Se?Se+" tag error":"tag error"}else return/[\'\"]/.test(le)?(ae.tokenize=k(le),ae.stringStartCol=D.column(),ae.tokenize(D,ae)):(D.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function k(D){var ae=function(le,Se){for(;!le.eol();)if(le.next()==D){Se.tokenize=w;break}return"string"};return ae.isInAttribute=!0,ae}function T(D,ae){return function(le,Se){for(;!le.eol();){if(le.match(ae)){Se.tokenize=v;break}le.next()}return D}}function L(D){return function(ae,le){for(var Se;(Se=ae.next())!=null;){if(Se=="<")return le.tokenize=L(D+1),le.tokenize(ae,le);if(Se==">")if(D==1){le.tokenize=v;break}else return le.tokenize=L(D-1),le.tokenize(ae,le)}return"meta"}}function A(D){return D&&D.toLowerCase()}function N(D,ae,le){this.prev=D.context,this.tagName=ae||"",this.indent=D.indented,this.startOfLine=le,(f.doNotIndent.hasOwnProperty(ae)||D.context&&D.context.noIndent)&&(this.noIndent=!0)}function S(D){D.context&&(D.context=D.context.prev)}function M(D,ae){for(var le;;){if(!D.context||(le=D.context.tagName,!f.contextGrabbers.hasOwnProperty(A(le))||!f.contextGrabbers[A(le)].hasOwnProperty(A(ae))))return;S(D)}}function O(D,ae,le){return D=="openTag"?(le.tagStart=ae.column(),z):D=="closeTag"?I:O}function z(D,ae,le){return D=="word"?(le.tagName=ae.current(),y="tag",H):f.allowMissingTagName&&D=="endTag"?(y="tag bracket",H(D,ae,le)):(y="error",z)}function I(D,ae,le){if(D=="word"){var Se=ae.current();return le.context&&le.context.tagName!=Se&&f.implicitlyClosed.hasOwnProperty(A(le.context.tagName))&&S(le),le.context&&le.context.tagName==Se||f.matchClosing===!1?(y="tag",_):(y="tag error",U)}else return f.allowMissingTagName&&D=="endTag"?(y="tag bracket",_(D,ae,le)):(y="error",U)}function _(D,ae,le){return D!="endTag"?(y="error",_):(S(le),O)}function U(D,ae,le){return y="error",_(D,ae,le)}function H(D,ae,le){if(D=="word")return y="attribute",ce;if(D=="endTag"||D=="selfcloseTag"){var Se=le.tagName,Je=le.tagStart;return le.tagName=le.tagStart=null,D=="selfcloseTag"||f.autoSelfClosers.hasOwnProperty(A(Se))?M(le,Se):(M(le,Se),le.context=new N(le,Se,Je==le.indented)),O}return y="error",H}function ce(D,ae,le){return D=="equals"?$:(f.allowMissing||(y="error"),H(D,ae,le))}function $(D,ae,le){return D=="string"?ie:D=="word"&&f.allowUnquoted?(y="string",H):(y="error",H(D,ae,le))}function ie(D,ae,le){return D=="string"?ie:H(D,ae,le)}return{startState:function(D){var ae={tokenize:v,state:O,indented:D||0,tagName:null,tagStart:null,context:null};return D!=null&&(ae.baseIndent=D),ae},token:function(D,ae){if(!ae.tagName&&D.sol()&&(ae.indented=D.indentation()),D.eatSpace())return null;p=null;var le=ae.tokenize(D,ae);return(le||p)&&le!="comment"&&(y=null,ae.state=ae.state(p||le,D,ae),y&&(le=y=="error"?le+" error":y)),le},indent:function(D,ae,le){var Se=D.context;if(D.tokenize.isInAttribute)return D.tagStart==D.indented?D.stringStartCol+1:D.indented+a;if(Se&&Se.noIndent)return t.Pass;if(D.tokenize!=w&&D.tokenize!=v)return le?le.match(/^(\s*)/)[0].length:0;if(D.tagName)return f.multilineTagIndentPastTag!==!1?D.tagStart+D.tagName.length+2:D.tagStart+a*(f.multilineTagIndentFactor||1);if(f.alignCDATA&&/<!\[CDATA\[/.test(ae))return 0;var Je=ae&&/^<(\/)?([\w_:\.-]*)/.exec(ae);if(Je&&Je[1])for(;Se;)if(Se.tagName==Je[2]){Se=Se.prev;break}else if(f.implicitlyClosed.hasOwnProperty(A(Se.tagName)))Se=Se.prev;else break;else if(Je)for(;Se;){var ot=f.contextGrabbers[A(Se.tagName)];if(ot&&ot.hasOwnProperty(A(Je[2])))Se=Se.prev;else break}for(;Se&&Se.prev&&!Se.startOfLine;)Se=Se.prev;return Se?Se.indent+a:D.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:f.htmlMode?"html":"xml",helperType:f.htmlMode?"html":"xml",skipAttribute:function(D){D.state==$&&(D.state=H)},xmlCurrentTag:function(D){return D.tagName?{name:D.tagName,close:D.type=="closeTag"}:null},xmlCurrentContext:function(D){for(var ae=[],le=D.context;le;le=le.prev)ae.push(le.tagName);return ae.reverse()}}}),t.defineMIME("text/xml","xml"),t.defineMIME("application/xml","xml"),t.mimeModes.hasOwnProperty("text/html")||t.defineMIME("text/html",{name:"xml",htmlMode:!0})})});var VS=ee((rG,GS)=>{GS.exports="0.5.7"});var mp=ee((iG,YS)=>{var a_={8:"\\b",9:"\\t",10:"\\n",12:"\\f",13:"\\r",34:'\\"',92:"\\\\"};function l_(t){return t>=55296&&t<=56319}function c_(t){return t>=56320&&t<=57343}function KS(t){return typeof t.pipe=="function"&&typeof t._read=="function"&&typeof t._readableState=="object"&&t._readableState!==null}function u_(t,e,r,i){switch(r&&typeof r.toJSON=="function"&&(r=r.toJSON()),i!==null&&(r=i.call(t,String(e),r)),typeof r){case"function":case"symbol":r=void 0;break;case"object":if(r!==null){let s=r.constructor;(s===String||s===Number||s===Boolean)&&(r=r.valueOf())}break}return r}function f_(t){return t===null||typeof t!="object"?1:Array.isArray(t)?3:2}function d_(t){return t===null||typeof t!="object"?1:typeof t.then=="function"?4:KS(t)?t._readableState.objectMode?6:5:Array.isArray(t)?3:2}function h_(t){return typeof t=="function"?t:Array.isArray(t)?[...new Set(t.map(r=>{let i=r&&r.constructor;return i===String||i===Number?String(r):null}).filter(r=>typeof r=="string"))]:null}function p_(t){return typeof t=="number"?!Number.isFinite(t)||t<1?!1:" ".repeat(Math.min(t,10)):typeof t=="string"&&t.slice(0,10)||!1}YS.exports={escapableCharCodeSubstitution:a_,isLeadingSurrogate:l_,isTrailingSurrogate:c_,type:{PRIMITIVE:1,PROMISE:4,ARRAY:3,OBJECT:2,STRING_STREAM:5,OBJECT_STREAM:6},isReadableStream:KS,replaceValue:u_,getTypeNative:f_,getTypeAsync:d_,normalizeReplacer:h_,normalizeSpace:p_}});var ZS=ee((oG,XS)=>{var{normalizeReplacer:g_,normalizeSpace:m_,replaceValue:y_,getTypeNative:v_,getTypeAsync:b_,isLeadingSurrogate:w_,isTrailingSurrogate:x_,escapableCharCodeSubstitution:k_,type:{PRIMITIVE:QS,OBJECT:C_,ARRAY:S_,PROMISE:A_,STRING_STREAM:T_,OBJECT_STREAM:L_}}=mp(),E_=Array.from({length:2048}).map((t,e)=>k_.hasOwnProperty(e)?2:e<32?6:e<128?1:2);function JS(t){let e=0,r=!1;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);if(s<2048)e+=E_[s];else if(w_(s)){e+=6,r=!0;continue}else x_(s)?e=r?e-2:e+6:e+=3;r=!1}return e+2}function D_(t){switch(typeof t){case"string":return JS(t);case"number":return Number.isFinite(t)?String(t).length:4;case"boolean":return t?4:5;case"undefined":case"object":return 4;default:return 0}}function N_(t){return t=m_(t),typeof t=="string"?t.length:0}XS.exports=function(e,r,i,s){function a(A,N,S){if(T)return;S=y_(A,N,S,r);let M=w(S);if(M!==QS&&g.has(S)){y.add(S),L+=4,s.continueOnCircular||(T=!0);return}switch(M){case QS:S!==void 0||Array.isArray(A)?L+=D_(S):A===k&&(L+=9);break;case C_:{if(d.has(S)){p.add(S),L+=d.get(S);break}let O=L,z=0;L+=2,g.add(S);for(let I in S)if(hasOwnProperty.call(S,I)&&(f===null||f.has(I))){let _=L;a(S,I,S[I]),_!==L&&(L+=JS(I)+1,z++)}z>1&&(L+=z-1),g.delete(S),i>0&&z>0&&(L+=(1+(g.size+1)*i+1)*z,L+=1+g.size*i),d.set(S,L-O);break}case S_:{if(d.has(S)){p.add(S),L+=d.get(S);break}let O=L;L+=2,g.add(S);for(let z=0;z<S.length;z++)a(S,z,S[z]);S.length>1&&(L+=S.length-1),g.delete(S),i>0&&S.length>0&&(L+=(1+(g.size+1)*i)*S.length,L+=1+g.size*i),d.set(S,L-O);break}case A_:case T_:v.add(S);break;case L_:L+=2,v.add(S);break}}let f=null;r=g_(r),Array.isArray(r)&&(f=new Set(r),r=null),i=N_(i),s=s||{};let d=new Map,g=new Set,p=new Set,y=new Set,v=new Set,w=s.async?b_:v_,k={"":e},T=!1,L=0;return a(k,"",e),{minLength:isNaN(L)?1/0:L,circular:[...y],duplicate:[...p],async:[...v]}}});var t1=ee((sG,e1)=>{e1.exports=()=>{throw new Error("Method is not supported")}});var r1=ee((aG,n1)=>{n1.exports=TextDecoder});var bp=ee((lG,o1)=>{var{isReadableStream:M_}=mp(),O_=r1(),rl=1,P_=2,I_=new O_;function i1(t){return t!==null&&typeof t=="object"}function yp(t,e){return t.name==="SyntaxError"&&e.jsonParseOffset&&(t.message=t.message.replace(/at position (\d+)/,(r,i)=>"at position "+(Number(i)+e.jsonParseOffset))),t}function z_(t,e){let r=t.length;t.length+=e.length;for(let i=0;i<e.length;i++)t[r+i]=e[i]}o1.exports=function(t){let e=new vp;if(i1(t)&&M_(t))return new Promise((r,i)=>{t.on("data",s=>{try{e.push(s)}catch(a){i(yp(a,e)),e=null}}).on("error",s=>{e=null,i(s)}).on("end",()=>{try{r(e.finish())}catch(s){i(yp(s,e))}finally{e=null}})});if(typeof t=="function"){let r=t();if(i1(r)&&(Symbol.iterator in r||Symbol.asyncIterator in r))return new Promise(async(i,s)=>{try{for await(let a of r)e.push(a);i(e.finish())}catch(a){s(yp(a,e))}finally{e=null}})}throw new Error("Chunk emitter should be readable stream, generator, async generator or function returning an iterable object")};var vp=class{constructor(){this.value=void 0,this.valueStack=null,this.stack=new Array(100),this.lastFlushDepth=0,this.flushDepth=0,this.stateString=!1,this.stateStringEscape=!1,this.pendingByteSeq=null,this.pendingChunk=null,this.chunkOffset=0,this.jsonParseOffset=0}parseAndAppend(e,r){this.stack[this.lastFlushDepth-1]===rl?(r&&(this.jsonParseOffset--,e="{"+e+"}"),Object.assign(this.valueStack.value,JSON.parse(e))):(r&&(this.jsonParseOffset--,e="["+e+"]"),z_(this.valueStack.value,JSON.parse(e)))}prepareAddition(e){let{value:r}=this.valueStack;if(Array.isArray(r)?r.length!==0:Object.keys(r).length!==0){if(e[0]===",")return this.jsonParseOffset++,e.slice(1);if(e[0]!=="}"&&e[0]!=="]")return this.jsonParseOffset-=3,"[[]"+e}return e}flush(e,r,i){let s=e.slice(r,i);if(this.jsonParseOffset=this.chunkOffset+r,this.pendingChunk!==null&&(s=this.pendingChunk+s,this.jsonParseOffset-=this.pendingChunk.length,this.pendingChunk=null),this.flushDepth===this.lastFlushDepth)this.flushDepth>0?this.parseAndAppend(this.prepareAddition(s),!0):(this.value=JSON.parse(s),this.valueStack={value:this.value,prev:null});else if(this.flushDepth>this.lastFlushDepth){for(let a=this.flushDepth-1;a>=this.lastFlushDepth;a--)s+=this.stack[a]===rl?"}":"]";this.lastFlushDepth===0?(this.value=JSON.parse(s),this.valueStack={value:this.value,prev:null}):this.parseAndAppend(this.prepareAddition(s),!0);for(let a=this.lastFlushDepth||1;a<this.flushDepth;a++){let f=this.valueStack.value;if(this.stack[a-1]===rl){let d;for(d in f);f=f[d]}else f=f[f.length-1];this.valueStack={value:f,prev:this.valueStack}}}else{s=this.prepareAddition(s);for(let a=this.lastFlushDepth-1;a>=this.flushDepth;a--)this.jsonParseOffset--,s=(this.stack[a]===rl?"{":"[")+s;this.parseAndAppend(s,!1);for(let a=this.lastFlushDepth-1;a>=this.flushDepth;a--)this.valueStack=this.valueStack.prev}this.lastFlushDepth=this.flushDepth}push(e){if(typeof e!="string"){if(this.pendingByteSeq!==null){let a=e;e=new Uint8Array(this.pendingByteSeq.length+a.length),e.set(this.pendingByteSeq),e.set(a,this.pendingByteSeq.length),this.pendingByteSeq=null}if(e[e.length-1]>127)for(let a=0;a<e.length;a++){let f=e[e.length-1-a];if(f>>6===3){a++,(a!==4&&f>>3===30||a!==3&&f>>4===14||a!==2&&f>>5===6)&&(this.pendingByteSeq=e.slice(e.length-a),e=e.slice(0,-a));break}}e=I_.decode(e)}let r=e.length,i=0,s=0;e:for(let a=0;a<r;a++){if(this.stateString){for(;a<r;a++)if(this.stateStringEscape)this.stateStringEscape=!1;else switch(e.charCodeAt(a)){case 34:this.stateString=!1;continue e;case 92:this.stateStringEscape=!0}break}switch(e.charCodeAt(a)){case 34:this.stateString=!0,this.stateStringEscape=!1;break;case 44:s=a;break;case 123:s=a+1,this.stack[this.flushDepth++]=rl;break;case 91:s=a+1,this.stack[this.flushDepth++]=P_;break;case 93:case 125:s=a+1,this.flushDepth--,this.flushDepth<this.lastFlushDepth&&(this.flush(e,i,s),i=s);break;case 9:case 10:case 13:case 32:i===a&&i++,s===a&&s++;break}}s>i&&this.flush(e,i,s),s<r&&(this.pendingChunk!==null?this.pendingChunk+=e:this.pendingChunk=e.slice(s,r)),this.chunkOffset+=r}finish(){return this.pendingChunk!==null&&(this.flush("",0,0),this.pendingChunk=null),this.value}}});var a1=ee((cG,s1)=>{s1.exports={version:VS(),stringifyInfo:ZS(),stringifyStream:t1(),parseChunked:bp()}});var w0=zn(b0());function x0(t){let e=[w0.default].filter(r=>{if(typeof r=="function")return!0;console.warn('[discovery-cli] "prepare" module should return a function, but got '+typeof r)});e.length&&t.setPrepare(async(r,...i)=>{for(let s of e)r=await s(r,...i)||r;return r})}var ik=[(C0(),Qt(k0)),(A0(),Qt(S0)),(L0(),Qt(T0)),(D0(),Qt(E0)),(M0(),Qt(N0)),(P0(),Qt(O0)),(R0(),Qt(B0)),(F0(),Qt(q0)),(j0(),Qt(_0)),(W0(),Qt(H0)),($0(),Qt(U0)),(V0(),Qt(G0)),(Y0(),Qt(K0)),(J0(),Qt(Q0)),(Z0(),Qt(X0)),(tk(),Qt(ek)),(rk(),Qt(nk))];var zh="1.0.0-beta.78";var fr=class{constructor(){this.listeners=Object.create(null)}on(e,r){return this.listeners[e]={callback:r,next:this.listeners[e]||null},this}once(e,r){return this.on(e,function i(...s){r.apply(this,s),this.off(e,i)})}off(e,r){let i=this.listeners[e]||null,s=null;for(;i!==null;){if(i.callback===r){i.callback=null,s?s.next=i.next:this.listeners[e]=i.next;break}s=i,i=i.next}return this}emit(e,...r){let i=this.listeners[e]||null,s=!1;for(;i!==null;)typeof i.callback=="function"&&i.callback.apply(this,r),s=!0,i=i.next;return s}};var Mr=new WeakMap,Fn=class extends fr{constructor(e){super(),Mr.set(this,new Map),e&&(this.revoke=r=>{Mr.get(this).delete(r),this.emit("revoke",r)})}define(e,r){return Mr.get(this).set(e,r),this.emit("define",e,r),r}isDefined(e){return Mr.get(this).has(e)}has(e){return Mr.get(this).has(e)}get(e){return Mr.get(this).get(e)}get names(){return[...Mr.get(this).keys()]}get keys(){return Mr.get(this).keys()}get values(){return Mr.get(this).values()}get entries(){return Mr.get(this).entries()}};var Ho=new WeakMap,Ha=class extends Fn{constructor(){super(!0),Ho.set(this,Object.create(null))}define(e,r){if(typeof r!="function")throw new Error("callback is not a function");Ho.set(this,Object.freeze({...Ho.get(this),[e]:r})),super.define(e,Object.freeze({name:e,callback:r}))}revoke(e){if(this.has(e)){let r={...Ho.get(this)};delete r[e],Ho.set(this,Object.freeze(r))}super.revoke(e)}get actionMap(){return Ho.get(this)}call(e,...r){if(!this.has(e))throw new Error(`action "${e}" doesn't exist`);let{callback:i}=this.get(e);return i(...r)}};var Bh=Object.freeze({}),{hasOwnProperty:nF}=Object,ak=new WeakMap,Rh=new WeakMap,Wo=new WeakMap,Hi=new WeakMap,lk=new WeakMap,rF=new Set(["view","when","data","whenData","postRender","className"]);function vi(t,e){return lk.set(t,e),t}function ck(t,e,r){if(!r.has(t)){if(Hi.has(t))for(let i of Hi.get(t)){let s=e.children.find(a=>a.view===i);s?e=s:e.children.push(e={node:null,parent:e,view:i,children:[]})}if(Wo.has(t)?e.children.push(e={node:t,parent:e,view:Wo.get(t),children:[]}):Rh.has(t)&&e.children.push(e={node:t,parent:e,viewRoot:Rh.get(t),children:[]}),t.nodeType===1)for(let i=t.firstChild;i;i=i.nextSibling)ck(i,e,r)}}function iF(t){return{name:!1,options:Bh,render(e,r){if(e.className="discovery-buildin-view-render-error",e.dataset.type=r.type,e.textContent=r.reason,"config"in r){let i=e.appendChild(document.createElement("span"));i.className="toggle-config",i.textContent="show config...",i.addEventListener("click",()=>{e.classList.toggle("expanded")?(i.textContent="hide config...",t.render(e,{view:"struct",expanded:1},r.config)):(i.textContent="show config...",e.lastChild.remove())})}}}}function ok(t,e,r,i,s,a,f,d){return!nF.call(r,t)||r[t]===void 0||e.queryBool(r[t]===!0?"":r[t],i,s)?!0:(Wo.set(d,{skipped:t,config:r,inputData:a,inputDataIndex:f,data:i,context:s}),!1)}function uk(t,e,r,i){let s=e;return typeof s=="string"&&s.startsWith("=")&&(s=t.queryFn(s.slice(1))),typeof s=="function"&&(s=s(r,i)),typeof s=="string"&&(s=s.trim().split(/\s+/)),Array.isArray(s)&&(s=s.map(a=>typeof a=="function"?a(r,i):a).filter(Boolean),s.length)?s:null}function sk(t,e,r,i,s,a,f,d,g){let{tag:p}=e.options,y=p===!1||p===null?document.createDocumentFragment():document.createElement(p||"div"),v=Promise.resolve(e.render(y,s,a,f));return typeof i.postRender=="function"&&(v=v.then(()=>i.postRender(y,i,a,f))),v.then(function(){let w={config:i,props:s,inputData:d,inputDataIndex:g,data:a,context:f};if(y.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){if(Wo.set(y,w),e.name&&y.classList.add(`view-${e.name}`),i.className){let k=uk(t,i.className,a,f);k!==null&&y.classList.add(...k)}s.tooltip&&fk(t,y,s.tooltip,a,f)}else for(let k of y.childNodes)Hi.has(k)?Hi.get(k).unshift(w):Hi.set(k,[w]);r.replaceWith(y)})}function oF(t,e){return{name:e,normalizeConfig:t.normalizeConfig.bind(t),ensureValidConfig:t.ensureValidConfig.bind(t),composeConfig:t.composeConfig.bind(t),propsFromConfig:t.propsFromConfig.bind(t),render:t.render.bind(t),listLimit:t.listLimit.bind(t),renderList:t.renderList.bind(t),maybeMoreButtons:t.maybeMoreButtons.bind(t),renderMoreButton:t.renderMoreButton.bind(t),tooltip(r,i,s,a){r&&r.nodeType===1?fk(t.host,r,i,s,a):t.host.log("warn","A tooltip can be attached to a HTML element only")}}}function fk(t,e,r,i,s){e.classList.add("discovery-view-has-tooltip"),ak.set(e,[r,i,s]),t.view.tooltip||(t.view.tooltip=sF(t))}function sF(t){let e=null,r=new t.view.Popup({className:"discovery-buildin-view-tooltip",hoverTriggers:".discovery-view-has-tooltip",position:"pointer",render(i,s){let[a,f,d]=ak.get(s)||[],g="pointer";if(e!==null&&(i.classList.remove(...e),e=null),a&&!Array.isArray(a)&&typeof a!="string"&&typeof a!="function"&&!a.view&&(e=uk(t,a.className,f,d),e!==null&&i.classList.add(...e),g=a.position==="trigger"?"trigger":"pointer",a=a.content),r.options.position=g,a)return t.view.render(i,a,f,d);t.view.render(i,{view:t.view.defaultRenderErrorRenderer.render,reason:"Element marked as having a tooltip but related data is not found"})}});return r}function dk(t,e,r,i,s,a){if(Array.isArray(r))return Promise.all(r.map(p=>dk(t,e,p,i,s,a)));let f=i&&typeof s=="number"?i[s]:i,d=null;switch(typeof r.view){case"function":d={name:!1,options:Bh,render:r.view};break;case"string":if(r.view==="render"){let{config:p="",context:y=""}=r;d={name:!1,options:{tag:!1},render:(v,w,k)=>{let T=p!==""?t.host.query(p,f,a):k,L=t.host.query(y,a,f);return t.render(v,T,k!==T?k:f,L)}}}else if(r.view.startsWith("preset/")){let p=r.view.substr(7);d={name:!1,options:{tag:!1},render:t.host.preset.isDefined(p)?t.host.preset.get(p).render:()=>{}}}else d=t.get(r.view);break}if(!d){let p=typeof r.view=="string"?"View `"+r.view+"` is not found":"Render is not a function";t.host.log("error",p,r),d=t.defaultRenderErrorRenderer,r={type:"config",reason:p,config:r}}e||(e=document.createDocumentFragment());let g=e.appendChild(document.createComment(""));return ok("when",t.host,r,f,a,i,s,g)?("data"in r?Promise.resolve(t.host.query(r.data,f,a)):Promise.resolve(f)).then(y=>ok("whenData",t.host,r,y,a,i,s,g)?sk(t.host,d,g,r,t.propsFromConfig(r,y,a),y,a,i,s):null).catch(y=>{sk(t.host,t.defaultRenderErrorRenderer,g,Bh,{type:"render",reason:String(y),config:r}),t.host.log("error","View render error:",y)}):Promise.resolve()}var Wa=class extends Fn{constructor(e){super(),this.host=e,this.defaultRenderErrorRenderer=iF(this)}define(e,r,i){super.define(e,Object.freeze({name:e,options:Object.freeze({...i}),render:typeof r=="function"?r.bind(oF(this,e)):(s,a,f,d)=>this.render(s,r,f,d)}))}normalizeConfig(e){if(!e)return null;if(Array.isArray(e))return e.reduce((r,i)=>r.concat(this.normalizeConfig(i)||[]),[]);if(typeof e=="string"){let[,r,i,s]=e.match(/^(\S+?)([:{])((?:.|\s)+)$/)||[];if(r){if(i==="{")try{return vi(this.host.queryToConfig(r,i+s),e)}catch(a){return vi(this.badConfig(e,a),e)}return vi({view:r,data:s},e)}return vi({view:e},e)}else if(typeof e=="function")return vi({view:e},e);return e}badConfig(e,r){let i=r&&r.message||"Unknown error";return this.host.log("error",i,{config:e,error:r}),{view:this.defaultRenderErrorRenderer.render,type:"config",reason:i,config:e}}ensureValidConfig(e){return Array.isArray(e)?e.map(r=>this.ensureValidConfig(r)):!e||!e.view?this.badConfig(e,new Error(e?"Option `view` is missed":"Config is not a valid value")):e}composeConfig(e,r){return e=this.normalizeConfig(e),r=this.normalizeConfig(r),e&&r?Array.isArray(e)?e.map(i=>vi({...i,...r},[i,r])):vi({...e,...r},[e,r]):e||r}propsFromConfig(e,r,i){let s=vi({},e);for(let[a,f]of Object.entries(e))rF.has(a)||(s[a]=typeof f=="string"&&f.startsWith("=")?this.host.query(f.slice(1),r,i):f);return s}render(e,r,i,s,a){return dk(this,e,this.ensureValidConfig(this.normalizeConfig(r)),i,a,s)}listLimit(e,r){return e===!1?!1:!e||isNaN(e)?r:Math.max(parseInt(e,10),0)||r}renderList(e,r,i,s,a=0,f=!1,d){f===!1&&(f=i.length);let g=Promise.all(i.slice(a,a+f).map((p,y,v)=>this.render(e,r,i,{...s,index:a+y,array:i,sliceIndex:y,slice:v},a+y)));return this.maybeMoreButtons(d||e,null,i.length,a+f,f,(p,y)=>this.renderList(e,r,i,s,p,y,d)),g}maybeMoreButtons(e,r,i,s,a,f){let d=i-s,g=d<=0?null:document.createElement("span");return d>a&&this.renderMoreButton(g,"Show "+a+" more...",()=>f(s,a)),d>0&&this.renderMoreButton(g,"Show all the rest "+d+" items...",()=>f(s,1/0)),g!==null&&(g.className="more-buttons",e.insertBefore(g,r)),g}renderMoreButton(e,r,i){let s=document.createElement("button");s.className="more-button",s.innerHTML=r,s.addEventListener("click",()=>{e.remove(),i()}),e.appendChild(s)}adoptFragment(e,r){let i=Hi.get(r);if(i)for(let s of e.childNodes)Hi.set(s,i)}setViewRoot(e,r,i){Rh.set(e,{name:r,...i})}getViewTree(e){let r=new Set(e||[]),i=[];return ck(this.host.dom.container,{parent:null,children:i},r),i}getViewStackTrace(e){let{container:r}=this.host.dom;if(!r||!(e instanceof Node)||!r.contains(e))return null;let i=[],s=e;for(;s!==r;)Wo.has(s)&&i.push(Wo.get(s)),s=s.parentNode;return i.length===0?null:i.reverse()}getViewConfigTransitionTree(e){let r=lk.get(e)||[];return Array.isArray(r)||(r=[r]),{value:e,deps:r.map(this.getViewConfigTransitionTree,this)}}};var Ua=class extends Fn{constructor(e){super(),this.view=e}define(e,r){r=JSON.parse(JSON.stringify(r)),super.define(e,Object.freeze({name:e,render:(i,s,a,f)=>this.view.render(i,r,a,f),config:r}))}render(e,r,i,s){let a=this.get(r);if(!a){let f="Preset `"+r+"` is not found";console.error(f,r);let d=e.appendChild(document.createElement("div"));return d.className="discovery-buildin-view-config-error",d.textContent=f,Promise.resolve()}return a.render(e,null,i,s)}};var vn=class{static setValue(e,r){if(!e.shouldPublish(r,e.value))return!1;let i=[],s=e.subscriber;for(e.value=r;s!==null;){let{callback:a,thisArg:f}=s;a!==null&&i.push(a.call(f,r,()=>e.unsubscribe(a,f))),s=s.subscriber}return i}constructor(e,r){this.value=e,this.shouldPublish=typeof r=="function"?r:this.shouldPublish,this.subscriber=null}get readonly(){let e=this;return{subscribe:this.subscribe.bind(this),subscribeSync:this.subscribeSync.bind(this),unsubscribe:this.unsubscribe.bind(this),get value(){return e.value}}}subscribe(e,r){return this.subscriber={callback:e,thisArg:r,subscriber:this.subscriber},()=>this.unsubscribe(e,r)}subscribeSync(e,r){let i=this.subscribe(e,r);return e.call(r,this.value,i),i}unsubscribe(e,r){let i=this,s=this.subscriber;for(;s!==null;){if(s.callback===e&&s.thisArg===r){s.callback=null,s.thisArg=null,i.subscriber=s.subscriber;break}i=s,s=s.subscriber}}shouldPublish(e,r){return e!==r}set(e){return this.constructor.setValue(this,e)!==!1}asyncSet(e){let r=this.constructor.setValue(this,e);return r===!1?Promise.resolve(!1):Promise.all(r).then(i=>i!==!1)}};var qh={};Ce(qh,{createElement:()=>X,createFragment:()=>Wi,createText:()=>bn,passiveCaptureOptions:()=>Xn,passiveSupported:()=>hk});function X(t,e,r){let i=document.createElement(t);typeof e=="string"&&(e={class:e});for(let s in e)if(hasOwnProperty.call(e,s)){if(e[s]===void 0)continue;s.startsWith("on")?i.addEventListener(s.substr(2),e[s]):i.setAttribute(s,e[s])}return Array.isArray(r)?r.forEach(s=>i.appendChild(s instanceof Node?s:bn(s))):typeof r=="string"&&(i.innerHTML=r),i}function bn(t){return document.createTextNode(String(t))}function Wi(...t){let e=document.createDocumentFragment();return t.forEach(r=>e.appendChild(r instanceof Node?r:bn(r))),e}var hk=(()=>{let t=!1;try{let e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return t})(),Xn=hk?Object.freeze({passive:!0,capture:!0}):!0;var pk=Symbol("config"),aF={name:"not-found",render:(t,{name:e})=>{t.style.cssText="color:#a00",t.innerText=`Page \`${e}\` not found`}},$a=class extends Fn{constructor(e){if(super(),this.host=e,this.lastPage=null,this.lastPageId=null,this.pageOverscrolled=new vn(!1),this.setPageOverscroll=()=>{},typeof IntersectionObserver=="function"){let r=X("div",{style:"position:absolute"}),i=e.dom.content,s=null,a=()=>{};s&&(s.disconnect(),s=null),i&&(s=new IntersectionObserver(f=>this.pageOverscrolled.set(!f[f.length-1].isIntersecting),{root:i}),this.setPageOverscroll=f=>{s.unobserve(r),a(),f&&(f.prepend(r),s.observe(r),a=this.pageOverscrolled.subscribeSync(d=>f.classList.toggle("page_overscrolled",d)))})}}define(e,r,i){super.define(e,Object.freeze({name:e,render:typeof r=="function"?r.bind(this.host.view):(s,a,f)=>this.host.view.render(s,r,a,f),options:Object.freeze({...i}),[pk]:r}))}render(e,r,i,s){let a=Date.now(),f=this.get(r),d;f||(f=this.get("not-found")||aF,i={name:r});let{reuseEl:g,init:p,keepScrollOffset:y=!0}=f.options||{},v=this.lastPage!==r,w=s&&s.id,k=this.lastPageId!==w,T=g&&!v?e:document.createElement("article"),L=e.parentNode;this.lastPage=r,this.lastPageId=w,T.id=e.id,T.classList.add("page","page-"+r),v&&typeof p=="function"&&p(T);try{d=f.render(T,i,s)}catch(A){d=this.host.view.render(T,"alert-danger",String(A)+" (see details in console)"),this.host.log("error","Page render error:",A)}return(v||k||!y)&&(L.scrollTop=0),T!==e&&(e.replaceWith(T),this.setPageOverscroll(T)),{pageEl:T,config:f[pk],renderState:Promise.resolve(d).finally(()=>this.host.log("perf",`Page "${f.name}" rendered in ${Date.now()-a}ms`))}}};var Jc={};Ce(Jc,{alerts:()=>yC,autoLink:()=>vC,badges:()=>wC,block:()=>Xk,button:()=>gk,checkbox:()=>bk,checkboxList:()=>yk,column:()=>Zk,columns:()=>eC,contentFilter:()=>xk,context:()=>BS,dropdown:()=>Sk,editors:()=>Qk,expand:()=>nC,headers:()=>OC,hstack:()=>iC,html:()=>IC,image:()=>BC,imagePreview:()=>qC,indicator:()=>_C,input:()=>Lk,link:()=>HC,listItem:()=>oC,lists:()=>sC,markdown:()=>WC,menu:()=>Dk,menuItem:()=>Mk,navButton:()=>Pk,pageHeader:()=>lC,popup:()=>hC,progressbar:()=>zk,section:()=>gC,select:()=>Rk,signature:()=>US,source:()=>AS,struct:()=>S1,switch:()=>qS,tab:()=>jk,table:()=>E1,tableCell:()=>N1,tableRow:()=>D1,tabs:()=>Fk,text:()=>LS,textMatch:()=>OS,textNumeric:()=>IS,tocSection:()=>mC,toggle:()=>Hk,toggleGroup:()=>Wk,tree:()=>P1,treeItem:()=>I1});var Ga=(t,e)=>({demo:{view:t,onClick:Function('return () => alert("Hello world!")')(),data:{text:"Button"}},examples:[{title:"Variations",demo:e.map(r=>`${r}:{ text: "${r}" }`)},{title:"Disabled state",demo:e.map(r=>({view:r,disabled:!0,data:{text:r}}))},{title:"Button as a link",demo:{view:"button",data:{text:"Click me",href:"#url",external:!0}}}]});function gk(t){function e(r,i,s,a){let{content:f,disabled:d=!1,onClick:g}=i,{text:p="",href:y,external:v}=s||{};if(r.classList.add("view-button"),t.query(d,s,a)?r.disabled=!0:typeof g=="function"?(r.addEventListener("click",()=>g(r,s,a)),r.classList.add("onclick")):y&&r.addEventListener("click",()=>X("a",{href:y,target:v?"_blank":""}).click()),f)return t.view.render(r,f,s,a);r.textContent=p}t.view.define("button",e,{tag:"button",usage:Ga}),t.view.define("button-primary",e,{tag:"button",usage:Ga}),t.view.define("button-danger",e,{tag:"button",usage:Ga}),t.view.define("button-warning",e,{tag:"button",usage:Ga})}var mk={demo:{view:"checkbox-list",checkbox:{content:"text"},data:["one","two","three"]}};function yk(t){t.view.define("checkbox-list",function(e,r,i,s){let{name:a="filter",checkbox:f,checkboxValue:d="$",emptyText:g,limit:p,onChange:y,onInit:v}=r,w=new Set;if(g!==!1&&g!==""&&e.setAttribute("emptyText",g||"Empty list"),!Array.isArray(i)&&i&&(i=[i]),Array.isArray(i))return t.view.renderList(e,this.composeConfig({view:"checkbox",...f,onInit:(k,T,L,A)=>{k&&w.add(t.query(d,L,A))},onChange:(k,T,L,A)=>{let N=w.size,S=t.query(d,L,A);k?w.add(S):w.delete(S),N!==w.size&&typeof y=="function"&&y([...w],a)}}),i,s,0,t.view.listLimit(p,25)).then(()=>{typeof v=="function"&&v([...w],a)})},{usage:mk})}var vk={demo:{view:"checkbox",content:'text:"checkbox caption"'},examples:[{title:"Checked state",beforeDemo:"Checked state is set up with `checked` property. Its value can be a query",demo:[{view:"checkbox",checked:!0,content:'text:"should be checked"'},{view:"checkbox",checked:"1 > 5",content:`text:"shouldn't be checked"`},{view:"checkbox",checked:"1 < 5",content:'text:"should be checked"'}]},{title:"Readonly checkbox",demo:{view:"checkbox",readonly:!0,content:'text:"checkbox caption"'}},{title:"On change",demo:{view:"checkbox",onChange:new Function("return (value, name, data, context) => alert(`Changed to ${value}!`)")(),content:'text:"click me!"'}}]};function bk(t){function e(r,i,s,a,f,d){if(r===null)return;let g=f?{...a,[f]:d.checked}:a;return r.innerHTML="",t.view.render(r,i,s,g)}t.view.define("checkbox",function(r,i,s,a){let{name:f,checked:d,readonly:g,content:p,onInit:y,onChange:v}=i,w=r.appendChild(X("input")),k=p?r.appendChild(X("span","view-checkbox__label")):null;return w.type="checkbox",w.checked=d!==void 0?t.queryBool(d,s,a):!!a[f],w.readOnly=g,w.addEventListener("click",T=>{g&&T.preventDefault()}),w.addEventListener("change",()=>{typeof v=="function"&&(v(w.checked,f,s,a),e(k,p,s,a,f,w))}),typeof y=="function"&&y(w.checked,f,s,a),e(k,p,s,a,f,w)},{tag:"label",usage:vk})}var wk={demo:{view:"content-filter",data:["foo","bar","baz"],content:{view:"list",data:".[$ ~= #.filter]"}},examples:[{title:"Using with text-match",demo:{view:"content-filter",data:[{name:"foo"},{name:"bar"},{name:"baz"}],name:"customName",content:{view:"list",data:".[name ~= #.customName]",item:"text-match:{ text: name, match: #.customName }"}}}]};function xk(t){t.view.define("content-filter",function(e,r,i,s){let{name:a="filter",type:f="regexp",placeholder:d,content:g,onInit:p,onChange:y}=r;return t.view.render(e,{view:"context",modifiers:{view:"input",name:a,type:f,placeholder:d||"Filter"},content:{view:"block",className:"content",content:g,onInit:p,onChange:y}},i,s)},{usage:wk})}var kk={demo:{view:"context",modifiers:{view:"dropdown",name:"demo",value:{foo:"two",bar:"hello"},resetValue:{foo:"one",bar:""},caption:"text:`${#.demo.foo} / ${#.demo.bar}`",content:[{view:"select",name:"foo",data:["one","two","three","four"]},{view:"input",name:"bar"}]},content:[{view:"block",content:'text:"Modified context (see values in \\"demo\\" section):"'},{view:"struct",expanded:1,data:"#"}]}};var{hasOwnProperty:Ck}=Object.prototype;function lF(t,e){if(!t||!e||typeof t!="object"||typeof e!="object")return t===e;for(let r in t)if(Ck.call(t,r)&&t[r]!==e[r])return!1;for(let r in e)if(Ck.call(e,r)&&t[r]!==e[r])return!1;return!0}function Sk(t){t.view.define("dropdown",function(e,r,i,s){function a(I,_){return typeof L=="function"?L(I,_):lF(I,_)}function f(){return O.innerHTML="",t.view.render(O,k||"text",i,{...s,[p||"__self"]:S})}function d(I){S=I,typeof N=="function"&&N(S,p,i,s),M.hide(),f()}function g(I,_){if(z){let U={changed:!a(I,_)};z.innerHTML="",t.view.render(z,[{view:"button-primary",disabled:"=not changed",content:'text:"Apply"',onClick(H,ce,$){d($)}},{view:"button",when:()=>y&&!a(y,S),content:'text:"Reset"',onClick(){d(y)}},{view:"button",disabled:"=not changed",content:'text:"Cancel"',onClick(){M.hide()}}],U,_)}}let{name:p,resetValue:y,value:v,placeholder:w,caption:k,content:T,compare:L,onInit:A,onChange:N}=r,S="value"in r?v:s[p],M=null,O=e.appendChild(document.createElement("div")),z;return w&&(e.dataset.placeholder=w),e.tabIndex=0,e.addEventListener("click",()=>{M===null&&(M=new t.view.Popup({className:"view-dropdown-popup"}));let I={...S},_;M.toggle(e,U=>t.view.render(U,[{view:"block",className:"content",content:t.view.composeConfig(T,{onInit(H,ce){I[ce]=H},onChange(H,ce){I[ce]=H,g(_,I)}})},{view:"block",className:"confirm",postRender(H){z=H}}],i,{...s,...S}).then(()=>{_={...I},g(_,I)}))}),O.className="view-dropdown__caption",typeof A=="function"&&A(S,p,i,s),f()},{usage:kk})}function cF(t,e){try{return new RegExp("((?:"+t+")+)",e)}catch{}return new RegExp("((?:"+t.replace(/[\[\]\(\)\?\+\*\{\}\\]/g,"\\$&")+")+)",e)}function Va(t,e="i"){let r=cF(t,e);return r.rawSource=t,r}function uF(t){let e=typeof t;return t!=null&&(e==="object"||e==="function")}function Qr(t,e){if(typeof e=="number"&&(e={wait:e}),!uF(e))return t;let{wait:r}=e,i,s,a,f,d,g,p=0,y=!1,v=!1,w=!0;if(typeof t!="function")throw new TypeError("Expected a function");r=Math.max(0,Number(r)||0),y=!!e.leading,v="maxWait"in e,a=v?Math.max(Number(e.maxWait)||0,r):a,w="trailing"in e?!!e.trailing:w;function k(H){let ce=i,$=s;return i=s=void 0,p=H,f=t.apply($,ce),f}function T(H,ce){return setTimeout(H,ce)}function L(H){clearTimeout(H)}function A(H){return p=H,d=T(M,r),y?k(H):f}function N(H){let ce=H-g,$=H-p,ie=r-ce;return v?Math.min(ie,a-$):ie}function S(H){let ce=H-g,$=H-p;return g===void 0||ce>=r||ce<0||v&&$>=a}function M(){let H=Date.now();if(S(H))return O(H);d=T(M,N(H))}function O(H){return d=void 0,w&&i?k(H):(i=s=void 0,f)}function z(){d!==void 0&&L(d),p=0,i=g=s=d=void 0}function I(){return d===void 0?f:O(Date.now())}function _(){return d!==void 0}function U(...H){let ce=Date.now(),$=S(ce);if(i=H,s=this,g=ce,$){if(d===void 0)return A(g);if(v)return d=T(M,r),k(g)}return d===void 0&&(d=T(M,r)),f}return U.cancel=z,U.flush=I,U.pending=_,U}var Ak=new Function("return (value) => alert(`Changed to ${value}!`)")(),Tk={examples:[{title:"Input with value",demo:{view:"input",value:'"value"'}},{title:"Input with placeholder",demo:{view:"input",placeholder:"placeholder"}},{title:"Input type number with min and max",demo:{view:"input",htmlType:"number",htmlMin:10,htmlMax:20}},{title:"Input with onChange",demo:{view:"input",onChange:Ak}},{title:"Input with onChange debounced",demo:{view:"input",onChange:Ak,debounce:300}}]};function Lk(t){let e={regexp:r=>r?Va(r):null,text:r=>r};t.view.define("input",function(r,i,s,a){let{name:f,value:d,type:g="text",placeholder:p,onInit:y,onChange:v,htmlType:w="text",htmlMin:k,htmlMax:T,debounce:L}=i,A=e[g]||e.text,N=r.appendChild(document.createElement("input")),S=d?t.query(d,s,a):a[f];typeof S!="string"&&(S=""),N.type=w,N.value=S,N.placeholder=[p||"",A!==e.text?"("+g+")":""].filter(Boolean).join(" "),typeof k<"u"&&(N.min=k),T&&(N.max=T),N.addEventListener("input",Qr(()=>{let M=N.value.trim();S!==M&&(S=M,typeof v=="function"&&v(A(M),f,s,a))},L)),typeof y=="function"&&y(A(N.value.trim()),f,s,a)},{usage:Tk})}var fF=new Function("return (value) => alert(`Changed to ${value.text}!`)")(),Ek={demo:{view:"menu",data:[{text:"one",href:"#"},{text:"two",href:"#"},{text:"three",href:"#"}]},examples:[{title:"With limit",demo:{view:"menu",data:[{text:"one",href:"#"},{text:"two",href:"#"},{text:"three",href:"#"}],limit:2}},{title:"With custom item",demo:{view:"menu",data:[{text:"one",href:"#"},{text:"two",href:"#"},{text:"three",href:"#"}],item:"h1:text"}},{title:"On chage handler",demo:{view:"menu",onChange:fF,data:[{text:"one",href:"#"},{text:"two",href:"#"},{text:"three",href:"#"}]}}]};function Dk(t){t.view.define("menu",function(e,r,i,s){let{name:a="filter",item:f,itemConfig:d,limit:g,emptyText:p,onClick:y,onInit:v,onChange:w}=r;if(p!==!1&&p!==""&&e.setAttribute("emptyText",p||"No items"),Array.isArray(i)){let k=this.composeConfig({view:"menu-item",content:f,onClick:typeof y=="function"?y:typeof w=="function"?T=>w(T,a):void 0},d);return t.view.renderList(e,k,i,s,0,t.view.listLimit(g,25)).then(()=>{typeof v=="function"&&v(t.query(".[selected].pick()",i,s),a)})}},{usage:Ek})}var Nk={demo:{view:"menu",data:[{text:"one",href:"#"},{text:"two",href:"#"},{text:"three",href:"#"}]},examples:[{title:"Preselected item",demo:{view:"menu",data:[{text:"one",href:"#"},{text:"two",href:"#",selected:!0},{text:"three",href:"#"}]}},{title:"Disabled item",demo:{view:"menu",data:[{text:"one",href:"#"},{text:"two",href:"#",disabled:!0},{text:"three",href:"#"}]}},{title:"External links",demo:{view:"menu",data:[{text:"one",external:!0,href:"https://github.com/discoveryjs/discovery"},{text:"two",external:!0,href:"https://github.com/discoveryjs/discovery"},{text:"three",external:!0,href:"https://github.com/discoveryjs/discovery"}]}}]};function Mk(t){t.view.define("menu-item",function(e,r,i,s){let{content:a,onClick:f}=r,{text:d,selected:g=!1,disabled:p=!1,href:y,external:v}=i||{};if(p?e.classList.add("disabled"):typeof f=="function"?(e.addEventListener("click",()=>f(i,s)),e.classList.add("onclick")):y&&(e.href=y,e.target=v?"_blank":""),g&&e.classList.add("selected"),a)return t.view.render(e,a,i,s);e.textContent=typeof i=="string"?i:d||"Untitled item"},{tag:"a",usage:Nk})}var dF=()=>alert("changed!"),Ok={demo:{view:"nav-button",data:{text:"I am nav button"}},examples:[{title:"With href",demo:{view:"nav-button",data:{text:"I am nav button",href:"#"}}},{title:"External link",demo:{view:"nav-button",data:{text:"I am nav button",external:!0,href:"https://github.com/discoveryjs/discovery"}}},{title:"On click handler",demo:{view:"nav-button",data:{text:"I am nav button"},onClick:dF}}]};function Pk(t){t.view.define("nav-button",function(e,r,i,s){let{name:a,content:f,disabled:d=!1,onClick:g}=r,{text:p="",href:y,external:v}=i||{};if(a&&(e.dataset.name=a),t.query(d,i,s)?e.classList.add("disabled"):typeof g=="function"?(e.addEventListener("click",()=>g(e,i,s)),e.classList.add("onclick")):y&&(e.href=y,e.target=v?"_blank":""),f)return t.view.render(e,f,i,s);e.textContent=p},{tag:"a",usage:Ok})}var Ik={demo:{view:"progress",progress:.5,content:'text:"Loading..."'},examples:[{title:"With no label (content)",demo:{view:"progress",progress:.25}},{title:"Custom color",demo:{view:"progress",progress:.85,color:"#bdab77",content:'text:"Yellow progress"'}}]};function zk(t){t.view.define("progress",function(e,r,i,s){let{content:a,progress:f,color:d}=r,g=e.appendChild(X("div",{class:"progress",style:`--progress: ${Math.max(0,Math.min(1,Number(f)))};--color: ${d||"unset"};`}));if(a){let p=e.insertBefore(X("div",{class:"content"}),g);return t.view.render(p,a,i,s)}},{usage:Ik})}var hF=new Function("return (value) => alert(`Changed to ${value}!`)")(),Bk={demo:{view:"select",data:["one","two","three","four"]},examples:[{title:"Select with value",demo:{view:"select",value:'"three"',data:["one","two","three","four"]}},{title:"Select with reset option",demo:{view:"select",resetItem:!0,value:'"three"',data:["one","two","three","four"]}},{title:"Select with placeholder",demo:{view:"select",placeholder:"placeholder",data:["one","two","three","four"]}},{title:"Select with onChange",demo:{view:"select",onChange:hF,data:["one","two","three","four"]}},{title:"Select with custom options",demo:{view:"select",item:"h1:text",data:["one","two","three","four"]}}]};function Rk(t){let e="text-match:{ text, match: #.filter }",r="{ value: $, text: #.selectVariantTextQuery.query($, #) }",i=new t.view.Popup({className:"view-select-popup"});t.view.define("select",function(s,a,f,d){function g(){if(s.innerHTML="",I!==void 0)return t.view.render(s,t.view.composeConfig({view:"menu-item",data:r,content:A},N),I,_)}let{name:p,value:y,text:v="$",placeholder:w,limit:k,minItemsFilter:T=10,resetItem:L=!1,item:A=e,itemConfig:N,beforeItems:S,afterItems:M,onInit:O,onChange:z}=a,I=y?t.query(y,f,d):d[p],_={...d,selectMinItemsFilter:T,selectCurrentValue:I,selectVariantTextQuery:v,selectResetItem:L?[{value:void 0,text:"",...L,resetItem:!0}]:[]},U=[];return S&&U.push(t.view.composeConfig(S,{onInit:O,onChange:z})),U.push({view:"context",data:`.(${r})`,modifiers:{view:"input",when:"size() >= #.selectMinItemsFilter",type:"regexp",name:"filter",className:"view-select__filter",placeholder:"Filter"},content:{view:"menu",className:"view-select__variants",data:"#.selectResetItem + .[no #.filter or text~=#.filter]",limit:k,itemConfig:t.view.composeConfig({className:[H=>H.resetItem?"reset-item":"",H=>H.value===I?"selected":""]},N),item:A,onClick(H){i.hide(),I!==H.value&&(I=H.value,_={..._,selectCurrentValue:I},g(),typeof z=="function"&&z(H.value,p,H,d))}}}),M&&U.push(t.view.composeConfig(M,{onInit:O,onChange:z})),w&&(s.dataset.placeholder=w),s.tabIndex=0,s.addEventListener("click",()=>{i.toggle(s,H=>t.view.render(H,U,f,_).then(()=>(H.querySelector(".view-select__filter input")||{focus(){}}).focus()))}),typeof O=="function"&&O(I,p,f,d),g()},{usage:Bk})}var qk={demo:{view:"tabs",name:"tabs",tabs:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}],content:{view:"switch",content:[{when:'#.tabs="one"',content:'text:"One"'},{when:'#.tabs="two"',content:'text:"Two"'},{when:'#.tabs="three"',content:'text:"Three"'}]}},examples:[{title:"With before and after content",demo:{view:"tabs",name:"example",tabs:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}],beforeTabs:'text:"<Content before tabs>"',afterTabs:'text:"<Content after tabs>"',content:'text:"Selected: " + #.example'}},{title:"On change handler",demo:{view:"tabs",name:"example",tabs:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}],onChange:new Function('return (value) => alert("changed to " + value)')(),content:'text:"Selected: " + #.example'}}]};function Fk(t){t.view.define("tabs",function(e,r,i,s){async function a(z){let I=S?y:p;if(M===z)return;let _=d||g||f?{...s,[v]:z}:null;M=z,S=!0,Array.isArray(w)&&(T.innerHTML="",d&&(A.innerHTML="",await t.view.render(A,d,i,_),T.appendChild(A)),await Promise.all(w.map(U=>t.view.render(T,t.view.composeConfig(U,{active:U.value===M}),i,s))),g&&(N.innerHTML="",await t.view.render(N,g,i,_),T.appendChild(N))),f&&(L.innerHTML="",await t.view.render(L,f,i,_)),typeof I=="function"&&I(M,v,i,s)}let{content:f,beforeTabs:d,afterTabs:g,onInit:p,onChange:y}=r,{name:v,tabs:w,tabConfig:k}=r,T=e.appendChild(document.createElement("div")),L=null,A=null,N=null,S=!1,M=NaN,O="value"in r?r.value:v in s?s[v]:void 0;return w=t.query(w,i,s),k=t.view.composeConfig({view:"tab",onClick:a},k),T.className="view-tabs-buttons",d&&(A=document.createElement("div"),A.className="view-tabs-buttons-before"),g&&(N=document.createElement("div"),N.className="view-tabs-buttons-after"),f&&(L=e.appendChild(document.createElement("div")),L.className="view-tabs-content"),typeof v!="string"&&(v="filter"),Array.isArray(w)?w=w.map(z=>{let I=typeof z;return(I==="string"||I==="number"||I==="boolean")&&(z={value:z}),(O===void 0||z.active)&&(O=z.value),t.view.composeConfig(k,z)}):w=[],a(O)},{usage:qk})}var Fh=()=>alert("clicked!"),_k={demo:{view:"tabs",name:"tabs",tabs:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}],content:{view:"switch",content:[{when:'#.tabs="one"',content:'text:"One"'},{when:'#.tabs="two"',content:'text:"Two"'},{when:'#.tabs="three"',content:'text:"Three"'}]}},examples:[{title:"Active & disabled tab",demo:{view:"tabs",name:"tabs",tabs:[{value:"one",text:"One"},{value:"two",text:"Two",active:!0},{value:"three",text:"Three",disabled:!0}],content:{view:"switch",content:[{when:'#.tabs="one"',content:'text:"One"'},{when:'#.tabs="two"',content:'text:"Two"'},{when:'#.tabs="three"',content:'text:"Three"'}]}}},{title:"On click handler",demo:{view:"tabs",name:"tabs",tabs:[{value:"one",text:"One",onClick:Fh},{value:"two",text:"Two",onClick:Fh},{value:"three",text:"Three",onClick:Fh}],content:{view:"switch",content:[{when:'#.tabs="one"',content:'text:"One"'},{when:'#.tabs="two"',content:'text:"Two"'},{when:'#.tabs="three"',content:'text:"Three"'}]}}}]};function jk(t){t.view.define("tab",function(e,r,i,s){let{content:a,active:f=!1,disabled:d=!1,onClick:g,value:p,text:y=String(p).replace(/^./,v=>v.toUpperCase())}=r;if(t.query(d,i,s)?e.classList.add("disabled"):typeof g=="function"&&(e.addEventListener("click",()=>g(p)),e.classList.add("onclick")),f&&e.classList.add("active"),a)return t.view.render(e,a,i,s);e.textContent=y},{usage:_k})}var Bc={demo:{view:"context",modifiers:{view:"toggle-group",name:"toggleValue",data:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}]},content:{view:"switch",content:[{when:'#.toggleValue="one"',content:'text:"One"'},{when:'#.toggleValue="two"',content:'text:"Two"'},{when:'#.toggleValue="three"',content:'text:"Three"'}]}},examples:[{title:"With before and after content",demo:{view:"toggle-group",data:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}],beforeToggles:'text:"<Content before toggles>"',afterToggles:'text:"<Content after toggles>"'}},{title:"On change handler",demo:{view:"toggle-group",name:"example",onChange:new Function('return (value) => alert("changed to " + value)')(),data:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}]}}]};function Hk(t){t.view.define("toggle",function(e,r,i,s){let{content:a,disabled:f=!1,onToggle:d,value:g,text:p=String(g).replace(/^./,v=>v.toUpperCase())}=r,{checked:y=!1}=r;if(f?e.classList.add("disabled"):typeof d=="function"&&(e.addEventListener("click",()=>{y=!y,d(y,g)}),e.classList.add("onclick")),y&&e.classList.add("checked"),a)return t.view.render(e,a,i,s);e.textContent=p},{usage:Bc})}function Wk(t){t.view.define("toggle-group",function(e,r,i,s){async function a(S,M){let O=L?p:g;A!==M&&(A=M,L=!0,Array.isArray(w)&&(e.innerHTML="",f&&(k.innerHTML="",await t.view.render(k,f,i,{...s,[y]:M}),e.appendChild(k)),d&&(T.innerHTML="",await t.view.render(T,d,i,{...s,[y]:M}),e.appendChild(T)),await Promise.all(w.map((z,I)=>t.view.render(e,t.view.composeConfig(z,{checked:z.value===A}),i[I],s)))),typeof O=="function"&&O(A,y,i,s))}let{beforeToggles:f,afterToggles:d,onInit:g,onChange:p}=r,{name:y,toggleConfig:v}=r,w=[],k=null,T=null,L=!1,A=NaN,N="value"in r?r.value:y in s?s[y]:void 0;return v=t.view.composeConfig({view:"toggle",onToggle:a},v),f&&(k=document.createElement("div"),k.className="view-toggle-group-before"),d&&(T=document.createElement("div"),T.className="view-toggle-group-after"),typeof y!="string"&&(y="filter"),Array.isArray(i)&&(w=i.map(S=>{let M=typeof S;return(M==="string"||M==="number"||M==="boolean")&&(S={value:S}),(N===void 0||S.active)&&(N=S.value),t.view.composeConfig(v,S)})),a(!0,N)},{usage:Bc})}var _h={};Ce(_h,{escapeHtml:()=>St,numDelim:()=>_n});function St(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function _n(t,e=!0){let r=e&&typeof t!="number"?St(String(t)):String(t);return r.length>3?r.replace(/\.\d+(eE[-+]?\d+)?|\B(?=(\d{3})+(\D|$))/g,i=>i||'<span class="num-delim"></span>'):r}var Qa=zn(Jr(),1);var Wh=zn(Jr(),1);function Uh(t){let e=Wh.default.getMode(t,{name:"javascript",json:!0});return{...e,indent(r,i){return r.indented+t.indentUnit*(r.lastType==="{"&&i.trim()[0]!=="}"||r.lastType==="("&&i.trim()[0]!==")"||r.lastType==="["&&i.trim()[0]!=="]")},token(r,i){let s=r.peek();return s==="#"||s==="@"?(e.token(new Wh.default.StringStream("$",4,r.lineOracle),i),r.pos++,"variable"):e.token(r,i)}}}var Uk=zn(Jr(),1);function $k(t,e){let r=typeof e.isDiscoveryViewDefined=="function"?e.isDiscoveryViewDefined:()=>{},i=Uk.default.getMode(t,{name:"javascript",json:!0});return{...i,indent(s,a){return s.indented+t.indentUnit*(s.lastType==="{"&&a.trim()[0]!=="}"||s.lastType==="("&&a.trim()[0]!==")"||s.lastType==="["&&a.trim()[0]!=="]")},token:function(s,a){if(a.suspendTokens){let{pos:g,token:p}=a.suspendTokens.shift();return s.pos=g,a.suspendTokens.length===0&&(a.suspendTokens=null),p}let f=s.pos,d=i.token(s,a);if(d==="string"){let g=s.pos,[,p]=s.string.slice(f+1,g-1).match(/^(.+?)([:{]|$)/)||[];r(p)&&(s.pos=f+1,a.suspendTokens=[{pos:f+1+p.length,token:"string discovery-view-name"},{pos:g,token:d}])}return d}}}var L8=zn($h(),1);var Dn=zn(Jr(),1);var Kh={};Ce(Kh,{getBoundingRect:()=>Or,getOffsetParent:()=>Ka,getOverflowParent:()=>Ya,getPageOffset:()=>Gh,getViewportRect:()=>Vh});var{documentElement:Uo}=document,Kk=document.compatMode==="CSS1Compat";function Ka(t){let e=t.offsetParent;for(;e!==null&&e!==Uo&&getComputedStyle(e).position==="static";)e=e.offsetParent;return e||Uo}function Ya(t){let e=t.parentNode;for(;e!==null&&e!==Uo&&getComputedStyle(e).overflow==="visible";)e=e.parentNode;return e||Uo}function Gh(t){let e=0,r=0;if(t&&t.getBoundingClientRect){let i=t.getBoundingClientRect();e=-i.top,r=-i.left}else if(Kk)e=window.pageYOffset||Uo.scrollTop,r=window.pageXOffset||Uo.scrollLeft;else{let{body:i}=document;t!==i&&(e=i.scrollTop-i.clientTop,r=i.scrollLeft-i.clientLeft)}return{left:r,top:e}}function Or(t,e){let r=Gh(e),i=0,s=0,a=0,f=0;return t&&t.getBoundingClientRect&&({top:i,left:s,right:a,bottom:f}=t.getBoundingClientRect()),{top:i+r.top,left:s+r.left,right:a+r.left,bottom:f+r.top,width:a-s,height:f-i}}function Vh(t,e){let r=Kk?document.documentElement:document.body,{top:i,left:s}=t===r&&!e?Gh():Or(t,e),a,f;return!t||t===window?(a=window.innerWidth||0,f=window.innerHeight||0):(i+=t.clientTop,s+=t.clientLeft,a=t.clientWidth,f=t.clientHeight),{top:i,left:s,right:s+a,bottom:i+f,width:a,height:f}}var pF="discovery-view-editor-hints-popup",gF="discovery-view-editor-hint",Yh="active",mF=window.requestAnimationFrame||(t=>setTimeout(t,1e3/60)),yF=window.cancelAnimationFrame||clearTimeout;Dn.default.commands.autocomplete=Dn.default.showHint;Dn.default.defineOption("showHintOptions",null);Dn.default.defineExtension("showHint",function(t){t={closeOnUnfocus:!0,container:null,...this.options.showHintOptions,...t},this.state.completionActive&&this.state.completionActive.close(),!(this.listSelections().length>1)&&(this.somethingSelected()||typeof t.hint=="function"&&(this.state.completionActive=new Qh(this,t),this.state.completionActive.update(!0),Dn.default.signal(this,"startCompletion",this)))});var Qh=class{constructor(e,r){if(this.cm=e,this.options=r,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length,e.on("cursorActivity",this.activityFunc=()=>this.cursorActivity()),r.closeOnUnfocus){let i;this.onFocus=()=>clearTimeout(i),this.onBlur=()=>i=setTimeout(()=>this.close(),100),e.on("focus",this.onFocus),e.on("blur",this.onBlur)}}close(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.options.closeOnUnfocus&&(this.cm.off("blur",this.onBlur),this.cm.off("focus",this.onFocus)),this.widget&&(this.data&&Dn.default.signal(this.data,"close"),this.widget.close()),Dn.default.signal(this.cm,"endCompletion",this.cm))}active(){return this.cm.state.completionActive===this}pick(e,r){let i=e.list[r];this.cm.state.completionEnabled=!1,i.hint?i.hint(this.cm,e,i):this.cm.replaceRange(Yk(i),i.from||e.from,i.to||e.to,"complete"),Dn.default.signal(e,"pick",i),this.close()}cursorActivity(){this.debounce&&(yF(this.debounce),this.debounce=0);let e=this.cm.getCursor(),r=this.cm.getLine(e.line);e.line!=this.startPos.line||r.length-e.ch!=this.startLen-this.startPos.ch||e.ch<this.startPos.ch||this.cm.somethingSelected()?this.close():(this.debounce=mF(()=>this.update()),this.widget&&this.widget.disable())}update(e){if(this.tick===null)return;let r=++this.tick;Promise.resolve(this.options.hint(this.cm,this.options)).then(i=>{this.tick==r&&this.finishUpdate(i,e)})}finishUpdate(e){this.data&&Dn.default.signal(this.data,"update");let r=this.widget&&this.widget.picked;this.widget&&this.widget.close(),this.data=e,e&&e.list.length&&(r&&e.list.length==1?this.pick(e,0):(this.widget=new Jh(this,e),Dn.default.signal(e,"shown")))}};function Yk(t){return typeof t=="string"?t:t.text}function vF(t,e){for(;e&&e.parentNode!==t;)e=e.parentNode;return e}var Jh=class{constructor(e,r){let i=e.cm,s=this.hintsEl=document.createElement("ul"),a=[pF,e.cm.options.theme].filter(Boolean),f=e.options.container||document.body;this.rootEls=new Set([f.getRootNode()]),this.completion=e,this.data=r,this.picked=!1,this.selectedHint=r.selectedHint||0,s.style.visibility="hidden",a.forEach(d=>s.classList.add(d)),f.appendChild(s),this.items=r.list.map((d,g)=>{let p=s.appendChild(document.createElement("li"));return p.className=gF,g===this.selectedHint&&p.classList.add(Yh),d.render?d.render(p,r,d):p.appendChild(document.createTextNode(d.displayText||Yk(d))),p}),i.addKeyMap(this.keyMap={Up:()=>this.changeActive(this.selectedHint-1),Down:()=>this.changeActive(this.selectedHint+1),Enter:()=>this.pick(),Tab:()=>this.pick(),Esc:()=>{i.state.completionEnabled=!1,e.close()}}),this.updatePosSize(),this.onScroll=()=>this.updatePosSize();for(let d of this.rootEls)d.addEventListener("scroll",this.onScroll,Xn);Dn.default.on(s,"mousedown",d=>{let g=vF(s,d.target),p=this.items.indexOf(g);p!==-1&&(this.close(),this.selectedHint=p,this.pick(),setTimeout(()=>i.focus(),1))}),Dn.default.signal(r,"select",r.list[this.selectedHint],this.items[this.selectedHint])}close(){if(this.completion.widget===this){this.completion.widget=null,this.completion.cm.removeKeyMap(this.keyMap),this.hintsEl.remove();for(let e of this.rootEls)e.removeEventListener("scroll",this.onScroll,Xn)}}disable(){this.completion.cm.removeKeyMap(this.keyMap),this.keyMap={Enter:()=>this.picked=!0},this.completion.cm.addKeyMap(this.keyMap)}pick(){this.completion.pick(this.data,this.selectedHint)}changeActive(e,r){e>=this.items.length?e=r?this.items.length-1:0:e<0&&(e=r?0:this.items.length-1);let i=this.items[this.selectedHint],s=this.items[this.selectedHint=e];s!==i&&(i&&i.classList.remove(Yh),s.classList.add(Yh),s.offsetTop<this.hintsEl.scrollTop?this.hintsEl.scrollTop=s.offsetTop-3:s.offsetTop+s.offsetHeight>this.hintsEl.scrollTop+this.hintsEl.clientHeight&&(this.hintsEl.scrollTop=s.offsetTop+s.offsetHeight-this.hintsEl.clientHeight+3),Dn.default.signal(this.data,"select",this.data.list[this.selectedHint],s))}getCursorCoords(){let{completion:e,hintsEl:r}=this,i=e.cm,s=Ka(r),a=i.cursorCoords(null,"local"),f=Or(i.display.wrapper,s);return{top:f.top+a.top+5,left:f.left+a.left+9,bottom:f.top+a.bottom+5,right:f.left+a.right+9}}updatePosSize(){let{hintsEl:i}=this,s=this.getCursorCoords(),{clientWidth:a,clientHeight:f}=Ya(i);i.style.left="0px",i.style.top="0px";let{width:d,height:g}=i.getBoundingClientRect(),p=f-s.bottom,y=s.top;p<g&&y>p?(i.style.top=`${s.top-1-Math.min(g,y-6)-1}px`,i.style.maxHeight=`${y-1-6}px`):(i.style.top=`${s.bottom+1}px`,i.style.maxHeight=`${p-1-6}px`);let v=a-s.right,w=s.left;v<d&&w>v?(i.style.left=`${s.left+1-Math.min(d,w-6)}px`,i.style.maxWidth=`${w-6}px`):(i.style.left=`${s.right}px`,i.style.maxWidth=`${v-6}px`),i.style.visibility="visible"}};function bF(t,e,{entry:{type:r,text:i,value:s}}){let a=i[0],f=i[i.length-1],d=a==='"'||a==="'"?1:0,g=f==='"'||f==="'"?1:0,p=i.toLowerCase().substring(d,i.length-g),y=p?s.toLowerCase().indexOf(p,s[0]==='"'||s[0]==="'"?1:0):-1;y!==-1&&(s=St(s.substring(0,y))+'<span class="match">'+St(s.substr(y,p.length))+"</span>"+St(s.substr(y+p.length))),t.classList.add("type-"+r),t.appendChild(X("span","name",s))}var Rc=class extends fr{constructor({hint:e,mode:r}){super(),this.el=document.createElement("div"),this.el.className="discovery-editor";let i=this,s=(0,Qa.default)(this.el,{extraKeys:{"Alt-Space":"autocomplete"},mode:r||"javascript",theme:"neo",indentUnit:0,showHintOptions:{hint:e,get container(){return i.container}}});s.on("change",()=>this.emit("change",s.getValue())),typeof e=="function"&&(s.on("cursorActivity",a=>{a.state.completionEnabled&&a.state.focused&&a.showHint()}),s.on("focus",a=>{a.getValue()===""&&(a.state.completionEnabled=!0),a.state.completionEnabled&&!a.state.completionActive&&a.showHint()}),s.on("change",(a,f)=>{f.origin!=="complete"&&(s.state.completionEnabled=!0)})),this.cm=s}getValue(){return this.cm.getValue()}setValue(e){Promise.resolve().then(()=>this.cm.refresh()),typeof e=="string"&&this.getValue()!==e&&this.cm.setValue(e||"")}focus(){this.cm.focus()}},Xh=class extends Rc{constructor(e){super({mode:"discovery-query",hint:r=>{let i=r.getCursor(),s=e(r.getValue(),r.doc.indexFromPos(i),this.queryData,this.queryContext);if(s)return{list:s.slice(0,50).map(a=>({entry:a,text:a.value,render:bF,from:r.posFromIndex(a.from),to:r.posFromIndex(a.to)}))}}})}setValue(e,r,i){this.queryData=r,this.queryContext=i,super.setValue(e)}},Zh=class extends Rc{constructor(){super({mode:{name:"discovery-view",isDiscoveryViewDefined:e=>this.isViewDefined(e)}})}};Qa.default.defineMode("jora",Uh);Qa.default.defineMode("discovery-query",Uh);Qa.default.defineMode("discovery-view",$k);function Qk(t){Object.assign(t.view,{QueryEditor:class extends Xh{get container(){return t.dom.container}},ViewEditor:class extends Zh{isViewDefined(e){return t.view.isDefined(e)}}})}var Jk={beforeDemo:['md:"A block has no its own look. It\'s using for wrapping some content with a `className` (btw `className` is a common property for any view when appropriate)"'],demo:{view:"block",className:"foo",content:['text:"Content inside block"']}};function Xk(t){t.view.define("block",function(e,r,i,s){let{content:a=[],onInit:f,onChange:d}=r,g=typeof f!="function"&&typeof d!="function"?a:this.composeConfig(a,{onInit:f,onChange:d});return t.view.render(e,g,i,s)},{usage:Jk})}var qc={demo:{view:"columns",data:["one","two","three","four"],column:"text"}};function Zk(t){t.view.define("column",function(e,r,i,s){let{content:a=[]}=r;return t.view.render(e,a,i,s)},{usage:qc})}function eC(t){t.view.define("columns",function(r,i,s,a){let{column:f,columnConfig:d,emptyText:g,limit:p}=i;if(g!==!1&&g!==""&&r.setAttribute("emptyText",g||"Empty"),!Array.isArray(s)&&s&&(s=[s]),Array.isArray(s))return t.view.renderList(r,this.composeConfig({view:"column",content:f},d),s,a,0,t.view.listLimit(p,25))},{usage:qc})}var tC={demo:{view:"expand",header:'text:"Expand me!"',content:'text:"Content"'}};function nC(t){t.view.define("expand",function(e,r,i,s){function a(){if(e.classList.toggle("expanded",f),f)return w=X("div","content"),t.view.render(w,g,i,s).then(()=>e.appendChild(w));w!==null&&(w.remove(),w=null)}let{expanded:f,header:d,content:g,onToggle:p}=r,y=e.appendChild(X("div","header")),v=y.appendChild(X("div","header-content")),w=null;return f=t.queryBool(f,i,s),y.appendChild(X("div","trigger")),y.addEventListener("click",()=>{f=!f,a(),typeof p=="function"&&p(f)}),Promise.all([t.view.render(v,d||'text:"\xA0"',i,s),a()])},{usage:tC})}var rC={demo:{view:"hstack",content:['button:{text:"First button"}','button-primary:{text:"Second button"}']}};function iC(t){t.view.define("hstack",function(e,r,i,s){let{content:a=[]}=r;return t.view.render(e,a,i,s)},{usage:rC})}function oC(t){t.view.define("list-item",function(e,r,i,s){let{content:a="text"}=r;return t.view.render(e,a,i,s)},{tag:"li"})}var $o=(t,e)=>({demo:{view:t,data:["one","two","three","four"]},examples:[{title:"Variations",demo:{view:"context",data:["foo","bar","baz"],content:e.map(r=>[`header{ content: 'md:${JSON.stringify('`view: \\"'+r+'\\"`')}' }`,r])}},{title:"Configure item's content",demo:[{view:t,data:["one","two","three","four"],item:['text:"<item> "',{view:"link",data:'{ href: "#" + $ }'}]}]},{title:"Configure item's config",demo:{view:t,data:["one","two","three","four"],itemConfig:{className:"special"},item:{view:"text",data:'"prefix-" + $'}}}]});function sC(t){function e(r,i,s,a){let{item:f,itemConfig:d,limit:g,emptyText:p}=i;if(p!==!1&&p!==""&&r.setAttribute("emptyText",p||"Empty list"),!Array.isArray(s)&&s&&(s=[s]),Array.isArray(s))return t.view.renderList(r,this.composeConfig({view:"list-item",content:f},d),s,a,0,t.view.listLimit(g,25))}t.view.define("list",e,{usage:$o}),t.view.define("inline-list",e,{usage:$o}),t.view.define("comma-list",e,{usage:$o}),t.view.define("ol",e,{tag:"ol",usage:$o}),t.view.define("ul",e,{tag:"ul",usage:$o})}var aC=t=>({beforeDemo:['md:"A special view to be used as the first view in the body of the page. This view stays in place as the page scrolls (although it may move slightly to the top of the page at the start of the scroll), so that the most relevant information and important action elements can remain accessible despite page scrolling."'],demoFixed:100,demo:`${t}:"That's a \\"${t}\\""`,examples:[{title:"Prelude",demoFixed:150,highlightProps:["prelude"],demo:{view:t,prelude:['badge:{ text: "demo" }','badge:{ text: "demo", prefix: "prelude", postfix: "postfix" }'],content:'h1:"Header"'}}]});function lC(t){t.view.define("page-header",function(r,i,s,a){let{prelude:f,content:d,onInit:g,onChange:p}=i,y=r.appendChild(X("div","view-page-header__prelude")),v=r.appendChild(X("div","view-page-header__content")),w=k=>typeof g!="function"&&typeof p!="function"?k:this.composeConfig(k,{onInit:g,onChange:p});return Promise.all([t.view.render(y,w(f||[]),s,a),t.view.render(v,w(d||"text"),s,a)])},{usage:aC})}var ep={};Ce(ep,{pointerXY:()=>bi});var cC=new vn({x:0,y:0},(t,e)=>t.x!==e.x||t.y!==e.y);document.addEventListener("pointermove",({x:t,y:e})=>cC.set({x:t,y:e}),Xn);var bi=cC.readonly;var Zn=[],uC=[!1,"popup-hover","trigger-click"],wF={position:"trigger",hoverTriggers:null,hoverPin:!1,hideIfEventOutside:!0,hideOnResize:!0,render:void 0};function tp(t,e){return t.el.contains(e)?t:t.relatedPopups.reduce((r,i)=>r||tp(i,e),null)}function fC(t){return t?t.getRootNode({composed:!0})===document:!0}function Fc(t){Zn.slice().forEach(e=>e.hideIfEventOutside(t))}function xF(){Zn.slice().forEach(t=>t.hideIfTriggerElementNotInDocument())}function dC(t){Zn.slice().forEach(e=>e.hideOnResize(t))}function hC(t){let e=[],r=new Set,i=null,s=null,a=()=>{i===null&&(i=[t.addHostElEventListener("mouseenter",({target:f})=>{if(f!==document)for(let d of e){let g=tp(d,f),p=g?g.el:f.closest(d.options.hoverTriggers);p&&(d.hideTimer=clearTimeout(d.hideTimer),p!==d.lastHoverTriggerEl&&((!g||!g.hoverPinned)&&(d.lastHoverTriggerEl=p),g||(d.hoverPinned=!1,d.el.classList.remove("pinned"),d.show(p))))}},Xn),t.addHostElEventListener("mouseleave",({target:f})=>{for(let d of e)d.lastHoverTriggerEl===f&&(d.lastHoverTriggerEl=null,d.hideTimer=setTimeout(d.hide,100))},Xn),t.addGlobalEventListener("scroll",f=>{s=setTimeout(()=>Fc(f),0)},!0),t.addHostElEventListener("scroll",f=>{clearTimeout(s),Fc(f)}),t.addGlobalEventListener("click",f=>{s=setTimeout(()=>Fc(f),0)},!0),t.addHostElEventListener("click",f=>{clearTimeout(s),Fc(f),setTimeout(xF,50);for(let d of e)d.options.hoverPin==="trigger-click"&&d.lastHoverTriggerEl&&d.lastTriggerEl.contains(f.target)&&(d.lastHoverTriggerEl=null,d.hoverPinned=!0,d.el.classList.add("pinned"),f.stopPropagation())},!0)])};bi.subscribe(()=>{for(let f of Zn)f.options.position==="pointer"&&!f.hoverPinned&&!f.frozen&&f.updatePosition()}),t.inspectMode.subscribe(f=>f?Zn.forEach(d=>r.add(d)):r.clear()),t.view.Popup=class{constructor(d){this.options={...wF,...d},this.el=document.createElement("div"),this.el.classList.add("discovery-view-popup"),this.hide=this.hide.bind(this),this.hideTimer=null,this.lastTriggerEl=null,this.lastHoverTriggerEl=null,this.hoverPinned=!1,this.frozen=!1,this.options.className&&this.el.classList.add(this.options.className),uC.includes(this.options.hoverPin)||(t.log("warn",`Bad value for \`Popup#options.hoverPin\` (should be ${uC.join(", ")}):`,this.options.hoverPin),this.options.hoverPin=!1),this.options.hoverTriggers&&(this.el.classList.add("show-on-hover"),this.el.dataset.pinMode=this.options.hoverPin||"none",e.push(this),a())}get relatedPopups(){return Zn.filter(d=>this.el.contains(d.lastTriggerEl))}get visible(){return Zn.includes(this)}toggle(...d){this.visible?this.hide():this.show(...d)}show(d,g=this.options.render){let p=t.dom.container;this.hideTimer=clearTimeout(this.hideTimer),this.relatedPopups.forEach(y=>y.hide()),this.el.classList.toggle("inspect",t.inspectMode.value),typeof g=="function"&&(this.el.innerHTML="",g(this.el,d,this.hide)),this.lastTriggerEl&&this.lastTriggerEl.classList.remove("discovery-view-popup-active"),d&&d.classList.add("discovery-view-popup-active"),this.lastTriggerEl=d||null,this.visible||(Zn.push(this),Zn.length===1&&window.addEventListener("resize",dC)),this.updatePosition(),p.appendChild(this.el)}updatePosition(){if(!this.visible||this.options.position!=="pointer"&&!this.lastTriggerEl)return;let d=t.dom.container,g=Ka(d.firstChild),p=Vh(window,g),{x:y,y:v}=bi.value,w=3,k=this.options.position!=="pointer"?Or(this.lastTriggerEl,d):{left:parseInt(y)+w,right:parseInt(y)-w,top:parseInt(v)-w,bottom:parseInt(v)+w},T=k.top-p.top-3,L=p.bottom-k.bottom-3,A=k.right-p.left-3,N=p.right-k.left-3;T>L?(this.el.style.maxHeight=T+"px",this.el.style.top="auto",this.el.style.bottom=p.bottom-k.top+"px",this.el.dataset.vTo="top"):(this.el.style.maxHeight=L+"px",this.el.style.top=k.bottom-p.top+"px",this.el.style.bottom="auto",this.el.dataset.vTo="bottom"),A>N?(this.el.style.left="auto",this.el.style.right=p.right-k.right+"px",this.el.style.maxWidth=A+"px",this.el.dataset.hTo="left"):(this.el.style.left=k.left-p.left+"px",this.el.style.right="auto",this.el.style.maxWidth=N+"px",this.el.dataset.hTo="right"),this.relatedPopups.forEach(S=>S.updatePosition())}freeze(){this.frozen=!0,this.el.classList.add("frozen")}unfreeze(){this.frozen=!1,this.el.classList.remove("frozen"),this.updatePosition()}hide(){this.hideTimer=clearTimeout(this.hideTimer),this.visible&&!r.has(this)&&(this.relatedPopups.forEach(d=>d.hide()),Zn.splice(Zn.indexOf(this),1),this.el.remove(),this.unfreeze(),this.lastTriggerEl&&(this.lastTriggerEl.classList.remove("discovery-view-popup-active"),this.lastTriggerEl=null),Zn.length===0&&window.removeEventListener("resize",dC))}hideIfEventOutside({target:d}){!this.options.hideIfEventOutside||r.has(this)||this.lastTriggerEl&&this.lastTriggerEl.contains(d)||tp(this,d)||this.hide()}hideIfTriggerElementNotInDocument(){(!fC(this.lastHoverTriggerEl)||!fC(this.lastTriggerEl))&&this.hide()}hideOnResize(){!this.options.hideOnResize||r.has(this)||this.hide()}destroy(){r.delete(this);let d=e.indexOf(this);d!==-1&&e.splice(d,1),this.hide(),this.el=null,this.lastTriggerEl=null,this.lastHoverTriggerEl=null}}}var pC={demo:{view:"section",header:'text:"I am section"',content:['text:"content"']}};function gC(t){t.view.define("section",function(e,r,i,s){let{header:a,content:f}=r;return t.view.render(e,[{view:"header",content:a},f],i,s)},{usage:pC})}function mC(t){t.view.define("toc-section",function(e,r,i,s){let{header:a,content:f}=r;return t.view.render(e,[{view:"block",className:"header",content:a},{view:"block",className:"content",content:f}],i,s)},{tag:"section"})}var Go=(t,e)=>({demo:{view:t,data:'"Alert"'},examples:[{title:"Variations",demo:e.map(r=>`${r}:"${r}"`)},{title:"Complex content",demo:{view:t,content:['h3:"Some header"','text:"Hello world!"']}}]});function yC(t){function e(r,i,s,a){let{content:f="text"}=i;return r.classList.add("view-alert"),t.view.render(r,f,s,a)}t.view.define("alert",e,{usage:Go}),t.view.define("alert-primary",e,{usage:Go}),t.view.define("alert-success",e,{usage:Go}),t.view.define("alert-danger",e,{usage:Go}),t.view.define("alert-warning",e,{usage:Go})}function vC(t){t.view.define("auto-link",function(e,r,i,s){let{content:a,fallback:f,href:d}=r;if(!i)return;let g=t.resolveValueLinks(i),y=g?(typeof d=="function"?d:v=>v)(g[0].href,i,s):null;return y?t.view.render(e,{view:"link",content:a},{...g[0],href:y},s):t.view.render(e,f||a||"text",i,s)},{tag:!1})}var np=(t,e)=>({demo:{view:t,data:JSON.stringify(t)},examples:[{title:"Variations",demo:e.map(r=>`${r}:"${r}"`)},{title:"Custom colors",beforeDemo:{view:"md",source:["Data properties to setup a custom colors:","* `color` \u2013 default background color","* `textColor` \u2013 default text color","* `darkColor` \u2013 background color in dark mode","* `textColor` \u2013 text color in dark mode"].join(`
`)},demo:{view:t,data:{text:"Colored badge",color:"rgba(237, 177, 9, 0.35)",textColor:"orange",darkColor:"#ffff00",darkTextColor:"black"}}},{title:"As a link",demo:{view:t,data:{text:"Link to something",href:"#",external:!0}}},{title:"Prefix and postfix",demo:{view:t,data:{prefix:"prefix",text:"link",postfix:"postfix"}}},{title:"With a hint",demo:{view:t,data:{text:"text",hint:"hint"}}}]});function bC(t,e,r){if(!r)return;let i=t.appendChild(document.createElement("span"));i.className=e,i.textContent=r}function wC(t){function e(r,i,s,a){let{content:f}=i,{color:d,textColor:g,darkColor:p,darkTextColor:y,text:v,href:w,external:k,prefix:T,postfix:L,hint:A}=s||{},N;return(typeof s=="string"||typeof s=="number"||typeof s=="boolean")&&(v=s),d&&r.style.setProperty("--discovery-view-badge-color",d),p&&r.style.setProperty("--discovery-view-badge-dark-color",p),g&&r.style.setProperty("--discovery-view-badge-text-color",g),y&&r.style.setProperty("--discovery-view-badge-dark-text-color",y),w&&(r.href=w),k&&(r.target="_blank"),A&&(r.title=A),bC(r,"prefix",T),f?N=this.render(r,f,s,a):r.append(document.createTextNode(v)),bC(r,"postfix",L),N}t.view.define("badge",e,{tag:"a",usage:np}),t.view.define("pill-badge",e,{tag:"a",usage:np})}function LC(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}var Ui=LC();function kF(t){Ui=t}var EC=/[&<>"']/,CF=new RegExp(EC.source,"g"),DC=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,SF=new RegExp(DC.source,"g"),AF={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},xC=t=>AF[t];function on(t,e){if(e){if(EC.test(t))return t.replace(CF,xC)}else if(DC.test(t))return t.replace(SF,xC);return t}var TF=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function NC(t){return t.replace(TF,(e,r)=>(r=r.toLowerCase(),r==="colon"?":":r.charAt(0)==="#"?r.charAt(1)==="x"?String.fromCharCode(parseInt(r.substring(2),16)):String.fromCharCode(+r.substring(1)):""))}var LF=/(^|[^\[])\^/g;function gt(t,e){t=typeof t=="string"?t:t.source,e=e||"";let r={replace:(i,s)=>(s=s.source||s,s=s.replace(LF,"$1"),t=t.replace(i,s),r),getRegex:()=>new RegExp(t,e)};return r}var EF=/[^\w:]/g,DF=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function kC(t,e,r){if(t){let i;try{i=decodeURIComponent(NC(r)).replace(EF,"").toLowerCase()}catch{return null}if(i.indexOf("javascript:")===0||i.indexOf("vbscript:")===0||i.indexOf("data:")===0)return null}e&&!DF.test(r)&&(r=PF(e,r));try{r=encodeURI(r).replace(/%25/g,"%")}catch{return null}return r}var _c={},NF=/^[^:]+:\/*[^/]*$/,MF=/^([^:]+:)[\s\S]*$/,OF=/^([^:]+:\/*[^/]*)[\s\S]*$/;function PF(t,e){_c[" "+t]||(NF.test(t)?_c[" "+t]=t+"/":_c[" "+t]=jc(t,"/",!0)),t=_c[" "+t];let r=t.indexOf(":")===-1;return e.substring(0,2)==="//"?r?e:t.replace(MF,"$1")+e:e.charAt(0)==="/"?r?e:t.replace(OF,"$1")+e:t+e}var Hc={exec:function(){}};function CC(t,e){let r=t.replace(/\|/g,(a,f,d)=>{let g=!1,p=f;for(;--p>=0&&d[p]==="\\";)g=!g;return g?"|":" |"}),i=r.split(/ \|/),s=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;s<i.length;s++)i[s]=i[s].trim().replace(/\\\|/g,"|");return i}function jc(t,e,r){let i=t.length;if(i===0)return"";let s=0;for(;s<i;){let a=t.charAt(i-s-1);if(a===e&&!r)s++;else if(a!==e&&r)s++;else break}return t.slice(0,i-s)}function IF(t,e){if(t.indexOf(e[1])===-1)return-1;let r=t.length,i=0,s=0;for(;s<r;s++)if(t[s]==="\\")s++;else if(t[s]===e[0])i++;else if(t[s]===e[1]&&(i--,i<0))return s;return-1}function zF(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function SC(t,e){if(e<1)return"";let r="";for(;e>1;)e&1&&(r+=t),e>>=1,t+=t;return r+t}function AC(t,e,r,i){let s=e.href,a=e.title?on(e.title):null,f=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){i.state.inLink=!0;let d={type:"link",raw:r,href:s,title:a,text:f,tokens:i.inlineTokens(f)};return i.state.inLink=!1,d}return{type:"image",raw:r,href:s,title:a,text:on(f)}}function BF(t,e){let r=t.match(/^(\s+)(?:```)/);if(r===null)return e;let i=r[1];return e.split(`
`).map(s=>{let a=s.match(/^\s+/);if(a===null)return s;let[f]=a;return f.length>=i.length?s.slice(i.length):s}).join(`
`)}var Ja=class{constructor(e){this.options=e||Ui}space(e){let r=this.rules.block.newline.exec(e);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(e){let r=this.rules.block.code.exec(e);if(r){let i=r[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?i:jc(i,`
`)}}}fences(e){let r=this.rules.block.fences.exec(e);if(r){let i=r[0],s=BF(i,r[3]||"");return{type:"code",raw:i,lang:r[2]?r[2].trim().replace(this.rules.inline._escapes,"$1"):r[2],text:s}}}heading(e){let r=this.rules.block.heading.exec(e);if(r){let i=r[2].trim();if(/#$/.test(i)){let s=jc(i,"#");(this.options.pedantic||!s||/ $/.test(s))&&(i=s.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){let r=this.rules.block.hr.exec(e);if(r)return{type:"hr",raw:r[0]}}blockquote(e){let r=this.rules.block.blockquote.exec(e);if(r){let i=r[0].replace(/^ *>[ \t]?/gm,""),s=this.lexer.state.top;this.lexer.state.top=!0;let a=this.lexer.blockTokens(i);return this.lexer.state.top=s,{type:"blockquote",raw:r[0],tokens:a,text:i}}}list(e){let r=this.rules.block.list.exec(e);if(r){let i,s,a,f,d,g,p,y,v,w,k,T,L=r[1].trim(),A=L.length>1,N={type:"list",raw:"",ordered:A,start:A?+L.slice(0,-1):"",loose:!1,items:[]};L=A?`\\d{1,9}\\${L.slice(-1)}`:`\\${L}`,this.options.pedantic&&(L=A?L:"[*+-]");let S=new RegExp(`^( {0,3}${L})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;e&&(T=!1,!(!(r=S.exec(e))||this.rules.block.hr.test(e)));){if(i=r[0],e=e.substring(i.length),y=r[2].split(`
`,1)[0].replace(/^\t+/,O=>" ".repeat(3*O.length)),v=e.split(`
`,1)[0],this.options.pedantic?(f=2,k=y.trimLeft()):(f=r[2].search(/[^ ]/),f=f>4?1:f,k=y.slice(f),f+=r[1].length),g=!1,!y&&/^ *$/.test(v)&&(i+=v+`
`,e=e.substring(v.length+1),T=!0),!T){let O=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),z=new RegExp(`^ {0,${Math.min(3,f-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),I=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:\`\`\`|~~~)`),_=new RegExp(`^ {0,${Math.min(3,f-1)}}#`);for(;e&&(w=e.split(`
`,1)[0],v=w,this.options.pedantic&&(v=v.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(I.test(v)||_.test(v)||O.test(v)||z.test(e)));){if(v.search(/[^ ]/)>=f||!v.trim())k+=`
`+v.slice(f);else{if(g||y.search(/[^ ]/)>=4||I.test(y)||_.test(y)||z.test(y))break;k+=`
`+v}!g&&!v.trim()&&(g=!0),i+=w+`
`,e=e.substring(w.length+1),y=v.slice(f)}}N.loose||(p?N.loose=!0:/\n *\n *$/.test(i)&&(p=!0)),this.options.gfm&&(s=/^\[[ xX]\] /.exec(k),s&&(a=s[0]!=="[ ] ",k=k.replace(/^\[[ xX]\] +/,""))),N.items.push({type:"list_item",raw:i,task:!!s,checked:a,loose:!1,text:k}),N.raw+=i}N.items[N.items.length-1].raw=i.trimRight(),N.items[N.items.length-1].text=k.trimRight(),N.raw=N.raw.trimRight();let M=N.items.length;for(d=0;d<M;d++)if(this.lexer.state.top=!1,N.items[d].tokens=this.lexer.blockTokens(N.items[d].text,[]),!N.loose){let O=N.items[d].tokens.filter(I=>I.type==="space"),z=O.length>0&&O.some(I=>/\n.*\n/.test(I.raw));N.loose=z}if(N.loose)for(d=0;d<M;d++)N.items[d].loose=!0;return N}}html(e){let r=this.rules.block.html.exec(e);if(r){let i={type:"html",raw:r[0],pre:!this.options.sanitizer&&(r[1]==="pre"||r[1]==="script"||r[1]==="style"),text:r[0]};if(this.options.sanitize){let s=this.options.sanitizer?this.options.sanitizer(r[0]):on(r[0]);i.type="paragraph",i.text=s,i.tokens=this.lexer.inline(s)}return i}}def(e){let r=this.rules.block.def.exec(e);if(r){let i=r[1].toLowerCase().replace(/\s+/g," "),s=r[2]?r[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",a=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline._escapes,"$1"):r[3];return{type:"def",tag:i,raw:r[0],href:s,title:a}}}table(e){let r=this.rules.block.table.exec(e);if(r){let i={type:"table",header:CC(r[1]).map(s=>({text:s})),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:r[3]&&r[3].trim()?r[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(i.header.length===i.align.length){i.raw=r[0];let s=i.align.length,a,f,d,g;for(a=0;a<s;a++)/^ *-+: *$/.test(i.align[a])?i.align[a]="right":/^ *:-+: *$/.test(i.align[a])?i.align[a]="center":/^ *:-+ *$/.test(i.align[a])?i.align[a]="left":i.align[a]=null;for(s=i.rows.length,a=0;a<s;a++)i.rows[a]=CC(i.rows[a],i.header.length).map(p=>({text:p}));for(s=i.header.length,f=0;f<s;f++)i.header[f].tokens=this.lexer.inline(i.header[f].text);for(s=i.rows.length,f=0;f<s;f++)for(g=i.rows[f],d=0;d<g.length;d++)g[d].tokens=this.lexer.inline(g[d].text);return i}}}lheading(e){let r=this.rules.block.lheading.exec(e);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(e){let r=this.rules.block.paragraph.exec(e);if(r){let i=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:i,tokens:this.lexer.inline(i)}}}text(e){let r=this.rules.block.text.exec(e);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(e){let r=this.rules.inline.escape.exec(e);if(r)return{type:"escape",raw:r[0],text:on(r[1])}}tag(e){let r=this.rules.inline.tag.exec(e);if(r)return!this.lexer.state.inLink&&/^<a /i.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):on(r[0]):r[0]}}link(e){let r=this.rules.inline.link.exec(e);if(r){let i=r[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;let f=jc(i.slice(0,-1),"\\");if((i.length-f.length)%2===0)return}else{let f=IF(r[2],"()");if(f>-1){let g=(r[0].indexOf("!")===0?5:4)+r[1].length+f;r[2]=r[2].substring(0,f),r[0]=r[0].substring(0,g).trim(),r[3]=""}}let s=r[2],a="";if(this.options.pedantic){let f=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);f&&(s=f[1],a=f[3])}else a=r[3]?r[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(this.options.pedantic&&!/>$/.test(i)?s=s.slice(1):s=s.slice(1,-1)),AC(r,{href:s&&s.replace(this.rules.inline._escapes,"$1"),title:a&&a.replace(this.rules.inline._escapes,"$1")},r[0],this.lexer)}}reflink(e,r){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let s=(i[2]||i[1]).replace(/\s+/g," ");if(s=r[s.toLowerCase()],!s){let a=i[0].charAt(0);return{type:"text",raw:a,text:a}}return AC(i,s,i[0],this.lexer)}}emStrong(e,r,i=""){let s=this.rules.inline.emStrong.lDelim.exec(e);if(!s||s[3]&&i.match(/[\p{L}\p{N}]/u))return;let a=s[1]||s[2]||"";if(!a||a&&(i===""||this.rules.inline.punctuation.exec(i))){let f=s[0].length-1,d,g,p=f,y=0,v=s[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(v.lastIndex=0,r=r.slice(-1*e.length+f);(s=v.exec(r))!=null;){if(d=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!d)continue;if(g=d.length,s[3]||s[4]){p+=g;continue}else if((s[5]||s[6])&&f%3&&!((f+g)%3)){y+=g;continue}if(p-=g,p>0)continue;g=Math.min(g,g+p+y);let w=e.slice(0,f+s.index+(s[0].length-d.length)+g);if(Math.min(f,g)%2){let T=w.slice(1,-1);return{type:"em",raw:w,text:T,tokens:this.lexer.inlineTokens(T)}}let k=w.slice(2,-2);return{type:"strong",raw:w,text:k,tokens:this.lexer.inlineTokens(k)}}}}codespan(e){let r=this.rules.inline.code.exec(e);if(r){let i=r[2].replace(/\n/g," "),s=/[^ ]/.test(i),a=/^ /.test(i)&&/ $/.test(i);return s&&a&&(i=i.substring(1,i.length-1)),i=on(i,!0),{type:"codespan",raw:r[0],text:i}}}br(e){let r=this.rules.inline.br.exec(e);if(r)return{type:"br",raw:r[0]}}del(e){let r=this.rules.inline.del.exec(e);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(e,r){let i=this.rules.inline.autolink.exec(e);if(i){let s,a;return i[2]==="@"?(s=on(this.options.mangle?r(i[1]):i[1]),a="mailto:"+s):(s=on(i[1]),a=s),{type:"link",raw:i[0],text:s,href:a,tokens:[{type:"text",raw:s,text:s}]}}}url(e,r){let i;if(i=this.rules.inline.url.exec(e)){let s,a;if(i[2]==="@")s=on(this.options.mangle?r(i[0]):i[0]),a="mailto:"+s;else{let f;do f=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0];while(f!==i[0]);s=on(i[0]),i[1]==="www."?a="http://"+i[0]:a=i[0]}return{type:"link",raw:i[0],text:s,href:a,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(e,r){let i=this.rules.inline.text.exec(e);if(i){let s;return this.lexer.state.inRawBlock?s=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):on(i[0]):i[0]:s=on(this.options.smartypants?r(i[0]):i[0]),{type:"text",raw:i[0],text:s}}}},Ie={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Hc,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};Ie._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;Ie._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;Ie.def=gt(Ie.def).replace("label",Ie._label).replace("title",Ie._title).getRegex();Ie.bullet=/(?:[*+-]|\d{1,9}[.)])/;Ie.listItemStart=gt(/^( *)(bull) */).replace("bull",Ie.bullet).getRegex();Ie.list=gt(Ie.list).replace(/bull/g,Ie.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Ie.def.source+")").getRegex();Ie._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";Ie._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;Ie.html=gt(Ie.html,"i").replace("comment",Ie._comment).replace("tag",Ie._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();Ie.paragraph=gt(Ie._paragraph).replace("hr",Ie.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ie._tag).getRegex();Ie.blockquote=gt(Ie.blockquote).replace("paragraph",Ie.paragraph).getRegex();Ie.normal={...Ie};Ie.gfm={...Ie.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"};Ie.gfm.table=gt(Ie.gfm.table).replace("hr",Ie.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ie._tag).getRegex();Ie.gfm.paragraph=gt(Ie._paragraph).replace("hr",Ie.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Ie.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ie._tag).getRegex();Ie.pedantic={...Ie.normal,html:gt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ie._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Hc,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:gt(Ie.normal._paragraph).replace("hr",Ie.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Ie.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};var xe={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Hc,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Hc,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};xe._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";xe.punctuation=gt(xe.punctuation).replace(/punctuation/g,xe._punctuation).getRegex();xe.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;xe.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g;xe._comment=gt(Ie._comment).replace("(?:-->|$)","-->").getRegex();xe.emStrong.lDelim=gt(xe.emStrong.lDelim).replace(/punct/g,xe._punctuation).getRegex();xe.emStrong.rDelimAst=gt(xe.emStrong.rDelimAst,"g").replace(/punct/g,xe._punctuation).getRegex();xe.emStrong.rDelimUnd=gt(xe.emStrong.rDelimUnd,"g").replace(/punct/g,xe._punctuation).getRegex();xe._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;xe._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;xe._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;xe.autolink=gt(xe.autolink).replace("scheme",xe._scheme).replace("email",xe._email).getRegex();xe._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;xe.tag=gt(xe.tag).replace("comment",xe._comment).replace("attribute",xe._attribute).getRegex();xe._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;xe._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;xe._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;xe.link=gt(xe.link).replace("label",xe._label).replace("href",xe._href).replace("title",xe._title).getRegex();xe.reflink=gt(xe.reflink).replace("label",xe._label).replace("ref",Ie._label).getRegex();xe.nolink=gt(xe.nolink).replace("ref",Ie._label).getRegex();xe.reflinkSearch=gt(xe.reflinkSearch,"g").replace("reflink",xe.reflink).replace("nolink",xe.nolink).getRegex();xe.normal={...xe};xe.pedantic={...xe.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:gt(/^!?\[(label)\]\((.*?)\)/).replace("label",xe._label).getRegex(),reflink:gt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",xe._label).getRegex()};xe.gfm={...xe.normal,escape:gt(xe.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};xe.gfm.url=gt(xe.gfm.url,"i").replace("email",xe.gfm._extended_email).getRegex();xe.breaks={...xe.gfm,br:gt(xe.br).replace("{2,}","*").getRegex(),text:gt(xe.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};function RF(t){return t.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function TC(t){let e="",r,i,s=t.length;for(r=0;r<s;r++)i=t.charCodeAt(r),Math.random()>.5&&(i="x"+i.toString(16)),e+="&#"+i+";";return e}var Pr=class{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ui,this.options.tokenizer=this.options.tokenizer||new Ja,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={block:Ie.normal,inline:xe.normal};this.options.pedantic?(r.block=Ie.pedantic,r.inline=xe.pedantic):this.options.gfm&&(r.block=Ie.gfm,this.options.breaks?r.inline=xe.breaks:r.inline=xe.gfm),this.tokenizer.rules=r}static get rules(){return{block:Ie,inline:xe}}static lex(e,r){return new Pr(r).lex(e)}static lexInline(e,r){return new Pr(r).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let r;for(;r=this.inlineQueue.shift();)this.inlineTokens(r.src,r.tokens);return this.tokens}blockTokens(e,r=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(d,g,p)=>g+"    ".repeat(p.length));let i,s,a,f;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(d=>(i=d.call({lexer:this},e,r))?(e=e.substring(i.raw.length),r.push(i),!0):!1))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),i.raw.length===1&&r.length>0?r[r.length-1].raw+=`
`:r.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),s=r[r.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text):r.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),s=r[r.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+i.raw,s.text+=`
`+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),r.push(i);continue}if(a=e,this.options.extensions&&this.options.extensions.startBlock){let d=1/0,g=e.slice(1),p;this.options.extensions.startBlock.forEach(function(y){p=y.call({lexer:this},g),typeof p=="number"&&p>=0&&(d=Math.min(d,p))}),d<1/0&&d>=0&&(a=e.substring(0,d+1))}if(this.state.top&&(i=this.tokenizer.paragraph(a))){s=r[r.length-1],f&&s.type==="paragraph"?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):r.push(i),f=a.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),s=r[r.length-1],s&&s.type==="text"?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):r.push(i);continue}if(e){let d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return this.state.top=!0,r}inline(e,r=[]){return this.inlineQueue.push({src:e,tokens:r}),r}inlineTokens(e,r=[]){let i,s,a,f=e,d,g,p;if(this.tokens.links){let y=Object.keys(this.tokens.links);if(y.length>0)for(;(d=this.tokenizer.rules.inline.reflinkSearch.exec(f))!=null;)y.includes(d[0].slice(d[0].lastIndexOf("[")+1,-1))&&(f=f.slice(0,d.index)+"["+SC("a",d[0].length-2)+"]"+f.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(d=this.tokenizer.rules.inline.blockSkip.exec(f))!=null;)f=f.slice(0,d.index)+"["+SC("a",d[0].length-2)+"]"+f.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(d=this.tokenizer.rules.inline.escapedEmSt.exec(f))!=null;)f=f.slice(0,d.index+d[0].length-2)+"++"+f.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(g||(p=""),g=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(y=>(i=y.call({lexer:this},e,r))?(e=e.substring(i.raw.length),r.push(i),!0):!1))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),s=r[r.length-1],s&&i.type==="text"&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):r.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),s=r[r.length-1],s&&i.type==="text"&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):r.push(i);continue}if(i=this.tokenizer.emStrong(e,f,p)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.autolink(e,TC)){e=e.substring(i.raw.length),r.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e,TC))){e=e.substring(i.raw.length),r.push(i);continue}if(a=e,this.options.extensions&&this.options.extensions.startInline){let y=1/0,v=e.slice(1),w;this.options.extensions.startInline.forEach(function(k){w=k.call({lexer:this},v),typeof w=="number"&&w>=0&&(y=Math.min(y,w))}),y<1/0&&y>=0&&(a=e.substring(0,y+1))}if(i=this.tokenizer.inlineText(a,RF)){e=e.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(p=i.raw.slice(-1)),g=!0,s=r[r.length-1],s&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):r.push(i);continue}if(e){let y="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(y);break}else throw new Error(y)}}return r}},Xa=class{constructor(e){this.options=e||Ui}code(e,r,i){let s=(r||"").match(/\S*/)[0];if(this.options.highlight){let a=this.options.highlight(e,s);a!=null&&a!==e&&(i=!0,e=a)}return e=e.replace(/\n$/,"")+`
`,s?'<pre><code class="'+this.options.langPrefix+on(s)+'">'+(i?e:on(e,!0))+`</code></pre>
`:"<pre><code>"+(i?e:on(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e){return e}heading(e,r,i,s){if(this.options.headerIds){let a=this.options.headerPrefix+s.slug(i);return`<h${r} id="${a}">${e}</h${r}>
`}return`<h${r}>${e}</h${r}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,r,i){let s=r?"ol":"ul",a=r&&i!==1?' start="'+i+'"':"";return"<"+s+a+`>
`+e+"</"+s+`>
`}listitem(e){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>
`}table(e,r){return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,r){let i=r.header?"th":"td";return(r.align?`<${i} align="${r.align}">`:`<${i}>`)+e+`</${i}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,r,i){if(e=kC(this.options.sanitize,this.options.baseUrl,e),e===null)return i;let s='<a href="'+e+'"';return r&&(s+=' title="'+r+'"'),s+=">"+i+"</a>",s}image(e,r,i){if(e=kC(this.options.sanitize,this.options.baseUrl,e),e===null)return i;let s=`<img src="${e}" alt="${i}"`;return r&&(s+=` title="${r}"`),s+=this.options.xhtml?"/>":">",s}text(e){return e}},Wc=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,r,i){return""+i}image(e,r,i){return""+i}br(){return""}},Ko=class{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,r){let i=e,s=0;if(this.seen.hasOwnProperty(i)){s=this.seen[e];do s++,i=e+"-"+s;while(this.seen.hasOwnProperty(i))}return r||(this.seen[e]=s,this.seen[i]=0),i}slug(e,r={}){let i=this.serialize(e);return this.getNextSafeSlug(i,r.dryrun)}},Ir=class{constructor(e){this.options=e||Ui,this.options.renderer=this.options.renderer||new Xa,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Wc,this.slugger=new Ko}static parse(e,r){return new Ir(r).parse(e)}static parseInline(e,r){return new Ir(r).parseInline(e)}parse(e,r=!0){let i="",s,a,f,d,g,p,y,v,w,k,T,L,A,N,S,M,O,z,I,_=e.length;for(s=0;s<_;s++){if(k=e[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[k.type]&&(I=this.options.extensions.renderers[k.type].call({parser:this},k),I!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(k.type))){i+=I||"";continue}switch(k.type){case"space":continue;case"hr":{i+=this.renderer.hr();continue}case"heading":{i+=this.renderer.heading(this.parseInline(k.tokens),k.depth,NC(this.parseInline(k.tokens,this.textRenderer)),this.slugger);continue}case"code":{i+=this.renderer.code(k.text,k.lang,k.escaped);continue}case"table":{for(v="",y="",d=k.header.length,a=0;a<d;a++)y+=this.renderer.tablecell(this.parseInline(k.header[a].tokens),{header:!0,align:k.align[a]});for(v+=this.renderer.tablerow(y),w="",d=k.rows.length,a=0;a<d;a++){for(p=k.rows[a],y="",g=p.length,f=0;f<g;f++)y+=this.renderer.tablecell(this.parseInline(p[f].tokens),{header:!1,align:k.align[f]});w+=this.renderer.tablerow(y)}i+=this.renderer.table(v,w);continue}case"blockquote":{w=this.parse(k.tokens),i+=this.renderer.blockquote(w);continue}case"list":{for(T=k.ordered,L=k.start,A=k.loose,d=k.items.length,w="",a=0;a<d;a++)S=k.items[a],M=S.checked,O=S.task,N="",S.task&&(z=this.renderer.checkbox(M),A?S.tokens.length>0&&S.tokens[0].type==="paragraph"?(S.tokens[0].text=z+" "+S.tokens[0].text,S.tokens[0].tokens&&S.tokens[0].tokens.length>0&&S.tokens[0].tokens[0].type==="text"&&(S.tokens[0].tokens[0].text=z+" "+S.tokens[0].tokens[0].text)):S.tokens.unshift({type:"text",text:z}):N+=z),N+=this.parse(S.tokens,A),w+=this.renderer.listitem(N,O,M);i+=this.renderer.list(w,T,L);continue}case"html":{i+=this.renderer.html(k.text);continue}case"paragraph":{i+=this.renderer.paragraph(this.parseInline(k.tokens));continue}case"text":{for(w=k.tokens?this.parseInline(k.tokens):k.text;s+1<_&&e[s+1].type==="text";)k=e[++s],w+=`
`+(k.tokens?this.parseInline(k.tokens):k.text);i+=r?this.renderer.paragraph(w):w;continue}default:{let U='Token with "'+k.type+'" type was not found.';if(this.options.silent){console.error(U);return}else throw new Error(U)}}}return i}parseInline(e,r){r=r||this.renderer;let i="",s,a,f,d=e.length;for(s=0;s<d;s++){if(a=e[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]&&(f=this.options.extensions.renderers[a.type].call({parser:this},a),f!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type))){i+=f||"";continue}switch(a.type){case"escape":{i+=r.text(a.text);break}case"html":{i+=r.html(a.text);break}case"link":{i+=r.link(a.href,a.title,this.parseInline(a.tokens,r));break}case"image":{i+=r.image(a.href,a.title,a.text);break}case"strong":{i+=r.strong(this.parseInline(a.tokens,r));break}case"em":{i+=r.em(this.parseInline(a.tokens,r));break}case"codespan":{i+=r.codespan(a.text);break}case"br":{i+=r.br();break}case"del":{i+=r.del(this.parseInline(a.tokens,r));break}case"text":{i+=r.text(a.text);break}default:{let g='Token with "'+a.type+'" type was not found.';if(this.options.silent){console.error(g);return}else throw new Error(g)}}}return i}},Vo=class{constructor(e){this.options=e||Ui}preprocess(e){return e}postprocess(e){return e}};Ky(Vo,"passThroughHooks",new Set(["preprocess","postprocess"]));function qF(t,e,r){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let s="<p>An error occurred:</p><pre>"+on(i.message+"",!0)+"</pre>";if(e)return Promise.resolve(s);if(r){r(null,s);return}return s}if(e)return Promise.reject(i);if(r){r(i);return}throw i}}function MC(t,e){return(r,i,s)=>{typeof i=="function"&&(s=i,i=null);let a={...i};i={...Oe.defaults,...a};let f=qF(i.silent,i.async,s);if(typeof r>"u"||r===null)return f(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return f(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(zF(i),i.hooks&&(i.hooks.options=i),s){let d=i.highlight,g;try{i.hooks&&(r=i.hooks.preprocess(r)),g=t(r,i)}catch(v){return f(v)}let p=function(v){let w;if(!v)try{i.walkTokens&&Oe.walkTokens(g,i.walkTokens),w=e(g,i),i.hooks&&(w=i.hooks.postprocess(w))}catch(k){v=k}return i.highlight=d,v?f(v):s(null,w)};if(!d||d.length<3||(delete i.highlight,!g.length))return p();let y=0;Oe.walkTokens(g,function(v){v.type==="code"&&(y++,setTimeout(()=>{d(v.text,v.lang,function(w,k){if(w)return p(w);k!=null&&k!==v.text&&(v.text=k,v.escaped=!0),y--,y===0&&p()})},0))}),y===0&&p();return}if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(r):r).then(d=>t(d,i)).then(d=>i.walkTokens?Promise.all(Oe.walkTokens(d,i.walkTokens)).then(()=>d):d).then(d=>e(d,i)).then(d=>i.hooks?i.hooks.postprocess(d):d).catch(f);try{i.hooks&&(r=i.hooks.preprocess(r));let d=t(r,i);i.walkTokens&&Oe.walkTokens(d,i.walkTokens);let g=e(d,i);return i.hooks&&(g=i.hooks.postprocess(g)),g}catch(d){return f(d)}}}function Oe(t,e,r){return MC(Pr.lex,Ir.parse)(t,e,r)}Oe.options=Oe.setOptions=function(t){return Oe.defaults={...Oe.defaults,...t},kF(Oe.defaults),Oe};Oe.getDefaults=LC;Oe.defaults=Ui;Oe.use=function(...t){let e=Oe.defaults.extensions||{renderers:{},childTokens:{}};t.forEach(r=>{let i={...r};if(i.async=Oe.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if(s.renderer){let a=e.renderers[s.name];a?e.renderers[s.name]=function(...f){let d=s.renderer.apply(this,f);return d===!1&&(d=a.apply(this,f)),d}:e.renderers[s.name]=s.renderer}if(s.tokenizer){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");e[s.level]?e[s.level].unshift(s.tokenizer):e[s.level]=[s.tokenizer],s.start&&(s.level==="block"?e.startBlock?e.startBlock.push(s.start):e.startBlock=[s.start]:s.level==="inline"&&(e.startInline?e.startInline.push(s.start):e.startInline=[s.start]))}s.childTokens&&(e.childTokens[s.name]=s.childTokens)}),i.extensions=e),r.renderer){let s=Oe.defaults.renderer||new Xa;for(let a in r.renderer){let f=s[a];s[a]=(...d)=>{let g=r.renderer[a].apply(s,d);return g===!1&&(g=f.apply(s,d)),g}}i.renderer=s}if(r.tokenizer){let s=Oe.defaults.tokenizer||new Ja;for(let a in r.tokenizer){let f=s[a];s[a]=(...d)=>{let g=r.tokenizer[a].apply(s,d);return g===!1&&(g=f.apply(s,d)),g}}i.tokenizer=s}if(r.hooks){let s=Oe.defaults.hooks||new Vo;for(let a in r.hooks){let f=s[a];Vo.passThroughHooks.has(a)?s[a]=d=>{if(Oe.defaults.async)return Promise.resolve(r.hooks[a].call(s,d)).then(p=>f.call(s,p));let g=r.hooks[a].call(s,d);return f.call(s,g)}:s[a]=(...d)=>{let g=r.hooks[a].apply(s,d);return g===!1&&(g=f.apply(s,d)),g}}i.hooks=s}if(r.walkTokens){let s=Oe.defaults.walkTokens;i.walkTokens=function(a){let f=[];return f.push(r.walkTokens.call(this,a)),s&&(f=f.concat(s.call(this,a))),f}}Oe.setOptions(i)})};Oe.walkTokens=function(t,e){let r=[];for(let i of t)switch(r=r.concat(e.call(Oe,i)),i.type){case"table":{for(let s of i.header)r=r.concat(Oe.walkTokens(s.tokens,e));for(let s of i.rows)for(let a of s)r=r.concat(Oe.walkTokens(a.tokens,e));break}case"list":{r=r.concat(Oe.walkTokens(i.items,e));break}default:Oe.defaults.extensions&&Oe.defaults.extensions.childTokens&&Oe.defaults.extensions.childTokens[i.type]?Oe.defaults.extensions.childTokens[i.type].forEach(function(s){r=r.concat(Oe.walkTokens(i[s],e))}):i.tokens&&(r=r.concat(Oe.walkTokens(i.tokens,e)))}return r};Oe.parseInline=MC(Pr.lexInline,Ir.parseInline);Oe.Parser=Ir;Oe.parser=Ir.parse;Oe.Renderer=Xa;Oe.TextRenderer=Wc;Oe.Lexer=Pr;Oe.lexer=Pr.lex;Oe.Tokenizer=Ja;Oe.Slugger=Ko;Oe.Hooks=Vo;Oe.parse=Oe;var b$=Oe.options,w$=Oe.setOptions,x$=Oe.use,k$=Oe.walkTokens,C$=Oe.parseInline;var S$=Ir.parse,A$=Pr.lex;var $i=(t,e)=>({demo:`${t}:"Header \\"${t}\\""`,examples:[{title:"Variations",view:e.map(r=>`${r}:"Header \\"${r}\\""`)},{title:"Complex content",demo:{view:t,content:['text:"Text "','link:{ text: "Link" }']}},{title:"Using anchor",demo:[{view:t,anchor:"foo",content:'text:"Explicit value for an anchor"'},{view:t,anchor:!0,content:'text:"Auto generated anchor based on text content of header"'}]}]});function OC(t){let e=new Ko;function r(i,s,a,f){let{content:d,anchor:g=!1}=s;i.classList.add("view-header");let p=t.view.render(i,d||"text",a,f);return g&&p.then(()=>{let y=e.slug(g===!0?i.textContent:String(g),{dryrun:!0}),v=t.encodePageHash(t.pageId,t.pageRef,{...t.pageParams,"!anchor":y});i.prepend(X("a",{class:"view-header__anchor",id:`!anchor:${y}`,href:v}))}),p}t.view.define("header",r,{tag:"h4",usage:$i}),t.view.define("h1",r,{tag:"h1",usage:$i}),t.view.define("h2",r,{tag:"h2",usage:$i}),t.view.define("h3",r,{tag:"h3",usage:$i}),t.view.define("h4",r,{tag:"h4",usage:$i}),t.view.define("h5",r,{tag:"h5",usage:$i})}var PC={demo:{view:"html",data:'"<h1>I am inner HTML</h1>"'}};function IC(t){let e=document.createElement("div");t.view.define("html",function(r,i,s){e.innerHTML=s,r.append(...e.childNodes)},{tag:null,usage:PC})}var rp="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMjggMTI4Ij4KICAgIDxyZWN0IHg9IjY1LjYiIHk9IjI0LjYiIHRyYW5zZm9ybT0ibWF0cml4KDAuOTM5NyAtMC4zNDIgMC4zNDIgMC45Mzk3IC05Ljk0MjYgMzEuODI4KSIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjM5LjMiIGhlaWdodD0iMzkiPjwvcmVjdD4KICAgIDxyZWN0IHg9IjcwLjYiIHk9IjUyLjciIHRyYW5zZm9ybT0ibWF0cml4KC0wLjkzOTcgMC4zNDIgLTAuMzQyIC0wLjkzOTcgMTk0Ljc4NTIgODEuMTIwNCkiIGZpbGw9IiNDN0Q3RTIiIHdpZHRoPSIzOS4zIiBoZWlnaHQ9IjEwIj48L3JlY3Q+CiAgICA8cGF0aCBmaWxsPSIjOThCRUQ4IiBkPSJNMTExLjUsNTQuNmwtMS4xLDEuMUw5Ny4xLDE5LjFsMS41LDAuMmM4LDAuOSwxNC43LDYuMiwxNy40LDEzLjdsMCwwQzExOC44LDQwLjQsMTE3LDQ4LjgsMTExLjUsNTQuNnoiPjwvcGF0aD4KICAgIDxwYXRoIGZpbGw9IiM0NTRCNTQiIGQ9Ik03My41LDcyLjJjLTEuMiwwLTIuNC0wLjgtMi44LTJMNTcuMywzMy41Yy0wLjMtMC43LTAuMi0xLjYsMC4xLTIuM2MwLjMtMC43LDAuOS0xLjMsMS43LTEuNmwzNi45LTEzLjRjMS42LTAuNiwzLjMsMC4yLDMuOCwxLjhsMTMuMywzNi42YzAuMywwLjcsMC4yLDEuNi0wLjEsMi4zYy0wLjMsMC43LTAuOSwxLjMtMS43LDEuNkw3NC41LDcyQzc0LjIsNzIuMSw3My44LDcyLjIsNzMuNSw3Mi4yek02NCwzNC4zbDExLjMsMzFsMzEuMy0xMS40bC0xMS4zLTMxTDY0LDM0LjN6Ij48L3BhdGg+CiAgICA8cmVjdCB4PSIzNSIgeT0iNDYuNyIgdHJhbnNmb3JtPSJtYXRyaXgoMC45Mzk3IC0wLjM0MiAwLjM0MiAwLjkzOTcgLTE2LjIwMTEgMjAuOTg4KSIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjMyLjgiIGhlaWdodD0iMTkuNSI+PC9yZWN0PgogICAgPHJlY3QgeD0iMzcuMyIgeT0iNTkuOCIgdHJhbnNmb3JtPSJtYXRyaXgoLTAuOTM5NyAwLjM0MiAtMC4zNDIgLTAuOTM5NyAxMjUuNjc2MyAxMDMuMzk0NikiIGZpbGw9IiNDN0Q3RTIiIHdpZHRoPSIzMi44IiBoZWlnaHQ9IjYiPjwvcmVjdD4KICAgIDxwYXRoIGZpbGw9IiM0NTRCNTQiIGQ9Ik0zOS40LDc0LjJjLTAuNCwwLTAuOS0wLjEtMS4zLTAuM2MtMC43LTAuMy0xLjMtMC45LTEuNi0xLjdsLTYuNy0xOC4zYy0wLjMtMC43LTAuMi0xLjYsMC4xLTIuM2MwLjMtMC43LDAuOS0xLjMsMS43LTEuNmwzMC44LTExLjJjMC43LTAuMywxLjYtMC4yLDIuMywwLjFjMC43LDAuMywxLjMsMC45LDEuNiwxLjdMNzMsNTljMC42LDEuNi0wLjIsMy4zLTEuOCwzLjhMNDAuNCw3NEM0MCw3NC4xLDM5LjcsNzQuMiwzOS40LDc0LjJ6IE0zNi41LDU0LjdsNC42LDEyLjdsMjUuMi05LjJsLTQuNi0xMi43TDM2LjUsNTQuN3oiPjwvcGF0aD4KICAgIDxwYXRoIGZpbGw9IiM0NTRCNTQiIGQ9Ik03MCwxMTguOWMtMS4yLDAtMi40LTAuNy0yLjgtMS45bC0xNC0zNy4ybC04LjQsMy4xbC0xNy4yLDM0LjRjLTAuNywxLjUtMi41LDIuMS00LDEuM2MtMS41LTAuNy0yLjEtMi41LTEuMy00TDQwLDc5YzAuMy0wLjcsMC45LTEuMiwxLjctMS41TDU0LDczLjFjMS41LTAuNiwzLjMsMC4yLDMuOCwxLjhsMTUsNDBjMC42LDEuNi0wLjIsMy4zLTEuOCwzLjlDNzAuNywxMTguOCw3MC40LDExOC45LDcwLDExOC45eiI+PC9wYXRoPgogICAgPHBhdGggZmlsbD0iIzQ1NEI1NCIgZD0iTTEzLjYsODAuMWMtMS4yLDAtMi40LTAuOC0yLjgtMkw2LjMsNjUuOWMtMC42LTEuNiwwLjItMy4zLDEuOC0zLjhjMS42LTAuNiwzLjMsMC4yLDMuOCwxLjhsNC40LDEyLjJjMC42LDEuNi0wLjIsMy4zLTEuOCwzLjhDMTQuMyw4MC4xLDE0LDgwLjEsMTMuNiw4MC4xeiI+PC9wYXRoPgogICAgPHBhdGggZmlsbD0iIzQ1NEI1NCIgZD0iTTEzLjIsNzMuM2MtMS4yLDAtMi40LTAuOC0yLjgtMmMtMC42LTEuNiwwLjItMy4zLDEuOC0zLjhMMzUsNTkuMmMxLjYtMC42LDMuMywwLjIsMy44LDEuOGMwLjYsMS42LTAuMiwzLjMtMS44LDMuOGwtMjIuOCw4LjNDMTMuOSw3My4zLDEzLjYsNzMuMywxMy4yLDczLjN6Ij48L3BhdGg+Cjwvc3ZnPgo=",zC={demo:{view:"image",src:rp,height:100},examples:[{title:"Src is not defined",demo:"image"},{title:"Bad url",demo:'image{ src: "<bad url>" }'}]};function BC(t){t.view.define("image",function(e,r){Object.assign(e,r),e.onerror=()=>e.classList.add("error"),e.onload=()=>e.classList.add("loaded")},{tag:"img",usage:zC})}var RC={beforeDemo:['md:"The same as `image` view but with "'],demo:{view:"image-preview",src:rp,height:100},examples:[{title:"Src is not defined",demo:"image-preview"},{title:"Bad url",demo:'image-preview{ src: "<bad url>" }'}]};function qC(t){t.view.define("image-preview",function(e,r,i,s){this.render(e,{view:"image",...r},i,s)},{usage:RC})}var FC={demo:{view:"indicator",data:{label:"Label",value:"1234"}},examples:[{title:"Indicator as link",demo:{view:"indicator",data:{label:"Label",value:"4321",href:"#"}}}]};function _C(t){t.view.define("indicator",function(e,r,i,s){let{value:a,label:f}=r,{href:d}=i||{},g=document.createElement("div"),p=document.createElement("div");return g.className="value",p.className="label",d&&(e.href=d),Promise.all([t.view.render(g,a||"text:value",i,s),t.view.render(p,f||"text:label",i,s)]).then(()=>e.append(g,p))},{tag:"a",usage:FC})}var jC={demo:{view:"link",data:{text:"I am link",href:"#"}},examples:[{title:"Link opened in new tab",demo:{view:"link",data:{text:"Discovery github",href:"https://github.com/discoveryjs/discovery",external:!0}}}]};function HC(t){t.view.define("link",function(e,r,i,s){let{content:a,onClick:f}=r,{href:d,text:g,external:p}=i||{};if(typeof i=="string"&&(d=g=i),g===void 0&&d?g=d:d===void 0&&g&&(d=g),d&&(e.href=d),p&&e.setAttribute("target","_blank"),typeof f=="function"&&(e.classList.add("onclick"),e.addEventListener("click",y=>{y.preventDefault(),f(e,i,s)})),a)return t.view.render(e,a,i,s);e.textContent=g},{tag:"a",usage:jC})}var ip={demo:{view:"markdown",source:`# Markdown example

> NOTE: The \`markdown\` view is based on [marked](https://github.com/markedjs/marked) package

Markdown is good because:
* You'll get **formatted** *text* with _no tags_
* It's much simpler than \`HTML\`

\`\`\`html
<b>bold</b><i>italic</i>
\`\`\`
[Read more](https://guides.github.com/features/mastering-markdown/)`},examples:[{title:"Inline config",demo:'markdown{ source: "**Hello** `world`!" }'},{title:"Shorthand syntax",beforeDemo:['md:"You can use `md` as an alias for `markdown` with a string as data. That\'s a **shortest** definition for a marked text"'],demo:'md:"**Hello** `world`!"'},{title:"Array of strings as a source",beforeDemo:['md:"Array of strings might be passed as a value for `source` property which is useful for a long sources\\n> NOTE: This doesn\'t work a source passed via data"'],demo:{view:"markdown",source:["Array","of","`strings`"]}},{title:"Interpolation",beforeDemo:['md:"Interpolation can be used almost anywhere in a markdown to embed the result of a jora query into resulting HTML. Just place a jora query between `{{`{{`}}` and `{{`}`+`}`}}`:"'],demo:{view:"md",source:["Simple evaluation: 2 + 2 = `{{ 2 + 2 }}`","","Markdown view has {{ viewDef.examples.size() }} examples"]}},{title:"Disable anchors for headers",highlightProps:["anchors"],beforeDemo:"Hover a header to see a chain icon on the left side of header when anchors are enabled:",demo:[{view:"markdown",source:"## header with default settings"},{view:"markdown",anchors:!1,source:"## header with disabled anchor"}]},{title:"Sections prelude and postlude",highlightProps:["sectionPrelude","sectionPostlude"],demo:{view:"markdown",sectionPrelude:"struct",sectionPostlude:{view:"link",data:'{ href: "#top", text: "Scroll to top \u2191" }'},source:`Some text

## Header level 2

Some text

### Header level 3

Some text

## Header level 2

Some text`}},{title:"Additional action buttons for code blocks",highlightProps:["codeActionButtons"],beforeDemo:['md:"Use `codeActionButtons` to add additional buttons to code blocks. The option is the same as `actionButtons` for `source` view."'],demo:{view:"markdown",codeActionButtons:[{view:"button",content:'text:"Say \\"Hello world\\""',onClick:new Function('return () => alert("Hello world!")')()}],source:'```js\nconsole.log("Hello world")\n```'}},{title:"Configuration for code blocks",highlightProps:["codeConfig"],beforeDemo:['md:"Use `codeConfig` to specify any settings for code blocks available for `source` view."'],demo:{view:"markdown",codeConfig:{prelude:{view:"block",content:["badge:syntax",'text:"Length: " + content.size()']},postlude:"struct:{ data: $, context: # }"},source:`# Header 1

\`\`\`js
console.log("Hello world")
\`\`\`

## Header 2

text

## Header 3



\`\`\`jora
foo.bar.baz
\`\`\``}},{title:"Showcase",demo:{view:"markdown",source:`
# Header
## Header
### Header
#### Header
##### Header
* One
* Two
    * Three

4. Four
5. Five
    6. Six
- [{{ true }}] Task 1
- [x] Task 2

Interpolation in text: 2 + 2 = \`{{ 2 + 2 }}\`, or in attribute: [link](#dummy-link/{{"exam" + "ple"}} "{{ "example" + " title" }}")

Paragraph **bold** __bold__ *italic* _italic_ ~line-through~ \`code\` [link](#href)

>Blockquote
> > Line 2

\`\`\`js
var some = "code";
\`\`\`

foo | bar
----|-----
1 | A
2 | C
3 | E
`.trim().split(/\n/)}}]};var op=class extends Oe.Renderer{heading(e,r,i,s){let{discovery:a,anchors:f}=this.options,d=s.slug(i),g="";if(f){let p=a.encodePageHash(a.pageId,a.pageRef,{...a.pageParams,"!anchor":d});g=`<a class="view-header__anchor" id="!anchor:${St(d)}" href="${p}"></a>`}return`<h${r} class="view-header view-h${r}" data-slug="${d}">${g}${e}</h${r}>
`}link(e,r,i){if(e===null)return i;let s='<a class="view-link" href="'+St(e)+'"';return r&&(s+=' title="'+St(r)+'"'),e.startsWith("#")||(s+=' target="_blank"'),s+=">"+i+"</a>",s}checkbox(e){return'<label class="view-checkbox"><input type="checkbox" disabled'+(e?" checked":"")+"/></label> "}list(e,r,i){let s=r?"ol":"ul",a=r&&i!==1?` start="${i}"`:"";return`<${s} class="view-${s}"${a}>
`+e+`
</${s}>
`}listitem(e){return'<li class="view-list-item">'+e+`</li>
`}table(e,r){return`<table class="view-table">
<thead>
`+e.replace(/ class="view-table-row"/g,"")+`</thead>
`+(r?"<tbody>"+r+"</tbody>":"")+`</table>
`}tablerow(e){return`<tr class="view-table-row">
`+e+`</tr>
`}tablecell(e,r){let i=r.header?"th":"td";return`<${i} class="view-table-cell"${r.align?` align="${r.align}"`:""}>`+e+`</${i}>
`}};Oe.setOptions({smartLists:!0,langPrefix:"discovery-markdown-",renderer:new op});function WC(t){let e={discovery:t};function r(a,f){return a.replace(/{{(\d+)}}/gs,(d,g)=>f[g])}function i(a,f){for(let d of a.childNodes)switch(d.nodeType){case document.ELEMENT_NODE:if(!d.classList.contains("view-source")){i(d,f);for(let g of d.attributes)g.nodeValue=r(g.nodeValue,f)}break;case document.TEXT_NODE:d.nodeValue=r(d.nodeValue,f);break}}function s(a,f,d,g){let{source:p,anchors:y=!0,sectionPrelude:v,sectionPostlude:w,codeConfig:k}=f,T=new Map,L=typeof d=="string"?d:p||"";return Array.isArray(L)&&(L=L.join(`
`)),L=L.replace(/{{(.+?)}}/gs,(A,N)=>(N=N.trim(),T.has(N)||T.set(N,T.size),`{{${T.get(N)}}}`)),a.classList.add("view-markdown"),new Promise(A=>{Oe(L,{...e,anchors:y},(N,S)=>{let M=[];if(a.innerHTML=S,T.size>0){let I=new Array(T.size);for(let[_,U]of T.entries())try{I[U]=t.query(_,d,g)}catch(H){t.log("error","Interpolation query error in markdown:",H)}i(a,I)}let O=new Map,z={after:I=>a.prepend(I)};if(k||v||w){let{firstElementChild:I}=a,_={next:null,data:{sectionIdx:0,slug:null,text:null,href:null}};O.set(z,_);for(let U of[...a.querySelectorAll(":scope > :is(h1, h2, h3, h4, h5, h6)")]){U===I&&(O.delete(z),z=U,_=null);let H=U.querySelector(':scope > a[id^="!anchor:"]'),ce={next:null,data:{sectionIdx:O.size,slug:U.dataset.slug,text:U.textContent.trim(),href:H?.hash}};O.set(U,ce),_&&(_.next=U),_=ce}}for(let I of[...a.querySelectorAll("pre > code")]){let _=document.createDocumentFragment(),U=I.textContent.replace(/\n$/,""),H=(I.className.match(/discovery-markdown-(\S+)/)||[])[1],ce=O.get(z),$=I.parentNode;for(;$!==null&&$!==a;){if(O.has($)){ce=O.get($);break}$=$.previousSibling||$.parentNode}M.push(this.render(_,typeof k=="object"?{view:"source",...k}:k||"source",{syntax:H,content:U},{...g,section:ce?.data}).then(()=>I.parentNode.replaceWith(_)))}if(v||w){let I=(_,U,H)=>{let ce=document.createDocumentFragment();M.push(this.render(ce,_,d,{...g,section:U.data}).then(()=>H(ce)))};for(let[_,U]of O)v&&I(v,U,H=>_.after(H)),w&&I(w,U,H=>U.next?U.next.before(H):a.append(H))}Promise.all(M).then(A)})})}t.view.define("markdown",s,{usage:ip}),t.view.define("md",s,{usage:ip})}var SS=zn(gS(),1),er=zn(Jr(),1),m9=zn($h(),1),y9=zn(vS(),1),v9=zn(xS(),1);var fp={};Ce(fp,{equal:()=>Za});var{hasOwnProperty:Vc}=Object;function Za(t,e){if(t===e)return!0;for(let r in t)if(Vc.call(t,r)&&(!Vc.call(e,r)||t[r]!==e[r]))return!1;for(let r in e)if(Vc.call(e,r)&&(!Vc.call(t,r)||t[r]!==e[r]))return!1;return!0}var Kc=X("div",{style:["position: fixed","overflow: hidden","font-size: 1px","width: 1px","height: 1px","top: 0","left: 0","white-space: pre"].join(";")},["text"]);function QF(t){document.body.append(Kc);try{let e=window.getSelection(),r=document.createRange();Kc.firstChild.nodeValue=t,r.selectNodeContents(Kc),e.removeAllRanges(),e.addRange(r),document.execCommand("copy")}finally{Kc.remove()}}async function wn(t){try{if(navigator.clipboard){let e=await navigator.permissions.query({name:"clipboard-write"});if(e.state==="granted"||e.state==="prompt")return navigator.clipboard.writeText(t)}}catch{}QF(t)}var Vi='let name = "world";\n\nconsole.log(`Hello, ${name}!`);',JF=new Function("return num => num + 5")(),kS={demo:{view:"source",data:{syntax:"js",content:Vi}},examples:[{title:"Supported syntaxes",beforeDemo:['md:"Following values (for both `name` and `mime`) are supported for `syntax` option:"','html:"<br>"',{view:"table",data:"#.options.syntaxes",cols:{name:{content:"comma-list:name"},mime:{content:"comma-list:mime"}}},'html:"<br>"',"md:\"More syntaxes may be added via `import 'codemirror/mode/[name]/[name]';`\""],source:!1},{title:"Custom line numbers",highlightProps:["lineNum"],demo:{view:"source",data:{content:Vi,syntax:"js",lineNum:JF}}},{title:"Hide line numbers",highlightProps:["lineNum"],beforeDemo:['md:"Pass falsy value to `lineNum` option to hide line numbers:"'],demo:{view:"source",data:{content:Vi,syntax:"js",lineNum:!1}}},{title:"Additional action buttons",highlightProps:["actionButtons"],demo:{view:"source",actionButtons:[{view:"button",content:'text:"Say \\"Hello world\\""',onClick:new Function('return () => alert("Hello world!")')()}],data:{content:Vi,syntax:"js"}}},{title:"Prelude and postlude slots",highlightProps:["prelude","postlude"],demo:{view:"source",prelude:['text:"Prelude:"',"struct:{ data: $, context: # }"],postlude:['text:"Postlude:"',"struct:{ data: $, context: # }"],data:{content:Vi,syntax:"js"}}},{title:"Highlight ranges",highlightProps:["refs"],demo:{view:"source",data:{syntax:"js",content:Vi,refs:[{range:[4,8]},{range:[21,28],type:"link",href:"#example",tooltip:{position:"trigger",content:['text:"Link to "',"text:href"]}}]}}},{title:"Max content size for syntax highlight",highlightProps:["maxSourceSizeToHighlight"],beforeDemo:['md:"By default a syntax highlighing is not appling to a source longer than 250Kb. Option `maxSourceSizeToHighlight` is using to change max size of source to be syntax highlighted."'],demo:{view:"source",data:{content:Vi,syntax:"js",maxSourceSizeToHighlight:4}}}]};var XF=250*1024;er.default.modeToMime={js:"application/javascript",ts:"application/typescript",typescript:"application/typescript",json:"application/json",html:"text/html",css:"text/css",scss:"text/x-scss",less:"text/x-less"};function ZF(){let t=new Set,e=new Map,r=i=>{let s=er.default.resolveMode(i),a=[...e.keys()].find(f=>Za(f,s));return a||(e.set(s,{name:new Set,mime:new Set}),s)};for(let[i,s]of Object.entries(er.default.modeToMime)){let a=e.get(r(s));a.mime.add(s),a.name.add(i),t.add(i)}for(let[i,s]of Object.entries(er.default.mimeModes)){let a=e.get(r(i));a.mime.add(i),typeof s=="string"&&(a.name.add(s),t.add(s))}for(let[i]of Object.entries(er.default.modes))if(!t.has(i)){let s=er.default.modes[i];e.has(s)||e.set(s,{name:new Set,mime:[]}),e.get(s).name.add(i)}return[...e.values()].map(i=>({name:[...i.name],mime:[...i.mime]}))}function e_(t,e){let r=er.default.getMode(er.default.defaults,{name:er.default.modeToMime[t]||t,isDiscoveryViewDefined:i=>e.view.isDefined(i)});return(i,s)=>{let a=er.default.startState(r),f=i.split(/(\n|\r\n?)/),d=0;for(let g=0;g<f.length;g++){if(g%2===0){let p=new er.default.StringStream(f[g],4,{lookAhead:y=>f[g+y],baseToken:function(){}});for(;!p.eol();){let y=r.token(p,a);y&&s(d+p.start,d+p.pos,y),p.start=p.pos}}d+=f[g].length}}}function t_(t,e){let r=t&&t.className,i=[e,Array.isArray(r)?r.join(" "):typeof r=="string"?r:!1].filter(Boolean).join(" ");return i?` class="${i}"`:""}function CS(t){return`${t_(t,"spotlight")}${t.marker?` data-marker="${t.marker}"`:""}${typeof t.tooltipId=="number"?` data-tooltip-id="${t.tooltipId}"`:""}`}var n_={html:{open({data:t}){switch(t.type){case"link":return`<a href="${t.href}"${CS(t)}>`;case"spotlight":return`<span${CS(t)}>`}},close({data:t}){switch(t.type){case"link":return"</a>";case"spotlight":return"</span>"}}}};function AS(t){t.view.define("source",function(e,r,i,s){let a=e.appendChild(X("div","view-source__prelude")),f=e.appendChild(X("div","view-source__content")),d=e.appendChild(X("div","view-source__postlude")),g=new Map,p=[],{mime:y,binary:v,size:w,maxSourceSizeToHighlight:k=XF,syntax:T,lineNum:L=!0,content:A,refs:N}=i;if(typeof A=="string")if(A.length<k&&p.push([e_(T||y,t),{html:{open({data:S}){return'<span class="token '+S+'">'},close(){return"</span>"}}}]),Array.isArray(N)&&p.push([(S,M)=>N.forEach(O=>{if(O.range){let z;O.tooltip&&g.set(z=g.size,O),M(O.range[0],O.range[1],{type:"spotlight",...O,tooltipId:z})}}),n_]),v)f.innerHTML="Binary content"+(typeof w=="number"?" ("+w+" bytes)":"");else{let S=typeof L=="function"?L:z=>z+1,M=L?'<div class="view-source__lines">'+A.split(/\r\n?|\n/g).map((z,I)=>"<span>"+S(I)+"</span>").join("")+"</div>":"";f.innerHTML=M+`<div class="view-source__source">${(0,SS.default)(p,"html")(A)}</div>`;let O=X("div","view-source__action-buttons");t.view.render(O,[r.actionButtons,{view:"button",className:"copy",async onClick(z){clearTimeout(z.copiedTimer),await wn(A),z.classList.add("copied"),z.copiedTimer=setTimeout(()=>z.classList.remove("copied"),1250)}}],i,s),f.prepend(O);for(let z of f.querySelectorAll(":scope [data-tooltip-id]")){let I=g.get(Number(z.dataset.tooltipId));delete z.dataset.tooltipId,this.tooltip(z,I.tooltip,I,s)}r.prelude&&t.view.render(a,r.prelude,i,s),r.postlude&&t.view.render(d,r.postlude,i,s)}},{usage:kS,tag:"pre",get syntaxes(){return ZF()}})}var TS={demo:{view:"text",data:'"Hello world!"'},examples:[{title:"Shorthand usage",view:'text:"Hello world!"'}]};function LS(t){t.view.define("text",function(e,r,i){e.appendChild(document.createTextNode(String(i)))},{tag:!1,usage:TS})}var hp={};Ce(hp,{has:()=>r_,matchAll:()=>dp});var{toString:NS}=Object.prototype,ES=(t,e,r)=>{let i=t.slice(r).search(e);return i!==-1?{offset:r+i,length:RegExp.lastMatch.length}:null},DS=(t,e,r)=>{let i=t.indexOf(e,r);return i!==-1?{offset:i,length:e.length}:null};function r_(t,e,r){return NS.call(e)==="[object RegExp]"?r&&!e.ignoreCase?new RegExp(e,e.flags+"i").test(t):e.test(t):typeof e=="string"?r?String(t).toLowerCase().indexOf(e.toLowerCase()):String(t).indexOf(e)!==-1:!1}function dp(t,e,r,i,s){let a=NS.call(e)==="[object RegExp]"?ES:typeof e=="string"?DS:null,f=String(t);if(s)switch(a){case ES:e.ignoreCase||(e=new RegExp(e,e.flags+"i"));break;case DS:f=f.toLowerCase(),e=e.toLowerCase();break}if(a===null){r(t);return}let d=0;do{let g=a(f,e,d);if(g===null||g.length===0&&g.offset===d){r(d>0?t.slice(d):t);break}g.length!==0&&(g.offset!==d&&r(t.slice(d,g.offset)),i(t.substr(g.offset,g.length))),d=g.offset+g.length}while(d!==t.length)}var MS={demo:{view:"text-match",data:{text:"I am matched text or a text with matches!",match:/match/}},examples:[{title:"Raw string as match",demo:{view:"text-match",data:{text:"I am matched text or a text with matches!",match:"match"}}},{title:"Using with a link",demo:{view:"link",data:{href:"#"},content:'text-match:{ text: "Test link", match: /\\w+/i }'}},{title:"Various configurations",demo:{view:"table",cols:[{header:"text-match",content:"text-match"},{header:"Config",content:"struct"}],data:[null,{},{},{match:"test"},{match:"Test"},{match:"test",ignoreCase:!0},{match:"Test",ignoreCase:!0},{match:/test/},{match:/test/g},{match:/test/i},{match:/test/,ignoreCase:!0},{match:/test/g,ignoreCase:!0}].map((t,e)=>e>1?{text:"test Test",...t}:t)}}]};var i_=X("span","view-text-match");function OS(t){t.view.define("text-match",function(e,r,i){let{text:s,match:a,ignoreCase:f=!1}=i||{};dp(String(s),a,d=>e.appendChild(bn(d)),d=>e.appendChild(i_.cloneNode()).appendChild(bn(d)),f)},{tag:!1,usage:MS})}var PS={demo:{view:"text-numeric",data:'"Like a `text` view but adds a thousands separator to integer part of numbers, e.g. 12345678 or 12345.67890"'},examples:[{title:"Shorthand usage",view:"text-numeric:1234567"}]};function IS(t){t.view.define("text-numeric",function(e,r,i){e.innerHTML=_n(i)},{tag:"span",usage:PS})}var zS={demo:{view:"context",data:{name:"text",demo:123},content:["text:name","table"]},examples:[{title:"Using with modifiers",demo:{view:"context",modifiers:['h2:"Modifiers"',{view:"input",name:"inputValue"},{view:"select",name:"selectValue",data:["foo","bar","baz"]}],content:['h2:"Values"',"struct:#"]}}]};function BS(t){t.view.define("context",function(e,r,i,s){function a(){let S=p.previousSibling;for(;S&&S!==g;)S=S.previousSibling,S.nextSibling.remove();let M=y=document.createDocumentFragment();return t.view.render(M,k,i,d).then(()=>{M===y&&(t.view.adoptFragment(M,g),g.after(M))})}function f(S,M){M&&(!hasOwnProperty.call(d,M)||d[M]!==S)&&(d={...d,[M]:S},v?(a(),T&&typeof A=="function"&&A(S,M)):typeof L=="function"&&L(S,M))}let d=s,g=null,p=null,y=null,v=!1,{modifiers:w=[],content:k=[]}=r,{proxy:T,onInit:L,onChange:A}=r;Array.isArray(w)||(w=[w]);let N=t.view.render(e,this.composeConfig(w,{onInit:f,onChange:f}),i,s);return g=e.appendChild(document.createComment('{ view: "context" } content start')),p=e.appendChild(document.createComment('{ view: "context" } content end')),T&&(L||A)&&(k=this.composeConfig(k,{onInit:L,onChange:A})),N.then(()=>(v=!0,a()))},{tag:!1,usage:zS})}var RS={demo:{view:"switch",data:{enabled:!0},content:[{when:"not enabled",content:'text:"I am disabled"'},{when:"enabled",content:'text:"I am enabled"'}]},examples:[{title:"Using with tabs",demo:{view:"context",modifiers:{view:"tabs",tabs:["foo","bar","baz"],name:"section"},content:{view:"switch",content:[{when:'#.section="foo"',content:'text:"FOO!"'},{when:'#.section="bar"',content:'text:"BAR!!"'},{content:'text:"When no other conditions are met"'}]}}}]};function qS(t){t.view.define("switch",function(e,r,i,s){let{content:a}=r,f='alert-warning:"No case choosen"';if(Array.isArray(a))for(let d=0;d<a.length;d++){let g=a[d];if(g&&t.queryBool(g.when||!0,i,s)){f="data"in g?{view:"context",data:g.data,content:g.content}:g.content;break}}return t.view.render(e,f,i,s)},{tag:!1,usage:RS})}function pp(t,e,r){for(let i in t){if(!hasOwnProperty.call(t,i))continue;if(!e){r.properties=null;break}let s;r.dictMode?(s=r.dictMode,s.count++,s.keys.add(i)):r.properties.has(i)?(s=r.properties.get(i),s.count++):(s={count:1,map:Object.create(null)},r.properties.set(i,s)),el(t[i],e-1,s.map)}}function el(t,e,r=Object.create(null)){let i=t===null?"null":Array.isArray(t)?"array":typeof t;switch(i){default:i in r||(r[i]=new Map),r[i].set(t,(r[i].get(t)||0)+1);break;case"object":"object"in r||(r.object=new Map,r.object.count=0,r.object.properties=new Map,r.object.dictMode=null,r.object.sortKeys=!1),r.object.count++,r.object.has(t)?r.object.set(t,r.object.get(t)+1):(r.object.set(t,1),pp(t,e,r.object));break;case"array":"array"in r||(r.array=new Map,r.array.count=0,r.array.map=Object.create(null)),r.array.count++,r.array.set(t,(r.array.get(t)||0)+1);for(let s=0;s<t.length;s++)el(t[s],e,r.array.map);break}return r}var Yc=["rgba(83,211,75,0.75)","rgba(241,235,44,0.75)","rgba(244,152,99,0.75)","rgba(148,99,244,0.75)","rgba(44,132,241,0.75)","rgba(233,117,117,0.75)","rgba(85,187,155,0.75)","rgba(151,147,99,0.75)","rgba(216,107,196,0.75)","rgba(108,204,227,0.75)","rgba(164,164,164,0.75)"],tl=["null","undefined","string","number","bigint","boolean","symbol","function","array","object"];function nl(t,e,r,i=[],s=""){Object.keys(e).sort((a,f)=>tl.indexOf(a)-tl.indexOf(f)).forEach((a,f)=>{switch(f>0&&t.appendChild(bn(" | ")),a){default:{let d=t.appendChild(X("span","type",a));r.set(d,{type:"type",path:i,stat:e,name:a});break}case"object":{let d=e[a],{properties:g,dictMode:p,sortKeys:y}=d;if(g===null){r.set(t.appendChild(X("span","expand","{\u2026}")),{type:"expand",path:i,map:e[a],offset:s});break}if(g.size===0){t.appendChild(X("span","object","{}"));break}let v=d.size,w=p?[["[key]",p]]:[...g.entries()],k=s+"    ",T=t.appendChild(X("span","object",["{",X("span",{"data-action":"collapse"})]));g.size>1&&(T.appendChild(X("span",{title:"Toggle dictionary mode (collapse all the values in a single signature)","data-action":"dict-mode","data-enabled":p!==null})),w.some(([L],A)=>A!==0&&L<w[A-1][0])&&T.appendChild(X("span",{title:"Toggle keys sorting","data-action":"sort-keys","data-enabled":y}))),r.set(T,{type:"shape",path:i,map:e[a],offset:s}),v>1&&(T.appendChild(X("span","count")).dataset.value=String(v)),y&&w.sort(([L],[A])=>L<A?-1:L>A?1:0);for(let[L,{count:A,map:N}]of w){let S=X("span","property",[L]);r.set(S,{type:"property",path:i,stat:e,name:L,map:N}),T.appendChild(bn(`
${k}`)),T.appendChild(S),A!==v&&p===null&&S.appendChild(X("span","optional","?")),T.appendChild(bn(": ")),nl(T,N,r,i.concat(p?"*":L),k),T.appendChild(bn(";"))}T.lastChild.nodeValue===";"&&T.appendChild(bn(`
${s}`)),T.appendChild(bn("}"));break}case"array":t.appendChild(bn("[")),nl(t,e[a].map,r,i,s),t.appendChild(bn("]"));break}})}function Yo(t,e){return t.toFixed(e).replace(/\.?0+$/,"")}function FS(t){let e=Math.cos(2*Math.PI*t),r=Math.sin(2*Math.PI*t);return[e,r]}function _S(t){let e=0;return['<svg viewBox="-1 -1 2 2" class="pie">',...t.map(r=>{let[i,s]=FS(e),[a,f]=FS(e+=r.percent),d=r.percent>.5?1:0;return`<path d="${[`M ${i} ${s}`,`A 1 1 0 ${d} 1 ${a} ${f}`,"L 0 0"].join(" ")}" fill="${r.color}"/>`}),"</svg>"].join(`
`)}function o_(t){let e=0;for(let r in t)t[r].forEach(i=>e+=i);return e}function s_(t){let e=Object.create(null);for(let r in t)e[r]=0,t[r].forEach(i=>e[r]+=i);return e}function jS(t,e,r){let{count:i,map:s}=e.stat.object.dictMode||e.stat.object.properties.get(e.name),a=(e.stat.object.dictMode||e.stat.object).count,f={name:e.name,path:e.path,total:a,count:i,percent:Yo(100*i/a,1)+"%"};r.view.render(t,[{view:"block",when:"path",className:"path",data:d=>r.pathToQuery(d.path),content:"text:$"},{view:"h1",className:"property",content:["text:name",{view:"html",when:"count != total",data:`"<span class=\\"usage-stat optional\\">" + (
                        "(in <span class=\\"num\\">" + count + "</span> of <span class=\\"num\\">" + total + "</span> objects, <span class=\\"num\\">" + percent + "</span>)"
                    ) + "</span>"`}]}],f),HS(t,{map:s,count:i},r)}function HS(t,{map:e,count:r},i){let s=s_(e),a=[],f=tl.filter(d=>d in e);Object.entries(s).sort(([,d],[,g])=>d-g).reverse().forEach(([d,g],p)=>{a.push({name:St(d),count:g,percent:g/r,percent100:Yo(100*g/r,1),color:Yc[p]})}),i.view.render(t,{view:"block",when:"typeStat.size() > 1",data:"typeStat",className:"pie-stat",content:[{view:"block",content:{view:"html",data:_S}},{view:"block",content:['html:"<span class=\\"list-header\\">Types usage:</span>"',{view:"list",item:`html:
                            "<span class=\\"dot\\" style=\\"--size: 10px; background-color: " + color + "\\"></span> " +
                            "<span class=\\"caption\\">" + name + "</span>" +
                            "<span class=\\"times\\"> \xD7 " + count + " (" + percent100 + "%)</span>"
                        `}]}]},a),f.forEach(d=>gp(t,{name:d,stat:e},i))}function gp(t,e,r){let i=e.stat[e.name],s=o_(e.stat),a=[],f;switch(e.name){case"number":{let d=[],g=0,p=0,y=0,v=1/0,w=-1/0;i.forEach((k,T)=>{d.push({count:k,value:T}),g+=T*k,p+=k,k>1&&y++,T<v&&(v=T),T>w&&(w=T)}),f={type:e.name,count:p,distinct:i.size,duplicated:y,min:v,max:w,sum:g,avg:Yo(g/p,3),values:d.sort((k,T)=>T.count-k.count||k.value-T.value)},f.distinct>1&&a.push({view:"block",className:"overview-stat",content:`html:
                        "range: (min) <span class=\\"num\\">" + min + "</span> ... " +
                        "<span class=\\"num\\">" + max + "</span> (max), " +
                        "avg: <span class=\\"num\\">" + avg + "</span>"
                    `});break}default:{let d=[],g=0,p=0;i.forEach((y,v)=>{d.push({count:y,value:v}),g+=y,y>1&&p++}),f={type:e.name,count:g,distinct:i.size,duplicated:p,values:e.name==="object"||e.name==="array"?d.sort((y,v)=>v.count-y.count):d.sort((y,v)=>v.count-y.count||y.value>v.value||-(y.value<v.value))};break}}if(e.name!=="undefined"&&e.name!=="null"){if(a.unshift({view:"block",className:"overview-stat",content:['html:"<span class=\\"num\\">" + count + "</span> " + (count > 1 ? "values, " : "value")',{view:"switch",when:"count > 1",content:[{when:"distinct = 1",content:'text:"a single unique value:"'},{when:"distinct = count",content:'text:"all unique, no duplicates"'},{content:['html:"<span class=\\"num\\">" + distinct + "</span> unique, "','html:duplicated = distinct ? "all occur more than once" : "<span class=\\"num\\">" + duplicated + "</span> occur more than once"']}]}]}),f.values.length>1&&f.duplicated&&e.name!=="object"&&e.name!=="array"){let d=[],g=f.values.length===10?10:Math.min(9,f.values.length),p=0;for(let y=0;y<g;y++){let{count:v,value:w}=f.values[y];p+=v,d.push({name:St(String(w)),count:v,percent:v/f.count,percent100:Yo(100*v/f.count,1),color:Yc[y]})}if(d.length){let y=f.count-p;y>0&&d.push({name:"...",count:y,percent:y/f.count,percent100:Yo(100*y/f.count,1),color:Yc[d.length]}),a.push({view:"block",className:"pie-stat",data:d,content:[{view:"block",content:{view:"html",data:_S}},{view:"block",content:['html:"<span class=\\"list-header\\">Dominators:</span>"',{view:"list",item:`html:
                                        "<span class=\\"dot\\" style=\\"--size: 10px; background-color: " + color + "\\"></span> " +
                                        "<span class=\\"caption\\" title=\\"" + name + "\\">" + name + "</span>" +
                                        "<span class=\\"times\\"> \xD7 " + count + " (" + percent100 + "%)</span>"
                                    `}]}]})}}f.values.length>1?(e.name==="number"||e.name==="string")&&a.push({view:"content-filter",name:"filter",content:{view:"menu",data:"values.[no #.filter or value~=#.filter].sort(<value>)",item:[{view:"block",className:"caption",content:"text-match:{ text: value, match: #.filter }"},{view:"block",when:"count > 1",className:"count",content:'text:" \xD7 " + count'}]}}):(e.name==="number"||e.name==="string"||e.name==="boolean")&&a.push({view:"struct",data:"values.pick().value"}),e.name==="object"&&a.push({view:"list",className:"struct-list",data:"values",item:["struct:value",{view:"block",when:"count > 1",className:"count",content:'text:" \xD7 " + count'}]}),e.name==="array"&&Object.keys(i.map).length&&a.push({view:"block",className:"array-types",content:d=>HS(d,i,r)})}r.view.render(t,[{view:"block",when:"path",className:"path",data:d=>r.pathToQuery(d.path),content:"text"},{view:"h1",className:"type",content:["text:name",`html:"<span class=\\"usage-stat\\">" + (
                    count = total
                        ? "only this type is used"
                        : "used in <span class=\\"num\\">" + count + "</span> of <span class=\\"num\\">" + total + "</span> cases (<span class=\\"num\\">" + percent + "</span>)"
                ) + "</span>"`]},...a],{...f,name:e.name,path:e.path,total:s,percent:Yo(100*f.count/s,1)+"%"},{})}var WS={beforeDemo:['md:"The `signature` view is used to output a type definition for current data using TypeScript like style:"'],demo:{view:"signature",expanded:!0}};function US(t){let e=new WeakMap,r=({target:i})=>{let s="expand",a=i.closest(`
            .view-signature .expand,
            .view-signature [data-action]
        `);if(!a)return;a.dataset.action&&(s=a.dataset.action,a=a.parentNode);let f=e.get(a);if(f){let{path:d,map:g,offset:p}=f,y=document.createDocumentFragment();switch(s){case"sort-keys":g.sortKeys=!g.sortKeys;break;case"dict-mode":if(g.dictMode)g.dictMode=null;else{let v=g.dictMode={keys:new Set,count:0,map:Object.create(null)};g.forEach((w,k)=>{for(let T in k)hasOwnProperty.call(k,T)&&(v.keys.add(T),v.count++,el(k[T],1,v.map))})}break;default:g.properties===null?(g.properties=new Map,g.forEach((v,w)=>pp(w,1,g))):g.properties=null}nl(y,{object:g},e,d,p),a.replaceWith(y)}};t.addHostElEventListener("click",r,!1),new t.view.Popup({className:"signature-details",hoverPin:"trigger-click",hoverTriggers:`
            .view-signature .property,
            .view-signature .type
        `,render:function(i,s){let a=e.get(s);switch(a.type){case"property":return jS(i,a,t);case"type":return gp(i,a,t)}}}),t.view.define("signature",function(i,s,a){let{expanded:f,path:d}=s,g=el(a,f),p=Array.isArray(d)?d:void 0;nl(i,g,e,p)},{usage:WS})}var $S=(t,e,r,i,s,a,f)=>({target:d})=>{let g="expand",p=d.closest(`
        .view-struct.struct-expand,
        .view-struct .struct-expand-value,
        .view-struct .struct-action-button
    `);if(p)switch(p.dataset.action&&(g=p.dataset.action),g){case"expand":p.classList.contains("struct-expand")&&(p=p.lastChild),t(p,0),r(),p.parentNode.classList.add("struct-expanded-value"),s.has(p.parentNode)&&p.parentNode.classList.remove("struct-expand");break;case"collapse":p=p.parentNode,e(p),r(),p.parentNode.classList.remove("struct-expanded-value"),p.classList.remove("view-as-table"),s.has(p.parentNode)&&p.parentNode.classList.add("struct-expand");break;case"show-signature":f.show(p);break;case"value-actions":a.show(p);break;case"toggle-sort-keys":t(p.parentNode,0,p.parentNode.classList.toggle("sort-keys")),r();break;case"toggle-string-mode":p=p.parentNode;let y=p.querySelector(".string-text").firstChild;y.nodeValue=p.classList.toggle("string-value-as-text")?JSON.parse(`"${y.nodeValue}"`):JSON.stringify(y.nodeValue).slice(1,-1);break;case"toggle-view-as-table":if(p=p.parentNode,p.classList.toggle("view-as-table"))i(p);else{let w=p.querySelector(":scope > .view-table");w&&w.remove()}break}};var wp={};Ce(wp,{jsonStringifyAsJavaScript:()=>wi,jsonStringifyInfo:()=>Qc});var c1=zn(a1(),1),{stringifyInfo:Qc}=c1.default;function B_(t,e,r){let i=String(t),[s,a]=i.match(/^(?:\S+\s+)?(\S+)\(/)||[];if(s!=="function"&&s!=="function*"&&a===r.trim().slice(0,-1)&&(r=""),i.indexOf(`
`)===-1)return r+i;let f=i.split(/\n/),d=f[f.length-1].match(/^\s*/)[0].length,g=new RegExp("^\\s{0,"+d+"}");return r+f.map((p,y)=>y&&p.length?p.replace(g,e):p).join(`
`)}function R_(t,e,r){return typeof t=="function"?B_(t,e,r):t instanceof Date?`${r}new Date("${t.toISOString()}")`:r+String(t)}var{toString:l1}=Object.prototype,q_=new Set(["[object Function]","[object RegExp]","[object Date]"]);function wi(t,e,r=4){let i=[];return String(JSON.stringify(t,e||function(a,f){return typeof f=="string"&&l1.call(this[a])==="[object Date]"&&(f=this[a]),f!==null&&q_.has(l1.call(f))?(i.push(f),"{{{__placeholder__}}}"):f},r)).replace(/"((?:\\.|[^"])*)"(:?)/g,(a,f,d)=>d&&/^[a-z$_][a-z$_\d]*$/i.test(f)?f+d:`'${f.replace(/\\"/g,'"').replace(/'/g,"\\'")}'`+d).replace(/(^|\n)([ \t]*)(.*?)([a-zA-Z$_][a-zA-Z0-9$_]+:\s*)?'{{{__placeholder__}}}'/g,(a,f,d,g,p)=>f+d+g+R_(i.shift(),d,p))}function u1(t){return t?", "+_n(t)+" bytes":""}function f1(t,e,r){return new t.view.Popup({className:"view-struct-actions-popup",render:(i,s,a)=>{let f=s.parentNode,d=e.get(f),g=[];if(typeof d=="string")g=[{text:"Copy as quoted string",action:()=>wn(JSON.stringify(d))},{text:"Copy as unquoted string",action:()=>wn(JSON.stringify(d).slice(1,-1))},{text:"Copy a value (unescaped)",action:()=>wn(d)}];else{let p=t.pathToQuery(r(f)),y=1024*1024*1024,v=!1,w=!1,k=0,T=0;try{let{minLength:L,circular:A}=Qc(d);k=L,A.length?w="Converting circular structure to JSON":k>y?w="Resulting JSON is over 1 Gb":(T=Qc(d,null,4).minLength,T>y&&(v="Resulting JSON is over 1 Gb"))}catch(L){w=/Maximum call stack size|too much recursion/i.test(L.message)?"Too much nested structure":L.message}w&&(w="Can't be copied: "+w,v||(v=w)),p&&g.push({text:"Copy path:",notes:St(p),action:()=>wn(p)}),g.push({text:"Copy as JSON",notes:`(formatted${u1(T)})`,error:v,disabled:!!v,action:()=>wn(JSON.stringify(d,null,4))}),g.push({text:"Copy as JSON",notes:`(compact${w?"":u1(k)})`,error:w,disabled:!!w,action:()=>wn(JSON.stringify(d))})}t.view.render(i,{view:"menu",onClick(p){a(),p.action()},item:["html:text",{view:"block",when:"notes",className:"notes",content:"html:notes"},{view:"block",when:"error",className:"error",content:"text:error"}]},g)}})}var F_=/^(?:https?:)?\/\/(?:[a-z0-9\-]+(?:\.[a-z0-9\-]+)+|\d+(?:\.\d+){3})(?:\:\d+)?(?:\/\S*?)?$/i;function Xr(t,e){return`<span class="${t}">${e}</span>`}function xp(t){return Xr("more",`\u2026${_n(t)} more\u2026`)}function Qo(t,e,r){switch(typeof t){case"boolean":case"undefined":return Xr("keyword",t);case"number":case"bigint":return Xr("number",_n(t));case"symbol":return Xr("symbol",String(t));case"function":return"\u0192n";case"string":{let i=e?r.maxCompactStringLength:r.maxStringLength,s=t.length>i+r.allowedExcessStringLength,a=s?St(JSON.stringify(t.slice(0,i)).slice(1,-1)):St(JSON.stringify(t).slice(1,-1)),f=s?xp(t.length-i):"";return Xr("string",!e&&(t[0]==="h"||t[0]==="/")&&F_.test(t)?`"<a href="${St(t)}" target="_blank">${a}</a>${f}"`:`"${a}${f}"`)}case"object":{if(t===null)return Xr("keyword","null");switch(toString.call(t)){case"[object Array]":{let f=r.limitCollapsed===!1?t.length:r.limitCollapsed,d=t.slice(0,f).map(g=>Qo(g,!0,r));return t.length>f&&d.push(`${xp(t.length-f)} `),`[${d.join(", ")}]`}case"[object Date]":return Xr("date",t);case"[object RegExp]":return Xr("regexp",t)}if(e&&r.limitCompactObjectEntries===0){for(let f in t)if(hasOwnProperty.call(t,f))return"{\u2026}";return"{}"}let i=e?r.limitCompactObjectEntries===!1?1/0:r.limitCompactObjectEntries:r.limitCollapsed===!1?1/0:r.limitCollapsed,s=[],a=0;for(let f in t)if(hasOwnProperty.call(t,f)){if(a<i){let d=St(f.length>r.maxCompactPropertyLength?f.slice(0,r.maxCompactPropertyLength)+"\u2026":f);s.push(`${Xr("property",d)}: ${Qo(t[f],!0,r)}`)}a++}return a>i&&s.push(xp(a-i)),s.length?`{ ${s.join(", ")} }`:"{}"}default:return`unknown type "${typeof t}"`}}var __=["none","default","badge"];function kp(t){let e=Date.now()+8,r=0;for(;r<t.length&&!(Date.now()>e);r++){let{el:i,config:s,renderer:a,data:f,context:d}=t[r],{place:g="after",className:p,text:y=typeof s!="object"?String(s):"",icon:v,href:w,external:k,tooltip:T}=s,L=__.includes(s.style)?s.style:g==="before"?"none":"default",A=y!=="",N=["value-annotation","style-"+L,g==="before"?"before":"after",A?"has-text":"",p||""].join(" "),S=X(w?"a":"span",{class:N,href:w,target:k?"_blank":void 0},A?[y]:void 0);v&&(S.classList.add("icon"),/^[a-z_$][a-z0-9_$-]*$/i.test(v)?S.classList.add("icon-"+v):S.style.setProperty("--annotation-image",`url("${v}")`)),T&&a.tooltip(S,T,f,{...d,config:s}),g==="before"?i.before(S):i.parentNode.append(S)}t.splice(0,r)}var d1={level_1:{level_2_1:{level_3_1:{level_4_1:{}},level_3_2:2,level_3_3:3,level_3_4:4,level_3_5:5,level_3_6:6},level_2_2:[{foo:1,bar:2},{foo:3}],level_2_3:3,level_2_4:4,level_2_5:5,level_2_6:6},level_1_2:2,level_1_3:3,level_1_4:4,level_1_5:5,level_1_6:6,level_1_7:7},h1={beforeDemo:['md:"View to display the structure of any value. This is the simplest yet powerful way to enable data exploration."'],demo:{view:"struct",data:{foo:"bar",baz:[1,2,3]}},examples:[{title:"Default expanded depth",highlightProps:["expanded"],beforeDemo:['md:"By default `struct` view is collapsed in one line. The `expanded` option is using to specify an initial expanded depth. A value for the option can be a boolean (`false` \u2192 `0`, `true` \u2192 `1`) or a positive number."'],demoData:d1,demo:['badge:"Default (expanded option is not used)"',{view:"struct"},'badge:"expanded = true"',{view:"struct",expanded:!0},'badge:"expanded = 2"',{view:"struct",expanded:2}]},{title:"Annotations",highlightProps:["annotations"],beforeDemo:[{view:"md",source:["Clarity of data can be improved by adding annotations. An annotation is special marker before or after a value which displaying for expanded objects and arrays only.","Any number of annotations can be applied to a single value.","","Annotations are adding with `annotations` option which should contain an array of strings (jora queries) and functions to compute an annotation config. An annotation config is an object with following fields:","```ts","type AnnotationConfig = {",'   place?: "before" | "after"; // the placement of an annotation, "after" is by default','   style?: "none" | "badge" | "default"; // appereance of annotation, "default" is by default',"   className?: string;         // a class to add to an annotation element","   text?: any;                 // text content of an annotation element","   icon?: string;              // name of icon or url to an image","   href?: string;              // annotation is a link and that's an URL","   external?: boolean;         // open a link in new tab, make sence when `href` is specified only","   tooltip?: TooltipConfig;    // configuration for a tooltip, the same as for any view","}","```","",'An annotation is not displayed (not rendered) when computed annotation config is a falsy value. Any other value (truthy, but not an object) is used as value for `text` option, i.e. `"example"` is the same as `{ text: "example" }`.',"","In addition to a string or function, an object can be used as an element of `annotations` array","* `query` \u2013 a string (jora query) or a function to compute an annotation config","* `debug` (optional) - when truthy a debug information is output to the console; when value is a string, it's used in debug message"]}],demoData:{items:[{id:1,value:"example"},{id:2,value:"bar"},{id:3,value:"baz"}],"annotation styles":["none","default","badge"]},demo:{view:"struct",expanded:3,annotations:['#.key = "items" ? { place: "before", style: "badge", text: "view as table", tooltip: "table" } : null',`$ ~= /az/ and "Value has 'az' substring!"`,'$ in ["none", "default", "badge"] and { style: $, place: "before", text: $ + " before" }','$ in ["none", "default", "badge"] and { style: $, text: $ + " after" }']}},{title:"Limit number of array elements and object entries",beforeDemo:{view:"md",source:["The following options define the maximum number of elements in array or entries in object:","* `limit` (default: `50`) \u2013 max number of elements/entries for expanded array/object","* `limitCollapsed` (default: `4`) \u2013 max of elements/entries for collapsed array/object","* `limitCompactObjectEntries` (default: `0`) \u2013 max number of entries in a object which appears in a collapsed array or object","","> Use `false` for any of these options to disable a limitation"]},highlightProps:["limit","limitCollapsed","limitCompactObjectEntries"],demoData:d1,demo:{view:"struct",limit:4,limitCollapsed:1,expanded:2}},{title:"Maximum length for strings",beforeDemo:{view:"md",source:["The following options define the maximum string length in various cases:","* `maxStringLength` (default: `150`) \u2013 max string length when a host value is expanded","* `maxCompactStringLength` (default: `40`) \u2013 max of string length when a host value is collapsed",'* `allowedExcessStringLength` (default: `10`) \u2013 allowed excess in length before a string will be cut and \\"N more\\" label will be added',"* `maxPropertyLength` (default: `Infinity`) \u2013 max of property name length","* `maxCompactPropertyLength` (default: `35`) \u2013 max of property name length in collapsed objects","","> Expand and collapse `level2` branch to see difference in a value presentation"]},highlightProps:["maxStringLength","maxCompactStringLength","allowedExcessStringLength","maxPropertyLength","maxCompactPropertyLength"],demo:{view:"struct",maxStringLength:30,maxCompactStringLength:10,allowedExcessStringLength:5,maxPropertyLength:30,maxCompactPropertyLength:15,expanded:1},demoData:{stringsInExpandedObject:"Quite a long string value Quite a long string value",string_34_chars:"String with 34 chars length demo x",string_35_chars:"String with 35 chars length demo xx",string_36_chars:"String with 36 chars length demo xxx",very_very_very_very_very_very_very_very_very_very_long_property_name:"a property name should be truncated due to settings, but will not be by default",level2:{stringsInCollapsedObject:"Quite a long string value Quite a long string value",string_14_chars:"Short string x",string_15_chars:"Short string xx",string_16_chars:"Short string xxx"}}}]};var tr={get collapse(){return X("span",{class:"struct-action-button struct-collapse-value","data-action":"collapse"})},get signature(){return X("span",{class:"struct-action-button show-signature","data-action":"show-signature"})},get actions(){return X("span",{class:"struct-action-button",title:"Value actions","data-action":"value-actions"})},get stringMode(){return X("span",{class:"struct-action-button",title:"Toggle string show mode","data-action":"toggle-string-mode"})},get viewAsTable(){return X("span",{class:"struct-action-button",title:"Toggle view as table","data-action":"toggle-view-as-table"})},get sortKeys(){return X("span",{class:"struct-action-button",title:"Toggle key sorting","data-action":"toggle-sort-keys"})}},p1=Wi('"',tr.collapse,tr.actions,tr.stringMode,X("span","string-length"),X("span","string-text-wrapper",[X("span","string-text")]),'"'),g1=Wi("[",tr.collapse,tr.signature,tr.actions,tr.viewAsTable,X("span","value-size"),"]"),m1=Wi("{",tr.collapse,tr.signature,tr.actions,tr.viewAsTable,tr.sortKeys,X("span","value-size"),"}"),y1=X("div","entry-line"),v1=X("span","value"),b1=X("span","label",["\xA0\xA0\xA0\xA0",X("span","property"),":\xA0"]);function w1(t,e,r){return new t.view.Popup({hoverPin:"popup-hover",hoverTriggers:".view-struct .show-signature",render:function(i,s){let a=s.parentNode,f=e.get(a);t.view.render(i,{view:"signature",expanded:2,path:r(a)},f)}})}var j_=Object.prototype.hasOwnProperty,H_=Object.prototype.toString,x1=50,W_=4,U_=0,$_=150,G_=40,V_=10,K_=1/0,Y_=35;function il(t,e){return typeof t=="number"&&isFinite(t)&&t>=1?parseInt(t,10):e}function k1(t,e){if(Array.isArray(t))return t.length>0;if(typeof t=="string"&&(t.length>e.maxStringLength||/[\r\n\f\t]/.test(t)))return!0;if(t&&H_.call(t)==="[object Object]"){for(let r in t)if(j_.call(t,r))return!0}return!1}function Cp(t,e){t.appendChild(document.createTextNode(e))}function C1(t,e,r){e.length>1&&(t.lastElementChild.innerHTML=_n(e.length)+" "+r)}function Q_(t,e,r){e.length<2||e.every(([s],a)=>a===0||s>e[a-1][0])?t.querySelector('[data-action="toggle-sort-keys"]').remove():r&&e.sort(([s],[a])=>s<a?-1:s>a?1:0)}function J_(t,e,r){let i=b1.cloneNode(!0),s=e.length>r?e.slice(0,r)+"\u2026":e;Cp(i.firstElementChild,s),t.appendChild(i)}function S1(t){function e(S){let M=v.get(S),O=p.get(S);S.classList.add("struct-expand-value"),S.innerHTML=Qo(O,!1,M)}function r(S,M,O){let z=p.get(S);if(S.classList.remove("struct-expand-value"),typeof z=="string"){let I=p1.cloneNode(!0),_=I.lastChild.previousSibling,U=JSON.stringify(z);Cp(_.firstChild,U.slice(1,-1)),_.previousSibling.innerHTML=`length: ${_n(U.length)} chars`,S.innerHTML="",S.appendChild(I)}else if(Array.isArray(z)){let I=y.get(S),_=v.get(S);S.innerHTML="",S.appendChild(g1.cloneNode(!0)),C1(S,z,"elements"),s(S,S.lastChild,z,(U,H,ce)=>{i(U,H,M,_,Object.freeze({parent:I,host:z,key:ce,index:ce}))},0,_.limit)}else{let I=y.get(S),_=v.get(S),U=Object.entries(z);S.innerHTML="",S.appendChild(m1.cloneNode(!0)),C1(S,U,"entries"),Q_(S,U,O),s(S,S.lastChild,U,(H,[ce,$],ie)=>{J_(H,ce,_.maxPropertyLength),i(H,$,M,_,Object.freeze({parent:I,host:z,key:ce,index:ie}))},0,_.limit)}}function i(S,M,O,z,I){let _=k1(M,z),U=v1.cloneNode(!0);p.set(U,M),y.set(U,I),v.set(U,z),_&&typeof M!="string"&&O?(S.classList.add("struct-expanded-value"),r(U,O-1)):(_&&U.classList.add("struct-expand-value"),U.innerHTML=Qo(M,!1,z)),d(U,M,z,I),S.appendChild(U)}function s(S,M,O,z,I=0,_=x1){let U=O.length-I-1,H=document.createDocumentFragment();_===!1&&(_=O.length),O.slice(I,I+_).forEach((ce,$)=>{let ie=y1.cloneNode(!0);z(ie,ce,I+$),$!==U&&Cp(ie,","),H.appendChild(ie)}),S.insertBefore(H,M),t.view.maybeMoreButtons(S,M,O.length,I+_,_,(ce,$)=>s(S,M,O,z,ce,$))}function a(S){let M=p.get(S);Array.isArray(M)||(M=Object.entries(M).map(([O,z])=>({"[key]":O,"[value]":z}))),t.view.render(S,"table",M,{}),S.append(S.lastChild.previousSibling)}function f(S){let M=[],O=y.get(S);for(;O!==null&&O.parent!==null;)M.unshift(O.key),O=O.parent;return M}function d(S,M,O,z){if(O.annotations.length){for(let I of O.annotations)try{let{query:_,debug:U}=I,H={...z,context:O.context},ce=t.query(_,M,H);U&&t.log("info",`Compute struct view annotation${typeof U=="string"?` "${U}"`:""}:`,{data:M,context:H,query:_,queryResult:ce}),ce&&k.push(ce.tooltip?{el:S,config:ce,renderer:O.renderer,data:M,context:H}:{el:S,config:ce})}catch(_){t.log("error",_)}g()}}function g(){T===null&&k.length&&(T=Promise.resolve().then(()=>{T=null,kp(k),k.length&&g()}))}let p=new WeakMap,y=new WeakMap,v=new WeakMap,w=new WeakSet,k=[],T=null,L=f1(t,p,f),A=w1(t,p,f),N=$S(r,e,g,a,w,L,A);return t.addHostElEventListener("click",N,!1),t.view.define("struct",function(S,M,O,z){let{annotations:I,expanded:_,limit:U,limitCollapsed:H,limitCompactObjectEntries:ce,maxStringLength:$,maxCompactStringLength:ie,allowedExcessStringLength:D,maxPropertyLength:ae,maxCompactPropertyLength:le}=M,Se=I?(t.annotations||[]).concat(I.map(ot=>typeof ot=="string"||typeof ot=="function"?{query:ot}:ot)):t.annotations,Je={renderer:this,context:z,annotations:Se,limit:t.view.listLimit(U,x1),limitCollapsed:t.view.listLimit(H,W_),limitCompactObjectEntries:t.view.listLimit(ce,U_),maxStringLength:il($,$_),maxCompactStringLength:il(ie,G_),allowedExcessStringLength:il(D,V_),maxPropertyLength:il(ae,K_),maxCompactPropertyLength:il(le,Y_)};w.add(S),i(S,O,_,Je,{parent:null,host:{"":O},key:"",index:0}),g(),!_&&k1(O,Je)&&S.classList.add("struct-expand")},{usage:h1}),()=>{document.removeEventListener("click",N,!1)}}var A1={demo:{view:"table",data:[{foo:1,bar:"bar",baz:"zab"},{foo:2,baz:"xyz"},{foo:3,bar:"qux",baz:"baz"},{foo:4,bar:"aaa",baz:"abc"}]},examples:[{title:"Columns setup",demo:{view:"table",cols:[{header:"Header Col 1",data:"col1",content:'text:"prefix-" + $'},{header:"Header Col 3",data:"col3",content:'text:$ + "-suffix"'}],data:[{col1:"foo",col2:"bar",col3:"baz"},{col1:"qux",col2:"oof",col3:"zab"}]}}]};var Jo=Object.hasOwnProperty;function Sp(t){return{header:t,view:"table-cell",data:e=>e[t],sorting:`$[${JSON.stringify(t)}] ascN`}}function X_(t,e,r){let i="",s="";if("data"in t&&t.data!==void 0)switch(typeof t.data){case"string":s=`(${t.data})`;break;case"function":i="$dataQuery;",s="$dataQuery(#)";break;default:i="$dataQuery;",s="$dataQuery"}if(typeof t.content=="string"){let a=t.content.indexOf(":"),f=t.content.slice(0,a);if(a===-1||!e.view.has(f))return;let d=t.content.slice(a+1);d&&(s=s?`(${s} | ${d})`:`(${d})`)}return s?e.query(`${i} ${s} ascN`,{dataQuery:t.data},r):!1}function Z_(t,e){return typeof e=="string"&&(e={content:e}),Jo.call(e,"content")||Jo.call(e,"data")?{header:t,view:"table-cell",...e}:{...Sp(t),...e}}function T1(t,e,r){if(typeof r!="function")return!1;let i=0;try{for(let s=1;s<e.length;s++){let a=Math.sign(r(e[s-1],e[s]));if(a){if(i&&a!==i)return!1;i=a}}}catch(s){return t.log("error","Error on column order detection in table view",s),0}return-i}function L1(t){return t===null||typeof t!="object"||t instanceof RegExp}function E1(t){t.view.define("table",function(e,r,i,s){let{cols:a,rowConfig:f,limit:d}=r,g;Array.isArray(i)||(i=i?[i]:[]);let p=e.appendChild(X("thead")).appendChild(X("tr")),y=[],v=e.appendChild(X("tbody")),w=e.appendChild(X("tbody")),k=w.appendChild(X("tr")).appendChild(X("td")),T=L=>{v.innerHTML="",k.innerHTML="";for(let A of y){let N=T1(t,L,A.sorting);A.el.classList.toggle("asc",N===1),A.el.classList.toggle("desc",N===-1)}return t.view.renderList(v,g,L,{...s,isScalar:L1,cols:a},0,t.view.listLimit(d,25),k).then(()=>w.hidden=!k.firstChild)};if(Array.isArray(a))a=a.map((L,A)=>typeof L=="string"?Sp(L):{header:"col"+A,view:"table-cell",...L});else{let L=new Set,A=a&&typeof a=="object"?a:{},N=!1;a=[];for(let S of i)if(L1(S))N=!0;else for(let M of Object.keys(S))L.add(M);for(let S of Object.keys(A))A[S]?L.add(S):L.delete(S);N&&a.push({header:"[value]",view:"table-cell",sorting:"$ ascN",scalarAsStruct:!0,colSpan:"=$isScalar:#.isScalar;$isScalar() ? #.cols.size() : 1"});for(let S of L)a.push(Jo.call(A,S)?Z_(S,A[S]):Sp(S))}a=a.filter(L=>!Jo.call(L,"when")||t.queryBool(L.when,i,s));for(let L of a){if(Jo.call(L,"whenData")&&L.whenData!==void 0){let{whenData:O,content:z}=L;L.whenData=void 0,L.content=(I,_)=>t.queryBool(O,I,_)?{content:z}:void 0}let A=p.appendChild(X("th")),N={el:A};y.push(N),A.textContent=L.header;let S=Jo.call(L,"sorting")?t.query(L.sorting,null,s):X_(L,t,s),M=typeof S=="function"?T1(t,i,S):0;M!==0?(L.sorting=S,N.sorting=S,A.classList.add("sortable"),A.addEventListener("click",()=>{A.classList.contains("asc")?T(i.slice().sort((O,z)=>-S(O,z))):A.classList.contains("desc")&&!M?T(i):T(i.slice().sort(S))})):L.sorting=!1}return k.colSpan=a.length,g=this.composeConfig({view:"table-row",cols:"=$isScalar:#.isScalar;$isScalar() ? [#.cols[]] : #.cols"},f),T(i)},{tag:"table",usage:A1})}function D1(t){t.view.define("table-row",function(e,r,i,s){let{cols:a}=r;if(Array.isArray(a))return Promise.all(a.map((f,d)=>t.view.render(e,f,i,{...s,colIndex:d})))},{tag:"tr"})}var ej={view:"struct",expanded:1},tj=Object.hasOwnProperty;function nj(t,e,r){if(Array.isArray(e)){t.classList.add("complex"),t.textContent=e.length?"[\u2026]":"[]";return}if(r){t.classList.add("complex");for(let i in e)if(tj.call(e,i)){t.textContent="{\u2026}";return}t.textContent="{}";return}if(e!==void 0){if(typeof e=="number"){let i=String(e);t.classList.add("number"),i.length>3?t.innerHTML=_n(i,!1):t.textContent=i;return}t.textContent=String(e)}}function N1(t){t.view.define("table-cell",function(e,r,i,s){let{content:a,details:f,colSpan:d,scalarAsStruct:g}=r,p=i!==null&&typeof i=="object"&&!(i instanceof RegExp);if(typeof d=="number"&&d>1&&(e.colSpan=d),typeof a=="function"){if(a=a(i,s),!a)return;a=a.content}if((f||!a&&p)&&(e.classList.add("details"),e.addEventListener("click",y=>{let v=y.target;if(v===e){let w=v.parentNode,k=w.parentNode,T=Array.from(k.querySelectorAll(".view-table-cell.details-expanded")).find(A=>A.parentNode.parentNode===k),L=null;if(T){let A=T.parentNode;if(T.classList.remove("details-expanded"),T===e){w.parentNode.removeChild(w.nextSibling);return}A!==w?A.parentNode.removeChild(A.nextSibling):(L=w.nextSibling.firstChild,L.innerHTML="")}L===null&&(L=w.parentNode.insertBefore(document.createElement("tr"),w.nextSibling).appendChild(document.createElement("td")),L.parentNode.className="view-table-cell-details-row",L.className="view-cell-details-content",L.colSpan=1e3),e.classList.add("details-expanded"),t.view.render(L,f||ej,i,s)}})),g&&!a&&!p&&(a="struct"),a)return t.view.render(e,a,i,s);nj(e,i,p)},{tag:"td"})}var rj=()=>alert("toggled!"),M1=([t,...e],r="")=>{let i=[];for(let s=0;s<t;s++){let a=r+"."+(s+1);i.push({title:a,children:e.length?M1(e,a):null})}return i},O1={demo:{view:"tree",item:"text:text",data:{text:"Root",children:[{text:"Child"},{text:"Another child",children:[{text:"Lvl 2 child"},{text:"Lvl 2 child"}]}]}},examples:[{title:"Expanded tree",demo:{view:"tree",item:"text:text",expanded:999,data:{text:"Root",children:[{text:"Child"},{text:"Another child",children:[{text:"Lvl 2 child"},{text:"Lvl 2 child"}]}]}}},{title:"With empty text",demo:{view:"tree",emptyText:"This tree is empty",data:null}},{title:"With toggle handler",demo:{view:"tree",item:"text:text",onToggle:rj,data:{text:"Root",children:[{text:"Child"},{text:"Another child",children:[{text:"Lvl 2 child"},{text:"Lvl 2 child"}]}]}}},{title:"limitLines",demo:{view:"tree",item:"text:title",limitLines:7,data:M1([5,3,3])}}]};function P1(t){function e(i,s,a,f,d,g){return g===!1&&(g=a.length),i.classList.add("incomplete"),a.slice(d,d+g).reduce((p,y)=>p.then(()=>{let{container:v,itemConfig:w}=s;return t.view.render(v,t.view.composeConfig(w,{expanded:y.expanded,last:y.last,hasChildren:y.hasChildren,children:y.children}),y.data,f).then(()=>{if(y.expanded&&y.hasChildren){let k=v.lastChild.querySelector(".view-tree-leaf-children");k.classList.add("incomplete"),s={container:k,itemConfig:t.view.composeConfig(w,w.itemConfig),prev:s}}else for(;y.shift--;)s.container.classList.remove("incomplete"),s=s.prev})}),Promise.resolve()).then(()=>t.view.maybeMoreButtons(i,null,a.length,d+g,g,(p,y)=>e(i,s,a,f,p,y))||i.classList.remove("incomplete"))}function r(i,s,a,f){function d(y,v,w,k=0){y.forEach((T,L,A)=>{let N=t.query(w.children,T,s),S=Array.isArray(N)&&N.length>0,M=L===A.length-1,O=p.has(T)?0:typeof v=="function"?v(T,s):v;p.add(T),g.push({data:T,expanded:O,last:M,hasChildren:S,children:O?null:w.children,shift:M&&(!O||!S)?k+1:0}),S&&O&&d(N,typeof v=="number"?v-1:v,t.view.composeConfig(w,w.itemConfig),M?k+1:0)})}let g=[],p=new Set;return d(i,f,a),g}t.view.define("tree",function(s,a,f,d){let{children:g="children",item:p="text",itemConfig:y,collapsible:v,emptyText:w,onToggle:k}=a,{expanded:T,limit:L,limitLines:A=!0}=a;if(w!==!1&&w!==""&&s.setAttribute("emptyText",w||"Empty tree"),!Array.isArray(f)&&f&&(f=[f]),Array.isArray(f)){if(L=t.view.listLimit(L,25),A=t.view.listLimit(A,25),T=typeof T=="function"?T:t.view.listLimit(T,1),A){let N=r(f,d,this.composeConfig({children:g},y),T),S={container:s,itemConfig:this.composeConfig({view:"tree-leaf",itemConfig:y,content:p,collapsible:v,onToggle:k},y)};return e(s,S,N,d,0,A)}return this.renderList(s,this.composeConfig({view:"tree-leaf",itemConfig:y,content:p,collapsible:v,expanded:T,children:g,limit:L,onToggle:k},y),f,d,0,L)}},{tag:"ul",usage:O1})}function I1(t){let e=new WeakMap,r=({target:i})=>{let s=i.closest(".view-tree-leaf-toggle");if(s){let a=e.get(s),f=!s.parentNode.classList.toggle("collapsed");typeof a.render=="function"&&a.render(),typeof a.onToggle=="function"&&a.onToggle(f,s.parentNode,a.data,a.context)}};t.addHostElEventListener("click",r,!1),t.view.define("tree-leaf",async function(i,s,a,f){let{expanded:d,content:g="text",itemConfig:p,collapsible:y=!0,last:v,hasChildren:w,children:k,limit:T,onToggle:L}=s,A=i.appendChild(X("span","view-tree-leaf-toggle")),N=i.appendChild(X("span","view-tree-leaf-content")),S=null,M=w;if(v&&i.classList.add("last"),y||i.classList.add("non-collapsible"),await this.render(N,g,a,f),k&&(S=t.query(k,a,f),M=Array.isArray(S)&&S.length>0),M){let O=i.appendChild(X("ul","view-tree-leaf-children")),z={data:a,context:f,onToggle:L,render:null},I=(_,U)=>{typeof U=="number"&&U--,this.renderList(O,this.composeConfig({view:"tree-leaf",expanded:U,itemConfig:p,content:g,collapsible:y,children:k,limit:T,onToggle:L},p),_,f,0,this.listLimit(T,25))};i.classList.add("has-children"),e.set(A,z),(typeof d=="function"?d(a,f):d)?S&&await I(S,d):(i.classList.add("collapsed"),S&&(z.render=()=>{z.render=null,I(S,d||1)}))}},{tag:"li"})}var ru={};Ce(ru,{default:()=>z1,notFound:()=>B1,report:()=>Q1,viewsShowcase:()=>J1});function z1(t){t.page.define("default",{view:"switch",content:[{when:"not #.datasets",content:[{view:"h1",className:"no-data-loaded",content:'text:"Discovery.js"'},{view:"markdown",when:"#.meta.description",source:"=#.meta.description"},'html:"<br>"',"preset/upload"]},{content:['page-header{ content: "h1:#.name" }',{view:"struct",expanded:1}]}]})}function B1(t){t.page.define("not-found",['alert-warning:"Page `" + name + "` not found"'])}var Zc={};Ce(Zc,{decode:()=>ll,encode:()=>al});var xi=[],sl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),Xc=sl.reduce(function(t,e,r){return t[e]=r,t},{});for(ol=0;ol<255;ol++)xi[ol]=String.fromCharCode(ol);var ol;function ij(t){let e="";for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e+=xi[i]:i<2048?e+=xi[i>>6|192]+xi[i&63|128]:e+=xi[i>>12|224]+xi[i>>6&63|128]+xi[i&63|128]}return e}function oj(t){t=ij(t);let e=new Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}function sj(t){let e="";for(let r=0;r<t.length;){let i=t.charCodeAt(r++);if(i<128)e+=String.fromCharCode(i);else{let s=t.charCodeAt(r++);if(i&32){let a=t.charCodeAt(r++);e+=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}else e+=String.fromCharCode((i&31)<<6|s&63)}}return e}function aj(t){return sj(t.map(function(e){return xi[e]}).join(""))}function al(t){let e="";Array.isArray(t)||(t=oj(t));for(let r=0;r<t.length;){let i=t[r++],s=t[r++],a=t[r++],f=i>>2,d=(i&3)<<4|s>>4,g=(s&15)<<2|a>>6,p=a&63;s==null?g=p=64:a==null&&(p=64),e+=sl[f]+sl[d]+sl[g]+sl[p]}return e}function ll(t){let e=[],r,i,s,a;t=t.replace(/[^a-zA-Z0-9\+\/]/g,"");for(let f=0;f<t.length;){r=Xc[t.charAt(f++)],i=Xc[t.charAt(f++)],s=Xc[t.charAt(f++)],a=Xc[t.charAt(f++)];let d=r<<2|i>>4,g=(i&15)<<4|s>>2,p=(s&3)<<6|a;e.push(d,g,p)}return(s==null||s==64)&&e.pop(),(a==null||a==64)&&e.pop(),aj(e)}function R1(t,e){return typeof t=="string"?t:e||""}var F1=["query","view","title","dzen","noedit"],lj=["q","v","title","dzen","noedit"];function _1(t){let{query:e,view:r,title:i,dzen:s,noedit:a,...f}=typeof t=="string"?{query:t}:t,d=[];return s&&d.push(["dzen"]),a&&d.push(["noedit"]),i&&d.push(["title",i]),e&&d.push(["q",al(e)]),typeof r=="string"&&d.push(r?["v",al(r)]:["v"]),Object.keys(f||{}).sort().forEach(g=>{F1.includes(g)||d.push([g,g.endsWith("-b64")&&typeof f[g]=="string"?al(f[g]):f[g]])}),d}function j1(t){let e=Object.fromEntries(t),r={title:e.title||"",query:ll(R1(e.q,"")),view:"v"in e?ll(R1(e.v,"")):void 0,dzen:"dzen"in e,noedit:"noedit"in e};return Object.keys(e).forEach(i=>{lj.includes(i)||(r[i]=i.endsWith("-b64")&&typeof e[i]=="string"?ll(e[i]):e[i])}),r}function cj(t){return Object.fromEntries(Object.entries(t).filter(([e])=>!F1.includes(e)))}function q1(t,e,r){for(let i of Object.keys(t))if(i!==r&&t[i]!==e[i])return!1;for(let i of Object.keys(e))if(i!==r&&t[i]!==e[i])return!1;return!0}function eu(t,e={}){let r={...t,params:cj(t.params)};return!q1(e,r,"params")||!q1(e.params,r.params)?r:e}function uj(t){let e=f=>f.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/'/g,"\\'"),{title:r,query:i,view:s}=t,a={title:r,query:i,view:s};return`{
${Object.keys(a).reduce((f,d)=>f.concat(a[d]?`    ${d}: '${e(a[d])}'`:[]),[]).join(`,
`)}
}`}function fj(t){if(t&&(typeof t=="number"||typeof t=="string")){let e=new Date(t);return isNaN(e)?null:e}return t instanceof Date?t:null}function H1(t){let e=fj(t);return e?e.toISOString().replace(/^(\d{4})-(\d{2})-(\d{2})T([\d:]+).*/,"$3/$2/$1 $4 UTC"):null}function W1(t,e){let r,i,s,a,f=new t.view.Popup({render:(y,v,w)=>t.view.render(y,{view:"menu",data:[{text:"Copy report permalink",disabled:"no #.actions.permalink",action:async()=>wn(await t.action.call("permalink",t.pageHash))},{text:"Copy report as JSON",action:()=>wn(uj(t.pageParams))}],onClick(k){w(),k.action()}})}),d=X("div","report-actions",[a=X("button",{class:"edit-mode discovery-hidden-in-dzen",title:"Toggle edit mode",onclick:({target:y})=>{y.blur(),e({noedit:!t.pageParams.noedit})}}),X("button",{class:"share",title:"Share ...",onclick:({target:y})=>{y.blur(),f.show(y)}}),X("button",{class:"toggle-fullscreen",title:"Toggle full page mode",onclick:({target:y})=>{y.blur(),e({dzen:!t.pageParams.dzen})}})]),g=y=>{y.parentNode.dataset.title=y.value||y.placeholder},p=X("div","report-header",[X("div",{class:"report-header-text","data-title":"\xA0"},[r=X("input",{class:"discovery-hidden-in-dzen",placeholder:"Untitled report",oninput:({target:y})=>{g(y)},onchange:({target:y})=>{g(y),e({title:y.value},!0)},onkeypress:y=>{(y.charCode===13||y.keyCode===13)&&y.target.blur()}}),X("span","timestamp",[i=X("span",null,"&nbsp;"),s=X("span")])])]);return{el:[d,p],render(y,v){let{title:w,noedit:k}=v.params,T=H1(v.datasets?.[0]?.resource?.createdAt);r.value=w,g(r),a.classList.toggle("disabled",k),i.innerText=T?"Data collected at "+T+" | ":"",s.innerText="Rendered at "+H1(new Date)}}}function U1(t,e,r){return t.length?`${t.length} ${t.length===1?e:r}`:"empty"}function dj(t){return Array.isArray(t)?`Array (${U1(t,"element","elements")})`:t&&typeof t=="object"?`Object (${U1(Object.keys(t),"key","keys")})`:`Scalar (${t===null?"null":typeof t})`}function $1(t,e){let r=!1,i={},s,a=(w,k,T,L)=>t.querySuggestions(w,k,T,L),f=new t.view.QueryEditor(a).on("change",w=>s.checked&&e({query:w},!0)),d=t.getQueryEngineInfo(),g=X("div","buttons"),p=X("div","data-query-result"),y=X("div","form query-editor-form",[X("div","query-editor",[f.el,X("div","editor-toolbar",[X("span","syntax-hint",`Use <a class="view-link" href="${d.link}" target="_blank">${d.name}</a> ${d.version||""} syntax for queries`),X("label","view-checkbox",[s=X("input",{class:"live-update",type:"checkbox",checked:!0,onchange:w=>{w.target.checked&&e({query:f.getValue()},!0)}}),X("span","view-checkbox__label","process on input")]),g])]),p]);t.view.render(g,{view:"button-primary",content:'text:"Process"',onClick:()=>{i={},e({query:f.getValue()},!0),t.scheduleRender("page")}});let v;return{el:y,perform(w,k){let T=eu(k,i.context),L=k.params.query,A,N;if(f.setValue(L,w,T),i.query===L&&i.data===w&&i.context===T)N=i.results;else{v&&(v.clear(),v=null);try{A=Date.now(),N=t.query(L,w,T),A=Date.now()-A}catch(S){let M=S.details&&S.details.loc,O=f.cm.doc;if(M){let[z,I]=S.details.loc.range;v=S.details.token==="EOF"||z===I||L[z]===`
`?O.setBookmark(O.posFromIndex(z),{widget:X("span","discovery-editor-error"," ")}):O.markText(O.posFromIndex(z),O.posFromIndex(I),{className:"discovery-editor-error"})}return i={},p.innerHTML='<div class="report-error query-error">'+St(S.message)+"</div>",{error:S}}i={data:w,context:T,query:L,results:N},p.innerHTML="",t.view.render(p,{view:"expand",header:`text:"${dj(N)} in ${parseInt(A,10)}ms"`,expanded:r,onToggle:S=>r=S,content:{view:"struct",expanded:1}},N)}return{data:N}}}}function tu(t){return!!(t&&t.nodeType===Node.TEXT_NODE)}function Ap(t,e=`
`){let r="";for(let i of t.childNodes)!tu(i)&&i.previousSibling&&!tu(i.previousSibling)&&(r+=e),r+=hj(i,e);return r}function hj(t,e=`
`){switch(t.nodeType){case Node.ELEMENT_NODE:let[r,i=""]=t.cloneNode().outerHTML.split(/(?=<\/[^>]+>$)/);return r+(t.firstChild&&!tu(t.firstChild)?e+"  ":"")+Ap(t,e+"  ")+(t.lastChild&&!tu(t.lastChild)?e:"")+i;case Node.TEXT_NODE:return t.nodeValue;case Node.COMMENT_NODE:return"<!--"+t.nodeValue+"-->";case Node.DOCUMENT_FRAGMENT_NODE:return Ap(t,e)}return""}function G1(t,e){let r=[],i=[...Array.isArray(t.highlight)?t.highlight:t.highlight?[t.highlight]:[]];Array.isArray(t.highlightProps)&&i.push(`(")?(?:${t.highlightProps.join("|")})\\1(?=:)`);for(let s of i){let a=new RegExp(s,"gm"),f;for(;f=a.exec(e);)r.push({range:[f.index,f.index+f[0].length]})}return r}function nu(t){let e={view:"context",modifiers:[{view:"switch",when:"beforeDemo",content:[{when:({beforeDemo:r})=>typeof r=="string",content:'html:"<p>" + beforeDemo + "</p>"'},{content:{view:"render",config:"beforeDemo",context:"{ __demoContext: true, ...(viewDef | { name, group, options }) }"}}]},{view:"block",when:"demo or view",className:"usage-render",postRender:(r,{onInit:i},{demoFixed:s})=>{s&&(r.classList.add("demo-fixed"),r.style.height=s+"px"),i(r,"root")},content:{view:"render",config:"demo or view",data:"demoData",context:"{ __demoContext: true, ...(viewDef | { name, group, options }) }"}},{view:"switch",when:"afterDemo",content:[{when:({afterDemo:r})=>typeof r=="string",content:'html:"<p>" + afterDemo + "</p>"'},{content:{view:"render",config:"afterDemo",context:"{ __demoContext: true, ...(viewDef | { name, group, options }) }"}}]}],content:{view:"tabs",when:"source != false",className:"usage-sources",name:"code",tabs:[{value:"config",text:"Config (JS)"},{value:"config-json",text:"Config (JSON)"},{value:"html",text:"Rendered HTML"}],content:{view:"switch",content:[{when:'#.code="config"',content:[{view:"expand",when:'"demoData" in $',header:'text:"Input data"',content:{view:"struct",expanded:2,data:"demoData"}},{view:"source",className:"first-tab",data:r=>{let i=wi(r.demo||r.view);return{syntax:"discovery-view",content:i,refs:G1(r,i)}}}]},{when:'#.code="config-json"',content:[{view:"expand",when:'"demoData" in $',header:'text:"Input data"',content:{view:"struct",expanded:2,data:"demoData"}},{view:"source",data:r=>{let i=JSON.stringify(r.demo||r.view,null,4);return{syntax:"json",content:i,refs:G1(r,i)}}}]},{when:'#.code="html"',content:{view:"source",data:(r,i)=>({syntax:"html",content:Ap(i.root)})}}]}}};return{view:"block",className:"discovery-view-usage",data({name:r,options:i},s){let a=[...t.view.values].filter(f=>f.options.usage===i.usage).map(f=>f.name);return a.includes(r)||a.unshift(r),s.viewDef={demo:{view:r,data:'"'+r+'"'},...typeof i.usage=="function"?i.usage(r,a):Array.isArray(i.usage)?{examples:i.usage}:i.usage,name:r,group:a,options:i}},content:["h1:name",e,{view:"list",data:"examples",whenData:!0,itemConfig:{className:"usage-section"},item:["h2{ anchor: true, data: title }",e]}]}}var V1=`{
    view: 'struct',
    expanded: 1
}`,K1=[{name:"Table",content:wi({view:"table"})},{name:"Auto-link list",content:wi({view:"ol",item:"auto-link"})},{name:"Signature",content:wi({view:"signature",expanded:2})}];function pj(t,e,r){return X("div",{class:"report-editor-tab",onclick:()=>r({view:e})},t||"Untitled preset")}function Y1(t,e){let r={},i=Array.isArray(t.options.viewPresets)?K1.concat(t.options.viewPresets):K1,s,a,f,d,g,p,y=new t.view.ViewEditor(t).on("change",T=>p.checked&&e({view:T},!0)),v=X("div","buttons"),w=X("div","form view-editor-form",[X("div","view-editor-form-header",[X("div","report-editor-tabs view-mode",g=["Default","Custom"].map(T=>X("div",{class:"report-editor-tab","data-mode":T.toLowerCase(),onclick:()=>e({view:T==="Default"?void 0:V1},!0)},T))),X("div","report-editor-tabs presets",i.map(({name:T,content:L})=>pj(T,L,e))),X("div","view-editor-form-header-links",'<a href="#views-showcase" class="view-link">Views showcase</a>')]),s=X("div",{class:"view-editor-form-content",hidden:!0},[X("button",{class:"view-button formatting",title:"Prettify (input should be a JSON)",onclick(){y.focus();try{let T=y.getValue().trim(),L=new Function("return 0,"+T)();e({view:wi(L)})}catch(T){t.log("error","View editor prettify failed:",T)}}}),y.el,X("div","editor-toolbar",[a=X("div","view-expand",[X("div",{class:"header",onclick:()=>{a.classList.toggle("expanded"),d.classList.toggle("visible")}},[f=X("div","header-content"),X("div","trigger")]),d=X("div","view-editor-view-list")]),X("label","view-checkbox",[p=X("input",{class:"live-update",type:"checkbox",checked:!0,onchange:T=>{T.target.checked&&e({view:y.getValue()},!0)}}),X("span","view-checkbox__label","build on input")]),v])])]);t.view.render(v,{view:"button-primary",content:'text:"Build"',onClick:()=>{r={},e({view:y.getValue()},!0),t.scheduleRender("page")}}),new t.view.Popup({className:"view-editor-view-list-hint",hoverTriggers:".view-editor-view-list .item.with-usage",render:function(T,L){t.view.render(T,nu(t),t.view.get(L.textContent),{})}}),f.textContent=`Available ${[...t.view.entries].filter(([,T])=>T.options.usage).length} views`;let k=()=>d.innerHTML='<a href="#views-showcase" class="view-link">Views showcase</a><br><br>'+[...t.view.entries].sort().map(([T,L])=>`<div><a class="item view-link${L.options.usage?" with-usage":""}" ${L.options.usage?'href="#views-showcase:'+T+'"':""}>${T}</a></div>`).join("");return k(),t.view.on("define",Qr(k,100)),{el:w,render(T,L,A){let N=eu(L,r.context),S=typeof L.params.view=="string"?"custom":"default",M=L.params.view,O=null;if(y.setValue(M),s.hidden=S!=="custom",g.forEach(z=>z.classList.toggle("active",z.dataset.mode===S)),!M&&S==="default"&&(M=V1),r.view!==M||r.data!==T||r.context!==N){A.innerHTML="";try{O=Function("return "+(M?"0,"+M:"null"))(),t.view.render(A,O,T,N)}catch(z){t.view.render(A,I=>{I.className="report-error render-error",I.innerHTML=St(String(z))+"<br>(see details in console)",t.log("error",z)})}r={data:T,context:N,view:M}}}}}function Q1(t){function e(s,a){return t.setPageParams({...t.pageParams,...s},a)}function r(){if(i!==null)return i;let s=W1(t,e),a=$1(t,e),f=Y1(t,e),d=X("div",{class:"report-editor discovery-hidden-in-dzen",hidden:!0},[a.el,f.el]),g=X("div","report-content"),p=[...s.el,d,g];return i={header:s,queryEditor:a,viewEditor:f,reportEditorEl:d,reportContentEl:g,layout:p}}let i=null;t.page.define("report",function(s,a,f){let{header:d,queryEditor:g,viewEditor:p,reportEditorEl:y,reportContentEl:v}=r();y.hidden=f.params.noedit,d.render(a,f);let w=g.perform(a,f);if(w.error){p.el.hidden=!0,v.hidden=!0;return}p.el.hidden=!1,v.hidden=!1,p.render(w.data,f,v)},{reuseEl:!0,init(s){r().layout.forEach(a=>s.appendChild(a))},encodeParams:_1,decodeParams:j1})}var gj=`
## Working with views

A presentation in Discovery.js is setting up as a tree of views.
There are several ways to define a view, some may be more convenient in one case, others in another.
The main notation is an object, all other notations are converted to it.
The only required property is \`view\` which defines a view name, any other properties are optional:

\`\`\`discovery-view
{
    view: "view-name"
}
\`\`\`

The following properties are supported by any view:

- \`when\` \u2013 control view rendering (should it be rendered or not) before an input data is transformed (\`data\` is applied)
- \`data\` \u2013 transform input data for the view and its nested views
- \`whenData\` \u2013 control view rendering after an input data is transformed
- \`className\` \u2013 add class name(s) to the root element of view if any
- \`postRender\` - a function which should be invoked after view rendering but before placing to destination place in DOM
- \`tooltip\` \u2013 setup a tooltip to show on view hovering, can be applied for views with a container only

The order of evaluation during a view render:

\`\`\`js
                          input data | output data (the result of "data" evaluation if any)
                                     |
render start ---> [when] --> [data] -|-> [whenData] --> [postRender] --> [className] --> render finish
                                     |
\`\`\`

When \`data\` property is specified, it changes flow's data according the following rules:

- a string \u2013 treated as a query which result is used as the output data
- a function like \`fn(data, context)\` \u2013 the result of the function invocation is used as the output data
- any other value used as the output data

> Note: Only \`when\` and \`data\` properties get an input data, any other functions and queries receive
a result of \`data\` property evalution. When \`data\` is not specified all the queries and functions
receive the same input data.

Properties \`when\` and \`whenData\` can take:

- a string \u2013 treated as a query
- \`true\` \u2013 treated as a empty query which mean that the data itself is examinated with no any transformation
- \`undefined\` \u2013 same when not specified, just render (ignore the property)
- a function like \`fn(data, context)\`
- any other value used as is

Regardless of how the value is obtained, it is coerce to a boolean.
Plase note, that Jora rules are used which mean that empty arrays and object with no own keys are falsy (truthy in JavaScript).
The view is only rendered if the resulting value is truthy.

## Queries for properties

In some cases, it is necessary to compute the value of a property based on the data.
To do this, you can use a string value for a property that starts with \`=\`.
This will mean that everything after the \`=\` is a query which will take output data and produce a value for the property.
Other values are passed to the view render as is, without any changes.

In the following, limit number of items rendered at once only if there are more than 12 items:

\`\`\`discovery-view
{
    view: 'list',
    limit: '=size() <= 12 and 10'  // the same as '=size() <= 12 ? false : 10'
}
\`\`\`

> Note: In those rare cases when you need to pass to a property a string that starts with \`=\`,
you can use a query like \`="=some string"\`,<br>e.g. \`{ view: 'example', prop: '="=string="' }\`

## Shorthand notations

| Shorhand notation | Expands into ... |
| --- | --- |
| \`'name'\` | \`{ view: 'name' }\`
| \`'name:<query>'\` | \`{ view: 'name', data: '<query>' }\`
| \`'name{ foo: size() / 2, bar: "qux" }'\` | \`{ view: 'name', foo: '=size() / 2', bar: 'qux' }\`

## List of views

If you need to specify a list of views, then you must use an array.
An array with view definitions can be passed anywhere a view is accepted as a value.

\`\`\`discovery-view
[
    {
        view: 'list',
        item: [
            'text:name',
            { view: 'badge', data: 'something.size()' }
        ]
    },
    'table{ limit: 10 }'
]
\`\`\`

## Tooltip

A canonical form for a toolup setup is an object with fields (all are optional):

\`\`\`js
{
    className: 'string',
    position: 'trigger', // 'trigger' or 'pointer' (default)
    content: 'a view setup'
}
\`\`\`

Instead of such object, any view notation can be used, i.e. a string, an object with \`view\` property, an array or a function:

| Shorhand notation | Expands into ... |
| --- | --- |
| \`'name'\` | \`{ content: 'name' }\`
| \`{ view: 'name' }\` | \`{ content: { view: 'name' } }\`
| \`['view', { view: 'name' }]\` | \`{ content: ['view', { view: 'name' }] }\`

A content is rendering into a popup container. When \`className\` is used it behaves the same as for a view but applies to a popup container.
`;function J1(t){t.page.define("views-showcase",{view:"context",data:()=>[...t.view.values],modifiers:[{view:"block",className:"sidebar",content:{view:"content-filter",content:{view:"menu",name:"view",limit:!1,data:`
                            .[name ~= #.filter]
                            .sort(name asc)
                            .({ ..., disabled: no options.usage })
                        `,item:"text-match:{ text: name, match: #.filter }"}}}],content:{view:"block",className:"content",data:"$[=> name=(#.view.name or #.id)]",content:{view:"switch",content:[{when:"no $ and #.id",content:'alert-warning:"View \\"" + #.id + "\\" not found"'},{when:"no $",content:['h1:"Views showcase"','alert:"\u2190 Select a view to get details"',{view:"markdown",source:gj}]},{content:[{view:"context",postRender:function(e,r,i,s){t.setPageRef(i.name),t.cancelScheduledRender(),s.id=t.pageRef}},nu(t)]}]}}},{sidebar:!1})}function cl(t,e){let r=X("style",null,":host{display:none}"),i=new Set,s=Promise.resolve();return Array.isArray(e)&&(t.append(...e.map(a=>{switch(typeof a=="string"&&(a={type:"style",content:a}),a.type){case"style":case"inline":return X("style",{media:a.media},a.content);case"link":case"external":{let f,d,g=new Promise((y,v)=>{f=y,d=v});return i.add(g),X("link",{rel:"stylesheet",href:a.href,media:a.media,onerror(y){i.delete(g),d(y),i.size||r.remove()},onload(){i.delete(g),f(),i.size||r.remove()}})}default:throw new Error(`Unknown type "${a.type}" for a style descriptor`)}})),i.size&&(s=Promise.all(i),t.append(r))),s}var Tp=0,X1=[{view:"badge",when:'view.data != parent.(view or viewRoot).data or "data" in view.config',data:{text:"D"},tooltip:'text:"Data value was changed"'},{view:"badge",when:"view.context != parent.(view or viewRoot).context",data:{text:"C"},tooltip:'text:"Context value was changed"'}];function mj(t){let e=Ya(t),r=Or(t,e),i=0,s=0,{scrollTop:a,scrollLeft:f,clientWidth:d,clientHeight:g}=e,p=a+i,y=f+s,v=f+d,w=a+g,k=a+r.top,T=f+r.left,L=T+r.width,A=a,N=f;(k<p||k>w)&&(A=k-i),T<y?N=T-s:L>v&&(N=Math.max(T,f-(L-v))-s),e?.scrollTo(N,A)}function Z1(){Tp=0}function eA(t,{selectTreeViewLeaf:e,detailsSidebarLeafExpanded:r}){return{view:"tree",when:"#.selectedView",data:"$[0]",className:"sidebar",limitLines:!1,itemConfig:{collapsible:"=not viewRoot",expanded:i=>r.has(i),onToggle:(i,s,a)=>i?r.add(a):r.delete(a)},item:{view:"switch",content:[{when:"viewRoot",content:{view:"block",className:"view-root",content:"text:viewRoot.name"}},{when:"$ = #.selectedView",content:[{view:"block",className:[i=>i.view?.skipped?"skipped":!1,"selected"],content:'text:view.config.view or "#root" | $ + "" = $ ? $ : "\u0192n"',postRender(i){requestAnimationFrame(()=>{t.querySelector(".sidebar").scrollTop=Tp,mj(i)})}},...X1]},{content:[{view:"link",className:i=>i.view?.skipped?"skipped":!1,data:'{ text: view.config.view or "#root" | $ + "" = $ ? $ : "\u0192n", href: false, view, self: $ }',onClick(i,s){Tp=t.querySelector(".sidebar")?.scrollTop||0,e(s.self)}},...X1]}]}}}var tA={view:"block",className:["content","props-config"],data:"#.view | view or viewRoot",content:[{view:"block",className:"content-section skip",when:"skipped",content:'block{ content: "badge:{ text: skipped }" }'},{view:"block",className:"content-section render",when:'config | view + "" != view',content:'source:{ content: config.view + "", syntax: "js" }'},{view:"block",when:"props != undefined",className:"content-section props",content:{view:"struct",expanded:2,data:"props"}},{view:"block",className:"content-section config",content:[{view:"struct",expanded:1,data:"config"},{view:"tree",data:(t,e)=>e.host.view.getViewConfigTransitionTree(t.config).deps,whenData:!0,expanded:3,children:"deps",item:{view:"struct",expanded:1,data:"value"}}]}]};function yj(t){t=t.replace(/^(?:\s*[\n]+)+?([ \t]*)/,"$1").trimRight(),t=t.replace(/\n[ \t]+\n/g,`

`);let e=t.split(/\n+/),r=+(t.match(/^\s/)===null),i=1e3;for(var s=r;s<e.length;s++){let a=e[s].match(/^\s*/);if(a[0].length<i&&(i=a[0].length),i==0)break}return i>0&&(t=t.replace(new RegExp("(^|\\n) {"+i+"}","g"),"$1")),t}var nA={view:"list",className:"data-flow-transitions",limit:1,when:".[view]",data:`
        [null]    // to show empty list on first render
        + .[view] // filter viewRoot
        .(
            $parent;
            $parentName: parent.view.config.view;
            $queryData: view | inputDataIndex != undefined ? inputData[inputDataIndex] : inputData;

            view | [
                ...'data' in config ? { inputData: $queryData, transition: config.data, name: config.view, view: $, $parent } : [],
                ...inputDataIndex != undefined ? { inputData, transition: \`$[\${inputDataIndex}]\`, name: \`\${$parentName} \u2192 \${config.view}\`, view: $, $parent } : []
            ]
        )
    `,whenData:"size() > 1",itemConfig:{when:!0},item:[{view:"block",className:"root-data",when:"inputData = ..parent.viewRoot[].data",content:'badge:"Root data"'},{view:"struct",data:"inputData"},{view:"block",className:"data-flow-transition",content:[{view:"switch",content:[{when:"$isString: #.isString; transition | $isString() or $ = undefined",content:{view:"context",data(t){return{content:yj(t.transition),refs:[]}},content:{view:"source",data:`{
                                    ...,
                                    syntax: "jora",
                                    lineNum: false
                                }`}}},{content:{view:"struct",data:"transition"}}]},{view:"block",className:"view-name",content:"text:name"}]}]},rA={view:"block",className:"content-section data",data:"#.view",content:[{view:"context",data:"..parent",content:nA},{view:"context",content:{...nA,limit:!1}},{view:"block",className:"root-data",when:"view or viewRoot | data = ([@] + @..parent).viewRoot[].data",content:'badge:"Root data"'},{view:"struct",expanded:1,data:"view or viewRoot | data"}]};function vj(t,e){if(t===null)return!0;for(let r of["top","left","width","height"])if(t[r]!==e[r])return!0;return!1}var Lp=t=>{let e=!1,r=null,i=null,s=null,a=null,f,d=new Set,g=new Map,p=new Map,y=X("div","cancel-hint view-alert view-alert-warning"),v=X("div",{class:"discovery-view-inspector-overlay",onclick:()=>N(i&&!s?i:null)},[y]),w=Qr(()=>{if(!e||s!==null)return;let I=t.view.getViewTree([O.el]),_=new Set([...p.keys()]);(function H(ce,$){for(let ie of ce){if(!ie.node||!ie.view&&!ie.viewRoot){ie.children.length&&H(ie.children,$);continue}let D=Or(ie.node,$),ae=p.get(ie.node)||null;ae===null?(ae={el:$.appendChild(document.createElement("div")),box:null},ae.el.className=ie.viewRoot?"overlay view-root":"overlay",p.set(ie.node,ae),g.set(ae.el,ie)):_.delete(ie.node),vj(ae.box,D)&&(ae.el.style.top=`${D.top}px`,ae.el.style.left=`${D.left}px`,ae.el.style.width=`${D.width}px`,ae.el.style.height=`${D.height}px`,ae.box=D),ie.children.length&&(ie.node.nodeType===1&&(ae.el.style.overflow=getComputedStyle(ie.node).overflow!=="visible"?"hidden":"visible"),H(ie.children,ae.el))}})(I,v);for(let H of _)p.get(H).el.remove(),p.delete(H);k()},{maxWait:0,wait:50}),k=()=>{let{x:I,y:_}=bi.value;M([...t.dom.container.parentNode.elementsFromPoint(I|0,_|0)||[]].find(U=>g.has(U))||null)},T=I=>{(I.key==="Escape"||I.keyCode===27||I.which===27)&&t.inspectMode.set(!1)},L=()=>{e||(e=!0,document.addEventListener("scroll",w,Xn),document.addEventListener("keydown",T,!0),bi.subscribe(w),f=setInterval(w,500),t.dom.container.append(v),w())},A=()=>{e&&(e=!1,clearInterval(f),document.removeEventListener("scroll",w,Xn),document.removeEventListener("keydown",T,!0),bi.unsubscribe(w),z=!1,delete y.dataset.alt,v.remove(),S())},N=I=>{s=I||null,I?(O.show(),O.freeze(),delete y.dataset.alt):z?t.inspectMode.set(!1):(d.clear(),Z1(),S(),w())},S=()=>{r&&r.classList.remove("hovered"),r=null,i=null,s=null,O.hide()},M=I=>{if(I===r)return;if(r!==null&&r.classList.remove("hovered"),r=I,I===null){a=setTimeout(S,100);return}I.classList.add("hovered");let _=g.get(I)||null;if(_===null){i=null;return}i!==null&&_.view===i.view||(i=_,clearTimeout(a),O.show())},O=new t.view.Popup({className:"discovery-inspect-details-popup",position:"pointer",hideIfEventOutside:!1,hideOnResize:!1,render(I){let _=s||i,U=[],H=_;for(;H!==null&&(H.view||H.viewRoot);)H!==_&&s!==null&&d.add(H),U.unshift(H),H=H.parent;t.view.render(I,{view:"context",modifiers:[eA(I,{selectTreeViewLeaf:N,detailsSidebarLeafExpanded:d})],content:{view:"context",data(ce,$){return $.isString=ie=>typeof ie=="string",ce},modifiers:{view:"block",className:"toolbar",content:[{view:"toggle-group",className:"stack-view-chain",name:"view",data:".({ value: $ })",value:"=$[-1].value",toggleConfig:{className:[ce=>ce.value.viewRoot?"view-root":!1,ce=>ce.value.view&&ce.value.view.skipped?"skipped":!1],content:['text:value | viewRoot.name or view.config.view | $ + "" = $ ? $ : "\u0192n"']}},{view:"button",when:s!==null,content:'text:"Close inspector"',onClick(){t.inspectMode.set(!1)}}]},content:[tA,{view:"block",className:["content","data-context"],content:[rA,{view:"block",className:"content-section context",data:"$[-1] | view or viewRoot",content:{view:"struct",expanded:1,data:"context"}}]}]}},U,{selectedView:s,host:t})}});t.action.define("startInspect",L),t.action.define("stopInspect",A),t.inspectMode.subscribeSync(I=>I?L():A());let z=!1};var Np={};Ce(Np,{localStorageEntry:()=>Dp,sessionStorageEntry:()=>wj});function bj(t){let e="__storage_test__"+Math.random(),r;try{r=window[t]}catch{return null}try{r.setItem(e,e),r.removeItem(e)}catch(i){if(!(i instanceof DOMException&&(i.code===22||i.code===1014||i.name==="QuotaExceededError"||i.name==="NS_ERROR_DOM_QUOTA_REACHED")&&r.length!==0))return null}return r}function iA(t){let e=new Map;return e.storage=bj(t),e.getOrCreate=r=>e.get(r)||xj(r,e),e.getOrCreate.available=e.storage!==null,e}var Ep=new Map([["session",iA("sessionStorage")],["local",iA("localStorage")]]),wj=Ep.get("session").getOrCreate,Dp=Ep.get("local").getOrCreate;addEventListener("storage",t=>{for(let[,e]of Ep)e.storage===t.storageArea&&e.has(t.key)&&e.get(t.key).forceSync()});function xj(t,e){let r=null,i=new fr,s=(f=e.storage.getItem(t))=>{r!==f&&i.emit("change",r=f)},a={get value(){return this.get()},get(){return r},set(f){e.storage&&(e.storage.setItem(t,f),s())},delete(){e.storage&&(e.storage.removeItem(t),s())},forceSync(){return e.storage&&s(),this.get()},on(f,d){return i.on("change",f),d&&f(r),()=>i.off("change",f)},off(f){i.off("change",f)}};return e.set(t,a),a.forceSync(),a}var sA=new Set([!0,!1,"auto","disabled"]),iu=new Set,ou=matchMedia("(prefers-color-scheme:dark)"),Mp=Dp("discoveryjs:darkmode"),oA=new Map([["true",!0],["false",!1],["auto","auto"]]),su=null;function kj(){for(let t of iu)t.mode==="auto"&&t.set("auto")}function aA(t){let e=oA.has(t)?oA.get(t):null;if(su!==e){su=e;for(let r of iu)r.persistent&&r.mode!=="disabled"&&r.set(e!==null?e:"auto")}}aA(Mp.value);Mp.on(aA);ou.addListener(kj);function lA(t,e){return(t==="off"||t==="disable")&&(t="disabled"),t!=="disabled"&&e&&su!==null&&(t=su),t}function cA(t){return sA.has(t)||(t="disabled"),t==="auto"?ou.matches:t===!0}function uA(t,e){return cA(lA(t,e))}var au=class{constructor(e,r){this.persistent=r?Mp:null,this.handlers=[],this.set(lA(e,r),!0),iu.add(this)}subscribe(e,r){let i={fn:e};return this.handlers.push(i),r&&i.fn(this.value,this.mode),()=>{let s=this.handlers.indexOf(i);i=null,s!==-1&&this.handlers.splice(s,1)}}destroy(){iu.delete(this)}set(e,r){let i=this.value,s=this.mode;sA.has(e)||(console.warn('Bad value "'+e+'" for darkmode, fallback to "disabled"'),e="disabled"),this.mode=typeof e=="boolean"?"manual":e,this.value=cA(e),this.mode!=="disabled"&&(this.persistent&&!r&&this.persistent.set(this.mode==="auto"?"auto":this.value),(this.value!==i||this.mode!==s)&&this.handlers.forEach(({fn:a})=>a(this.value,this.mode)))}toggle(e){switch(this.mode){case"auto":this.set(!ou.matches);break;case"manual":this.set(e&&this.value!==ou.matches?"auto":!this.value);break}}};var Op={};Ce(Op,{ContentRect:()=>ul});var Cj=typeof ResizeObserver=="function",ul=class extends vn{constructor(){super(),this.el=null,Cj&&(this.observer=new ResizeObserver(e=>{for(let r of e)this.set(r.contentRect)}))}observe(e){e=e||null,this.observer&&this.el!==e&&(this.el!==null&&this.observer.unobserve(this.el),e!==null&&this.observer.observe(e)),this.el=e}};function fA(t){t.nav.append({name:"index-page",when:"#.widget | pageId != defaultPageId",data:'{ text: "Index", href: pageLink(#.widget.defaultPageId) }'})}function dA(t){t.nav.append({name:"report-page",when:"#.widget | pageId != reportPageId",data:'{ text: "Make report", href: pageLink(#.widget.reportPageId) }'})}function hA(t){t.nav.append({name:"load-data",when:"#.actions.uploadFile and (#.datasets or (#.widget | pageId != defaultPageId))",content:'text:"Open file\u2026"',onClick:"=#.actions.uploadFile"})}function pA(t){let e=()=>{};t.nav.menu.append({view:"block",className:["toggle-menu-item","dark-mode-switcher"],name:"dark-mode",when:'#.widget | darkmode.mode != "disabled"',postRender:(r,i,s,{widget:a,hide:f})=>{let d;e(),e=a.darkmode.subscribe((g,p)=>{let y=p==="auto"?"auto":g;y!==d&&(r.innerHTML="",d=y,a.view.render(r,{view:"toggle-group",beforeToggles:'text:"Color schema"',onChange:v=>{d=v,a.darkmode.set(v),f()},value:y,data:[{value:!1,text:"Light"},{value:!0,text:"Dark"},{value:"auto",text:"Auto"}]},null,{widget:a}))},!0)}})}function gA(t){t.nav.append({name:"inspect",onClick:()=>t.inspectMode.set(!t.inspectMode.value),postRender(e){e.title="Enable view inspection"}})}function Ip(t,e){let r=[],i=(s,a,f)=>{switch(a){case"after":a=r.findIndex(d=>d.name===f),a===-1?a=r.length:a++;break;case"before":a=r.findIndex(d=>d.name===f),a===-1&&(a=r.length);break;default:(a===void 0||isNaN(a)||!isFinite(a))&&(a=r.length)}r.splice(Math.max(0,Math.min(r.length,a)),0,t.view.composeConfig(e,s))};return Object.assign(r,{insert:i,prepend(s){i(s,0)},append(s){i(s)},before(s,a){i(a,"before",s)},after(s,a){i(a,"after",s)},replace(s,a){let f=r.findIndex(d=>d.name===s);f!==-1?r[f]=a:i(a)},remove(s){let a=r.findIndex(f=>f.name===s);if(a!==-1)return r.splice(a,1)[0]}})}var lu=class{constructor(e){let r=X("div","powered-by-discoveryjs",["powered by ",X("a",{class:"view-link",href:"https://github.com/discoveryjs/discovery",target:"_blank"},"Discovery.js"),` ${zh}`]);this.host=e,this.popup=null,this.data=null,this.context=null,this.primary=Ip(e,"nav-button"),this.secondary=Ip(e,"nav-button"),this.menu=Ip(e,"menu-item"),this.config=[this.secondary,{view:"nav-button",name:"burger",data:()=>{let i=Wi();return this.host.view.render(i,this.menu,this.host.data,{...this.context,hide:()=>this.popup&&this.popup.hide()}).then(()=>[...i.childNodes].filter(s=>s.nodeType===1||s.nodeType===3))},whenData:!0,onClick:(i,s)=>{this.popup||(this.popup=new this.host.view.Popup({className:"discovery-nav-popup"}),this.popup.el.addEventListener("click",({target:a})=>{a.closest("a[href]")&&setTimeout(()=>this.popup.hide(),50)},!0)),this.popup.toggle(i,a=>a.append(...s,r))}},this.primary],Object.assign(this,this.secondary),this.contentRect=new ul,this.contentRect.subscribe(({width:i,height:s})=>{let{container:a}=e.dom;a&&(a.style.setProperty("--discovery-nav-width",i+"px"),a.style.setProperty("--discovery-nav-height",s+"px"))})}render(e,r,i){this.contentRect.observe(e),e&&(this.data=r,this.context={...i,widget:this.host},this.host.view.setViewRoot(e,"nav",{config:this.config,data:this.data,context:this.context}),e.innerHTML="",this.host.view.render(e,this.config,this.data,this.context))}};var Xo=new Map,zp=null;function Sj(){zp=null;for(let[t,e]of Xo.entries())console.groupCollapsed(`${t} (${e.length})`),e.forEach(r=>console.warn(...r)),console.groupEnd();Xo.clear()}function Aj(t,...e){zp===null&&Xo.size===0&&(zp=setTimeout(Sj,1)),Xo.has(t)?Xo.get(t).push(e):Xo.set(t,[e])}function vA(t,e,r){switch(typeof e){case"function":return e;case"string":return Object.assign(i=>i&&Object.hasOwnProperty.call(i,e)?i[e]:void 0,{getterFromString:`object[${JSON.stringify(e)}]`});default:throw new Error(`[Discovery] Bad type "${typeof key}" for ${r} in object marker "${t}" config (must be a string or a function)`)}}function mA(t,e,r,i){return e&&hasOwnProperty.call(e,r)?vA(t,e[r],`"${r}" option`):i}function yA(t,e,r){return(Array.isArray(e[r])?e[r]:[]).map(i=>vA(t,i,`"${r}" option`))}function Tj(t){let{name:e,indexRefs:r,lookupRefs:i,page:s,getRef:a,getTitle:f}=t;s&&(a!==null?r.unshift(a):console.warn(`Option "ref" for "${e}" marker must be specified when "page" options is defined ("page" option ignored)`)),r.length>0&&i.unshift(k=>k);let d=new Set,g=new Map,p=new Map,y=new WeakMap;return{page:a!==null?s:null,mark:k=>{if(k===null||typeof k!="object"){console.warn(`Invalid value used for "${e}" marker (should be an object)`);return}d.add(k);for(let T of r){let L=T(k),A=L===null?"null":typeof L;if(A==="object"||A==="string"||A==="number"){if(!g.has(L)){g.set(L,k);continue}g.get(L)!==k&&Aj(`The same reference value used for different objects for "${e}" marker`,`Reference value "${L}"`,{refGetter:T.getterFromString||T,ref:L,currentObject:g.get(L),newObject:k})}}},lookup:k=>{let T=k===null?"null":typeof k;if(T!=="object"&&T!=="string"&&T!=="number")return null;if(p.has(k))return p.get(k);if(y.has(k))return y.get(k);let L=null,A=null;if(d.has(k))A=k;else for(let N of i){let S=N(k);if(g.has(S)){A=g.get(S);break}}if(A!==null){if(p.has(A))L=p.get(A);else{let N=a!==null?a(A):null;L=Object.freeze({type:e,object:A,ref:N,title:f(A),href:s!==null&&N!==null?`#${encodeURIComponent(s)}:${encodeURIComponent(N)}`:null}),p.set(A,L)}k!==A&&(typeof k!="object"?p.set(k,L):y.set(k,L))}return L}}}var fl=class extends Fn{define(e,r){if(this.isDefined(e)){console.error(`[Discovery] Object marker "${e}" is already defined, new definition ignored`);return}r=r||{};let i=yA(e,r,"refs"),s=yA(e,r,"lookupRefs"),a=typeof r.page=="string"?r.page:null,f=mA(e,r,"ref",null),d=mA(e,r,"title",f||(()=>null));return super.define(e,Tj({name:e,indexRefs:i,lookupRefs:s,page:a,getRef:f,getTitle:d}))}lookup(e,r){if(r)return this.get(r)?.lookup(e);for(let{lookup:i}of this.values){let s=i(e);if(s!==null)return s}return null}lookupAll(e){let r=[];for(let{lookup:i}of this.values){let s=i(e);s!==null&&r.push(s)}return r}};var bA="1.0.0-beta.8";var sn=Object.hasOwn||((t,e)=>Object.hasOwnProperty.call(t,e)),Lj=Object.prototype.toString;function Zo(t,e){return e!==void 0&&(Array.isArray(e)?e.forEach(r=>t.add(r)):t.add(e)),t}function Bp(t,e,r){t.has(e)?t.get(e).add(r):t.set(e,new Set([r]))}function wA(t,e){return t&&sn(t,e)?t[e]:void 0}function dr(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function ki(t){return Lj.call(t)==="[object RegExp]"}function Zr(t){return t&&sn(t,"length")&&isFinite(t.length)}function hr(t){if(Array.isArray(t))return t.length>0;if(dr(t)){for(let e in t)if(sn(t,e))return!0;return!1}return!!t}var Ej=function(){return{yy:{},options:{ranges:!0},rules:[/^(?:\/\/.*?(?:\n|\r\n?|\u2028|\u2029|$)|\/\*(?:.|\s)*?(?:\*\/|$))/,/^\s+/,/^\//,/^<(?!=)/,/^/,(e,r)=>{if(e[0]!==(r==="template"?"}":"`"))return null;for(let i=1;i<e.length;i++){if(e[i]==="`")return i+1;if(e[i]==="$"&&e[i+1]==="{")return i+2;e[i]==="\\"&&i++}return null},(e,r)=>{if(e[0]!==(r==="template"?"}":"`"))return null;for(let i=1;i<e.length;i++){if(e[i]==="`")return i+1;if(e[i]==="$"&&e[i+1]==="{")return i+2;e[i]==="\\"&&i++}return null},/^/,/^\(/,/^\)/,/^\[/,/^\]/,/^\{/,/^\}/,/^(?:(true|false|null|undefined|Infinity|NaN)\b)/,/^and\b/,/^or\b/,/^has\s+no\b/,/^has\b/,/^in\b/,/^not\s+in\b/,/^not\b/,/^no\b/,/^(?:(asc|desc)(NA?|AN?)?\b)/,/^is\b/,/^if\b/,/^then\b/,/^else\b/,/^(?:(\d+\.|\.)?\d+([eE][-+]?\d+)?\b)/,/^0[xX][0-9a-fA-F]+/,/^(?:"(?:\\[\\"]|[^"])*")/,/^(?:'(?:\\[\\']|[^'])*')/,/^(?:\/(?:\\.|[^/])+\/[gimsu]*)/,/^(?:(?:[a-zA-Z_]|\\u[0-9a-fA-F]{4})(?:[a-zA-Z_$0-9]|\\u[0-9a-fA-F]{4})*)/,/^(?:\$(?:[a-zA-Z_]|\\u[0-9a-fA-F]{4})(?:[a-zA-Z_$0-9]|\\u[0-9a-fA-F]{4})*)/,/^@/,/^#/,/^\$\$/,/^\$/,/^=>/,/^<(?!=)/,/^=/,/^!=/,/^~=/,/^>=/,/^<=/,/^</,/^>/,/^\.\.\(/,/^\.\(/,/^\.\[/,/^\.\.\./,/^\.\./,/^\./,/^\?\?/,/^\?/,/^,/,/^:/,/^;/,/^\-/,/^\+/,/^\*/,/^\//,/^\%/,/^(?:\|)/,/^./,/^$/],conditions:{preventPrimitive:{rules:[0,1,2,3,4,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66],inclusive:!0},template:{rules:[6,7],inclusive:!1},INITIAL:{rules:[0,1,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66],inclusive:!0}},performAction(e,r,i,s){let a=s;switch(i){case 0:{e.commentRanges.push(r.yylloc.range);break}case 1:break;case 2:{return this.popState(),39;break}case 3:{return this.popState(),43;break}case 4:{this.done=!1,this.popState();break}case 5:{let f=r.yytext.endsWith("`")?"TEMPLATE":"TPL_START";return r.yytext=this.toStringLiteral(r.yytext,!0,1+ +(f!=="TEMPLATE")),f==="TEMPLATE"&&e.pps(),f;break}case 6:{let f=r.yytext.endsWith("`")?"TPL_END":"TPL_CONTINUE";return r.yytext=this.toStringLiteral(r.yytext,!0,1+ +(f!=="TPL_END")),this.popState(),f==="TPL_END"&&e.pps(),f;break}case 7:{this.parseError("Unexpected end of input");break}case 8:return 64;case 9:{return e.pps(),65;break}case 10:return 60;case 11:{return e.pps(),62;break}case 12:return 82;case 13:{if(this.bracketStack[this.bracketStack.length-1]!=="TPL_END")return e.pps(),83;this.unput("}"),this.begin("template");break}case 14:{return r.yytext=this.toLiteral(r.yytext),56;break}case 15:return 35;case 16:return 36;case 17:return 34;case 18:return 32;case 19:return 31;case 20:return 33;case 21:return 25;case 22:return 26;case 23:return 92;case 24:return 29;case 25:return"IF";case 26:return"THEN";case 27:return"ELSE";case 28:{return e.pps(),r.yytext=Number(r.yytext),54;break}case 29:{return e.pps(),r.yytext=parseInt(r.yytext,16),54;break}case 30:{return e.pps(),r.yytext=this.toStringLiteral(r.yytext),53;break}case 31:{return e.pps(),r.yytext=this.toStringLiteral(r.yytext),53;break}case 32:{return e.pps(),r.yytext=this.toRegExp(r.yytext),55;break}case 33:{return e.pps(),r.yytext=this.ident(r.yytext),14;break}case 34:{return e.pps(),r.yytext=this.ident(r.yytext.slice(1)),15;break}case 35:{return e.pps(),50;break}case 36:{return e.pps(),51;break}case 37:{return e.pps(),52;break}case 38:{return e.pps(),9;break}case 39:return 22;case 40:{return this.fnOpened++,20;break}case 41:return 41;case 42:return 42;case 43:return 47;case 44:return 46;case 45:return 44;case 46:return 43;case 47:return this.fnOpened?(this.fnOpened--,21):45;case 48:return 70;case 49:return 67;case 50:return 68;case 51:return 86;case 52:{return e.pps(),69;break}case 53:{return e.pps(),66;break}case 54:return 37;case 55:return 17;case 56:return 72;case 57:return 11;case 58:return 10;case 59:return 27;case 60:return 28;case 61:return 38;case 62:return 39;case 63:return 40;case 64:return 24;case 65:{this.parseError(`Bad input on line ${r.yylloc.first_line} column ${r.yylloc.first_column}
`+this.showPosition(),{text:r.yytext,token:"BAD_TOKEN"});break}case 66:return 5}},setInput(e,r){return this.yy=r||this.yy||{},this._input=e,this._more=!1,this._backtrack=!1,this.done=!1,this.currentCondition="INITIAL",this.conditionStack=["INITIAL"],this.offset=0,this.yytext=this.match="",this.yyleng=0,this.yylineno=0,this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.yylloc.range=[0,0],this},parseError(e,r){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,r)},input(){let e=this._input[this.offset],r=/\n|\r\n?|\u2028|\u2029/g.test(e);return this.offset++,this.yyleng++,this.yytext=this.match=this.yytext+e,r?(this.yylineno++,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++,this.yylloc.range[1]++,e},lineColumnForOffset(e=this.offset,r=this._input,i=1,s=0){let a=/\n|\r\n?|\u2028|\u2029/g,f=i,d=s,g=0,p;for(;(p=a.exec(r))!==null;)if(p.index<e)f++,d=0,g=p.index+p[0].length;else{d+=e-g,g=-1;break}return g!==-1&&(d+=e-g),{line:f,column:d}},setMatch(e,r){let i=this._input.slice(e,r),s=e!==this.offset?this.lineColumnForOffset(e):{line:this.yylloc.last_line,column:this.yylloc.last_column},a=e!==r?this.lineColumnForOffset(r-e,i,s.line,s.column):s;this.yytext=this.match=i,this.yyleng=r-e,this.offset=r,this.yylineno=a.line-1,this.yylloc={first_line:s.line,first_column:s.column,last_line:a.line,last_column:a.column},this.yylloc.range=[e,r]},less(e){let r=this.offset-this.match.length;this.setMatch(r,r+e)},unput(e){let r=this.match.length-e.length;if(!this.match.startsWith(e,r))throw new Error("Lexer#unput() should receive a part of matched text only");this.less(r)},more(){this._more=!0},reject(){throw new Error("reject() is allowed only when options.backtrack_lexer = true")},showPosition(e=this.offset-this.match.length){let r=this._input,i=Math.max(e-20,0),s=Math.min(e+20,r.length),a=(i===0?"":"...")+r.slice(i,e).replace(/\n|\r\n?|\u2028|\u2029/g,"\\n"),f=r.slice(e,s).replace(/\n|\r\n?|\u2028|\u2029/g,"\\n")+(s===r.length?"":"...");return a+f+`
${"-".repeat(a.length)}^`},test_match(e,r){let i;this._more=!1,this._backtrack=!1,this.setMatch(this.offset,this.offset+e[0].length),this.matches=e;let s=this.performAction.call(this,this.yy,this,r,this.conditionStack[this.conditionStack.length-1]);return!s&&this._backtrack?(Object.assign(this,i),!1):(this.eof()||(this.done=!1),typeof s=="number"&&this.yy.parser?this.yy.parser.terminals_[s]:s||!1)},eof(){return this.offset===this._input.length},next(){if(this.done)return 1;this.eof()&&(this.done=!0),this._more||(this.yytext="",this.match="");let e,r;for(let i of this.conditions[this.currentCondition].rules){let s=this.rules[i],a=this._input.slice(this.offset),f;if(typeof s=="function"){let d=s(a,this.currentCondition);switch(typeof d){case"string":f=[d];break;case"number":f=[a.slice(0,d)];break;default:f=d}}else f=a.match(s);if(f&&(!e||f[0].length>e[0].length)){e=f,r=i;break}}if(e)return this.test_match(e,r);if(this.eof())return 1;this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex(){let e;for(;!e;)e=this.next();return e},begin(e){this.currentCondition=e,this.conditionStack.push(e)},pushState(e){this.begin(e)},popState(){return this.conditionStack.pop(),this.currentCondition=this.conditionStack.length?this.conditionStack[this.conditionStack.length-1]:"INITIAL"},topState(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},stateStackSize(){return this.conditionStack.length}}}();function Rp(){this.yy={}}Rp.prototype={Parser:Rp,lexer:Ej,symbols_:{error:2,root:3,block:4,EOF:5,definitions:6,e:7,def:8,$:9,";":10,":":11,$ident:12,ident:13,IDENT:14,$IDENT:15,condConsequent:16,"?":17,condAlternate:18,query:19,FUNCTION_START:20,FUNCTION_END:21,FUNCTION:22,compareFunction:23,"|":24,NOT:25,NO:26,"-":27,"+":28,IS:29,assertion:30,IN:31,HAS:32,NOTIN:33,HASNO:34,AND:35,OR:36,"??":37,"*":38,"/":39,"%":40,"=":41,"!=":42,"<":43,"<=":44,">":45,">=":46,"~=":47,queryRoot:48,relativePath:49,"@":50,"#":51,$$:52,STRING:53,NUMBER:54,REGEXP:55,LITERAL:56,template:57,object:58,array:59,"[":60,sliceNotation:61,"]":62,"method()":63,"(":64,")":65,".":66,".(":67,".[":68,"..":69,"..(":70,arguments:71,",":72,templateString:73,templateStart:74,templateTail:75,templateEnd:76,templateContinue:77,TEMPLATE:78,TPL_START:79,TPL_CONTINUE:80,TPL_END:81,"{":82,"}":83,objectEntries:84,objectEntry:85,"...":86,arrayElements:87,arrayElement:88,assertionTerm:89,assertionList:90,compareExpr:91,ORDER:92,sliceNotationComponent:93,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",9:"$",10:";",11:":",14:"IDENT",15:"$IDENT",17:"?",20:"FUNCTION_START",21:"FUNCTION_END",22:"FUNCTION",24:"|",25:"NOT",26:"NO",27:"-",28:"+",29:"IS",31:"IN",32:"HAS",33:"NOTIN",34:"HASNO",35:"AND",36:"OR",37:"??",38:"*",39:"/",40:"%",41:"=",42:"!=",43:"<",44:"<=",45:">",46:">=",47:"~=",50:"@",51:"#",52:"$$",53:"STRING",54:"NUMBER",55:"REGEXP",56:"LITERAL",60:"[",62:"]",64:"(",65:")",66:".",67:".(",68:".[",69:"..",70:"..(",72:",",78:"TEMPLATE",79:"TPL_START",80:"TPL_CONTINUE",81:"TPL_END",82:"{",83:"}",86:"...",92:"ORDER"},productions_:[0,[3,2],[4,2],[4,1],[4,1],[4,0],[6,1],[6,2],[8,2],[8,4],[8,2],[8,4],[13,1],[12,1],[16,2],[16,1],[18,2],[18,1],[18,0],[7,1],[7,3],[7,2],[7,1],[7,3],[7,4],[7,2],[7,2],[7,2],[7,2],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[19,1],[19,1],[48,1],[48,1],[48,1],[48,1],[48,1],[48,1],[48,1],[48,1],[48,1],[48,1],[48,1],[48,1],[48,3],[48,2],[48,2],[48,1],[48,1],[48,3],[48,4],[48,2],[48,2],[48,3],[48,3],[48,2],[48,2],[48,3],[49,3],[49,4],[49,4],[49,3],[49,3],[49,4],[49,4],[49,3],[49,3],[49,4],[63,3],[63,4],[63,3],[63,4],[71,1],[71,3],[57,1],[57,2],[75,1],[75,2],[75,2],[75,3],[73,1],[74,1],[77,1],[76,1],[58,2],[58,3],[58,4],[58,3],[58,4],[58,5],[84,1],[84,3],[85,1],[85,1],[85,1],[85,3],[85,3],[85,3],[85,3],[85,3],[85,5],[85,1],[85,2],[87,1],[87,3],[88,1],[88,1],[88,2],[59,2],[59,3],[59,4],[30,1],[30,2],[30,3],[30,4],[89,1],[89,1],[89,1],[89,1],[90,1],[90,3],[90,3],[23,1],[23,3],[91,2],[61,1],[61,2],[61,2],[61,3],[93,1],[93,2]],table:function(e){function r(w){let k=w.match(/[\x20-\x2f]/g),T=k?Math.max(...k.map(L=>L.charCodeAt()-32)):-1;for(let L=T;L>=0;L--){let A=(32+L).toString(16),N;w=w.replace(new RegExp("\\[\\x"+A+"(.+?)\\]"),(S,M)=>N=M).replace(new RegExp("\\x"+A,"g"),N)}return w=w.replace(/<([^>]+?)>/g,(L,A)=>{let N=a[A[0]],S=1;return N>>5===1&&(N=N&31|a[A[1]]<<5,S=2),A.slice(S).repeat(N)}),w}function i(w){let k=[];for(let T=0;T<w.length;T++){let L=a[w[T]];if(L&32){let A=a[w[++T]];k.push(L&31|A<<5)}else k.push(L)}return k}let a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789~|=".split("").reduce((w,k,T)=>(w[k]=T,w),Object.create(null)),[f,d,...g]=e.split("=").map(r),p=d.split(";").map(w=>{let k=[];for(let T=0;T<w.length;T++)for(let L=0,A=a[w[T]];L<3;L++)k.push(A>>L*2&3);return k}),y=g.map(i),v=i(f).map(w=>{let k=p[w],T=Object.create(null);for(let L=0;L<k.length;L++){let A=k[L];if(A!==0){let N=y[A-1].shift();T[L]=A===1?N:[A-1,N]}}return T});for(let w=0;w<y[3].length;w+=2)v[y[3][w]][y[3][w+1]]=[3];return v}(`ABCDEFGHIJIIIIKLMMMN<KM>OPQRMSTUVTUMWXYNMZaEFSP<TI>QMbTUVTUcdMRIeeffFIFIgBhBMiBjBkBlBmBnBMMoBpB<FM>YgBqBrBRMsBt[ BhBRMt]BMMuBWMZMvBwBxByByBz<DB0>BI1B2B2BrBM<E3B>4B5Beff<D6B>7B7B<E8B>7BMM9<C >BMM~B|B|BMgChCMMiCjCjBkClCMpBmCnC2BMgCMqBMMMMWMMoCMvB<FI>pCqC2B<FM>FFMIMlBlCjCmCMPPMMMMxBxBzBMoCr<ECs>C0BhCMnCnCIMIsCsC=A1[ V[!C["lmkYoq]]]<GA>[#[$[%[&lqqVCJqK]U]['[(AKIAAE];]]A];Ag;AwU[)Clmkboq]<GA>[*lqqVy5qK]U'AwAA[+AkADCqo]<Fq>AAAAww<IA>g;AwADwzwP8|<GA>w||Az8|PAAP8[,[-w[.;AwA8A]][/wADD|8]]<F|>AAAAywqKDAwzAAw;AEV)<GA>#AE!<GA>#wA8A/<F|>AAAAzw|PCAwzAAw;AwAoA/<F|>AAAAzw|PDAwzAAw;AwAoA/<F|>AAAAz4|PDAwzAA,<F|>AAAAzw|PDAwzAA,<F|>AAAAz8|PDAwzAAw;AAEi"<GA>lqqVmJqKUAKIgFEB;AAAChCAAIAB<HA>gAAI<HA>Q;AwAsAwBDD|8<F|>AAAAzw|PDAwzAA,<F|>AAAAz4|PDAwzAAw;AA <GA>#AAAlC<PA>B;AE <GA>lqqVC5qKU'AE <GA>lqqVyJqKU'AAE!<GA>%VqKAAE;AARClC<LA>giAC<GA>gl;AwE~lmkbrq8<F|>*XA67AA0;AAADwzwM8|<GA>w||ADM|PAA|P;M;AAEi"<GA>lqqVmJqKU(B;<HA>C;AwA8+<Fq>AAAAzw|PDAwzAAg.0ADDqo6vqqqAAAAzw|PDAwzAA-0ADDv8|v6||AAAAzw|PDAwzAAw;AAE!<GA>lqqVCpqaU(<C;AAAAAAAAAAAAAAAAAAAAg>AAAC;AAAg<QA>w<KA>B;AAAgAkAACqo<Fq>AAAAwAAAD<FA>gB;<UA>wAAAD;AAEy"<GA>lqqVyJqKU'AAE!<GA>lqqVyJqKX'AAAChC<MA>gAAI<HA>Q;AAAChCAAIAB<HA>gAAI<HA>QB;<FA>kAACqo<Fq><FA>g<IA>g;AAU!<GA>$<VA>I;<VA>g;<FA>kAACqo<Fq><JA>UgCAAg;<YA>CAAg;AAQClC<LA>giAC<GA>gl;<YA>DAAw;AAAo<UA>DAAw;AAAg<UA>DAAw;AAAg;AAAClmEAAg<GA>&XAK4.kADDqo<Fq>AAAAzw|PDAwzAA-0ADDq8|vqqqAAAAzw|PDAwzAA-0ADDqo6rqqqAAAAzw|PDAwzAA-0ADDqoqrqqqAAAAzw|PDAwzAA-0ADDv8<F|>AAAAzw|PDAwzAA-0ADDq8|v6r6AAAAzw|PDAwzAA-0ADDq8|v6||AAAAzw|PDAwzAAw;AAAgAkAACqo<Fq>AAAAg<JA>gB;<FA>kAACqo<Fq><OA>g;AAAIAkAACqo<Fq><OA>g;<VA>gAAC;<FA>kAACqo<Fq><FA>wAAD<FA>g;AAE!<GA>lqqViJqKUAKIgEE;<UA>w;AAAwAkAACqo<Fq>AAAAw<JA>g;<FA>kAACqo<Fq>AAAAwAAAD<FA>g;<LA>gC<IA>g;<LA>wD<IA>w;AAAClC<LA>giAC<GA>gk;<FA>kAACqo<Fq>AAAAg<JA>g;<UA>CAqKDAAw;AAAIAkAACqo<Fq><IA>DAAwAAg;<FA>kAACqo<Fq><IA>DAAwAAg=B[ C[!D["E[#F[$P[%[&['[(hBgBGJQRbcd]iB]pBqB]S]]]]]x]ByB$oCw CzC%1CzC%2CzC%3CzC%4CzC%iDzC(~C[)iBpBqB]gDjDShDsDmDnDuDyDxD#1DzD0D2D!3D!1D4D5D6D!9DzC&7D8D~DSjEFmEnEiEkEtEzC%oCvEu"sDwEnDxEzC%yEzC%zEzC%0EzC%1EzC%2EzC%3EzC%4EzC%5EzC%6EzC%7EzC%8EzC%9EzC%~EzC%|EzC%gFzC%hFzC%iFzC%jFzC%kFmFzC(nF)ShD1DoFpFqF!rF!1DsFtFuF!oCxFzC&wF<EoC>yFzC%zF[*zC%2FzC']1FpBqBS6FoC7F8FzC%9FzC%sD~F[+sDhGnD]gGiG*kGpBqBSoCmGyB$oCqGrG[,9DzC&s]G8D~DSyBmEnEwGkE2GzC%zChBgB3GQRbcd)oCoC4GyB$<UoC>7F<EoC>kHzC&jHSlHoCoC+mHoCoC,H8D~DS[-wHnEuH]zHzC%0HzC%1HzC%2HzC%3[.HzC%oC]oC5.sD7HnDsD8HnD-<GoC>gIzC%hIzC%oCoC=[ [!O["[#[$[%tBTsBHIKLMN[&fUVWXYZae]]jB]['kBlBmBnBoBuBvB]]rB]]w]B![([)sBz[*B[+[,[-9B8B0B]1B2B3B4B]5B]6B[.7[/B~B|BgC]hCiCjCkClCmCnC]]]pC]qCrCsCtCuCvC!yC"0C<EyC">5C6C7C8C9CyCkD%|CjB'rBlDrDqDToDtDpDvDwD<C!tBT!>yC#gE|DrBlEtBToEpEqErEhEsEyC"(!rDqDToDtDpD<TyC">vDyCkD%lFjB'rBtBT<C!>tBT!vF(9CyC"<C,~B|BgChCiCjCkClCmCnC><C0/><CyC">yC$0F'rB3F4F5FkDkD(<CyC">rDqDTtD|FrDqDToDtDpDyC"yC$jG'rB)lGpC D9CnGoGwDpG)gE|DpCyC#gE|DrBuGtGlEtBToEpEqErEvGsE5C6C7CxGyGzG0G1GyC"yCtBTsB&jB'rB<Cs*>!<E-~B|BgChCiCjCkClCmCnC>,.+.,~B|BgChCiCjCkClCmCn<CC0B~B|Bg>C<D0B><C-~B|BgCjCkClCmC><F-~B|BgC>jCkClCmCkD)5GpC6GwD7G8GwD9G(~G(|G(gHhH(yC%iHjB'rBlDkD<C(>rDqDToDtDpDoHpHnHs*qHhH)rHpCyC#gE|DrBvHtBToEpEqErEtHsEyHxH<FyC">)4HpCqCrCsCtCuCvCs*yC"(oHpH6H<CrDqDToDtDpD>9HvHtBToEpEqErE~HsE|G<F(>|H(<CyC"><C(>=FDDDDEEEE<iBG><hBT>F<mBW><lB2B><lB4B><nByB><nBzB><nBuE><oBN><nB0B><nB1B><nB3B><nB5B><nB6B><nB7B><nB8B><nB9B><nB~B><nB|B><mBS><nBjC><nBkC>FFF<nB~C><dP><oBM><nBkD><elD>BCCCC<iBH><mBS><nBwE>FFF<QV><nB2B><nB4B><WZ><Wa><jBb><jBc><iBI><iBK><nBgE>xE9D9D7D7D1E1E~D~D<nBhC><nBjE><nBnE><nBoE><nBpE><nBqE><nBiC><dR><nBnC><nBoC><nBrC><nBsC><nB|C><nBgD><nBnD><emD><nBoD>uDu[ DwDwDxDxD]yDyD5D5D<SO><SX><nBd><ae><af><agB><ahB><ViB><UjB><WkB><jBlB><jBmB><mBnB><mBoB><mBpB><dqB><drB><hBsB><hBtB><hBuB><hBvB><dwB><nBxB><nBuC><nBxC><nByC><nB1C><nB2C><nBU><nBvE><nB6C>8C8C<nBgC><nBhE>yEzE2E2E|D|D<nBkE><DrE><SQ><nB4C><nBlC><nBpC><nBqC><nBtC><nBhD><nBiD><nBpD><nBrD>6D6D<SY><nBvC><nBwC><nBzC><nB0C><nB3C><iBJ><iBL><nB7C><nBiE>8D8D9D9D0<nBEl>E<nB5C><nBmC><nBjD><nBqD>vDv <nBsD>3D3DzDzD0D0D1D1D2D2D9C9C<nBmE><DsE><DtE><nBtD>3D3D4D4D=BB`),defaultActions:{48:[2,1],186:[2,146],229:[2,148]},performAction(t,e,r,i,s,a,f){let d=a.length-1;switch(s){case 1:return i.buildResult(a[d-1]);case 2:this.$={type:"Block",definitions:a[d-1],body:a[d],range:this._$.range};break;case 3:this.$={type:"Block",definitions:a[d],body:{type:"Placeholder",range:[f[d].range[1],f[d].range[1]]},range:this._$.range};break;case 4:this.$={type:"Block",definitions:[],body:a[d],range:this._$.range};break;case 5:this.$={type:"Block",definitions:[],body:{type:"Placeholder",range:[f[d].range[1],f[d].range[1]]},range:this._$.range};break;case 6:case 92:case 94:case 110:case 123:case 139:case 142:this.$=[a[d]];break;case 7:a[d-1].push(a[d]);break;case 8:this.$={type:"Definition",declarator:{type:"Declarator",name:null,range:f[d-1].range},value:null,range:this._$.range};break;case 9:this.$={type:"Definition",declarator:{type:"Declarator",name:null,range:f[d-3].range},value:a[d-1],range:this._$.range};break;case 10:this.$={type:"Definition",declarator:{type:"Declarator",name:a[d-1].name,range:f[d-1].range},value:null,range:this._$.range};break;case 11:this.$={type:"Definition",declarator:{type:"Declarator",name:a[d-3].name,range:f[d-3].range},value:a[d-1],range:this._$.range};break;case 12:case 13:case 135:case 136:this.$={type:"Identifier",name:a[d],range:this._$.range};break;case 14:case 16:case 150:this.$=a[d];break;case 15:case 17:case 18:case 149:this.$=null;break;case 19:case 50:case 51:case 62:case 63:case 125:break;case 20:this.$={type:"Function",arguments:[],body:a[d-1],legacy:!0,range:this._$.range};break;case 21:this.$={type:"Function",arguments:[],body:a[d],legacy:!1,range:this._$.range};break;case 22:this.$={type:"CompareFunction",compares:a[d],range:this._$.range};break;case 23:this.$={type:"Pipeline",left:a[d-2],right:a[d],range:this._$.range};break;case 24:this.$={type:"Pipeline",left:a[d-3],right:{type:"Block",definitions:a[d-1],body:a[d]},range:this._$.range};break;case 25:case 26:case 27:case 28:case 65:this.$={type:"Prefix",operator:a[d-1],argument:a[d],range:this._$.range};break;case 29:this.$={type:"Postfix",operator:a[d],argument:a[d-2],range:this._$.range};break;case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:this.$={type:"Binary",operator:a[d-1],left:a[d-2],right:a[d],range:this._$.range};break;case 49:this.$={type:"Conditional",test:a[d-2],consequent:a[d-1],alternate:a[d],range:this._$.range};break;case 52:this.$={type:"Data",range:this._$.range};break;case 53:this.$={type:"Context",range:this._$.range};break;case 54:this.$={type:"Current",range:this._$.range};break;case 55:this.$={type:"Arg1",range:this._$.range};break;case 56:this.$={type:"Reference",name:a[d],range:this._$.range};break;case 57:case 58:case 59:case 60:case 100:case 101:case 102:case 103:this.$={type:"Literal",value:a[d],range:this._$.range};break;case 61:this.$={type:"Template",values:a[d],range:this._$.range};break;case 64:this.$={type:"SliceNotation",value:null,arguments:a[d-1],range:this._$.range};break;case 66:this.$={type:"Conditional",test:null,consequent:a[d-1],alternate:a[d],range:this._$.range};break;case 67:case 71:this.$={type:"GetProperty",value:null,property:a[d],range:this._$.range};break;case 68:case 72:this.$={type:"MethodCall",value:null,method:a[d],range:this._$.range};break;case 69:this.$={type:"Parentheses",body:a[d-1],range:this._$.range};break;case 70:this.$={type:"Parentheses",body:{type:"Block",definitions:a[d-2],body:a[d-1]},range:this._$.range};break;case 73:this.$={type:"Map",value:null,query:a[d-1],range:this._$.range};break;case 74:this.$={type:"Filter",value:null,query:a[d-1],range:this._$.range};break;case 75:this.$={type:"MapRecursive",value:null,query:{type:"GetProperty",value:null,property:a[d]},range:this._$.range};break;case 76:this.$={type:"MapRecursive",value:null,query:{type:"MethodCall",value:null,method:a[d]},range:this._$.range};break;case 77:this.$={type:"MapRecursive",value:null,query:a[d-1],range:this._$.range};break;case 78:this.$={type:"Pick",value:a[d-2],getter:null,range:this._$.range};break;case 79:this.$={type:"Pick",value:a[d-3],getter:a[d-1],range:this._$.range};break;case 80:this.$={type:"SliceNotation",value:a[d-3],arguments:a[d-1],range:this._$.range};break;case 81:this.$={type:"GetProperty",value:a[d-2],property:a[d],range:this._$.range};break;case 82:this.$={type:"MethodCall",value:a[d-2],method:a[d],range:this._$.range};break;case 83:this.$={type:"Map",value:a[d-3],query:a[d-1],range:this._$.range};break;case 84:this.$={type:"Filter",value:a[d-3],query:a[d-1],range:this._$.range};break;case 85:this.$={type:"MapRecursive",value:a[d-2],query:{type:"GetProperty",value:null,property:a[d]},range:this._$.range};break;case 86:this.$={type:"MapRecursive",value:a[d-2],query:{type:"MethodCall",value:null,method:a[d]},range:this._$.range};break;case 87:this.$={type:"MapRecursive",value:a[d-3],query:a[d-1],range:this._$.range};break;case 88:this.$={type:"Method",reference:a[d-2],arguments:[],range:this._$.range};break;case 89:this.$={type:"Method",reference:a[d-3],arguments:a[d-1],range:this._$.range};break;case 90:this.$={type:"Method",reference:{type:"Reference",name:a[d-2]},arguments:[],range:this._$.range};break;case 91:this.$={type:"Method",reference:{type:"Reference",name:a[d-3]},arguments:a[d-1],range:this._$.range};break;case 93:case 111:case 124:case 143:a[d-2].push(a[d]);break;case 95:this.$=[a[d-1],...a[d]];break;case 96:case 145:this.$=[null,a[d]];break;case 97:case 147:this.$=[a[d-1],a[d]];break;case 98:this.$=[null,a[d-1],...a[d]];break;case 99:this.$=[a[d-2],a[d-1],...a[d]];break;case 104:case 107:this.$={type:"Object",properties:[],range:this._$.range};break;case 105:this.$={type:"Object",properties:a[d-1],range:this._$.range};break;case 106:this.$={type:"Object",properties:a[d-2],range:this._$.range};break;case 108:this.$={type:"Block",definitions:a[d-2],body:{type:"Object",properties:a[d-1]},range:this._$.range};break;case 109:this.$={type:"Block",definitions:a[d-3],body:{type:"Object",properties:a[d-2]},range:this._$.range};break;case 112:this.$={type:"ObjectEntry",key:{type:"Current"},value:null,range:this._$.range};break;case 113:this.$={type:"ObjectEntry",key:{type:"Reference",name:a[d]},value:null,range:this._$.range};break;case 114:this.$={type:"ObjectEntry",key:a[d],value:null,range:this._$.range};break;case 115:this.$={type:"ObjectEntry",key:a[d-2],value:a[d],range:this._$.range};break;case 116:case 117:case 118:this.$={type:"ObjectEntry",key:{type:"Literal",value:a[d-2]},value:a[d],range:this._$.range};break;case 119:this.$={type:"ObjectEntry",key:{type:"Identifier",name:"$"+a[d-2].name},value:a[d],range:this._$.range};break;case 120:this.$={type:"ObjectEntry",key:a[d-3],value:a[d],range:this._$.range};break;case 121:this.$={type:"Spread",query:null,array:!1,range:this._$.range};break;case 122:this.$={type:"Spread",query:a[d],array:!1,range:this._$.range};break;case 126:this.$={type:"Spread",query:null,array:!0,range:this._$.range};break;case 127:this.$={type:"Spread",query:a[d],array:!0,range:this._$.range};break;case 128:this.$={type:"Array",elements:[],range:this._$.range};break;case 129:this.$={type:"Array",elements:a[d-1],range:this._$.range};break;case 130:this.$={type:"Array",elements:a[d-2],range:this._$.range};break;case 131:this.$={type:"Assertion",negation:!1,assertion:a[d],range:this._$.range};break;case 132:this.$={type:"Assertion",negation:!0,assertion:a[d],range:this._$.range};break;case 133:this.$={type:"Assertion",negation:!1,assertion:a[d-1],range:this._$.range};break;case 134:this.$={type:"Assertion",negation:!0,assertion:a[d-1],range:this._$.range};break;case 137:this.$={type:"Method",reference:{type:"Reference",name:a[d]},arguments:[],range:this._$.range};break;case 138:this.$={type:"Identifier",name:String(a[d]),range:this._$.range};break;case 140:case 141:a[d-2].push(a[d-1],a[d]);break;case 144:this.$={type:"Compare",query:a[d-1],order:a[d],range:this._$.range};break;case 146:this.$=[null,a[d-1],a[d]];break;case 148:this.$=[a[d-2],a[d-1],a[d]];break}},trace(...t){this.DEBUG&&Jison.print(...t)},parseError(t,e){if(e.recoverable)this.trace(t);else{let r=new Error(t);throw r.hash=e,r}},parse(t,...e){let d=H=>{L.length-=2*H,A.length-=H,N.length-=H},g=()=>{let H=p.lex()||1;return typeof H!="number"&&(H=this.symbols_[H]||H),H},p=Object.create(this.lexer),y=p.options&&p.options.ranges,v={...this.yy,parser:this,lexer:p};p.setInput(t,v),typeof v.parseError=="function"&&(this.parseError=v.parseError),typeof p.yylloc>"u"&&(p.yylloc={});let w=this.table,k={},T=p.yylloc,L=[0],A=[null],N=[T],S=[],M="",O=0,z=0,I=0,_,U;for(;;){let H=L[L.length-1],ce;if(this.defaultActions[H]?ce=this.defaultActions[H]:((_===null||typeof _>"u")&&(_=g()),ce=w[H]&&w[H][_]),!ce||!ce[0]){let D=function(ae){let le=L.length-1,Se=0;for(;;){if(2 .toString()in w[ae])return Se;if(ae===0||le<2)return!1;le-=2,ae=L[le],++Se}},$,ie="";if(!I){let ae=[];for(let le in w[H])le in this.terminals_&&le>2&&ae.push("'"+this.terminals_[le]+"'");ie=p.showPosition?"Parse error on line "+(O+1)+`:
`+p.showPosition()+`
Expecting `+ae.join(", ")+", got '"+(this.terminals_[_]||_)+"'":"Parse error on line "+(O+1)+": Unexpected "+(_===1?"end of input":"'"+(this.terminals_[_]||_)+"'"),this.parseError(ie,{text:p.match,token:this.terminals_[_]||_,line:p.yylineno,loc:T,expected:ae})}if(I===3){if(_===1||U===1)throw new Error(ie||"Parsing halted while starting to recover from another error.");z=p.yyleng,M=p.yytext,O=p.yylineno,T=p.yylloc,_=g()}if($===!1)throw new Error(ie||"Parsing halted. No suitable error recovery rule available.");d($),U=_==2?null:_,_=2,H=L[L.length-1],ce=w[H]&&w[H][2],I=3}if(Array.isArray(ce[0])&&ce.length>1)throw new Error("Parse Error: multiple actions possible at state: "+H+", token: "+_);switch(ce[0]){case 1:L.push(_),A.push(p.yytext),N.push(p.yylloc),L.push(ce[1]),_=null,U?(_=U,U=null):(z=p.yyleng,M=p.yytext,O=p.yylineno,T=p.yylloc,I>0&&I--);break;case 2:{let $=this.productions_[ce[1]][1],ie=N[N.length-($||1)],D=N[N.length-1];k.$=A[A.length-$],k._$={first_line:ie.first_line,last_line:D.last_line,first_column:ie.first_column,last_column:D.last_column},y&&(k._$.range=[ie.range[0],D.range[1]]);let ae=this.performAction.call(k,M,z,O,v,ce[1],A,N,...e);if(typeof ae<"u")return ae;$&&d($),L.push(this.productions_[ce[1]][0]),A.push(k.$),N.push(k._$),L.push(w[L[L.length-2]][L[L.length-1]]);break}case 3:return!0}}}};var Dj=function(e){function r(S,M){Object.entries(M).forEach(([O,z])=>S[O]=z(S[O]))}let i=new Map([["EOF",["<end of input>"]],["IDENT",["ident"]],["$IDENT",["$ident"]],["FUNCTION_START",["'<'"]],["FUNCTION_END",["'>'"]],["FUNCTION",["'=>'"]],["NOT",["'not'"]],["NO",["'no'"]],["IS",["'is'"]],["THEN",["'then'"]],["ELSE",["'else'"]],["IN",["'in'"]],["HAS",["'has'"]],["NOTIN",["'not in'"]],["HASNO",["'has no'"]],["AND",["'and'"]],["OR",["'or'"]],["STRING",["string"]],["TPL_START",["template"]],["TEMPLATE",["template"]],["NUMBER",["number"]],["REGEXP",["regexp"]],["LITERAL",["'true'","'false'","'null'","'undefined'","'NaN'","'Infinity'"]],["ORDER",["'asc'","'desc'","'ascN'","'descN'"]]]),s=S=>i.get(S)||`'${S}'`,a=function(S,M={},O){if(M.recoverable)this.trace(S);else{if(Array.isArray(M.inside)){let H=O.lexer.offset-O.lexer.match.length;O.lexer.setMatch(H+M.inside[0],H+M.inside[1])}let z=O.lexer.yylloc,I=[S.split(/\n/)[0],"",O.lexer.showPosition()],_=Array.isArray(M.expected)?[...new Set([].concat(...M.expected.map(H=>s(H.slice(1,-1)))))]:null;_&&I.push("","Expecting "+_.join(", ")+" got "+s(M.token));let U=new SyntaxError(I.join(`
`));throw U.details={rawMessage:S,text:M.text,token:M.token,expected:_,loc:{range:z.range,start:{line:z.first_line,column:z.first_column,offset:z.range[0]},end:{line:z.last_line,column:z.last_column,offset:z.range[1]}}},U}},f=new Set([`
`,"\r","\u2028","\u2029"]),d=new Map([["undefined",void 0],["null",null],["false",!1],["true",!0],["Infinity",1/0],["NaN",NaN]]);Object.assign(e.lexer,{ident:S=>S.replace(/\\u[0-9a-fA-F]{4}/g,M=>String.fromCharCode(parseInt(M.slice(2),16))),toLiteral:S=>d.get(S),toStringLiteral(S,M=!1,O=1){let z=S.length-O,I="";for(let _=1;_<z;_++){if(!M&&f.has(S[_])&&this.parseError("Invalid line terminator",{inside:[_,_+1]}),S[_]!=="\\"){I+=S[_];continue}_===z-1&&this.parseError("Invalid backslash",{inside:[_,_+1]});let U=S[++_];switch(U){case"\r":_+=S[_+1]===`
`;break;case`
`:case"\u2028":case"\u2029":break;case"0":I+="\0";break;case"b":I+="\b";break;case"n":I+=`
`;break;case"r":I+="\r";break;case"f":I+="\f";break;case"t":I+="	";break;case"v":I+="\v";break;case"u":{let[H=""]=S.slice(_+1,_+5).match(/^[0-9a-f]*/i)||[];if(H.length===4){I+=String.fromCharCode(parseInt(H,16)),_+=4;break}this.parseError("Invalid Unicode escape sequence",{inside:[_-1,Math.min(_+1+H.length,z)]});break}case"x":{let[H=""]=S.slice(_+1,_+3).match(/^[0-9a-f]*/i)||[];if(H.length===2){I+=String.fromCharCode(parseInt(H,16)),_+=2;break}this.parseError("Invalid hexadecimal escape sequence",{inside:[_-1,Math.min(_+1+H.length,z)]});break}default:I+=U}}return I},toRegExp(S){let M=S.lastIndexOf("/")+1,O=S.substr(M);return O.split("").forEach((z,I,_)=>{let U=_.indexOf(z,I+1);U!==-1&&this.parseError("Duplicate flag in regexp",{inside:[M+U,M+U+1]})}),new RegExp(S.substr(1,S.lastIndexOf("/")-1),O)}}),r(e.lexer,{setInput:S=>function(M,O){let z=[];return O.commentRanges=z,O.buildResult=I=>({ast:I,commentRanges:z}),O.parseError=function(...I){return a.call(this,...I,O)},O.pps=()=>{this.eof()||this.begin("preventPrimitive")},this.fnOpened=0,this.fnOpenedStack=[],this.bracketStack=[],this.prevToken=null,this.prevYylloc={first_line:1,last_line:1,first_column:0,last_column:0,range:[0,0]},S.call(this,M,O)}});let g=new e.Parser;g.lexer={...e.lexer},g.yy={...e.yy};let p=["AND","OR","IN","NOTIN","HAS","HASNO","IS","THEN","ELSE"],y=[...p,"NOT","NO","ORDER"],v=["+","-","*","/","%","|","=","!=","~=",">=","<=","<",">"],w=[null,"?",":",";",",",".","..","(","[",".(","..(",".[","FUNCTION",...v,...p,"NOT","NO"],k=[",","?",":",";","EOF","]",")","}","TPL_CONTINUE","TPL_END",...v,...p,"ORDER"],T=new Map(w.map(S=>[S,new Set(k)]));for(let S of["(",".(","..("])T.get(S).delete(")");for(let S of["[",".["])T.get(S).delete("]");r(g.lexer,{lex:S=>function(){let O=this.offset,z=S.call(this);if(T.has(this.prevToken)&&T.get(this.prevToken).has(z)){let I={first_line:this.prevYylloc.last_line,last_line:this.yylloc.first_line,first_column:this.prevYylloc.last_column,last_column:this.yylloc.first_column,range:[this.prevYylloc.range[1],this.yylloc.range[0]]};if(this.unput(this.match),this.pushState("preventPrimitive"),this.done=!1,this.yytext="",this.yylloc=this.prevYylloc=I,O!==this.offset&&y.includes(z))switch(this._input[O]){case" ":case"	":I.last_column--,I.range[1]--;break;case`
`:{let _=this._input.lastIndexOf(`
`,O-1);I.last_line--,I.last_column=_===-1?I.last_column-1:O-_,I.range[1]--;break}}return this.prevToken="IDENT"}if(this.prevYylloc=this.yylloc,y.includes(z))switch(this._input[this.offset]){case" ":case"	":this.prevYylloc={...this.prevYylloc,last_column:this.prevYylloc.last_column+1,range:[this.prevYylloc.range[0],this.prevYylloc.range[1]+1]};break;case`
`:this.prevYylloc={...this.prevYylloc,last_line:this.prevYylloc.last_line+1,last_column:0,range:[this.prevYylloc.range[0],this.prevYylloc.range[1]+1]};break}return this.prevToken=z}});let L=new Map([["(",")"],[".(",")"],["..(",")"],["[","]"],[".[","]"],["{","}"],["TPL_START","TPL_END"]]),A=new Set([")","]","}","TPL_END"]),N=S=>function(){let O=S.call(this);if(A.has(O)){let z=this.bracketStack.pop();z!==O&&this.parseError(`Expected "${z}" got "${O}"`),this.fnOpened=this.fnOpenedStack.pop()||0}return L.has(O)&&(this.bracketStack.push(L.get(O)),this.fnOpenedStack.push(this.fnOpened),this.fnOpened=0),O};return r(e.lexer,{lex:N}),r(g.lexer,{lex:N}),{parse(S,M){return M?g.parse(S):e.parse(S)},*tokenize(S,M,O){let z=M?g:e,I=Object.create(z.lexer);for(I.setInput(S,{parser:z});!I.done;){let _={type:I.lex(),value:I.match,offset:I.yylloc.range[0]};O&&(_.loc={range:I.yylloc.range,start:{line:I.yylloc.first_line,column:I.yylloc.first_column},end:{line:I.yylloc.last_line,column:I.yylloc.last_column}}),yield _}}}}(new Rp),cu=Dj;var qp={};Ce(qp,{compile:()=>Nj,stringify:()=>Oj,walk:()=>Mj});function Nj(t,e){e.put(e.scope.arg1?"arguments[1]":"undefined")}function Mj(){}function Oj(t,e){e.put("$$")}var Fp={};Ce(Fp,{compile:()=>Ij,stringify:()=>Bj,suggest:()=>Pj,walk:()=>zj});function Pj(t,e){t.elements.length===0&&e.queryRoot(t.range[0]+1,t.range[1]-1)}function Ij(t,e){e.put("["),e.list(t.elements,","),e.put("]")}function zj(t,e){e.list(t.elements)}function Bj(t,e){e.put("["),e.list(t.elements,","),e.put("]")}var _p={};Ce(_p,{compile:()=>qj,stringify:()=>_j,suggest:()=>Rj,walk:()=>Fj});function Rj(t,e){Array.isArray(t.assertion)||(e.range(t.assertion.range,"var"),e.range(t.assertion.range,"assertion"))}function qj(t,e){if(Array.isArray(t.assertion)){e.put(t.negation?"!(":"(");for(let r=0;r<t.assertion.length;r++)if(r%2===0)e.node(t.assertion[r]);else switch(t.assertion[r]){case"and":e.put("&&");break;case"or":e.put("||");break;default:e.error("Bad conjuction operator in assertion",t)}e.put(")")}else switch(t.negation&&e.put("!"),t.assertion.type){case"Identifier":t.assertion.name?(e.put("!!"),e.tolerant&&e.put("(typeof "),e.put("a."),e.put(t.assertion.name),e.tolerant&&(e.put('==="function"?a.'),e.put(t.assertion.name)),e.put("("),e.nodeOrCurrent(),e.put(")"),e.tolerant&&e.put(":false)"),e.usedAssertions.has(t.assertion.name)?e.usedAssertions.get(t.assertion.name).push(t.assertion.range):e.usedAssertions.set(t.assertion.name,t.assertion.range)):e.put("false");break;case"Method":e.put("!!"),e.node(t.assertion);break;default:e.error('Unknown assertion node type "'+t.assertion.type+'"',t.assertion)}}function Fj(t,e){if(Array.isArray(t.assertion))for(let r=0;r<t.assertion.length;r++)r%2===0&&e.node(t.assertion[r]);else e.node(t.assertion)}function _j(t,e){if(t.negation&&e.put("not "),Array.isArray(t.assertion)){e.put("(");for(let r=0;r<t.assertion.length;r++)r%2===0?e.node(t.assertion[r]):(e.put(" "),e.put(t.assertion[r]),e.put(" "));e.put(")")}else e.node(t.assertion)}var jp={};Ce(jp,{compile:()=>Hj,stringify:()=>Uj,suggest:()=>jj,walk:()=>Wj});var xA={in:"in","not in":"notIn",has:"has","has no":"hasNo",and:"and",or:"or","??":"nullish","+":"add","-":"sub","*":"mul","/":"div","%":"mod","=":"eq","!=":"ne","<":"lt","<=":"lte",">":"gt",">=":"gte","~=":"match"};function uu(t,e,r){if(r.type==="Array"){if(r.elements.length===0){t.range([r.range[0]+1,r.range[1]-1],"value-subset",e,!1);return}let i=[];for(let{type:a,range:f,value:d}of r.elements)f&&(a==="Literal"||a==="Identifier")&&i.push(d);let s=i.length?t.literalList(i):!1;for(let{type:a,range:f,value:d}of r.elements)f&&(a==="Literal"||a==="Identifier"||a==="GetProperty"&&d===null)&&t.range(f,"value-subset",e,s)}}function jj(t,e){switch(t.operator){case"in":e.range(t.left.range,"in-value",t.right,null),uu(e,t.left,t.right);break;case"not in":uu(e,t.left,t.right);break;case"has":e.range(t.right.range,"in-value",t.left,null),uu(e,t.right,t.left);break;case"has no":uu(e,t.right,t.left);break;case"=":case"!=":e.range(t.right.range,"value",t.left,null);break}}function Hj(t,e){if(!(t.operator in xA)){e.error('Unknown operator "'+t.operator+'"',t);return}switch(t.operator){case"and":e.put("!");case"or":{let r=e.allocateVar();e.put(`${e.buildinFn("bool")}(${r}=`),e.node(t.left),e.put(`)?${r}:`),e.scope.captureCurrent.disabled=!0,e.node(t.right),e.scope.captureCurrent.disabled=!1;break}case"??":{let r=e.allocateVar();e.put(`(${r}=`),e.node(t.left),e.put(`,${r}!==null&&${r}!==undefined)?${r}:`),e.scope.captureCurrent.disabled=!0,e.node(t.right),e.scope.captureCurrent.disabled=!1;break}case"has no":e.put("!");case"has":e.put(e.buildinFn("in")),e.put("("),e.node(t.right),e.put(","),e.node(t.left),e.put(")");break;default:e.put(e.buildinFn(xA[t.operator])),e.put("("),e.node(t.left),e.put(","),e.node(t.right),e.put(")")}}function Wj(t,e){e.node(t.left),e.node(t.right)}function Uj(t,e){e.node(t.left),/^[a-z]/i.test(t.operator)?(e.put(" "),e.put(t.operator),e.put(" ")):e.put(t.operator),e.node(t.right)}var Hp={};Ce(Hp,{compile:()=>Gj,stringify:()=>Kj,suggest:()=>$j,walk:()=>Vj});function $j(t,e){t.body===null&&e.queryRoot(t.range[1])}function Gj(t,e){t.definitions.length?e.createScope(()=>{e.put("(()=>{"),e.list(t.definitions),e.put("return "),e.nodeOrCurrent(t.body),e.put("})()")},(r,i)=>r+i+";"):t.body&&t.body.type==="Object"?(e.put("("),e.nodeOrCurrent(t.body),e.put(")")):e.nodeOrCurrent(t.body)}function Vj(t,e){e.list(t.definitions),e.nodeOrNothing(t.body)}function Kj(t,e){e.list(t.definitions),e.nodeOrNothing(t.body)}var Wp={};Ce(Wp,{compile:()=>Yj,stringify:()=>Jj,walk:()=>Qj});var kA={"":"cmp",N:"cmpNatural",A:"cmpAnalytical",NA:"cmpNaturalAnalytical",AN:"cmpNaturalAnalytical"};function Yj(t,e){t.order.startsWith("desc")&&e.put("-"),e.createScope(()=>{let r=kA[t.order.slice(3+t.order.startsWith("desc"))]||kA[""];e.put(e.buildinFn(r)),e.put("((_q=$=>("),e.node(t.query),e.put("))(a),_q(b))")},(r,i)=>r+i+",")}function Qj(t,e){e.node(t.query)}function Jj(t,e){e.node(t.query),e.put(" "),e.put(t.order)}var Up={};Ce(Up,{compile:()=>Xj,stringify:()=>e3,walk:()=>Zj});function Xj(t,e){e.put("(a, b)=>{let _q;return "),e.list(t.compares,"||"),e.put("||0}")}function Zj(t,e){e.list(t.compares)}function e3(t,e){e.list(t.compares,",")}var $p={};Ce($p,{compile:()=>t3,stringify:()=>r3,walk:()=>n3});function t3(t,e){e.put(e.buildinFn("bool")),e.put("("),e.scope.captureCurrent.disabled=!0,e.nodeOrCurrent(t.test),e.put(")?"),e.nodeOrCurrent(t.consequent),e.put(":"),t.alternate?e.node(t.alternate):e.put("undefined"),e.scope.captureCurrent.disabled=!1}function n3(t,e){e.nodeOrNothing(t.test),e.nodeOrNothing(t.consequent),e.nodeOrNothing(t.alternate)}function r3(t,e){e.nodeOrNothing(t.test),e.put("?"),e.nodeOrNothing(t.consequent),t.alternate&&(e.put(":"),e.node(t.alternate))}var Gp={};Ce(Gp,{compile:()=>i3,stringify:()=>s3,walk:()=>o3});function i3(t,e){e.put("context")}function o3(){}function s3(t,e){e.put("#")}var Vp={};Ce(Vp,{compile:()=>l3,stringify:()=>u3,suggest:()=>a3,walk:()=>c3});function a3(t,e){t.range&&e.range(t.range,"var")}function l3(t,e){e.put("$")}function c3(){}function u3(t,e){e.put("$")}var Kp={};Ce(Kp,{compile:()=>f3,stringify:()=>h3,walk:()=>d3});function f3(t,e){e.put("data")}function d3(){}function h3(t,e){e.put("@")}var Yp={};Ce(Yp,{compile:()=>p3,stringify:()=>m3,walk:()=>g3});function p3(t,e){t.name&&e.put("$"+t.name)}function g3(){}function m3(t,e){e.put(t.name?"$"+t.name:"$")}var Qp={};Ce(Qp,{compile:()=>b3,stringify:()=>x3,suggest:()=>v3,walk:()=>w3});function fu(t,e){return{type:"GetProperty",value:t,property:e}}function du(t){return{type:"Identifier",name:t}}var y3=["data","context","ctx","array","idx","index"];function v3(t,e){t.value===null&&e.range(t.declarator.range,"path")}function b3(t,e){if(t.declarator.name===null){e.node(t.declarator),e.nodeOrCurrent(t.value),e.put(";");return}if(e.scope.own.includes(t.declarator.name)){e.error(`Identifier "$${t.declarator.name}" has already been declared`,t.declarator);return}if(y3.includes(t.declarator.name)){e.error(`Identifier "$${t.declarator.name}" is reserved for future use`,t.declarator);return}e.put("const "),e.node(t.declarator),e.put("="),e.node(t.value||fu(null,du(t.declarator.name))),e.put(";"),e.scope.push(t.declarator.name),e.scope.own.push(t.declarator.name)}function w3(t,e){e.node(t.declarator),e.nodeOrNothing(t.value)}function x3(t,e){e.node(t.declarator),t.value!==null&&(e.put(":"),e.node(t.value)),e.put(";")}var Jp={};Ce(Jp,{compile:()=>k3,stringify:()=>S3,walk:()=>C3});function k3(t,e){e.put(e.buildinFn("filter")),e.put("("),e.nodeOrCurrent(t.value),e.createScope(()=>{e.put(",$=>"),e.node(t.query)},(r,i)=>(e.put(")"),r+"("+i+",")),e.put(")")}function C3(t,e){e.nodeOrNothing(t.value),e.node(t.query)}function S3(t,e){e.nodeOrNothing(t.value),e.put(".["),e.node(t.query),e.put("]")}var Xp={};Ce(Xp,{compile:()=>A3,stringify:()=>L3,walk:()=>T3});function A3(t,e){e.createScope(()=>{e.scope.arg1=!0,e.put("function($){return "),e.node(t.body),e.put("}")},(r,i)=>r+i+",")}function T3(t,e){e.node(t.body)}function L3(t,e){t.legacy?(e.put("<"),e.node(t.body),e.put(">")):(e.put("=>"),e.node(t.body))}var Zp={};Ce(Zp,{compile:()=>D3,stringify:()=>M3,suggest:()=>E3,walk:()=>N3});function E3(t,e){e.range(t.property.range,"path",t.value||void 0,!t.value),t.value===null&&e.range(t.property.range,"var"),t.range&&t.value===null&&t.property.range[0]!==t.range[0]&&e.queryRoot(t.range[0])}function D3(t,e){e.put(e.buildinFn("map")),e.put("("),e.nodeOrCurrent(t.value),e.put(","),t.property.type==="Identifier"?e.put(JSON.stringify(t.property.name)):e.node(t.property),e.put(")")}function N3(t,e){e.nodeOrNothing(t.value),e.node(t.property)}function M3(t,e){e.nodeOrNothing(t.value)&&e.put("."),e.node(t.property)}var eg={};Ce(eg,{compile:()=>O3,stringify:()=>I3,walk:()=>P3});function O3(t,e){e.put(t.name)}function P3(){}function I3(t,e){e.put(t.name)}var tg={};Ce(tg,{compile:()=>z3,stringify:()=>R3,walk:()=>B3});function z3(t,e){e.put(typeof t.value=="string"?JSON.stringify(t.value):String(t.value))}function B3(){}function R3(t,e){e.put(typeof t.value=="string"?JSON.stringify(t.value):String(t.value))}var ng={};Ce(ng,{compile:()=>q3,stringify:()=>_3,walk:()=>F3});function q3(t,e){e.put(e.buildinFn("map")),e.put("("),e.nodeOrCurrent(t.value),e.createScope(()=>{e.put(",$=>"),e.node(t.query)},(r,i)=>(e.put(")"),r+"("+i+",")),e.put(")")}function F3(t,e){e.nodeOrNothing(t.value),e.node(t.query)}function _3(t,e){e.nodeOrNothing(t.value),e.put(".("),e.node(t.query),e.put(")")}var rg={};Ce(rg,{compile:()=>j3,stringify:()=>W3,walk:()=>H3});function j3(t,e){e.put(e.buildinFn("mapRecursive")),e.put("("),e.nodeOrCurrent(t.value),e.createScope(()=>{e.put(",$=>"),e.node(t.query)},(r,i)=>(e.put(")"),r+"("+i+",")),e.put(")")}function H3(t,e){e.nodeOrNothing(t.value),e.node(t.query)}function W3(t,e){e.nodeOrNothing(t.value),e.put(".."),e.isSimpleGetPropertyQuery(t.query)||e.isSimpleMethodCallQuery(t.query)?e.node(t.query):(e.put("("),e.node(t.query),e.put(")"))}var ig={};Ce(ig,{compile:()=>$3,stringify:()=>V3,suggest:()=>U3,walk:()=>G3});function U3(t,e){t.arguments.length===0&&e.queryRoot(t.range[1]-1)}function $3(t,e,r){e.tolerant&&e.put("(typeof "),t.reference.type==="Identifier"&&(e.usedMethods.has(t.reference.name)?e.usedMethods.get(t.reference.name).push(t.reference.range):e.usedMethods.set(t.reference.name,t.reference.range),e.put("m.")),e.node(t.reference),e.tolerant&&(e.put('==="function"?'),t.reference.type==="Identifier"&&e.put("m."),e.node(t.reference)),e.put("("),e.nodeOrCurrent(r),t.arguments.length&&(e.put(","),e.list(t.arguments,",")),e.put(")"),e.tolerant&&e.put(":undefined)")}function G3(t,e){e.node(t.reference),e.list(t.arguments)}function V3(t,e){e.node(t.reference),e.put("("),e.list(t.arguments,","),e.put(")")}var og={};Ce(og,{compile:()=>K3,stringify:()=>Q3,walk:()=>Y3});function K3(t,e){e.node(t.method,t.value)}function Y3(t,e){e.nodeOrNothing(t.value),e.node(t.method)}function Q3(t,e){e.nodeOrNothing(t.value)&&e.put("."),e.node(t.method)}var sg={};Ce(sg,{compile:()=>X3,stringify:()=>eH,suggest:()=>J3,walk:()=>Z3});function J3(t,e){t.properties.length===0&&e.queryRoot(t.range[0]+1,t.range[1]-1)}function X3(t,e){e.put("{"),e.list(t.properties,","),e.put("}")}function Z3(t,e){e.list(t.properties)}function eH(t,e){e.put("{"),e.list(t.properties,","),e.put("}")}var ag={};Ce(ag,{compile:()=>rH,stringify:()=>oH,suggest:()=>nH,walk:()=>iH});var tH=new Set(["Literal","Identifier","Reference","Current"]);function nH(t,e){if(t.value===null)switch(t.key.type){case"Identifier":e.range(t.range,"path"),e.range(t.range,"var");break;case"Current":case"Reference":e.range(t.range,"var");break}}function rH(t,e){let r=t.value;switch(t.key.type){case"Current":return;case"Literal":e.node(t.key);break;case"Identifier":e.node(t.key),r=r||fu(null,du(t.key.name));break;case"Reference":e.node(t.key.name),r=r||t.key;break;default:e.put("["),e.node(t.key),e.put("]")}e.put(":"),e.node(r)}function iH(t,e){e.node(t.key),e.nodeOrNothing(t.value)}function oH(t,e){if(tH.has(t.key.type)){if(e.node(t.key),t.value===null)return}else e.put("["),e.node(t.key),e.put("]");e.put(":"),e.node(t.value)}var lg={};Ce(lg,{compile:()=>sH,stringify:()=>lH,walk:()=>aH});function sH(t,e){e.put("("),e.node(t.body),e.put(")")}function aH(t,e){e.node(t.body)}function lH(t,e){e.put("("),e.node(t.body),e.put(")")}var cg={};Ce(cg,{compile:()=>uH,stringify:()=>dH,suggest:()=>cH,walk:()=>fH});function cH(t,e){if(t.getter===null){let r=t.range[1]-1;e.range([r,r],"key",t.value,!1),e.queryRoot(r)}else(t.getter.type==="GetProperty"||t.getter.type==="Reference"||t.getter.type==="Literal"&&typeof t.getter.value=="string")&&e.range(t.getter.range,"key",t.value,!1)}function uH(t,e){e.put(e.buildinFn("pick")),e.put("("),e.node(t.value),t.getter&&(e.put(","),e.node(t.getter)),e.put(")")}function fH(t,e){e.node(t.value),t.getter!==null&&e.node(t.getter)}function dH(t,e){e.node(t.value),e.put("["),t.getter!==null&&e.node(t.getter),e.put("]")}var ug={};Ce(ug,{compile:()=>hH,stringify:()=>gH,walk:()=>pH});function hH(t,e){e.createScope(()=>{e.put("($=>("),e.node(t.right),e.put("))")},(r,i)=>r+i+","),e.put("("),e.node(t.left),e.put(")")}function pH(t,e){e.node(t.left),e.node(t.right)}function gH(t,e){e.node(t.left),e.put("|"),e.node(t.right)}var fg={};Ce(fg,{compile:()=>yH,stringify:()=>bH,suggest:()=>mH,walk:()=>vH});function mH(t,e){e.queryRoot(t.range[1])}function yH(t,e){e.put("$")}function vH(){}function bH(){}var dg={};Ce(dg,{compile:()=>wH,stringify:()=>kH,walk:()=>xH});function wH(t,e){if(t.operator&&t.operator.type){e.createScope(()=>{e.put("($=>"),e.node(t.operator),e.put(")")},(r,i)=>r+i+";"),e.put("("),e.node(t.argument),e.put(")");return}switch(t.operator){default:e.error('Unknown operator "'+t.operator+'"',t)}}function xH(t,e){e.node(t.argument),t.operator&&t.operator.type&&e.node(t.operator)}function kH(t,e){e.node(t.argument),e.put(" "),e.node(t.operator)}var hg={};Ce(hg,{compile:()=>CH,stringify:()=>AH,walk:()=>SH});function CH(t,e){switch(t.operator){case"no":case"not":e.put("!"),e.put(e.buildinFn("bool")),e.put("("),e.node(t.argument),e.put(")");break;case"+":case"-":e.put(t.operator),e.node(t.argument);break;case"is":e.put("!!("),e.node(t.argument),e.put(")");break;default:e.error('Unknown operator "'+t.operator+'"',t)}}function SH(t,e){e.node(t.argument),t.operator&&t.operator.type&&e.node(t.operator)}function AH(t,e){e.put(t.operator),t.operator!=="-"&&t.operator!=="+"&&e.put(" "),e.node(t.argument)}var pg={};Ce(pg,{compile:()=>LH,stringify:()=>DH,suggest:()=>TH,walk:()=>EH});function TH(t,e){t.range&&e.range(t.range,"var")}function LH(t,e){if(!e.scope.includes(t.name.name)&&e.tolerant){e.put("(typeof $"),e.node(t.name),e.put('!=="undefined"?$'),e.node(t.name),e.put(":undefined)");return}e.put("$"),e.node(t.name)}function EH(t,e){e.node(t.name)}function DH(t,e){e.put("$"),e.node(t.name)}var gg={};Ce(gg,{compile:()=>NH,stringify:()=>OH,walk:()=>MH});function NH(t,e){e.put(e.buildinFn("slice")),e.put("("),e.nodeOrCurrent(t.value),t.arguments.slice(0,3).forEach(r=>{e.put(","),r?e.node(r):e.put("undefined")}),e.put(")")}function MH(t,e){e.nodeOrNothing(t.value);for(let r of t.arguments.slice(0,3))r&&e.node(r)}function OH(t,e){let[r,i,s]=t.arguments;e.nodeOrNothing(t.value),e.put("["),r&&e.node(r),e.put(":"),i&&e.node(i),s&&(e.put(":"),e.node(s)),e.put("]")}var mg={};Ce(mg,{compile:()=>IH,stringify:()=>BH,suggest:()=>PH,walk:()=>zH});function PH(t,e){t.query===null&&e.queryRoot(t.range[1])}function IH(t,e){if(t.array){e.put("..."),e.put(e.buildinFn("ensureArray")),e.put("("),e.nodeOrCurrent(t.query),e.put(")");return}e.put("..."),e.nodeOrCurrent(t.query)}function zH(t,e){e.nodeOrNothing(t.query)}function BH(t,e){e.put("..."),e.nodeOrNothing(t.query)}var yg={};Ce(yg,{compile:()=>qH,stringify:()=>_H,suggest:()=>RH,walk:()=>FH});function RH(t,e){for(let[r,i]of Object.entries(t.values))i===null&&e.queryRoot(t.values[Number(r)-1].range[1])}function qH(t,e){for(let[r,i]of Object.entries(t.values)){let s=Number(r);i!==null&&(s!==0&&e.put("+"),s%2===0?e.put('"'+CA(i.value,jH)+'"'):(e.put("("),e.node(i),e.put(")")))}}function FH(t,e){for(let r of t.values)r!==null&&e.node(r)}function _H(t,e){let r=t.values.length-1;for(let[i,s]of Object.entries(t.values)){let a=Number(i);a%2===0?(e.put(a===0?"`":"}"),e.put(CA(s.value,HH)),e.put(a===r?"`":"${")):s!==null&&e.node(s)}}var jH=new Map([["\b","\\b"],[`
`,"\\n"],["\r","\\r"],["\f","\\f"],["	","\\t"],["\v","\\v"],["\u2028","\\u2028"],["\u2029","\\u2029"],["\\","\\\\"],['"','\\"']]),HH=new Map([["\b","\\b"],["\f","\\f"],["	","\\t"],["\v","\\v"],["\\","\\\\"],["$","\\$"]]);function CA(t,e){let r="";for(let i=0;i<t.length;i++)r+=e.get(t[i])||t[i];return r}var WH={Arg1:qp,Array:Fp,Assertion:_p,Binary:jp,Block:Hp,Compare:Wp,Conditional:$p,Context:Gp,Current:Vp,Data:Kp,Declarator:Yp,Definition:Qp,Filter:Jp,Function:Xp,GetProperty:Zp,Identifier:eg,Literal:tg,Map:ng,MapRecursive:rg,Method:ig,MethodCall:og,Object:sg,ObjectEntry:ag,Parentheses:lg,Pick:cg,Pipeline:ug,Placeholder:fg,Postfix:dg,Prefix:hg,Reference:pg,SliceNotation:gg,CompareFunction:Up,Spread:mg,Template:yg},dl=t=>new Map(Object.entries(WH).map(([e,r])=>[e,r[t]]).filter(([,e])=>typeof e=="function")),UH={};dl("build").forEach((t,e)=>UH[e]=t);var vg=dl("compile"),bg=dl("walk"),wg=dl("stringify"),xg=dl("suggest");function hl(t,e){function r(f){if(bg.has(f.type))s(f),bg.get(f.type)(f,i),a(f);else throw new Error('Unknown node type "'+f.type+'"')}let i={node:r,nodeOrNothing(f){f!==null&&r(f)},list(f){f.forEach(r)}},s=()=>{},a=()=>{};typeof e=="function"&&(e={enter:e}),e&&(typeof e.enter=="function"&&(s=e.enter),typeof e.leave=="function"&&(a=e.leave)),r(t)}function SA(t,e){return e>=0&&e<t.length&&/[a-zA-Z_$0-9]/.test(t[e])}function kg(t,e){let r=t.charCodeAt(e);return r===9||r===10||r===13||r===32}function $H(t,e,r){for(;e<r;e++)if(!kg(t,e))return!1;return!0}function GH(t,e,r,i,s){let a=[];for(let f=0;f<i.length;f++){let[d,g]=i[f];if(d>=e)break;d<t||(a.push(t,d),t=g)}return(t!==r.length||!s)&&a.push(t,e),a}function VH(t,e,r,i){let s=[];for(let a=0;a<t.length;a++){let[f,d,g,p]=t[a];if($H(e,f,d)){for(;f>=0&&kg(e,f-1);)f--;for(;d<e.length&&kg(e,d);)d++;if(SA(e,f-1)){if(f===d)continue;f++}if(SA(e,d)){if(f===d)continue;d--}}let y=GH(f,d,e,r,i);for(let v=0;v<y.length;v+=2)s.push([y[v],y[v+1],g,p])}return s}function KH(t){let e=null,r=[],i=Object.assign(new Map,{literalList:r}),s=(f,d)=>{i.has(f)?i.get(f).push(d):i.set(f,[d])},a={range(f,d,g=e,p=!0){s(g,[...f,d,p])},literalList(f){let d="l"+r.length;return r.push([d,f]),d},queryRoot(f,d=f){s(e,[f,d,"var",!0]),s(e,[f,d,"path",!0])}};return hl(t,f=>{if(xg.has(f.type)){let d=e;e=f,xg.get(f.type)(f,a),e=d}}),i}function hu(t,{ast:e,commentRanges:r}){let i=KH(e),s=r.length&&r[r.length-1][1]===t.length&&!/[\r\n]$/.test(t);for(let[a,f]of i)i.set(a,VH(f,t,r,s));return i}function YH(t){return t.type==="GetProperty"}function QH(t){return t.type==="MethodCall"}function pu(t){function e(s){if(wg.has(s.type))wg.get(s.type)(s,i);else throw new Error('Unknown node type "'+s.type+'"')}let r=[],i={isSimpleGetPropertyQuery:YH,isSimpleMethodCallQuery:QH,put(s){r.push(s)},node:e,nodeOrNothing(s){if(s!==null)return e(s),!0},list(s,a){if(!a){s.forEach(e);return}s.forEach((f,d)=>{d>0&&i.put(a),e(f)})}};return e(t),r.join("")}function Cg(t,e,r){let i=Object.assign(Object.create(SyntaxError.prototype),r),s=new Error;return i.name=t,i.message=e,Object.defineProperty(i,"stack",{get:function(){return(s.stack||"").replace(/^(.+\n){1,3}/,t+": "+e+`
`)}}),i}function gu(t,e=!1,r=null){function i(A){let N="s"+g.length;return g.push(A?[N,A]:[N]),N}function s(A){let N=p.get(A);return N||p.set(A,N=i()),N}function a(A,N,S,M,O){let z=[A,N,JSON.stringify(S)];if(S==="var"){if(!L.scope.length)return;z.push(JSON.stringify(L.scope))}else M||(M=i()),z.push(M),O&&z.push(typeof O=="string"?O:s(O));return v.push(z),M}function f(A,N){let S=L.scope,M=w.length;if(L.scope=L.scope.slice(),L.scope.own=[],L.scope.firstCurrent=null,L.scope.captureCurrent=[],L.scope.arg1=S.arg1||!1,A(),L.scope.captureCurrent.length){let z="stat("+L.scope.captureCurrent.reduce((I,_)=>a(..._,I),void 0)+",$)";L.scope.firstCurrent?w[L.scope.firstCurrent]=z:w[M]=N(w[M],z)}L.scope=S}function d(A,N){let S=!1;if(r!==null){if(r.has(A))for(let[M,O,z,I]of r.get(A))z==="var"?a(M,O,z):I===!0?L.scope.captureCurrent.push([M,O,z]):(S||(S=s(A),w.push("stat("+S+",")),z&&a(M,O,z,S,I));A.type==="Current"&&L.scope.firstCurrent===null&&L.scope.captureCurrent.disabled!==!0&&(L.scope.firstCurrent=w.length)}if(vg.has(A.type))vg.get(A.type)(A,L,N);else throw new Error('Unknown node type "'+A.type+'"');S&&w.push(")")}let g=[],p=new WeakMap,y=[],v=[],w=["((data,context)=>{","const $=data;",{toString(){return y.length>0?"let "+y+`;
`:""}},{toString(){return g.length>0?[`const stat=(s,v)=>(s.add(v),v);
`,"const "+g.map(([A,N])=>A+"=new Set("+(N?JSON.stringify(N):"")+")")+`;
`].join(""):""}},{toString(){let A=r&&Array.isArray(r.literalList)&&r.literalList.map(([N,S])=>N+"="+JSON.stringify(S));return A&&A.length?"const "+A+`;
`:""}},r===null?"return ":`return{
value: `],k={},T=new Set,L={tolerant:e,usedAssertions:new Map,usedMethods:new Map,buildinFn(A){return T.add(A),"f."+A},scope:[],createScope:f,error:(A,N)=>{let S=new SyntaxError(A);if(N&&N.range&&(S.details={loc:{range:N.range}}),!e)throw S},allocateVar(){let A="tmp"+y.length;return y.push(A),A},put:A=>w.push(A),node:d,nodeOrCurrent(A,N){d(A||{type:"Current"},N)},list(A,N,S){A.forEach((M,O)=>{O>0&&w.push(N),d(M,S)})}};if(f(()=>d(t),(A,N)=>(w.push(")"),"("+N+","+A)),!e){let{usedMethods:A,usedAssertions:N}=L;N.size&&(w.unshift(" this.assertAssertions(a)||"),k.assertAssertions=function(S){for(let[M,O]of N.entries())if(!sn(S,M))return()=>{throw Object.assign(new Error(`Assertion "${M}" is not defined`),{details:{loc:{range:O}}})}}),A.size&&(w.unshift(" this.assertMethods(m)||"),k.assertMethods=function(S){for(let[M,O]of A.entries())if(!sn(S,M))return()=>{throw Object.assign(new Error(`Method "${M}" is not defined. If that's a custom method make sure you added it with "methods" section in options`),{details:{loc:{range:O}}})}})}r!==null&&w.push(`,
stats: [`+v.map(A=>"["+A+"]")+`],
assertions: a
}`);try{let A=new Function("f,m,a","return"+w.join("")+"})");return Object.assign(A.bind(k),{toString(){return A.toString().replace(/^(\S+\s+)anonymous([^)\s]+)\s*\)/,"$1query$2)")}})}catch(A){throw Cg("SyntaxError","Jora query compilation error",{compiledSource:w.join(""),details:A})}}var AA=t=>typeof t=="number"||typeof t=="string",jn=(t,e)=>e<t.length?t.charCodeAt(e):0,pl=t=>t===43||t===45,pr=t=>t>=48&&t<=57,Sg=t=>t===9||t===10||t===12||t===13||t===32,Ag=t=>t>32&&t<256&&(t<65||t>90)&&(t<97||t>122)&&!pr(t)&&!pl(t)||t===8470,JH=t=>t&&!Sg(t)&&!Ag(t)&&!pr(t),XH=(t,e,r)=>pl(t)?pr(e)?2:e===46&&pr(r)?3:0:pr(t)?1:0,es=(t,e,r)=>{for(;r(jn(t,++e)););return e},ZH=(t,e,r)=>{let i=jn(t,e);if(pl(i)&&(i=jn(t,e+=1)),pr(i)&&(e=es(t,e,pr),i=jn(t,e)),i===46&&pr(jn(t,e+1))){if(r)return e;let s=es(t,e+1,pr);if(i=jn(t,s),i===46)return e;e=s}if(i===69||i===101){let s=1;i=jn(t,e+1),pl(i)&&(s=2,i=jn(t,e+2)),pr(i)&&(e=es(t,e+s,pr))}return e},TA=(t,e,r,i)=>{if(e>=t.length)return 0;let s=jn(t,e);return Sg(s)?1|es(t,e,Sg)-e<<4:Ag(s)||i&&pl(s)?2|es(t,e,Ag)-e<<4:XH(s,jn(t,e+1),jn(t,e+2))?4|ZH(t,e,r)-e<<4:8|es(t,e,JH)-e<<4},e4=(t,e,r)=>{let i=0,s=0,a=!1,f=!1,d=0,g=0,p=!0;for(;;){let y=TA(t,i,a,f),v=TA(e,s,a,f),w=y&15,k=y>>4,T=v&15,L=v>>4;if(w!==T){if(p&&w&3&&T&12){d=1,g=w,i+=k;continue}if(p&&T&3&&w&12){d=-1,g=T,s+=L;continue}return w-T}if(w===0)return d;p=!1,a=!1,f=!1;let A=k<L?k:L,N=k-L,S="",M="";for(let O=0;O<A;O++)if(S=t[i+O],M=e[s+O],S!==M){N=S<M?-1:1;break}if(w&3)a=t[i+k-1]===".",N!==0&&w>g&&(g=w,d=N);else if(w&4){if(f=!0,N!==0){let O=t.substr(i,k)-e.substr(s,L);if(O!==0)return r?-O:O;if(w>g){let z=jn(t,i),I=jn(e,s),_=z===45?-1:1;g=w,d=z!==I&&(z===45||I===43)?-1:z!==I&&(z===43||I===45)?1:(k-L||N)<0?-_:_,r&&(d=-d)}}}else if(N!==0){if(S!==M){let O=t.substr(i,k),z=e.substr(s,L),I=O.toLowerCase(),_=z.toLowerCase();return I!==_?I<_?-1:1:O<z?-1:1}return N}i+=k,s+=L}},LA=t=>(e,r)=>AA(e)&&AA(r)?Math.sign(e4(String(e),String(r),t)):0,EA=LA(!1),DA=LA(!0);var t4=1,n4=2,ts=3,gl=4,r4=5,i4=6,o4=7,s4=8;function Ci(t){switch(typeof t){case"boolean":return t4;case"number":return t!==t?n4:ts;case"string":return gl;case"object":return t===null?r4:i4;case"undefined":return s4;default:return o4}}function ns(t,e){let r=Ci(t),i=Ci(e);return r!==i?r<i?-1:1:t<e?-1:t>e?1:0}function NA(t,e){let r=Ci(t),i=Ci(e);return r!==i?r<i?-1:1:r===ts?e-t:t<e?-1:t>e?1:0}function Ki(t,e){let r=Ci(t),i=Ci(e);return(r===ts||r===gl)&&(i===ts||i===gl)?EA(t,e):r!==i?r<i?-1:1:t<e?-1:t>e?1:0}function MA(t,e){let r=Ci(t),i=Ci(e);return(r===ts||r===gl)&&(i===ts||i===gl)?DA(t,e,!0):r!==i?r<i?-1:1:t<e?-1:t>e?1:0}function Tg(t,e){return t.length===1?(r,i)=>e(t(r),t(i)):t}var xn=Object.freeze({ensureArray:a4,bool:hr,and:(t,e)=>hr(t)?e:t,or:(t,e)=>hr(t)?t:e,add:l4,sub:c4,mul:u4,div:f4,mod:d4,eq:h4,ne:p4,lt:g4,lte:m4,gt:y4,gte:v4,in:mu,notIn:(t,e)=>!mu(t,e),has:(t,e)=>mu(e,t),hasNo:(t,e)=>!mu(e,t),cmp:ns,cmpAnalytical:NA,cmpNatural:Ki,cmpNaturalAnalytical:MA,match:b4,pick:w4,indexOf:x4,lastIndexOf:k4,map:Lg,mapRecursive:S4,some:Eg,filter:A4,slice:T4});function a4(t){return Array.isArray(t)?t:[t]}function l4(t,e){return Array.isArray(t)||Array.isArray(e)?[...new Set([].concat(t,e))]:t+e}function c4(t,e){if(Array.isArray(t)){let r=new Set(t);return Array.isArray(e)?e.forEach(i=>r.delete(i)):r.delete(e),[...r]}return t-e}function u4(t,e){return t*e}function f4(t,e){return t/e}function d4(t,e){return t%e}function h4(t,e){return Object.is(t,e)}function p4(t,e){return!Object.is(t,e)}function g4(t,e){return t<e}function m4(t,e){return t<=e}function y4(t,e){return t>e}function v4(t,e){return t>=e}function mu(t,e){return dr(e)?sn(e,t):e?OA(e,t)!==-1:!1}function b4(t,e){return typeof e=="function"?Eg(t,e):ki(e)?Eg(t,e.test.bind(e)):e==null}function w4(t,e=()=>!0){if(t){if(typeof e=="function"){if(Array.isArray(t)||typeof t=="string"){for(let r=0;r<t.length;r++)if(e(t[r],r))return t[r]}for(let r in t)if(sn(t,r)&&e(t[r],r))return t[r];return}return Array.isArray(t)||typeof t=="string"?isFinite(e)?t[e<0?t.length+Number(e):Number(e)||0]:void 0:sn(t,e)?t[e]:void 0}}function x4(t,e,r){return t?OA(t,e,r):-1}function OA(t,e,r=0){if(Number.isNaN(e)&&Zr(t)){for(let i=parseInt(r,10)||0;i<t.length;i++)if(Number.isNaN(t[i]))return i}return typeof t.indexOf=="function"?t.indexOf(e,r):-1}function k4(t,e,r){return t?C4(t,e,r):-1}function C4(t,e,r){if(Number.isNaN(e)&&Zr(t)){for(let i=parseInt(r,10)||t.length-1;i>=0;i--)if(Number.isNaN(t[i]))return i}return typeof t.lastIndexOf=="function"?t.lastIndexOf(e,parseInt(r,10)||t.length-1):-1}function Lg(t,e){let r=typeof e=="function"?e:i=>wA(i,e);return Array.isArray(t)?[...t.reduce((i,s)=>Zo(i,r(s)),new Set)]:t!==void 0?r(t):t}function S4(t,e){let r=new Set;return Zo(r,Lg(t,e)),r.forEach(i=>Zo(r,Lg(i,e))),[...r]}function Eg(t,e){return Array.isArray(t)?t.some(r=>hr(e(r))):hr(e(t))}function A4(t,e){return Array.isArray(t)?t.filter(r=>hr(e(r))):hr(e(t))?t:void 0}function T4(t,e=0,r=t&&t.length,i=1){if(!Zr(t))return[];if(e=parseInt(e,10)||0,r=parseInt(r,10)||t.length,i=parseInt(i,10)||1,i!==1){let s=[];e=e<0?Math.max(0,t.length+e):Math.min(t.length,e),r=r<0?Math.max(0,t.length+r):Math.min(t.length,r);for(let a=i>0?e:r-1;a>=e&&a<r;a+=i)s.push(t[a]);return s}return typeof t=="string"?t.slice(e,r):Array.prototype.slice.call(t,e,r)}var L4=(t,e)=>t-e,E4=(t,e)=>e-t,yu=class{constructor(e,r,i){this.maxSize=e||1/0,this.compare=r||E4,this.accept=i||null,this.values=[]}add(e){this.accept!==null&&!this.accept(e)||(this.values.length<this.maxSize?(this.values.push(e),this.heapifyUp(this.values.length-1)):this.compare(this.values[0],e)>0&&(this.values[0]=e,this.heapifyDown()))}addArray(e){for(let r=0;r<e.length;r++)this.add(e[r])}extract(){let e=this.values[0],r=this.values.pop();return this.values.length>0&&(this.values[0]=r,this.heapifyDown()),e}heapifyUp(e){let r=this.values,i=r[e];for(;e>0;){let s=e-1>>1,a=r[s];if(this.compare(a,i)>0)break;r[s]=i,r[e]=a,e=s}}heapifyDown(){let e=this.values,r=e.length,i=r>>1,s=0,a=e[s],f=s,d=a;for(;s<i;){let g=2*s+1,p=e[g],y=g+1;if(this.compare(p,a)>0&&(f=g,d=p),y<r){let v=e[y];this.compare(v,d)>0&&(f=y,d=v)}if(f===s)break;e[s]=d,e[f]=a,s=f,d=a}}[Symbol.iterator](){return this.values.slice().sort(this.compare)[Symbol.iterator]()}},Si=class extends yu{},vu=class extends yu{constructor(e,r,i){super(e,r?(s,a)=>-r(s,a):L4,i)}};var D4=t=>t;function N4(t){return t!==null&&typeof t=="object"?NaN:Number(t)}function rs(t,e,r){if(Zr(t)){typeof e!="function"&&(e=D4);for(let i of t){let s=e(i);s!==void 0&&r(N4(s))}}}function PA(t,e,r,i,s){if(t.length===0||!isFinite(e)||e<0||e>100)return;let a=0,f=e*(t.length-1)/100,d=Math.floor(f),g=Math.ceil(f),p=!1,y=e<50?new vu(g+1,s):new Si(t.length-d,s);if(rs(t,r,v=>{Number.isNaN(v)&&(p=!0),y.add(v),a++}),p)return NaN;if(t.length!==a){if(a===0)return;f=e*(a-1)/100,d=Math.floor(f),g=Math.ceil(f);let v=e<50?g+1:a-d;for(let w=y.values.length;w>v;w--)y.extract()}if(d!==g){let v=y.extract(),w=y.values[0];return v<=w?v+(w-v)*(f-d):w+(v-w)*(f-d)}return y.values[0]}var M4=t=>t;function IA(t,e){let r,i=0,s=0;return rs(t,e,a=>{if(s++,r===void 0)r=a;else{let f=r,d=Math.abs(f),g=Math.abs(a);r+=a,d!==1/0&&g!==1/0&&(d>=g?i+=f-r+a:i+=a-r+f)}}),r!==void 0&&(r+=i),{sum:r,count:s}}function zA(t,e){let r=[];return rs(t,e,r.push.bind(r)),r}function BA(t,e){let r=0;if(Zr(t)){typeof e!="function"&&(e=M4);for(let i of t)e(i)!==void 0&&r++}return r}function RA(t,e){return IA(t,e).sum}function qA(t,e){let{sum:r,count:i}=IA(t,e);if(i>0)return r/i}function Dg(t,e){let r=0,i=0,s=0;if(rs(t,e,a=>{r+=1;let f=a-i;i+=f/r,s+=f*(a-i)}),r>0)return s/r}function FA(t,e){let r=Dg(t,e);if(r!==void 0)return Math.sqrt(r)}function _A(t,e=Ki){let r;if(t&&isFinite(t.length)&&typeof e=="function"){e=Tg(e,Ki);for(let i=0;i<t.length;i++){let s=t[i];(r===void 0||e(s,r)<0)&&e(s,void 0)!==0&&(r=s)}}return r}function jA(t,e=Ki){let r;if(t&&isFinite(t.length)&&typeof e=="function"){e=Tg(e,Ki);for(let i=0;i<t.length;i++){let s=t[i];(r===void 0||e(s,r)>=0)&&e(s,void 0)!==0&&(r=s)}}return r}function bu(t,e,r){if(Zr(t))return PA(t,e,r)}function HA(t,e){return bu(t,50,e)}function O4(){}function P4(t){return t}function WA(t){return t===null?null:{matched:t.slice(),start:t.index,end:t.index+t[0].length,input:t.input,groups:t.groups||null}}function I4(t){let e=t.pop(),r=typeof e=="string"?null:e,i=r===null?e:t.pop(),s=t.pop();return{matched:t,start:s,end:s+t[0].length,input:i,groups:r}}var z4=String.prototype.replaceAll||function(t,e){return ki(t)?this.replace(t,e):this.split(t).join(String(e))},B4=UA(20)?1/0:UA(10)?10:0;function UA(t){return Array.from({length:t},(e,r)=>({idx:r})).sort((e,r)=>e.idx%2-r.idx%2).every((e,r)=>r<t/2?e.idx>>1===r:Math.ceil(t/2)+(e.idx>>1)===r)}function R4(t,e){return t.length<=B4?t.slice().sort(e):t.map((r,i)=>({value:r,idx:i})).sort((r,i)=>(r.value===void 0?i.value!==void 0:i.value===void 0?-1:e(r.value,i.value))||r.idx-i.idx).map(r=>r.value)}var ml=Object.freeze({bool:xn.bool,filter:xn.filter,map:xn.map,pick:xn.pick,indexOf:xn.indexOf,lastIndexOf:xn.lastIndexOf,keys(t){return Object.keys(t||{})},values(t){let e=new Set;for(let r in t)sn(t,r)&&Zo(e,t[r]);return[...e]},entries(t){let e=[];for(let r in t)sn(t,r)&&e.push({key:r,value:t[r]});return e},fromEntries(t){let e=Object.create(null);if(Array.isArray(t))for(let r of t)r&&(e[r.key]=r.value);return e},size(t){return dr(t)?Object.keys(t).length:t&&t.length||0},sort(t,e=ns){if(!Array.isArray(t))return t;if(typeof e=="function"&&e.length!==2){let r=e;e=(i,s)=>{if(i=r(i),s=r(s),Array.isArray(i)&&Array.isArray(s)){if(i.length!==s.length)return i.length<s.length?-1:1;for(let a=0;a<i.length;a++){let f=ns(i[a],s[a]);if(f!==0)return f}return 0}return ns(i,s)}}return R4(t,e)},reverse(t){return Array.isArray(t)?t.slice().reverse():t},slice(t,e,r){return xn.slice(t,e,r)},group(t,e,r){let i=new Map,s=[];typeof e!="function"&&(e=O4),typeof r!="function"&&(r=P4),Array.isArray(t)||(t=[t]);for(let a of t){let f=e(a);if(Array.isArray(f))for(let d of f)Bp(i,d,r(a));else Bp(i,f,r(a))}for(let[a,f]of i)s.push({key:a,value:[...f]});return s},join(t,e){return Array.isArray(t)?t.join(e):String(t)},match(t,e,r){let i=String(t),s=ki(e)?e.flags:"";if(r||s.includes("g")){let a=[],f=new RegExp(e,(s||"").replace(/g|$/,"g")),d;for(;d=f.exec(i);)a.push(WA(d));return a}return WA(i.match(e))},reduce(t,e,r=void 0){return Array.isArray(t)?r!==void 0?t.reduce((i,s)=>e(s,i),r):t.reduce((i,s)=>e(s,i)):e(t,r)},split(t,e){if(Array.isArray(t)){let r=typeof e=="function"?e:Object.is.bind(null,e),i=[],s=0,a=0;for(;a<t.length;a++)r(t[a])&&(i.push(t.slice(s,a)),s=a+1);return i.push(t.slice(s,a)),i}return String(t).split(e)},replace(t,e,r){if(Array.isArray(t)){let i=typeof e=="function"?e:Object.is.bind(null,e);return t.map(typeof r=="function"?s=>i(s)?r(s):s:s=>i(s)?r:s)}return ki(e)&&!e.flags.includes("g")&&(e=new RegExp(e,e.flags+"g")),z4.call(String(t),e,typeof r=="function"?(...i)=>r(I4(i)):r)},toLowerCase(t,e){return String(t).toLocaleLowerCase(e)},toUpperCase(t,e){return String(t).toLocaleUpperCase(e)},trim(t){return String(t).trim()},...["abs","acos","acosh","asin","asinh","atan","atan2","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","hypot","imul","log10","log2","pow","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].reduce((t,e)=>(t[e]=Math[e],t),{}),ln:Math.log,ln1p:Math.log1p,numbers:zA,count:BA,sum:RA,avg:qA,variance:Dg,stdev:FA,min:_A,max:jA,percentile:bu,p:bu,median:HA});var yl=Object.freeze({function:t=>typeof t=="function",symbol:t=>typeof t=="symbol",primitive:t=>t===null||typeof t!="object"&&typeof t!="function",string:t=>typeof t=="string",number:t=>typeof t=="number",int:Number.isInteger,finite:t=>Number.isFinite(t),nan:t=>Number.isNaN(t),infinity:t=>t===1/0||t===-1/0,boolean:t=>t===!0||t===!1,null:t=>t===null,undefined:t=>t===void 0,nullish:t=>t==null,object:dr,array:Array.isArray,regexp:ki,truthy:hr,falsy:t=>!hr(t)});var q4={path:"property",key:"value",value:"value","in-value":"value","value-subset":"value",var:"variable",assertion:"assertion"};function wu(t,e){Object.keys(t).forEach(e.add,e)}function F4(t,e,r,i=new Set){let s=a=>{switch(typeof a){case"string":case"number":i.add(a);break}};switch(t){case"path":{let a=new Set;for(let f of e)if(Array.isArray(f))for(let d of f)dr(d)&&wu(d,a);else dr(f)&&wu(f,a);a.forEach(i.add,i);break}case"key":{let a=new Set;for(let f of e)f!==null&&typeof f=="object"&&!Array.isArray(f)&&wu(f,a);a.forEach(i.add,i);break}case"value":for(let a of e)s(a);break;case"in-value":{let a=new Set;for(let f of e)Array.isArray(f)?f.forEach(s):dr(f)&&wu(f,a);a.forEach(i.add,i);break}case"var":for(let a of e)i.add("$"+a);break;case"value-subset":{let a=new Set(r);for(let f of e)a.has(f)||s(f);break}}return i}function $A(t,e,r,i=!1){let s=[];for(let[a,f,d,g,p=null]of r)if(e>=a&&e<=f&&(i||g.size||g.length)){let y=t.substring(a,f);/\S/.test(y)||(a=f=e,y=""),s.push({context:d,from:a,to:f,text:y,values:g,related:p})}return s}function GA(t,e){return typeof t=="function"?t:t===!0?e:!1}function VA(t){if(/^(["']).*\1$/.test(t))try{return t[0]==="'"&&(t=`"${t.slice(1,-1).replace(/\\.|"/g,e=>e==="\\'"?"'":e==='"'?'\\"':e)}"`),JSON.parse(t)}catch{}return t}function _4(t){return e=>(typeof e=="string"?e:String(e)).toLowerCase().indexOf(t)!==-1}var Ng=(t,{value:e,stats:r,assertions:i})=>({get value(){return e},stat(s,a){return $A(t,s,r,a)},suggestion(s,a){let{limit:f=1/0,sort:d,filter:g}=a||{};d=GA(d,xn.cmp),g=GA(g,_4);let p=d&&isFinite(f)?Si:Set,y=$A(t,s,r,!0),v=new Map,w=[];for(let k of y){let{context:T,text:L,from:A,to:N,values:S,related:M}=k,O=q4[T];if(!v.has(O)){let I;switch(p){case Si:I=new Si(f,d,g&&g(VA(L)));break;case Set:I=new Set;break}v.set(O,{type:O,from:A,to:N,text:L,suggestions:I})}let{suggestions:z}=v.get(O);switch(T){case"assertion":if(z.size===0||z.values&&z.values.length===0)for(let I of Object.keys(i))z.add(I);break;default:F4(T,S,M,z)}}if(p===Set)for(let k of v.values()){let{suggestions:T}=k;if(d&&(T=[...T].sort(d)),g||isFinite(f)){let L=[],A=g?g(VA(k.text)):()=>!0;for(let N of T)if(A(N)&&L.push(N)>=f)break;T=L}k.suggestions=T}for(let k of v.values())k.suggestions=Array.isArray(k.suggestions)?k.suggestions:[...k.suggestions],k.suggestions.length&&w.push(k);return w.length?w:null}});var j4=new Map,H4=new Map,W4=new Map,U4=new Map;function KA(t,e,r,i,s){typeof r=="string"?Object.defineProperty(t,e,{configurable:!0,get(){let a=Mg(r)(xn,i,s),f=d=>a(d,null);return Object.defineProperty(t,e,{value:f}),f}}):t[e]=r}function YA(t,e){if(!t&&!e)return{queryMethods:ml,queryAssertions:yl};let r={...ml},i={...yl};for(let[s,a]of Object.entries(t||{})){if(sn(ml,s))throw new Error(`Builtin method "${s}" can't be overridden`);KA(r,s,a,r,i)}for(let[s,a]of Object.entries(e||{})){if(sn(yl,s))throw new Error(`Builtin assertion "${s}" can't be overridden`);KA(i,s,a,r,i)}return{queryMethods:r,queryAssertions:i}}function $4(t,e){console.log(`[${t}]`),typeof e=="string"?console.log(e):e!==void 0&&console.dir(e,{depth:null}),console.log()}function Mg(t,e,r,i){i=typeof i=="function"?i:i?$4:!1,i&&(i("========================="),i("Compile query from source",t));let s=cu.parse(t,r);i&&(i("AST",s.ast),i("Restored source",pu(s.ast)));let a=e?hu(t,s):null;if(i&&a){let d=v=>JSON.stringify(v).slice(1,-1),g=[].concat(...[...a.entries()].map(([v,w])=>w.map(k=>[v,...k]))),p=[],y=null;i("Stat/suggestion ranges",g.sort((v,w)=>v[1]-w[1]).map(([v,...w])=>{let[k,T,L,A]=w,N;if(k===p[0]&&T===p[1])N=" ".repeat(y.length);else{let S=d(t.slice(0,k)).length,M=d(t.substring(k,T)).length;p=w,y=" ".repeat(S)+(M?"~".repeat(M):"\\")+" "+k+":"+T,N=d(t)+`
`+y}return N+" ["+L+"] on "+v.type+(A===!0?" (current)":A&&A.type?" & "+A.type:"")}).join(`
`))}let f=gu(s.ast,r,a);return i&&i("Compiled code",f.toString()),f}function G4(t,e){e=e||{};let r=!!e.stat,i=!!e.tolerant,s=r?i?U4:H4:i?W4:j4,{methods:a,assertions:f}=e||{},{queryMethods:d,queryAssertions:g}=YA(a,f),p;return t=String(t),s.has(t)&&!e.debug?p=s.get(t):(p=Mg(t,r,i,e.debug),s.set(t,p)),p=p(xn,d,g),r?Object.assign((y,v)=>Ng(t,p(y,v)),{query:p}):p}function V4(t){let e=new Map,r=new Map,i=new Map,s=new Map,{methods:a,assertions:f}=t||{},{queryMethods:d,queryAssertions:g}=YA(a,f);return function(y,v){v=v||{};let w=!!v.stat,k=!!v.tolerant,T=w?k?s:r:k?i:e,L;if(y=String(y),T.has(y)&&!v.debug)L=T.get(y);else{let A=Mg(y,w,k,v.debug)(xn,d,g);L=w?Object.assign((N,S)=>Ng(y,A(N,S)),{query:A}):A,T.set(y,L)}return L}}var ei=Object.assign(G4,{version:bA,buildin:xn,methods:ml,assertions:yl,setup:V4,syntax:{tokenize:cu.tokenize,parse:cu.parse,suggest:hu,walk:hl,stringify:pu,compile:gu}});function Og(t){let e=new fl,r=[],i=[],s={rejectData(k,T){throw Object.assign(new Error(k),{renderContent:T})},defineObjectMarker:d,lookupObjectMarker:g,lookupObjectMarkerAll:p,resolveValueLinks:v,addValueAnnotation:y,addQueryHelpers(k){f=ei.setup({methods:a={...a,...k}})},query(k,...T){return t.queryFn.call({queryFnFromString:f},k)(...T)}},a={query:(...k)=>t.query(...k),pageLink:(k,T,L)=>t.encodePageHash(T,k,L),marker:g,markerAll:p,callAction:w,actionHandler:(k,...T)=>t.action.has(k)?()=>w(k,...T):void 0},f=ei.setup({methods:a});return Object.assign(k=>Object.assign(k,{objectMarkers:e,linkResolvers:r,resolveValueLinks:v,annotations:i,queryFnFromString:f}),{methods:s});function d(k,T){let{page:L,mark:A,lookup:N}=e.define(k,T)||{};if(!N)return()=>{};if(L!==null){if(!t.page.isDefined(T.page)){t.log("error",`Page reference "${T.page}" doesn't exist`);return}r.push(S=>{let M=N(S);if(M!==null)return{type:L,text:M.title,href:M.href,entity:M.object}}),y((S,M)=>{let O=N(S);if(O&&O.object!==M.host)return{place:"before",style:"badge",text:L,href:O.href}})}else y((S,M)=>{let O=N(S);if(O&&O.object!==M.host)return{place:"before",style:"badge",text:k}});return A}function g(k,T){return e.lookup(k,T)}function p(k){return e.lookupAll(k)}function y(k,T=!1){typeof T=="boolean"&&(T={debug:T}),i.push({query:k,...T})}function v(k){let T=[],L=typeof k;if(k&&(L==="object"||L==="string"))for(let A of r){let N=A(k);N&&T.push(N)}return T.length?T:null}function w(k,...T){let L=null;typeof T[T.length-1]=="function"&&(L=T.pop());let A=t.action.call(k,...T);return A&&L&&typeof A.then=="function"?A.then(L):L?L(A):A}}var QA=new WeakMap,JA=["variable","property","value","method"],K4=(t,e)=>JA.indexOf(t.type)-JA.indexOf(e.type),Y4=t=>(t=t.toLowerCase(),e=>e!==t&&(typeof e=="string"?e:String(e)).toLowerCase().indexOf(t)!==-1);function Q4(t,e){return typeof t!="string"?String(t):(t=JSON.stringify(t),e[0]!=="'"?t:`'${t.slice(1,-1).replace(/\\.|'/g,r=>r==='\\"'?'"':r==="'"?"\\'":r)}'`)}function J4(t,e,r){if(e===r)return!0;let i=t.stat(e)||[],s=t.stat(r)||[];if(i.length!==s.length)return!1;for(let a=0;a<i.length;a++){let f=i[a],d=s[a];for(let g of Object.keys(f))if(f[g]!==d[g])return!1}return!0}function XA(t,e,r,i,s){try{let a=QA.get(t);if(!a||a.query!==e||a.data!==i||a.context!==s){let d={tolerant:!0,stat:!0};QA.set(t,a={query:e,data:i,context:s,offset:-1,suggestions:null,api:null}),a.api=t.queryFnFromString(e,d)(i,s)}if(a.api===null)return null;if(a.offset!==-1&&J4(a.api,a.offset,r))return a.suggestions;let f=a.api.suggestion(a.offset=r,{sort:!0,filter:Y4,limit:50});if(f){a.suggestions=[];for(let d of f.sort(K4))a.suggestions.push(...d.suggestions.map(g=>({type:d.type,from:d.from,to:d.to,text:d.text,value:d.type==="value"?Q4(g,d.text):g})))}else a.suggestions=null;return a.suggestions}catch(a){t.log({level:"error",message:"Error while attempting to retrieve suggestions for the query",collapsed:a});return}}var ZA=new WeakMap,is=new WeakMap,xu=["silent","error","warn","info","perf","debug"],Pg="[Discovery]",X4=new Proxy({},{get:()=>()=>{}}),Z4=t=>t,eW=t=>Object.fromEntries(t);function Ig(t,e,r){r?t.dataset[e]=r:delete t.dataset[e]}function tW(t,e,r,i){let s=t.page.get(e);return s&&Object.hasOwnProperty.call(s.options,r)?s.options[r]:i}function eT(t,e,r,i){let s=tW(t,e,r,i);return typeof s=="function"?s:i}var os=class extends fr{constructor(e={}){super(),this.options=e||{};let{logLevel:r,logger:i=console,darkmode:s="disabled",darkmodePersistent:a=!1,defaultPage:f,defaultPageId:d,reportPageId:g,extensions:p,inspector:y=!1}=this.options;this.logger=i||X4,this.logLevel=xu.includes(r)?r:"perf",this.darkmode=new au(s,a),this.inspectMode=new vn(!1),this.initDom(),this.action=new Ha,this.action.on("define",()=>{this.context&&(this.scheduleRender("sidebar"),this.scheduleRender("page"))}).on("revoke",()=>{this.context&&(this.scheduleRender("sidebar"),this.scheduleRender("page"))}),this.view=new Wa(this),this.nav=new lu(this),this.preset=new Ua(this.view),this.page=new $a(this).on("define",v=>{if(this.pageId===v&&this.pageHash!=="#"){let w=this.pageHash;this.pageHash="#",this.setPageHash(w),this.cancelScheduledRender()}}),is.set(this,new Set),this.datasets=[],this.data=void 0,this.context=void 0,this.prepare=v=>v,this.defaultPageId=d||"default",this.reportPageId=g||"report",this.pageId=this.defaultPageId,this.pageRef=null,this.pageParams={},this.pageHash=this.encodePageHash(this.pageId,this.pageRef,this.pageParams),f&&this.page.define(this.defaultPageId,f),this.apply(Og(this)),this.apply(Jc),this.apply(ru),p&&this.apply(p),y&&this.apply(Lp),this.nav.render(this.dom.nav,this.data,this.getRenderContext()),this.setContainer(this.options.container)}apply(e){Array.isArray(e)?e.forEach(r=>this.apply(r)):typeof e=="function"?e.call(null,this):e&&this.apply(Object.values(e))}log(e,...r){let{level:i,lazy:s,message:a,collapsed:f}=e&&typeof e=="object"?e:{level:e},d=xu.indexOf(i);if(d>0&&d<=xu.indexOf(this.logLevel)){let g=i==="perf"?"log":i;if(f){this.logger.groupCollapsed(`${Pg} ${a||r?.[0]}`);for(let p of typeof f=="function"?f():f)this.logger[g](...Array.isArray(p)?p:[p]);this.logger.groupEnd()}else this.logger[g](Pg,...typeof s=="function"?s():r)}else d===-1&&this.logger.error(`${Pg} Bad log level "${i}", supported: ${xu.slice(1).join(", ")}`)}setPrepare(e){if(typeof e!="function")throw new Error("An argument should be a function");this.prepare=e}setData(e,r={},i){i=i||{};let s=Date.now(),a=Og(this),f=()=>{if(ZA.get(this)!==d)throw new Error("Prevented by another setData()")},d=Promise.resolve().then(()=>(f(),this.prepare(e,a.methods)||e)).then(g=>{f(),this.datasets=[{...i.dataset,data:g}],this.data=g,this.context=r,this.apply(a),this.emit("data"),this.log("perf",`Data prepared in ${Date.now()-s}ms`)});return ZA.set(this,d),(!("render"in i)||i.render)&&d.then(()=>{this.scheduleRender("sidebar"),this.scheduleRender("page")}),d}async setDataProgress(e,r,i){let{dataset:s,progressbar:a}=i||{};this.emit("startSetData",(...f)=>a?.subscribeSync(...f)),await a?.setState({stage:"prepare"}),await this.setData(e,r,{dataset:s,render:!1}),await a?.setState({stage:"initui"}),this.scheduleRender("sidebar"),this.scheduleRender("page"),await Promise.all([this.dom.wrapper.parentNode?this.dom.ready:!0,is.get(this).timer]),await a?.finish()}unloadData(){this.hasDatasets()&&(this.datasets=[],this.data=void 0,this.context=void 0,this.scheduleRender("sidebar"),this.scheduleRender("page"),this.emit("unloadData"))}hasDatasets(){return this.datasets.length!==0}resolveValueLinks(){return null}queryFn(e){switch(typeof e){case"function":return e;case"string":return this.queryFnFromString(e)}}query(e,r,i){switch(typeof e){case"function":return e(r,i);case"string":return this.queryFn(e)(r,i);default:return e}}queryBool(...e){return ei.buildin.bool(this.query(...e))}queryToConfig(e,r){let{ast:i}=ei.syntax.parse(r),s={view:e};if(i.type!=="Block")throw new SyntaxError('[Discovery] Widget#queryToConfig(): query root must be a "Block"');if(i.body.type!=="Object")throw new SyntaxError('[Discovery] Widget#queryToConfig(): query root must return an "Object"');for(let a of i.body.properties){if(a.type!=="ObjectEntry")throw new SyntaxError('[Discovery] Widget#queryToConfig(): unsupported object entry type "'+a.type+'"');let f,d=a.value;switch(a.key.type){case"Literal":f=a.key.value;break;case"Identifier":f=a.key.name,d||=a.key;break;case"Reference":f=a.key.name.name,d||=a.key;break;default:throw new SyntaxError('[Discovery] Widget#queryToConfig(): unsupported object key type "'+a.key.type+'"')}if(f==="view"||f==="postRender")throw new SyntaxError('[Discovery] Widget#queryToConfig(): set a value for "'+f+'" property in shorthand notation is prohibited');f==="when"||f==="data"||f==="whenData"?s[f]=d.type==="Literal"&&typeof d.value!="string"?d.value:ei.syntax.stringify(d):s[f]=d.type==="Literal"&&(typeof d.value!="string"||d.value[0]!=="=")?d.value:"="+ei.syntax.stringify(d)}return s}querySuggestions(e,r,i,s){return XA(this,e,r,i,s)}pathToQuery(e){return e.map((r,i)=>r==="*"?i===0?"values()":".values()":typeof r=="number"||!/^[a-zA-Z_][a-zA-Z_$0-9]*$/.test(r)?i===0?`$[${JSON.stringify(r)}]`:`[${JSON.stringify(r)}]`:i===0?r:"."+r).join("")}getQueryEngineInfo(){return{name:"jora",version:ei.version,link:"https://github.com/discoveryjs/jora"}}initDom(){let e=X("div","discovery init"),r=e.attachShadow({mode:"open"}),i=cl(r,this.options.styles),s=r.appendChild(X("div"));this.dom={},this.dom.ready=Promise.all([i]),this.dom.wrapper=e,this.dom.root=r,this.dom.container=s,s.classList.add("discovery-root","discovery"),s.append(this.dom.nav=X("div","discovery-nav discovery-hidden-in-dzen"),this.dom.sidebar=X("nav","discovery-sidebar discovery-hidden-in-dzen"),this.dom.content=X("main","discovery-content",[this.dom.pageContent=X("article")])),r.addEventListener("click",a=>{let f=a.target.closest("a");!f||f.getAttribute("target")||f.origin!==location.origin||f.pathname!==location.pathname||(a.preventDefault(),f.classList.contains("ignore-href")||this.setPageHash(f.hash))},!0),this.dom.detachDarkMode=this.darkmode.subscribe(a=>s.classList.toggle("discovery-root-darkmode",a),!0),this.dom.ready.then(()=>{getComputedStyle(this.dom.wrapper).opacity,this.dom.wrapper.classList.remove("init")})}setContainer(e){e instanceof Node?e.append(this.dom.wrapper):this.dom.wrapper.remove()}disposeDom(){typeof this.dom.detachDarkMode=="function"&&(this.dom.detachDarkMode(),this.dom.detachDarkMode=null),this.dom.container.remove(),this.dom=null}addGlobalEventListener(e,r,i){return document.addEventListener(e,r,i),()=>document.removeEventListener(e,r,i)}addHostElEventListener(e,r,i){let s=this.dom.container;return s.addEventListener(e,r,i),()=>s.removeEventListener(e,r,i)}scheduleRender(e){let r=is.get(this);if(!r.has(e)&&(r.add(e),!r.timer))return r.timer=Promise.resolve().then(async()=>{for(let i of r)switch(i){case"sidebar":await this.renderSidebar();break;case"page":await this.renderPage();break}r.timer=null}),r.timer}cancelScheduledRender(e){let r=is.get(this);r&&(e?r.delete(e):r.clear())}getRenderContext(){return{page:this.pageId,id:this.pageRef,params:this.pageParams,actions:this.action.actionMap,datasets:this.datasets,data:this.data,...this.context}}renderSidebar(){if(is.get(this).delete("sidebar"),this.hasDatasets()&&this.view.isDefined("sidebar")){let e=Date.now(),r=this.data,i=this.getRenderContext();return this.view.setViewRoot(this.dom.sidebar,"sidebar",{data:r,context:i}),this.dom.sidebar.innerHTML="",this.view.render(this.dom.sidebar,"sidebar",r,i).finally(()=>this.log("perf",`Sidebar rendered in ${Date.now()-e}ms`))}}encodePageHash(e,r,i){let a=eT(this,e,"encodeParams",Z4)(i||{});return a&&typeof a!="string"&&(Array.isArray(a)||(a=Object.entries(a)),a=a.map(f=>f.map(encodeURIComponent).join("=")).join("&")),`#${e!==this.defaultPageId?encodeURIComponent(e):""}${typeof r=="string"&&r||typeof r=="number"?":"+encodeURIComponent(r):""}${a?"&"+a:""}`}decodePageHash(e){let r=(e.indexOf("&")+1||e.length+1)-1,[i,s]=e.substring(e[0]==="#"?1:0,r).split(":").map(decodeURIComponent),a=eT(this,i||this.defaultPageId,"decodeParams",eW),f=e.substr(r+1).split("&").filter(Boolean).map(d=>{let g=d.indexOf("=");return g!==-1?[decodeURIComponent(d.slice(0,g)),decodeURIComponent(d.slice(g+1))]:[decodeURIComponent(d),!0]});return{pageId:i||this.defaultPageId,pageRef:s,pageParams:a(f)}}setPage(e,r,i,s=!1){return this.setPageHash(this.encodePageHash(e||this.defaultPageId,r,i),s)}setPageRef(e,r=!1){return this.setPage(this.pageId,e,this.pageParams,r)}setPageParams(e,r=!1){return this.setPage(this.pageId,this.pageRef,e,r)}setPageHash(e,r=!1){let{pageId:i,pageRef:s,pageParams:a}=this.decodePageHash(e);return(this.pageId!==i||this.pageRef!==s||!Za(this.pageParams,a))&&(this.pageId=i,this.pageRef=s,this.pageParams=a,this.scheduleRender("page"),e!==this.pageHash)?(this.pageHash=e,this.emit("pageHashChange",r),!0):!1}renderPage(){is.get(this).delete("page");let e=this.data,r=this.getRenderContext(),{pageEl:i,renderState:s,config:a}=this.page.render(this.dom.pageContent,this.pageId,e,r);return this.view.setViewRoot(i,"Page: "+this.pageId,{config:a,data:e,context:r}),this.dom.pageContent=i,this.nav.render(this.dom.nav,e,r),Ig(this.dom.container,"page",this.pageId),Ig(this.dom.container,"dzen",!!this.pageParams.dzen),Ig(this.dom.container,"compact",!!this.options.compact),s.then(()=>{if(this.pageParams["!anchor"]){let f=i.querySelector("#"+CSS.escape("!anchor:"+this.pageParams["!anchor"]));if(f){let d=i.querySelector(".view-page-header");f.style.scrollMargin=d?d.offsetHeight+"px":"",f.scrollIntoView(!0)}}}),s}};var zg=Object.assign(nT(),{setup:nT}),tT=t=>/^\./.test(t);function nT(t){return t=t||!0,function(e){let r=t.accept?String(t.accept):"application/json,application/jsonxl,.json,.jsonxl",i=!!(t.dragdrop||t.dragdrop===void 0),s=r.split(",");i&&(e.dom.container.addEventListener("drop",a=>{e.loadDataFromEvent(a)},!0),e.dom.container.addEventListener("dragover",a=>{a.stopPropagation(),a.preventDefault()},!0)),e.preset.define("upload",[{view:"button-primary",onClick:"=#.actions.uploadFile",content:'text:`Open file ${#.actions.uploadFile.fileExtensions | $ ? "(" + join(", ") + ")" : ""}`'},{view:"context",when:"#.actions.uploadFile.dragdrop",content:['html:"<span style=\\"color: #888; padding: 0 1ex\\"> or </span>"','text:"drop a file on the page"']}]),e.action.define("unloadData",()=>{e.unloadData()}),e.action.define("uploadFile",Object.assign(()=>{X("input",{type:"file",accept:r,onchange:a=>e.loadDataFromEvent(a)}).click()},{fileExtensions:s.filter(a=>tT(a)),mimeTypes:s.filter(a=>!tT(a)),dragdrop:i}))}}function Bg(){return[parseInt(performance.timeOrigin,10).toString(16),parseInt(1e4*performance.now(),10).toString(16),String(Math.random().toString(16).slice(2))].join("-")}var Ug={};Ce(Ug,{createLoadDataState:()=>bl,dataFromStream:()=>MT,dataSource:()=>TW,extractResourceMetadata:()=>Wg,getReadableStreamFromSource:()=>_W,loadDataFromEvent:()=>Au,loadDataFromFile:()=>wl,loadDataFromPush:()=>Lu,loadDataFromStream:()=>ls,loadDataFromUrl:()=>Tu,syncLoaderWithProgressbar:()=>Hg});var NT=zn(bp(),1);var Rg=typeof new Blob().stream=="function"?t=>t.stream():nW();function nW(){try{return new ReadableStream({type:"bytes"}),rW}catch{try{return new ReadableStream({}),iW}catch{try{return new Response(new Blob).body.getReader(),oW}catch{}}}return sW}function rT(t){return typeof t.arrayBuffer=="function"?t.arrayBuffer():new Promise((e,r)=>{let i=new FileReader;i.readAsArrayBuffer(t),i.onload=i.onerror=({type:s})=>{i.onload=i.onerror=null,s==="load"?e(i.result||i):r(new Error("Failed to read the blob/file"))}})}function rW(t){let e=0;return new ReadableStream({type:"bytes",autoAllocateChunkSize:512*1024,pull(r){let i=r.byobRequest.view,s=t.slice(e,e+i.byteLength);return rT(s).then(a=>{let f=new Uint8Array(a),d=f.byteLength;e+=d,i.set(f),r.byobRequest.respond(d),e>=t.size&&r.close()})}})}function iW(t){let e=0;return new ReadableStream({pull(r){let i=t.slice(e,e+524288);return rT(i).then(s=>{e+=s.byteLength,r.enqueue(new Uint8Array(s)),e==t.size&&r.close()})}})}function oW(t){return new Response(t).body}function sW(){throw new Error("Blob#stream() is not supported and no fallback can be applied, include https://github.com/MattiasBuelens/web-streams-polyfill")}var aW=new Uint8Array([0,0,74,83,79,78,88,76]),iT=9,lW=268435455,cW=4294967295,cT=1,ku=2,ss=4,vl=8,as=16,Cu=32,Su=64,Yi=128,uT=0,fT=1,dT=2,hT=3,pT=4,gT=5,mT=6,uW=7,yT=8,vT=9,bT=10,wT=11,xT=12,fW=31,gY=~fW,kT=224,mY=~kT,CT=7936,yY=~CT,ST=0,Fg=1,dW=2,hW=3,pW=4,gW=5,AT=6,TT=7,mW=8,oT=16,sT=32,vY=~as,aT=ku|Cu|Su,yW=new Uint8Array(256),LT=new Uint8Array(8).map((t,e)=>(yW[1<<e]=e,1<<e)),ET=new Uint8Array(256).map((t,e)=>{for(let r=0;r<8;r++)t+=e>>r&1;return t}),bY=Object.fromEntries(Object.entries({TYPE_UNDEF:cT,TYPE_TRUE:Cu,TYPE_FALSE:Su,TYPE_NULL:ku,TYPE_NUMBER:ss,TYPE_STRING:vl,TYPE_OBJECT:as,TYPE_ARRAY:Yi}).map(([t,e])=>[e,t])),wY=Object.fromEntries(Object.entries({UINT_8:uT,UINT_16:fT,UINT_24:dT,UINT_32:hT,UINT_32_VAR:pT,INT_8:yT,INT_16:vT,INT_24:bT,INT_32:wT,INT_32_VAR:xT,FLOAT_32:gT,FLOAT_64:mT,DECIMAL:uW}).map(([t,e])=>[e,t])),qg=new Uint8Array(32),vW=class{constructor(t){this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.bytes=t,this.pos=0}readBytes(t){return this.bytes.subarray(this.pos,this.pos+=t)}readTypeIndex(t,e,r){let i=0,s=0;for(;e>0;)e&1&&(qg[i++]=s),s++,e>>=1;let a=new Uint8Array(t),f=32-Math.clz32(i-1),d=(1<<f)-1,g=this.readBytes(Math.ceil(f*t/8)),p=0,y=0,v=0;for(let w=0;w<t;w++)y<f&&(v|=g[p]<<y,y+=8,p++),a[w]=r?LT[qg[v&d]]:qg[v&d],v>>=f,y-=f;return a}readVlq(){let t=this.view.getUint8(this.pos);if(!(t&1))t=t>>1,this.pos+=1;else if(!(t&2))t=this.view.getUint8(this.pos+1)<<6|t>>2,this.pos+=2;else if(!(t&4))t=this.view.getUint16(this.pos+1,!0)<<5|t>>3,this.pos+=3;else{let e=this.view.getUint32(this.pos,!0);t=e>>>3&lW,this.pos+=4,e>>>31&&(t+=this.readUintVar()*(1<<28))}return t}readUintVar(){let t=this.view.getUint8(this.pos++),e=t&127,r=128;for(;t&128;)t=this.view.getUint8(this.pos++),e+=(t&127)*r,r*=128;return e}readIntVar(){let t=this.readUintVar();return t&1?-(t-1)/2:t<=cW?t>>>1:t/2}readUint8(){let t=this.view.getUint8(this.pos);return this.pos++,t}readInt8(){let t=this.view.getInt8(this.pos);return this.pos++,t}readUint16(){let t=this.view.getUint16(this.pos,!0);return this.pos+=2,t}readInt16(){let t=this.view.getInt16(this.pos,!0);return this.pos+=2,t}readUint24(){let t=this.view.getUint16(this.pos,!0)|this.view.getUint8(this.pos+2)<<16;return this.pos+=3,t}readInt24(){let t=this.view.getUint16(this.pos,!0),e=this.view.getUint8(this.pos+2),r=e&128?-(16777215-(t|e<<16)+1):t|e<<16;return this.pos+=3,r}readUint32(){let t=this.view.getUint32(this.pos,!0);return this.pos+=4,t}readInt32(){let t=this.view.getInt32(this.pos,!0);return this.pos+=4,t}readFloat32(){let t=this.view.getFloat32(this.pos);return this.pos+=4,t}readFloat64(){let t=this.view.getFloat64(this.pos);return this.pos+=8,t}};function _g(t,e){switch(e){case uT:return t.readUint8();case fT:return t.readUint16();case dT:return t.readUint24();case hT:return t.readUint32();case pT:return t.readUintVar();case yT:return t.readInt8();case vT:return t.readInt16();case bT:return t.readInt24();case wT:return t.readInt32();case xT:return t.readIntVar();case gT:return t.readFloat32();case mT:return t.readFloat64()}}function bW(t){let e=t.readUint8();switch(e&15){case ST:case Fg:case AT:case TT:e|=t.readUint8()<<8;break}return e}function zr(t,e=t.readVlq()){let r=bW(t);return jg(t,r,e)}function jg(t,e,r,i=new Array(r)){let s=e&15,a=e&48,f=r,d=0,g=0;switch(a){case oT:{d=i[0]=t.readIntVar(),f--,g=1;break}case sT:{d=t.readIntVar();break}}switch(s){case dW:{for(let p=0;p<f;p++)i[g+p]=t.readVlq();break}case hW:{for(let p=0;p<f;p++)i[g+p]=t.readIntVar();break}case pW:{let p=t.readBytes(Math.ceil(f/2));for(let y=0,v=0;y<f;y++)v=y&1?v>>4:p[y>>1],i[g+y]=v&8?t.readVlq()*8+(v&7):v&7;break}case gW:{let p=t.readBytes(Math.ceil(f/2));for(let y=0,v=0;y<f;y++){v=y&1?v>>4:p[y>>1];let w=v&4?-1:1;i[g+y]=v&8?w*(t.readVlq()*4+(v&3)):w*(v&3)}break}case AT:{let p=e>>8,y=(1<<p)-1,v=t.readBytes(Math.ceil(f*p/8)),w=0,k=0,T=0;for(let L=0;L<f;L++){for(;k<p;)T|=v[w]<<k,k+=8,w++;i[g+L]=T&y,T>>=p,k-=p}break}case TT:{let p=e>>8,y=(1<<p)-1,v=t.readBytes(Math.ceil(f*p/8)),w=0,k=0,T=0;for(let L=0;L<f;L++){for(;k<p;)T|=v[w]<<k,k+=8,w++;i[g+L]=T&1?-((T&y)>>1):(T&y)>>1,T>>=p,k-=p}break}case mW:{let p=i[0]=t.readIntVar(),y=t.readIntVar();for(let v=1;v<r;v++)p=i[v]=p+y;break}case ST:case Fg:{let p=s===Fg,y=e>>8,v=p?e&CT|y&kT:y;if(ET[y]>1){let w=t.readTypeIndex(f,v);for(let k=0;k<f;k++)i[g+k]=_g(t,w[k])}else{let w=31-Math.clz32(v);for(let k=0;k<f;k++)i[g+k]=_g(t,w)}break}default:throw new Error(`Unknown numeric array encoding method: ${s}`)}switch(a){case oT:{i[0]=d;for(let p=1;p<r;p++)i[p]+=i[p-1];break}case sT:{for(let p=0;p<r;p++)i[p]+=d;break}}return i}var wW=new TextDecoder("utf8",{ignoreBOM:!0});function xW(t){if(t.readBytes(8).some((i,s)=>i!==aW[s]))throw new Error("Bad magic number");let e=t.readUint16();if(e!==iT)throw new Error(`Unsupported jsonxl version "${e}", expected "${iT}"`);let r=t.readUint16();return{version:e,flags:r}}function kW(t){let e=wW.decode(t.readBytes(t.readVlq())),r=zr(t),i=zr(t),s=zr(t),a=zr(t),f=new Array(r),d=0;for(let g=0,p=0,y=0,v=0,w="";g<r.length;g++){let k=r[g],T=e.slice(p,p+=k>>2);k&2&&(T=w.slice(0,i[y++])+T),k&1&&(T=T+w.slice(-s[v++])),f[g]=T,w=T}return{readStrings(g,p){return a.slice(g,p).map(y=>f[y])},readString(){return f[a[d++]]}}}function CW(t){let e=zr(t),r=0;return function(){return e[r++]}}function SW(t){let e=zr(t),r=zr(t),i=0;return function(){return e[r[i++]]}}function AW(t,e){let r=t.readVlq(),i=t.readVlq();if(r===0)return()=>null;let s=i?e(-i):[],a=new Array(r);for(let f=0;f<r;f++)a[f]={dict:zr(t),refs:zr(t),index:0};return function(f){let d=a[f],g=d.refs[d.index++],p=d.dict[g];return p===0?null:{key:s[p>>8],type:p&255}}}function lT(t,e){let r=0;for(let i=0;i<t.length;i++)t[i]===e&&r++;return r}function DT(t){function e(w={}){let k=0,T;for(;T=y(k++);)w[T.key]=s(T.type);return w}function r(w=g()){if(w===0)return[];let k=p(),T=k>>16,L=k&65535,A=T&1,N=T>>5&1,S=T>>9&1,M=T>>1&255|(T&1)<<4,O=new Array(w),z=ET[M]>1?a.readTypeIndex(w,M,!0):null;if(M&aT)if(z===null)O.fill(i(M));else for(let I=0;I<w;I++)z[I]&aT&&(O[I]=i(z[I]));if(M&vl)for(let I=0;I<w;I++)(z===null||z[I]===vl)&&(O[I]=d());if(M&ss)if(M===ss)jg(a,L,w,O);else{let I=lT(z,ss),_=jg(a,L,I);for(let U=0,H=0;U<w;U++)z[U]===ss&&(O[U]=_[H++])}if(M&Yi)if(S){let I=M===Yi?w:lT(z,Yi),_=zr(a,I),U=r();for(let H=0,ce=0,$=0;H<w;H++)(z===null||z[H]===Yi)&&(O[H]=U.slice($,$+=_[ce++]))}else for(let I=0;I<w;I++)(z===null||z[I]===Yi)&&(O[I]=r());if(M&as){let I=M===as?O:[];for(let _=0,U=0;_<w;_++)(z===null||z[_]===as)&&(O[_]=I[U++]={});if(N){let _=a.readVlq(),U=new Array(_);for(let H=0;H<_;H++)U[H]=d();for(let H=0;H<_;H++){let ce=U[H],$=r(I.length);for(let ie=0;ie<I.length;ie++)$[ie]!==void 0&&(I[ie][ce]=$[ie])}}if(A)for(let _=0;_<I.length;_++)e(I[_])}return O}function i(w){switch(w){default:return;case ku:return null;case vl:return d();case Cu:return!0;case Su:return!1}}function s(w){switch(LT[w&7]){case cT:return;case ku:return null;case vl:return d();case ss:return _g(a,w>>3);case as:return e();case Cu:return!0;case Su:return!1;case Yi:return r()}}let a=new vW(t);xW(a);let{readStrings:f,readString:d}=kW(a),g=CW(a),p=SW(a),y=AW(a,f),v=s(a.readUint8());if(a.pos!==t.byteLength)throw new Error("End of input not reached");return v}var TW={stream:ls,event:Au,file:wl,url:Tu,push:Lu};function LW(t){return t!==null&&typeof t=="object"}function EW(t){try{return new URL(t,location.origin).origin===location.origin}catch{return!1}}function DW(t){return t.ok}function NW(t){return t.headers.get("x-file-encoded-size")||t.headers.get("content-length")}function MW(t){return t.headers.get("x-file-size")||(EW(t.url)&&!t.headers.get("content-encoding")?t.headers.get("content-length"):void 0)}function OW(t){return t.headers.get("x-file-created-at")||t.headers.get("last-modified")}function PW(t){let e=t?Object.keys(t):[],r=["name","createdAt","elapsedTime","data"];return!(e.length!==4||e.some(i=>!r.includes(i)))}function IW(t,e,r,{encoding:i,size:s}){if(PW(t)){let{data:L,...A}=t;t=L,e={...e,createdAt:L.createdAt},r=A}let a=t,f=r||{},{type:d,name:g,encoding:p,size:y,encodedSize:v,createdAt:w,...k}=e;return{resource:{type:d||"unknown",name:g||"unknown",encoding:i,size:s,...v?{encodedSize:v}:null,createdAt:new Date(Date.parse(w)||Date.now()),...k},meta:f,data:a}}var zW=[0,0,74,83,79,78,88,76];function BW(t){return zW.every((e,r)=>e===t[r])}async function RW(t){let e=[],r=0;for await(let a of t)e.push(a),r+=a.byteLength;let i=new Uint8Array(r),s=0;for(let a of e)i.set(a,s),s+=a.length;return DT(i)}function MT(t,e,r){let s=t.getReader(),a=Date.now(),f="json",d=0;return s.read().then(g=>{let p=async function*(){try{for(;;){let{done:y,value:v}=g||await s.read();if(g=void 0,y){await r({done:!0,elapsed:Date.now()-a,units:"bytes",completed:d,total:e});break}for(let w=0;w<v.length;w+=1048576){let k=w===0&&v.length-w<1048576?v:v.slice(w,w+1048576);d+=k.length,yield k,await r({done:!1,elapsed:Date.now()-a,units:"bytes",completed:d,total:e})}}}finally{s.releaseLock()}};return BW(g.value)?(f="jsonxl/snapshot9",RW(p())):(0,NT.default)(p)}).then(g=>({data:g,encoding:f,size:d}))}async function qW(t,e){let r=async(i,s)=>(await e.asyncSet({stage:i}),await s());try{let i=new Date,{method:s,stream:a,resource:f,options:d,data:g}=await r("request",t),p=new Date,y=f?.size,{validateData:v}=d||{},{data:w,encoding:k,size:T}=g?{data:g}:await r("receive",()=>MT(a,Number(y)||0,z=>e.asyncSet({stage:"receive",progress:z}))),L=new Date;typeof v=="function"&&v(S);let A=new Date;await e.asyncSet({stage:"received"});let N=new Date,{data:S,resource:M,meta:O}=IW(w,f,null,{size:T,encoding:k});return{loadMethod:s,resource:M,meta:O,data:S,timing:{time:N-i,start:i,end:N,requestTime:p-i,requestStart:i,requestEnd:p,responseTime:L-p,responseStart:p,responseEnd:L,validateTime:A-L,validationStart:L,validationEnd:A}}}catch(i){throw console.error("[Discovery] Error loading data:",i),await e.asyncSet({stage:"error",error:i}),i}}function bl(t,e){let r=new vn;return{state:r,result:qW(t,r),...e}}function ls(t,e){return bl(()=>({method:"stream",stream:t,resource:e?.resource,options:e}))}function wl(t,e){let r=Wg(t);return bl(()=>({method:"file",stream:Rg(t),resource:e?.resource||r,options:e}),{title:"Load data from file: "+(r.name||"unknown")})}function Au(t,e){let r=t.dataTransfer||t.target,i=r&&r.files&&r.files[0];if(t.stopPropagation(),t.preventDefault(),!i)throw new Error("Can't extract a file from an event object");return wl(i,e)}function Tu(t,e){return e=e||{},bl(async()=>{let r=await fetch(t,e.fetch),i=Wg(r,e);if(i)return{method:"fetch",stream:r.body,resource:e.resource||i,options:e};let s=r.headers.get("content-type")||"",a=await r.text();if(s.toLowerCase().startsWith("application/json"))try{let f=JSON.parse(a);a=f.error||f}catch{}throw a=new Error(a),a.stack=null,a},{title:`Load data from url: ${t}`})}function Lu(t){let e,r=new ReadableStream({start(f){e=f},cancel(){e=null}}),i,s,a=new Promise(f=>{i=d=>f({method:"push",stream:r,resource:(s=d)||t.resource,options:t})||(i=()=>{})});return t=t||{},bl(()=>a,{start(f){i(f)},push(f){i(),e.enqueue(f)},finish(f){e.close(),e=null,isFinite(f)&&s&&(s.encodedSize=Number(f))}})}function Hg({result:t,state:e},r){return new Promise((i,s)=>e.subscribeSync(({stage:a,progress:f,error:d},g)=>{if(d){g(),s(d);return}return a==="received"&&(g(),i(t)),r.setState({stage:a,progress:f})}))}function Wg(t,e){if(t instanceof Response){let r=e?.isResponseOk||DW,i=e?.getContentSize||MW,s=e?.getContentEncodedSize||NW,a=e?.getContentSize||OW;if(r(t))return{type:"url",name:t.url,size:Number(i(t))||null,encodedSize:Number(s(t)),createdAt:a(t)}}if(t instanceof File)return{type:"file",name:t.name,size:t.size,createdAt:t.lastModified};if(t instanceof Blob)return{size:t.size};if(ArrayBuffer.isView(t))return{size:t.byteLength};if(typeof t=="string")return{size:t.length}}function FW(t){if(typeof t=="string"||DataView.isView(t))return function*(){yield new TextEncoder().encode(t)};if(!(Array.isArray(t)&&t.some(e=>typeof e!="string"))&&LW(t)){if(Symbol.asyncIterator in t)return t[Symbol.asyncIterator];if(Symbol.iterator in t)return t[Symbol.iterator]}}function _W(t){return t instanceof ReadableStream?t:t instanceof Response?t.body:t instanceof Blob?Rg(t):new ReadableStream({start(){let e=FW(t);if(!e)throw new Error("Bad value type (can't convert to a generator)");this.iterator=e()},async pull(e){let{value:r,done:i}=await this.iterator.next();i?(this.iterator=null,e.close()):e.enqueue(r)},cancel(){this.iterator=null}})}var xl=Object.assign(zT(),{setup:zT}),OT=()=>{},PT=["primary","secondary","menu"],jW=new Map([["insert",0],["prepend",0],["append",0],["before",1],["after",1],["replace",1],["remove"]]);function IT({mode:t,value:e}){return t==="auto"?"auto":e?"dark":"light"}function zT(t){return t=t||{},function(e){let r=null,i=OT,s=()=>{r?.finish(),r=null},a=t.hostId||Bg(),f=window.parent,d=new Map,g=(w,k=null)=>{f.postMessage({from:"discoveryjs-app",id:a,type:w,payload:k},"*")},p=w=>{i=()=>{w!==null&&(i=OT,w())}},y=w=>{(typeof e.trackLoadDataProgress=="function"?e.trackLoadDataProgress(w):w.result.then(T=>e.setData(T.data,null,{dataset:T}))).catch(()=>{})},v=w=>{let{id:k,type:T,payload:L}=w.data||{};if(k===a)switch(T){case"defineAction":{let A=L;e.action.define(A,(...N)=>new Promise((S,M)=>{let O=Bg();d.set(O,{resolve:S,reject:M}),setTimeout(()=>{d.delete(O),M(new Error("Timeout"))},3e4),g("action",{callId:O,name:A,args:N})}));break}case"actionResult":{let{callId:A,value:N,error:S}=L;if(!d.has(A)){e.log("error",`[Discovery.js] Unknown action call id "${A}"`);break}let{resolve:M,reject:O}=d.get(A);S?O(S):M(N);break}case"setPageHash":{let{replace:A,hash:N}=L||{};e.setPageHash(N||"",A||!1);break}case"setPage":{let{replace:A,id:N,ref:S,params:M}=L||{};e.setPage(N,S,M,A);break}case"setPageRef":{let{replace:A,ref:N}=L||{};e.setPageRef(N,A);break}case"setPageParams":{let{replace:A,params:N}=L||{};e.setPageParams(N,A);break}case"setDarkmode":{let A=L,N=["auto","light","dark"];if(!N.includes(A)){e.log("warn",`Wrong value for darkmode "${A}", supported values: ${N.map(S=>JSON.stringify(S)).join(", ")}`);break}e.darkmode.set(A==="auto"?"auto":A==="dark");break}case"setRouterPreventLocationUpdate":{e.routerPreventLocationUpdate=!!L;break}case"changeNavButtons":{let{section:A="primary",action:N="append",name:S,position:M,commands:O,config:z}=L||{};if(!PT.includes(A)){e.log("warn",`Wrong value for nav button place "${A}", supported values: ${PT.map(U=>JSON.stringify(U)).join(", ")}`);break}let I=O||{},_=JSON.parse(JSON.stringify(z),(U,H)=>I.includes(H)?()=>g("navMethod",H):H);switch(N){case"insert":e.nav[A].insert(_,M,S);break;case"prepend":case"append":e.nav[A][N](_);break;case"before":case"after":case"replace":e.nav[A][N](S,_);break;case"remove":e.nav[A].remove(S);break;default:e.log("warn",`Wrong value for nav button action "${N}", supported values: ${jW.map(U=>JSON.stringify(U)).join(", ")}`)}break}case"unloadData":{s(),e.unloadData();break}case"dataStream":{let{stream:A,resource:N}=L;s(),y(ls(A,{resource:N}));break}case"startChunkedDataUpload":{let{acceptToken:A,resource:N}=L;s(),r=Object.assign(Lu({resource:N}),{acceptToken:A}),y(r);break}case"cancelChunkedDataUpload":{let{acceptToken:A,error:N}=L;r?.acceptToken===A&&s(N)}case"dataChunk":{let{acceptToken:A,value:N,done:S}=L;if(r===null){e.log("warn","Loading data is not inited");break}if(r.acceptToken!==A){e.log("warn","Bad accept token");break}N&&r.push(N),S&&s();break}default:e.log("warn",`Got a post-message addressed to discovery app but with unknown "${T}" type`)}};f!==window&&(e.on("pageHashChange",w=>g("pageHashChanged",{replace:w,hash:e.pageHash||"#",id:e.pageId,ref:e.pageRef,params:e.pageParams})),e.on("startLoadData",w=>{i(),p(w(k=>g("loadingState",k)))}),e.on("startSetData",w=>{i(),p(w(k=>g("loadingState",k)))}),e.on("unloadData",()=>{i(),g("unloadData")}),e.on("data",()=>{g("data")}),e.darkmode.subscribe((w,k)=>g("darkmodeChanged",{mode:k,value:IT({mode:k,value:w})})),t.postponeMessages&&Promise.resolve().then(()=>{for(let w of t.postponeMessages)v({data:w})}),addEventListener("message",v,!1),addEventListener("unload",()=>g("destroy"),!1),g("ready",{page:{hash:e.pageHash||"#",id:e.pageId,ref:e.pageRef,params:e.pageParams},darkmode:{mode:e.darkmode.mode,value:IT(e.darkmode)}}))}}function $g(t){t.setPageHash(location.hash),t.cancelScheduledRender(),t.action.define("permalink",e=>new URL(e,location).href),window.addEventListener("hashchange",()=>t.setPageHash(location.hash),!1),t.on("pageHashChange",function(e){let r=t.pageHash||"#";t.routerPreventLocationUpdate||r==="#"&&!location.hash||(e?location.replace(r):location.hash=r)})}var Gg={request:{value:0,title:"Awaiting data"},receive:{value:.1,title:"Receiving data"},received:{value:.9,title:"Await app ready"},prepare:{value:.925,title:"Processing data (prepare)"},initui:{value:.975,title:"Rendering UI"},done:{value:1,title:"Done!"},error:{value:1,title:"Error!"}};Object.values(Gg).forEach((t,e,r)=>{t.duration=(e!==r.length-1?r[e+1].value:0)-t.value});var BT=t=>t|0,RT=t=>typeof t=="function"?t:()=>{},HW=async()=>{if(await new Promise(t=>setTimeout(t,1)),!document.hidden)return Promise.race([new Promise(requestAnimationFrame),new Promise(t=>setTimeout(t,8))])};function WW(t,e){let{value:r,title:i,duration:s}=Gg[t],a=0,f=null;if(e){let{done:d,elapsed:g,units:p,completed:y,total:v}=e;v?(a=d?1:y/v,f=p==="bytes"?Math.round(a*100)+"%":`${y}/${v}`):(a=d?1:.1+Math.min(.9,g/2e4),f=p==="bytes"?(y/(1024*1024)).toFixed(1)+"MB":y)}return{stageTitle:i,progressValue:r+a*s,progressText:f,title:f?`${i} (${f})...`:t!=="done"?`${i}...`:i}}var Qi=class extends vn{constructor({onTiming:e,onFinish:r,delay:i,domReady:s}){super({stage:null,progress:null,error:null}),this.finished=!1,this.awaitRepaint=null,this.lastStage="created",this.lastStageStart=null,this.timings=[],this.onTiming=RT(e),this.onFinish=RT(r),this.appearanceDelay=i===!0?200:Number(i)||0,this.domReady=s||Promise.resolve(),this.el=X("div","view-progress init",[X("div","title"),X("div","progress")])}recordTiming(e,r,i=performance.now()){let s={stage:e,title:Gg[e].title,duration:BT(i-r)};this.timings.push(s),this.onTiming(s)}async setState(e){let{stage:r,progress:i,error:s}=e;if(this.finished)return;if(s){this.set("stage"in e?{stage:r,progress:i,error:s}:{...this.value,error:s}),this.finish(s);return}this.set(e);let a=r!==this.lastStage,f=performance.now();this.lastStage==="created"&&(this.startTime=f,this.domReady.then(()=>{let p=Math.max(0,this.appearanceDelay-BT(performance.now()-f));p&&this.el.style.setProperty("--appearance-delay",`${p}ms`),getComputedStyle(this.el).opacity,this.el.classList.remove("init")})),a&&(this.lastStageStart!==null&&this.recordTiming(this.lastStage,this.lastStageStart,f),this.lastStage=r,this.lastStageStart=f,this.awaitRepaint=f);let{title:d,progressValue:g}=WW(r,i);this.el.querySelector(".title").textContent=d,this.el.style.setProperty("--progress",g),(a||f-this.awaitRepaint>65&&f-this.lastStageStart>200)&&(await HW(),this.awaitRepaint=performance.now())}finish(e){this.finished||(this.finished=!0,this.lastStageStart!==null&&this.recordTiming(this.lastStage,this.lastStageStart),this.recordTiming(e?"error":"done",this.startTime),this.onFinish(this.timings),this.set({stage:"done"}))}dispose(){this.finish(),this.el.remove()}};var cs=(t,e)=>t!==void 0?t:e,us=class extends os{constructor(e={}){let r=e.extensions?[e.extensions]:[];r.push(pA),cs(e.router,!0)&&r.push($g),e.mode!=="modelfree"&&(r.push(fA),r.push(dA)),cs(e.upload,!1)&&(r.push(zg.setup(e.upload)),r.push(hA)),cs(e.embed,!1)&&r.push(xl),cs(e.inspector,!0)&&r.push(gA),super({container:document.body,...e,extensions:r,darkmode:cs(e.darkmode,"auto"),darkmodePersistent:cs(e.darkmodePersistent,!0)}),this.mode=this.options.mode}setLoadingState(e,{error:r,progressbar:i}={}){let s=this.dom.loadingOverlay;switch(e){case"init":{if(s.classList.remove("error","done"),i.el.parentNode)return;s.innerHTML="",s.append(i.el),s.classList.add("init"),requestAnimationFrame(()=>s.classList.remove("init"));break}case"success":{s.classList.add("done");break}case"error":{s.classList.add("error"),s.innerHTML="",this.view.render(s,[{view:"block",className:"action-buttons",content:[{view:"preset/upload",when:this.preset.isDefined("upload")}]},r.renderContent||{view:"alert-danger",content:[{view:"h3",content:['badge:"Error"',{view:"text",when:"stage",data:"`[${stage}] `"},"text:errorText"]},'text:"(see details in the console)"']}],{stage:i?.lastStage,errorText:r.message||String(r),errorStack:(r.stack||"").replace(/^Error:\s*(\S+Error:)/,"$1")},{actions:this.action.actionMap}).then(()=>{this.log("error",r),i?.setState({error:r})});break}}}async setDataProgress(e,r,i){let s=i?.dataset,a=i?.progressbar||this.progressbar({title:"Set data"});try{this.setLoadingState("init",{progressbar:a}),await super.setDataProgress(e,r,{dataset:s,progressbar:a}),this.setLoadingState("success")}catch(f){this.setLoadingState("error",{error:f,progressbar:a})}}progressbar(e){return new Qi({delay:200,domReady:this.dom.ready,onFinish:r=>this.log({level:"perf",message:`${e.title||"Load data"} (${r[r.length-1].duration}ms)`,collapsed:()=>r.map(i=>`${i.title}: ${i.duration}ms`)}),...e})}trackLoadDataProgress(e){let r=this.progressbar({title:e.title});return this.setLoadingState("init",{progressbar:r}),this.emit("startLoadData",r.subscribe.bind(r)),Hg(e,r).then(i=>this.setDataProgress(i.data,null,{dataset:i,progressbar:r}),i=>this.setLoadingState("error",{error:i,progressbar:r})),e.result}loadDataFromStream(e,r){return this.trackLoadDataProgress(ls(e,typeof r=="number"?{size:r}:r))}loadDataFromEvent(e,r){return this.options.mode==="modelfree"&&this.defaultPageId!==this.reportPageId&&(this._defaultPageId=this.defaultPageId,this.defaultPageId=this.reportPageId,this.setPageHash(this.pageHash,!0),this.cancelScheduledRender()),this.trackLoadDataProgress(Au(e,r))}loadDataFromFile(e,r){return this.trackLoadDataProgress(wl(e,r))}loadDataFromUrl(e,r){return this.trackLoadDataProgress(Tu(e,r))}unloadData(){this.hasDatasets()&&this.options.mode==="modelfree"&&this._defaultPageId!==this.defaultPageId&&(this.defaultPageId=this._defaultPageId,this.setPageHash(this.pageHash,!0),this.cancelScheduledRender()),super.unloadData()}initDom(){super.initDom(),this.dom.container.append(this.dom.loadingOverlay=X("div","loading-overlay done"))}renderPage(){return document.title=this.getRenderContext().name||document.title,super.renderPage()}};var Kg={};Ce(Kg,{applyContainerStyles:()=>GW,rollbackContainerStyles:()=>VW});var UW={"font-family":"Tahoma, Verdana, Arial, sans-serif","font-size":"16px","line-height":"1.6","-webkit-text-size-adjust":"none","text-size-adjust":"none","background-color":"var(--discovery-background-color, white)",color:"var(--discovery-color, black)","transition-property":"background-color, color","transition-duration":".25s","transition-timing-function":"ease-in"},$W={"--discovery-background-color":"#242424","--discovery-color":"#cccccc"},Vg=new WeakSet,Ji=new WeakMap;function qT(t,e,r){e in r||(r[e]=[t.style.getPropertyValue(e),t.style.getPropertyPriority(e)])}function GW(t,e){e=e||{},Ji.has(t)||Ji.set(t,Object.create(null));let r=uA(e.darkmode,e.darkmodePersistent),i=Ji.get(t);for(let[s,a]of Object.entries(UW))(Vg.has(t)||!/^transition/.test(s))&&(qT(t,s,i),t.style.setProperty(s,a));for(let[s,a]of Object.entries($W))qT(t,s,i),r?t.style.setProperty(s,a):t.style.removeProperty(s);return Vg.add(t),r}function VW(t){if(Ji.has(t)){let e=Ji.get(t);for(let[r,i]of Object.entries(e))t.style.setProperty(r,...i);Ji.delete(Ji),Vg.delete(t)}}var KW={...Kg,base64:Zc,...fp,copyText:wn,...Ug,debounce:Qr,...qh,..._h,injectStyles:cl,...wp,...Kh,pattern:hp,persistent:Np,...ep,progressbar:Qi,safeFilterRx:Va,...Op};function aQ(t,e,r,i){let s=t.model,a=new us({mode:t.mode,styles:t.styles,darkmode:s.darkmode,darkmodePersistent:s.darkmodePersistent,upload:s.upload,inspector:s.inspector,router:s.router,extensions:[...ik,...s.embed?[xl.setup(r)]:[],x0]});t.mode==="multi"&&a.nav.menu.append({name:"switch-model",onClick:'=$handler:"openModelIndex".actionHandler(href); $hide: #.hide; $handler and => $hide() or $handler()',data:{text:"Switch model",href:t.indexUrl}});let f={model:s};return i?a.setDataProgress(i.data,f,{progressbar:e,dataset:i}):(a.context=f,a.renderPage())}export{aQ as default};
/*! Bundled license information:

diff/dist/diff.js:
  (*!
  
   diff v4.0.1
  
  Software License Agreement (BSD License)
  
  Copyright (c) 2009-2015, Kevin Decker <kpdecker@gmail.com>
  
  All rights reserved.
  
  Redistribution and use of this software in source and binary forms, with or without modification,
  are permitted provided that the following conditions are met:
  
  * Redistributions of source code must retain the above
    copyright notice, this list of conditions and the
    following disclaimer.
  
  * Redistributions in binary form must reproduce the above
    copyright notice, this list of conditions and the
    following disclaimer in the documentation and/or other
    materials provided with the distribution.
  
  * Neither the name of Kevin Decker nor the names of its
    contributors may be used to endorse or promote products
    derived from this software without specific prior
    written permission.
  
  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR
  IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
  FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
  DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER
  IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
  OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  @license
  *)
*/
